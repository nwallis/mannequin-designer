{"version":3,"sources":["app/rappid.min.js","app/joint.shapes.qad.js","app/selection.js","app/factory.js","app/helpers.js","app/app.js","app/index.js","app/model_editor.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7/kBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACpJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;CClEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvYA","file":"dist/app.js","sourcesContent":["/*! Rappid v2.1.0 - HTML5 Diagramming Framework - TRIAL VERSION\n\nCopyright (c) 2015 client IO\n\n 2017-09-14 \n\n\nThis Source Code Form is subject to the terms of the Rappid Trial License\n, v. 2.0. If a copy of the Rappid License was not distributed with this\nfile, You can obtain one at http://jointjs.com/license/rappid_v2.txt\n or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/\n\n\n(function(root, factory) {\n\n    if (typeof define === 'function' && define.amd) {\n\n        // For AMD.\n\n        define(['backbone', 'lodash', 'jquery'], function(Backbone, _, $) {\n\n            Backbone.$ = $;\n\n            return factory(root, Backbone, _, $);\n        });\n\n    } else if (typeof exports !== 'undefined') {\n\n        // For Node.js or CommonJS.\n\n        var Backbone = require('backbone');\n        var _ = require('lodash');\n        var $ = Backbone.$ = require('jquery');\n\n        module.exports = factory(root, Backbone, _, $);\n\n    } else {\n\n        // As a browser global.\n\n        var Backbone = root.Backbone;\n        var _ = root._;\n        var $ = Backbone.$ = root.jQuery || root.$;\n\n        root.joint = factory(root, Backbone, _, $);\n        root.g = root.joint.g;\n        root.V = root.Vectorizer = root.joint.V;\n    }\n\n}(this, function(root, Backbone, _, $) {\n\n\n    var g = function() {\n        var a = {},\n            b = Math,\n            c = b.abs,\n            d = b.cos,\n            e = b.sin,\n            f = b.sqrt,\n            g = b.min,\n            h = b.max,\n            i = b.atan2,\n            j = b.round,\n            k = b.floor,\n            l = b.PI,\n            m = b.random,\n            n = b.pow;\n        a.bezier = {\n            curveThroughPoints: function(a) {\n                for (var b = this.getCurveControlPoints(a), c = [\"M\", a[0].x, a[0].y], d = 0; d < b[0].length; d++) c.push(\"C\", b[0][d].x, b[0][d].y, b[1][d].x, b[1][d].y, a[d + 1].x, a[d + 1].y);\n                return c\n            },\n            getCurveControlPoints: function(a) {\n                var b, c = [],\n                    d = [],\n                    e = a.length - 1;\n                if (1 == e) return c[0] = q((2 * a[0].x + a[1].x) / 3, (2 * a[0].y + a[1].y) / 3), d[0] = q(2 * c[0].x - a[0].x, 2 * c[0].y - a[0].y), [c, d];\n                var f = [];\n                for (b = 1; b < e - 1; b++) f[b] = 4 * a[b].x + 2 * a[b + 1].x;\n                f[0] = a[0].x + 2 * a[1].x, f[e - 1] = (8 * a[e - 1].x + a[e].x) / 2;\n                var g = this.getFirstControlPoints(f);\n                for (b = 1; b < e - 1; ++b) f[b] = 4 * a[b].y + 2 * a[b + 1].y;\n                f[0] = a[0].y + 2 * a[1].y, f[e - 1] = (8 * a[e - 1].y + a[e].y) / 2;\n                var h = this.getFirstControlPoints(f);\n                for (b = 0; b < e; b++) c.push(q(g[b], h[b])), b < e - 1 ? d.push(q(2 * a[b + 1].x - g[b + 1], 2 * a[b + 1].y - h[b + 1])) : d.push(q((a[e].x + g[e - 1]) / 2, (a[e].y + h[e - 1]) / 2));\n                return [c, d]\n            },\n            getCurveDivider: function(a, b, c, d) {\n                return function(e) {\n                    var f = p(a, b).pointAt(e),\n                        g = p(b, c).pointAt(e),\n                        h = p(c, d).pointAt(e),\n                        i = p(f, g).pointAt(e),\n                        j = p(g, h).pointAt(e),\n                        k = p(i, j).pointAt(e);\n                    return [{\n                        p0: a,\n                        p1: f,\n                        p2: i,\n                        p3: k\n                    }, {\n                        p0: k,\n                        p1: j,\n                        p2: h,\n                        p3: d\n                    }]\n                }\n            },\n            getFirstControlPoints: function(a) {\n                var b = a.length,\n                    c = [],\n                    d = [],\n                    e = 2;\n                c[0] = a[0] / e;\n                for (var f = 1; f < b; f++) d[f] = 1 / e, e = (f < b - 1 ? 4 : 3.5) - d[f], c[f] = (a[f] - c[f - 1]) / e;\n                for (f = 1; f < b; f++) c[b - f - 1] -= d[b - f] * c[b - f];\n                return c\n            },\n            getInversionSolver: function(a, b, c, d) {\n                function e(a, b) {\n                    var c = f[a],\n                        d = f[b];\n                    return function(e) {\n                        var f = (a % 3 ? 3 : 1) * (b % 3 ? 3 : 1),\n                            g = e.x * (c.y - d.y) + e.y * (d.x - c.x) + c.x * d.y - c.y * d.x;\n                        return f * g\n                    }\n                }\n                var f = arguments;\n                return function(c) {\n                    var d = 3 * e(2, 3)(b),\n                        f = e(1, 3)(a) / d,\n                        g = -e(2, 3)(a) / d,\n                        h = f * e(3, 1)(c) + g * (e(3, 0)(c) + e(2, 1)(c)) + e(2, 0)(c),\n                        i = f * e(3, 0)(c) + g * e(2, 0)(c) + e(1, 0)(c);\n                    return i / (i - h)\n                }\n            }\n        };\n        var o = a.Ellipse = function(a, b, c) {\n            return this instanceof o ? a instanceof o ? new o(q(a), a.a, a.b) : (a = q(a), this.x = a.x, this.y = a.y, this.a = b, void(this.b = c)) : new o(a, b, c)\n        };\n        a.Ellipse.fromRect = function(a) {\n            return a = r(a), o(a.center(), a.width / 2, a.height / 2)\n        }, a.Ellipse.prototype = {\n            bbox: function() {\n                return r(this.x - this.a, this.y - this.b, 2 * this.a, 2 * this.b)\n            },\n            clone: function() {\n                return o(this)\n            },\n            normalizedDistance: function(a) {\n                var b = a.x,\n                    c = a.y,\n                    d = this.a,\n                    e = this.b,\n                    f = this.x,\n                    g = this.y;\n                return (b - f) * (b - f) / (d * d) + (c - g) * (c - g) / (e * e)\n            },\n            inflate: function(a, b) {\n                return void 0 === a && (a = 0), void 0 === b && (b = a), this.a += 2 * a, this.b += 2 * b, this\n            },\n            containsPoint: function(a) {\n                return this.normalizedDistance(a) <= 1\n            },\n            center: function() {\n                return q(this.x, this.y)\n            },\n            tangentTheta: function(b) {\n                var c, d, e = 30,\n                    f = b.x,\n                    g = b.y,\n                    h = this.a,\n                    i = this.b,\n                    j = this.bbox().center(),\n                    k = j.x,\n                    l = j.y,\n                    m = f > j.x + h / 2,\n                    n = f < j.x - h / 2;\n                return m || n ? (c = f > j.x ? g - e : g + e, d = h * h / (f - k) - h * h * (g - l) * (c - l) / (i * i * (f - k)) + k) : (d = g > j.y ? f + e : f - e, c = i * i / (g - l) - i * i * (f - k) * (d - k) / (h * h * (g - l)) + l), a.point(d, c).theta(b)\n            },\n            equals: function(a) {\n                return a = o(a), a.x === this.x && a.y === this.y && a.a === this.a && a.b === this.b\n            },\n            intersectionWithLineFromCenterToPoint: function(a, b) {\n                a = q(a), b && a.rotate(q(this.x, this.y), b);\n                var c, d = a.x - this.x,\n                    e = a.y - this.y;\n                if (0 === d) return c = this.bbox().pointNearestToPoint(a), b ? c.rotate(q(this.x, this.y), -b) : c;\n                var g = e / d,\n                    h = g * g,\n                    i = this.a * this.a,\n                    j = this.b * this.b,\n                    k = f(1 / (1 / i + h / j));\n                k = d < 0 ? -k : k;\n                var l = g * k;\n                return c = q(this.x + k, this.y + l), b ? c.rotate(q(this.x, this.y), -b) : c\n            },\n            toString: function() {\n                return q(this.x, this.y).toString() + \" \" + this.a + \" \" + this.b\n            }\n        };\n        var p = a.Line = function(a, b) {\n            return this instanceof p ? (this.start = q(a), void(this.end = q(b))) : new p(a, b)\n        };\n        a.Line.prototype = {\n            bearing: function() {\n                var a = v(this.start.y),\n                    b = v(this.end.y),\n                    c = this.start.x,\n                    f = this.end.x,\n                    g = v(f - c),\n                    h = e(g) * d(b),\n                    j = d(a) * e(b) - e(a) * d(b) * d(g),\n                    k = u(i(h, j)),\n                    l = [\"NE\", \"E\", \"SE\", \"S\", \"SW\", \"W\", \"NW\", \"N\"],\n                    m = k - 22.5;\n                return m < 0 && (m += 360), m = parseInt(m / 45), l[m]\n            },\n            clone: function() {\n                return p(this)\n            },\n            equals: function(a) {\n                return this.start.x === a.start.x && this.start.y === a.start.y && this.end.x === a.end.x && this.end.y === a.end.y\n            },\n            intersect: function(a) {\n                if (a instanceof p) {\n                    var b = q(this.end.x - this.start.x, this.end.y - this.start.y),\n                        c = q(a.end.x - a.start.x, a.end.y - a.start.y),\n                        d = b.x * c.y - b.y * c.x,\n                        e = q(a.start.x - this.start.x, a.start.y - this.start.y),\n                        f = e.x * c.y - e.y * c.x,\n                        g = e.x * b.y - e.y * b.x;\n                    if (0 === d || f * d < 0 || g * d < 0) return null;\n                    if (d > 0) {\n                        if (f > d || g > d) return null\n                    } else if (f < d || g < d) return null;\n                    return q(this.start.x + f * b.x / d, this.start.y + f * b.y / d)\n                }\n                if (a instanceof r) {\n                    var h, i, j = a,\n                        k = [j.topLine(), j.rightLine(), j.bottomLine(), j.leftLine()],\n                        l = [],\n                        m = [];\n                    for (i = 0; i < k.length; i++) h = this.intersect(k[i]), null !== h && m.indexOf(h.toString()) < 0 && (l.push(h), m.push(h.toString()));\n                    return l.length > 0 ? l : null\n                }\n                return null\n            },\n            length: function() {\n                return f(this.squaredLength())\n            },\n            midpoint: function() {\n                return q((this.start.x + this.end.x) / 2, (this.start.y + this.end.y) / 2)\n            },\n            pointAt: function(a) {\n                var b = (1 - a) * this.start.x + a * this.end.x,\n                    c = (1 - a) * this.start.y + a * this.end.y;\n                return q(b, c)\n            },\n            pointOffset: function(a) {\n                return ((this.end.x - this.start.x) * (a.y - this.start.y) - (this.end.y - this.start.y) * (a.x - this.start.x)) / 2\n            },\n            squaredLength: function() {\n                var a = this.start.x,\n                    b = this.start.y,\n                    c = this.end.x,\n                    d = this.end.y;\n                return (a -= c) * a + (b -= d) * b\n            },\n            toString: function() {\n                return this.start.toString() + \" \" + this.end.toString()\n            }\n        }, a.Line.prototype.intersection = a.Line.prototype.intersect;\n        var q = a.Point = function(a, b) {\n            if (!(this instanceof q)) return new q(a, b);\n            if (\"string\" == typeof a) {\n                var c = a.split(a.indexOf(\"@\") === -1 ? \" \" : \"@\");\n                a = parseInt(c[0], 10), b = parseInt(c[1], 10)\n            } else Object(a) === a && (b = a.y, a = a.x);\n            this.x = void 0 === a ? 0 : a, this.y = void 0 === b ? 0 : b\n        };\n        a.Point.fromPolar = function(a, b, f) {\n            f = f && q(f) || q(0, 0);\n            var g = c(a * d(b)),\n                h = c(a * e(b)),\n                i = s(u(b));\n            return i < 90 ? h = -h : i < 180 ? (g = -g, h = -h) : i < 270 && (g = -g), q(f.x + g, f.y + h)\n        }, a.Point.random = function(a, b, c, d) {\n            return q(k(m() * (b - a + 1) + a), k(m() * (d - c + 1) + c))\n        }, a.Point.prototype = {\n            adhereToRect: function(a) {\n                return a.containsPoint(this) ? this : (this.x = g(h(this.x, a.x), a.x + a.width), this.y = g(h(this.y, a.y), a.y + a.height), this)\n            },\n            bearing: function(a) {\n                return p(this, a).bearing()\n            },\n            changeInAngle: function(a, b, c) {\n                return q(this).offset(-a, -b).theta(c) - this.theta(c)\n            },\n            clone: function() {\n                return q(this)\n            },\n            difference: function(a, b) {\n                return Object(a) === a && (b = a.y, a = a.x), q(this.x - (a || 0), this.y - (b || 0))\n            },\n            distance: function(a) {\n                return p(this, a).length()\n            },\n            equals: function(a) {\n                return this.x === a.x && this.y === a.y\n            },\n            magnitude: function() {\n                return f(this.x * this.x + this.y * this.y) || .01\n            },\n            manhattanDistance: function(a) {\n                return c(a.x - this.x) + c(a.y - this.y)\n            },\n            move: function(a, b) {\n                var c = v(q(a).theta(this));\n                return this.offset(d(c) * b, -e(c) * b)\n            },\n            normalize: function(a) {\n                var b = (a || 1) / this.magnitude();\n                return this.scale(b, b)\n            },\n            offset: function(a, b) {\n                return Object(a) === a && (b = a.y, a = a.x), this.x += a || 0, this.y += b || 0, this\n            },\n            reflection: function(a) {\n                return q(a).move(this, this.distance(a))\n            },\n            rotate: function(a, b) {\n                b = (b + 360) % 360, this.toPolar(a), this.y += v(b);\n                var c = q.fromPolar(this.x, this.y, a);\n                return this.x = c.x, this.y = c.y, this\n            },\n            round: function(a) {\n                var b = n(10, a || 0);\n                return this.x = j(this.x * b) / b, this.y = j(this.y * b) / b, this\n            },\n            scale: function(a, b, c) {\n                return c = c && q(c) || q(0, 0), this.x = c.x + a * (this.x - c.x), this.y = c.y + b * (this.y - c.y), this\n            },\n            snapToGrid: function(a, b) {\n                return this.x = t(this.x, a), this.y = t(this.y, b || a), this\n            },\n            theta: function(a) {\n                a = q(a);\n                var b = -(a.y - this.y),\n                    c = a.x - this.x,\n                    d = 10,\n                    e = 0 == b.toFixed(d) && 0 == c.toFixed(d) ? 0 : i(b, c);\n                return e < 0 && (e = 2 * l + e), 180 * e / l\n            },\n            toJSON: function() {\n                return {\n                    x: this.x,\n                    y: this.y\n                }\n            },\n            toPolar: function(a) {\n                a = a && q(a) || q(0, 0);\n                var b = this.x,\n                    c = this.y;\n                return this.x = f((b - a.x) * (b - a.x) + (c - a.y) * (c - a.y)), this.y = v(a.theta(q(b, c))), this\n            },\n            toString: function() {\n                return this.x + \"@\" + this.y\n            },\n            update: function(a, b) {\n                return this.x = a || 0, this.y = b || 0, this\n            }\n        };\n        var r = a.Rect = function(a, b, c, d) {\n            return this instanceof r ? (Object(a) === a && (b = a.y, c = a.width, d = a.height, a = a.x), this.x = void 0 === a ? 0 : a, this.y = void 0 === b ? 0 : b, this.width = void 0 === c ? 0 : c, void(this.height = void 0 === d ? 0 : d)) : new r(a, b, c, d)\n        };\n        a.Rect.fromEllipse = function(a) {\n            return a = o(a), r(a.x - a.a, a.y - a.b, 2 * a.a, 2 * a.b)\n        }, a.Rect.prototype = {\n            bbox: function(a) {\n                var b = v(a || 0),\n                    f = c(e(b)),\n                    g = c(d(b)),\n                    h = this.width * g + this.height * f,\n                    i = this.width * f + this.height * g;\n                return r(this.x + (this.width - h) / 2, this.y + (this.height - i) / 2, h, i)\n            },\n            bottomLeft: function() {\n                return q(this.x, this.y + this.height)\n            },\n            bottomLine: function() {\n                return p(this.bottomLeft(), this.corner())\n            },\n            bottomMiddle: function() {\n                return q(this.x + this.width / 2, this.y + this.height)\n            },\n            center: function() {\n                return q(this.x + this.width / 2, this.y + this.height / 2)\n            },\n            clone: function() {\n                return r(this)\n            },\n            containsPoint: function(a) {\n                return a = q(a), a.x >= this.x && a.x <= this.x + this.width && a.y >= this.y && a.y <= this.y + this.height\n            },\n            containsRect: function(a) {\n                var b = r(this).normalize(),\n                    c = r(a).normalize(),\n                    d = b.width,\n                    e = b.height,\n                    f = c.width,\n                    g = c.height;\n                if (!(d && e && f && g)) return !1;\n                var h = b.x,\n                    i = b.y,\n                    j = c.x,\n                    k = c.y;\n                return f += j, d += h, g += k, e += i, h <= j && f <= d && i <= k && g <= e\n            },\n            corner: function() {\n                return q(this.x + this.width, this.y + this.height)\n            },\n            equals: function(a) {\n                var b = r(this).normalize(),\n                    c = r(a).normalize();\n                return b.x === c.x && b.y === c.y && b.width === c.width && b.height === c.height\n            },\n            intersect: function(a) {\n                var b = this.origin(),\n                    c = this.corner(),\n                    d = a.origin(),\n                    e = a.corner();\n                if (e.x <= b.x || e.y <= b.y || d.x >= c.x || d.y >= c.y) return null;\n                var f = Math.max(b.x, d.x),\n                    g = Math.max(b.y, d.y);\n                return r(f, g, Math.min(c.x, e.x) - f, Math.min(c.y, e.y) - g)\n            },\n            intersectionWithLineFromCenterToPoint: function(a, b) {\n                a = q(a);\n                var c, d = q(this.x + this.width / 2, this.y + this.height / 2);\n                b && a.rotate(d, b);\n                for (var e = [p(this.origin(), this.topRight()), p(this.topRight(), this.corner()), p(this.corner(), this.bottomLeft()), p(this.bottomLeft(), this.origin())], f = p(d, a), g = e.length - 1; g >= 0; --g) {\n                    var h = e[g].intersection(f);\n                    if (null !== h) {\n                        c = h;\n                        break\n                    }\n                }\n                return c && b && c.rotate(d, -b), c\n            },\n            leftLine: function() {\n                return p(this.origin(), this.bottomLeft())\n            },\n            leftMiddle: function() {\n                return q(this.x, this.y + this.height / 2)\n            },\n            moveAndExpand: function(a) {\n                return this.x += a.x || 0, this.y += a.y || 0, this.width += a.width || 0, this.height += a.height || 0, this\n            },\n            inflate: function(a, b) {\n                return void 0 === a && (a = 0), void 0 === b && (b = a), this.x -= a, this.y -= b, this.width += 2 * a, this.height += 2 * b, this\n            },\n            normalize: function() {\n                var a = this.x,\n                    b = this.y,\n                    c = this.width,\n                    d = this.height;\n                return this.width < 0 && (a = this.x + this.width, c = -this.width), this.height < 0 && (b = this.y + this.height, d = -this.height), this.x = a, this.y = b, this.width = c, this.height = d, this\n            },\n            origin: function() {\n                return q(this.x, this.y)\n            },\n            pointNearestToPoint: function(a) {\n                if (a = q(a), this.containsPoint(a)) {\n                    var b = this.sideNearestToPoint(a);\n                    switch (b) {\n                        case \"right\":\n                            return q(this.x + this.width, a.y);\n                        case \"left\":\n                            return q(this.x, a.y);\n                        case \"bottom\":\n                            return q(a.x, this.y + this.height);\n                        case \"top\":\n                            return q(a.x, this.y)\n                    }\n                }\n                return a.adhereToRect(this)\n            },\n            rightLine: function() {\n                return p(this.topRight(), this.corner())\n            },\n            rightMiddle: function() {\n                return q(this.x + this.width, this.y + this.height / 2)\n            },\n            round: function(a) {\n                var b = n(10, a || 0);\n                return this.x = j(this.x * b) / b, this.y = j(this.y * b) / b, this.width = j(this.width * b) / b, this.height = j(this.height * b) / b, this\n            },\n            scale: function(a, b, c) {\n                return c = this.origin().scale(a, b, c), this.x = c.x, this.y = c.y, this.width *= a, this.height *= b, this\n            },\n            maxRectScaleToFit: function(b, c) {\n                b = a.Rect(b), c || (c = b.center());\n                var d, e, f, g, h, i, j, k, l = c.x,\n                    m = c.y;\n                d = e = f = g = h = i = j = k = 1 / 0;\n                var n = b.origin();\n                n.x < l && (d = (this.x - l) / (n.x - l)), n.y < m && (h = (this.y - m) / (n.y - m));\n                var o = b.corner();\n                o.x > l && (e = (this.x + this.width - l) / (o.x - l)), o.y > m && (i = (this.y + this.height - m) / (o.y - m));\n                var p = b.topRight();\n                p.x > l && (f = (this.x + this.width - l) / (p.x - l)), p.y < m && (j = (this.y - m) / (p.y - m));\n                var q = b.bottomLeft();\n                return q.x < l && (g = (this.x - l) / (q.x - l)), q.y > m && (k = (this.y + this.height - m) / (q.y - m)), {\n                    sx: Math.min(d, e, f, g),\n                    sy: Math.min(h, i, j, k)\n                }\n            },\n            maxRectUniformScaleToFit: function(a, b) {\n                var c = this.maxRectScaleToFit(a, b);\n                return Math.min(c.sx, c.sy)\n            },\n            sideNearestToPoint: function(a) {\n                a = q(a);\n                var b = a.x - this.x,\n                    c = this.x + this.width - a.x,\n                    d = a.y - this.y,\n                    e = this.y + this.height - a.y,\n                    f = b,\n                    g = \"left\";\n                return c < f && (f = c, g = \"right\"), d < f && (f = d, g = \"top\"), e < f && (f = e, g = \"bottom\"), g\n            },\n            snapToGrid: function(a, b) {\n                var c = this.origin().snapToGrid(a, b),\n                    d = this.corner().snapToGrid(a, b);\n                return this.x = c.x, this.y = c.y, this.width = d.x - c.x, this.height = d.y - c.y, this\n            },\n            topLine: function() {\n                return p(this.origin(), this.topRight())\n            },\n            topMiddle: function() {\n                return q(this.x + this.width / 2, this.y)\n            },\n            topRight: function() {\n                return q(this.x + this.width, this.y)\n            },\n            toJSON: function() {\n                return {\n                    x: this.x,\n                    y: this.y,\n                    width: this.width,\n                    height: this.height\n                }\n            },\n            toString: function() {\n                return this.origin().toString() + \" \" + this.corner().toString()\n            },\n            union: function(a) {\n                var b = this.origin(),\n                    c = this.corner(),\n                    d = a.origin(),\n                    e = a.corner(),\n                    f = Math.min(b.x, d.x),\n                    g = Math.min(b.y, d.y),\n                    h = Math.max(c.x, e.x),\n                    i = Math.max(c.y, e.y);\n                return r(f, g, h - f, i - g)\n            }\n        };\n        var s = a.normalizeAngle = function(a) {\n            return a % 360 + (a < 0 ? 360 : 0)\n        };\n        a.scale = {\n            linear: function(a, b, c) {\n                var d = a[1] - a[0],\n                    e = b[1] - b[0];\n                return (c - a[0]) / d * e + b[0] || 0\n            }\n        };\n        var t = a.snapToGrid = function(a, b) {\n                return b * Math.round(a / b)\n            },\n            u = a.toDeg = function(a) {\n                return 180 * a / l % 360\n            },\n            v = a.toRad = function(a, b) {\n                return b = b || !1, a = b ? a : a % 360, a * l / 180\n            };\n        return a.ellipse = a.Ellipse, a.line = a.Line, a.point = a.Point, a.rect = a.Rect, a\n    }();\n    var V, Vectorizer;\n    V = Vectorizer = function() {\n        \"use strict\";\n        var a = \"object\" == typeof window && !(!window.SVGAngle && !document.implementation.hasFeature(\"http://www.w3.org/TR/SVG11/feature#BasicStructure\", \"1.1\"));\n        if (!a) return function() {\n            throw new Error(\"SVG is required to use Vectorizer.\")\n        };\n        var b = {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                xml: \"http://www.w3.org/XML/1998/namespace\",\n                xlink: \"http://www.w3.org/1999/xlink\"\n            },\n            c = \"1.1\",\n            d = function(a, c, e) {\n                if (!(this instanceof d)) return d.apply(Object.create(d.prototype), arguments);\n                if (a) {\n                    if (d.isV(a) && (a = a.node), c = c || {}, d.isString(a)) {\n                        if (\"svg\" === a.toLowerCase()) a = d.createSvgDocument();\n                        else if (\"<\" === a[0]) {\n                            var f = d.createSvgDocument(a);\n                            if (f.childNodes.length > 1) {\n                                var g, h, i = [];\n                                for (g = 0, h = f.childNodes.length; g < h; g++) {\n                                    var j = f.childNodes[g];\n                                    i.push(new d(document.importNode(j, !0)))\n                                }\n                                return i\n                            }\n                            a = document.importNode(f.firstChild, !0)\n                        } else a = document.createElementNS(b.xmlns, a);\n                        d.ensureId(a)\n                    }\n                    return this.node = a, this.setAttributes(c), e && this.append(e), this\n                }\n            };\n        d.prototype.getTransformToElement = function(a) {\n            return a = d.toNode(a), a.getScreenCTM().inverse().multiply(this.node.getScreenCTM())\n        }, d.prototype.transform = function(a, b) {\n            var c = this.node;\n            if (d.isUndefined(a)) return d.transformStringToMatrix(this.attr(\"transform\"));\n            if (b && b.absolute) return this.attr(\"transform\", d.matrixToTransformString(a));\n            var e = d.createSVGTransform(a);\n            return c.transform.baseVal.appendItem(e), this\n        }, d.prototype.translate = function(a, b, c) {\n            c = c || {}, b = b || 0;\n            var e = this.attr(\"transform\") || \"\",\n                f = d.parseTransformString(e);\n            if (e = f.value, d.isUndefined(a)) return f.translate;\n            e = e.replace(/translate\\([^\\)]*\\)/g, \"\").trim();\n            var g = c.absolute ? a : f.translate.tx + a,\n                h = c.absolute ? b : f.translate.ty + b,\n                i = \"translate(\" + g + \",\" + h + \")\";\n            return this.attr(\"transform\", (i + \" \" + e).trim()), this\n        }, d.prototype.rotate = function(a, b, c, e) {\n            e = e || {};\n            var f = this.attr(\"transform\") || \"\",\n                g = d.parseTransformString(f);\n            if (f = g.value, d.isUndefined(a)) return g.rotate;\n            f = f.replace(/rotate\\([^\\)]*\\)/g, \"\").trim(), a %= 360;\n            var h = e.absolute ? a : g.rotate.angle + a,\n                i = void 0 !== b && void 0 !== c ? \",\" + b + \",\" + c : \"\",\n                j = \"rotate(\" + h + i + \")\";\n            return this.attr(\"transform\", (f + \" \" + j).trim()), this\n        }, d.prototype.scale = function(a, b) {\n            b = d.isUndefined(b) ? a : b;\n            var c = this.attr(\"transform\") || \"\",\n                e = d.parseTransformString(c);\n            if (c = e.value, d.isUndefined(a)) return e.scale;\n            c = c.replace(/scale\\([^\\)]*\\)/g, \"\").trim();\n            var f = \"scale(\" + a + \",\" + b + \")\";\n            return this.attr(\"transform\", (c + \" \" + f).trim()), this\n        }, d.prototype.bbox = function(a, b) {\n            if (!this.node.ownerSVGElement) return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0\n            };\n            var c;\n            try {\n                c = this.node.getBBox(), c = {\n                    x: c.x,\n                    y: c.y,\n                    width: c.width,\n                    height: c.height\n                }\n            } catch (a) {\n                c = {\n                    x: this.node.clientLeft,\n                    y: this.node.clientTop,\n                    width: this.node.clientWidth,\n                    height: this.node.clientHeight\n                }\n            }\n            if (a) return c;\n            var e = this.getTransformToElement(b || this.node.ownerSVGElement);\n            return d.transformRect(c, e)\n        }, d.prototype.text = function(a, b) {\n            a = d.sanitizeText(a), b = b || {};\n            var c, e = a.split(\"\\n\"),\n                f = this.attr(\"y\");\n            f || this.attr(\"y\", \"0.8em\"), a ? this.removeAttr(\"display\") : this.attr(\"display\", \"none\"), this.attr(\"xml:space\", \"preserve\"), this.node.textContent = \"\";\n            var g = this.node;\n            if (b.textPath) {\n                var h = this.find(\"defs\");\n                0 === h.length && (h = d(\"defs\"), this.append(h));\n                var i = Object(b.textPath) === b.textPath ? b.textPath.d : b.textPath;\n                if (i) {\n                    var j = d(\"path\", {\n                        d: i\n                    });\n                    h.append(j)\n                }\n                var k = d(\"textPath\");\n                !b.textPath[\"xlink:href\"] && j && k.attr(\"xlink:href\", \"#\" + j.node.id), Object(b.textPath) === b.textPath && k.attr(b.textPath), this.append(k), g = k.node\n            }\n            var l = 0,\n                m = this.attr(\"x\") || 0,\n                n = b.lineHeight || \"1em\";\n            \"auto\" === b.lineHeight && (n = \"1.5em\");\n            for (var o = 0; o < e.length; o++) {\n                var p = e[o],\n                    q = d(\"tspan\", {\n                        class: \"v-line\",\n                        dy: 0 == o ? \"0em\" : n,\n                        x: m\n                    });\n                if (p)\n                    if (b.annotations) {\n                        for (var r = 0, s = d.annotateString(e[o], d.isArray(b.annotations) ? b.annotations : [b.annotations], {\n                                offset: -l,\n                                includeAnnotationIndices: b.includeAnnotationIndices\n                            }), t = 0; t < s.length; t++) {\n                            var u = s[t];\n                            if (d.isObject(u)) {\n                                var v = parseInt(u.attrs[\"font-size\"], 10);\n                                v && v > r && (r = v), c = d(\"tspan\", u.attrs), b.includeAnnotationIndices && c.attr(\"annotations\", u.annotations), u.attrs.class && c.addClass(u.attrs.class), c.node.textContent = u.t\n                            } else c = document.createTextNode(u || \" \");\n                            q.append(c)\n                        }\n                        \"auto\" === b.lineHeight && r && 0 !== o && q.attr(\"dy\", 1.2 * r + \"px\")\n                    } else q.node.textContent = p;\n                else q.addClass(\"v-empty-line\"), q.node.style.fillOpacity = 0, q.node.style.strokeOpacity = 0, q.node.textContent = \"-\";\n                d(g).append(q), l += p.length + 1\n            }\n            return this\n        }, d.prototype.removeAttr = function(a) {\n            var b = d.qualifyAttr(a),\n                c = this.node;\n            return b.ns ? c.hasAttributeNS(b.ns, b.local) && c.removeAttributeNS(b.ns, b.local) : c.hasAttribute(a) && c.removeAttribute(a), this\n        }, d.prototype.attr = function(a, b) {\n            if (d.isUndefined(a)) {\n                for (var c = this.node.attributes, e = {}, f = 0; f < c.length; f++) e[c[f].name] = c[f].value;\n                return e\n            }\n            if (d.isString(a) && d.isUndefined(b)) return this.node.getAttribute(a);\n            if (\"object\" == typeof a)\n                for (var g in a) a.hasOwnProperty(g) && this.setAttribute(g, a[g]);\n            else this.setAttribute(a, b);\n            return this\n        }, d.prototype.remove = function() {\n            return this.node.parentNode && this.node.parentNode.removeChild(this.node), this\n        }, d.prototype.empty = function() {\n            for (; this.node.firstChild;) this.node.removeChild(this.node.firstChild);\n            return this\n        }, d.prototype.setAttributes = function(a) {\n            for (var b in a) a.hasOwnProperty(b) && this.setAttribute(b, a[b]);\n            return this\n        }, d.prototype.append = function(a) {\n            d.isArray(a) || (a = [a]);\n            for (var b = 0, c = a.length; b < c; b++) this.node.appendChild(d.toNode(a[b]));\n            return this\n        }, d.prototype.prepend = function(a) {\n            var b = this.node.firstChild;\n            return b ? d(b).before(a) : this.append(a)\n        }, d.prototype.before = function(a) {\n            var b = this.node,\n                c = b.parentNode;\n            if (c) {\n                d.isArray(a) || (a = [a]);\n                for (var e = 0, f = a.length; e < f; e++) c.insertBefore(d.toNode(a[e]), b)\n            }\n            return this\n        }, d.prototype.appendTo = function(a) {\n            return d.toNode(a).appendChild(this.node), this\n        }, d.prototype.svg = function() {\n            return this.node instanceof window.SVGSVGElement ? this : d(this.node.ownerSVGElement)\n        }, d.prototype.defs = function() {\n            var a = this.svg().node.getElementsByTagName(\"defs\");\n            return a && a.length ? d(a[0]) : void 0\n        }, d.prototype.clone = function() {\n            var a = d(this.node.cloneNode(!0));\n            return a.node.id = d.uniqueId(), a\n        }, d.prototype.findOne = function(a) {\n            var b = this.node.querySelector(a);\n            return b ? d(b) : void 0\n        }, d.prototype.find = function(a) {\n            var b = [],\n                c = this.node.querySelectorAll(a);\n            if (c)\n                for (var e = 0; e < c.length; e++) b.push(d(c[e]));\n            return b\n        }, d.prototype.index = function() {\n            for (var a = 0, b = this.node.previousSibling; b;) 1 === b.nodeType && a++, b = b.previousSibling;\n            return a\n        }, d.prototype.findParentByClass = function(a, b) {\n            for (var c = this.node.ownerSVGElement, e = this.node.parentNode; e && e !== b && e !== c;) {\n                var f = d(e);\n                if (f.hasClass(a)) return f;\n                e = e.parentNode\n            }\n            return null\n        }, d.prototype.contains = function(a) {\n            var b = this.node,\n                c = d.toNode(a),\n                e = c && c.parentNode;\n            return b === e || !!(e && 1 === e.nodeType && 16 & b.compareDocumentPosition(e))\n        }, d.prototype.toLocalPoint = function(a, b) {\n            var c = this.svg().node,\n                d = c.createSVGPoint();\n            d.x = a, d.y = b;\n            try {\n                var e = d.matrixTransform(c.getScreenCTM().inverse()),\n                    f = this.getTransformToElement(c).inverse()\n            } catch (a) {\n                return d\n            }\n            return e.matrixTransform(f)\n        }, d.prototype.translateCenterToPoint = function(a) {\n            var b = this.bbox(),\n                c = g.rect(b).center();\n            this.translate(a.x - c.x, a.y - c.y)\n        }, d.prototype.translateAndAutoOrient = function(a, b, c) {\n            var e = this.scale();\n            this.attr(\"transform\", \"\"), this.scale(e.sx, e.sy);\n            var f = this.svg().node,\n                h = this.bbox(!1, c),\n                i = f.createSVGTransform();\n            i.setTranslate(-h.x - h.width / 2, -h.y - h.height / 2);\n            var j = f.createSVGTransform(),\n                k = g.point(a).changeInAngle(a.x - b.x, a.y - b.y, b);\n            j.setRotate(k, 0, 0);\n            var l = f.createSVGTransform(),\n                m = g.point(a).move(b, h.width / 2);\n            l.setTranslate(a.x + (a.x - m.x), a.y + (a.y - m.y));\n            var n = this.getTransformToElement(c),\n                o = f.createSVGTransform();\n            o.setMatrix(l.matrix.multiply(j.matrix.multiply(i.matrix.multiply(n))));\n            var p = d.decomposeMatrix(o.matrix);\n            return this.translate(p.translateX, p.translateY), this.rotate(p.rotation), this\n        }, d.prototype.animateAlongPath = function(a, b) {\n            b = d.toNode(b);\n            var c = d.ensureId(b),\n                e = d(\"animateMotion\", a),\n                f = d(\"mpath\", {\n                    \"xlink:href\": \"#\" + c\n                });\n            e.append(f), this.append(e);\n            try {\n                e.node.beginElement()\n            } catch (a) {\n                if (\"fake\" === document.documentElement.getAttribute(\"smiling\")) {\n                    var g = e.node;\n                    g.animators = [];\n                    var h = g.getAttribute(\"id\");\n                    h && (id2anim[h] = g);\n                    for (var i = getTargets(g), j = 0, k = i.length; j < k; j++) {\n                        var l = i[j],\n                            m = new Animator(g, l, j);\n                        animators.push(m), g.animators[j] = m, m.register()\n                    }\n                }\n            }\n        }, d.prototype.hasClass = function(a) {\n            return new RegExp(\"(\\\\s|^)\" + a + \"(\\\\s|$)\").test(this.node.getAttribute(\"class\"))\n        }, d.prototype.addClass = function(a) {\n            if (!this.hasClass(a)) {\n                var b = this.node.getAttribute(\"class\") || \"\";\n                this.node.setAttribute(\"class\", (b + \" \" + a).trim())\n            }\n            return this\n        }, d.prototype.removeClass = function(a) {\n            if (this.hasClass(a)) {\n                var b = this.node.getAttribute(\"class\").replace(new RegExp(\"(\\\\s|^)\" + a + \"(\\\\s|$)\", \"g\"), \"$2\");\n                this.node.setAttribute(\"class\", b)\n            }\n            return this\n        }, d.prototype.toggleClass = function(a, b) {\n            var c = d.isUndefined(b) ? this.hasClass(a) : !b;\n            return c ? this.removeClass(a) : this.addClass(a), this\n        }, d.prototype.sample = function(a) {\n            a = a || 1;\n            for (var b, c = this.node, d = c.getTotalLength(), e = [], f = 0; f < d;) b = c.getPointAtLength(f), e.push({\n                x: b.x,\n                y: b.y,\n                distance: f\n            }), f += a;\n            return e\n        }, d.prototype.convertToPath = function() {\n            var a = d(\"path\");\n            a.attr(this.attr());\n            var b = this.convertToPathData();\n            return b && a.attr(\"d\", b), a\n        }, d.prototype.convertToPathData = function() {\n            var a = this.node.tagName.toUpperCase();\n            switch (a) {\n                case \"PATH\":\n                    return this.attr(\"d\");\n                case \"LINE\":\n                    return d.convertLineToPathData(this.node);\n                case \"POLYGON\":\n                    return d.convertPolygonToPathData(this.node);\n                case \"POLYLINE\":\n                    return d.convertPolylineToPathData(this.node);\n                case \"ELLIPSE\":\n                    return d.convertEllipseToPathData(this.node);\n                case \"CIRCLE\":\n                    return d.convertCircleToPathData(this.node);\n                case \"RECT\":\n                    return d.convertRectToPathData(this.node)\n            }\n            throw new Error(a + \" cannot be converted to PATH.\")\n        }, d.prototype.findIntersection = function(a, b) {\n            var c = this.svg().node;\n            b = b || c;\n            var e = g.rect(this.bbox(!1, b)),\n                f = e.center();\n            if (e.intersectionWithLineFromCenterToPoint(a)) {\n                var h, i = this.node.localName.toUpperCase();\n                if (\"RECT\" === i) {\n                    var j = g.rect(parseFloat(this.attr(\"x\") || 0), parseFloat(this.attr(\"y\") || 0), parseFloat(this.attr(\"width\")), parseFloat(this.attr(\"height\"))),\n                        k = this.getTransformToElement(b),\n                        l = d.decomposeMatrix(k),\n                        m = c.createSVGTransform();\n                    m.setRotate(-l.rotation, f.x, f.y);\n                    var n = d.transformRect(j, m.matrix.multiply(k));\n                    h = g.rect(n).intersectionWithLineFromCenterToPoint(a, l.rotation)\n                } else if (\"PATH\" === i || \"POLYGON\" === i || \"POLYLINE\" === i || \"CIRCLE\" === i || \"ELLIPSE\" === i) {\n                    var o, p, q, r, s, t, u = \"PATH\" === i ? this : this.convertToPath(),\n                        v = u.sample(),\n                        w = 1 / 0,\n                        x = [];\n                    for (o = 0; o < v.length; o++) p = v[o], q = d.createSVGPoint(p.x, p.y), q = q.matrixTransform(this.getTransformToElement(b)), p = g.point(q), r = p.distance(f), s = 1.1 * p.distance(a), t = r + s, t < w ? (w = t, x = [{\n                        sample: p,\n                        refDistance: s\n                    }]) : t < w + 1 && x.push({\n                        sample: p,\n                        refDistance: s\n                    });\n                    x.sort(function(a, b) {\n                        return a.refDistance - b.refDistance\n                    }), x[0] && (h = x[0].sample)\n                }\n                return h\n            }\n        }, d.prototype.setAttribute = function(a, b) {\n            var c = this.node;\n            if (null === b) return this.removeAttr(a), this;\n            var e = d.qualifyAttr(a);\n            return e.ns ? c.setAttributeNS(e.ns, a, b) : \"id\" === a ? c.id = b : c.setAttribute(a, b), this\n        }, d.createSvgDocument = function(a) {\n            var e = '<svg xmlns=\"' + b.xmlns + '\" xmlns:xlink=\"' + b.xlink + '\" version=\"' + c + '\">' + (a || \"\") + \"</svg>\",\n                f = d.parseXML(e, {\n                    async: !1\n                });\n            return f.documentElement\n        }, d.idCounter = 0, d.uniqueId = function() {\n            return \"v-\" + ++d.idCounter\n        }, d.ensureId = function(a) {\n            return a.id || (a.id = d.uniqueId())\n        }, d.sanitizeText = function(a) {\n            return (a || \"\").replace(/ /g, \"\\xa0\")\n        }, d.isUndefined = function(a) {\n            return \"undefined\" == typeof a\n        }, d.isString = function(a) {\n            return \"string\" == typeof a\n        }, d.isObject = function(a) {\n            return a && \"object\" == typeof a\n        }, d.isArray = Array.isArray, d.parseXML = function(a, b) {\n            b = b || {};\n            var c;\n            try {\n                var e = new DOMParser;\n                d.isUndefined(b.async) || (e.async = b.async), c = e.parseFromString(a, \"text/xml\")\n            } catch (a) {\n                c = void 0\n            }\n            if (!c || c.getElementsByTagName(\"parsererror\").length) throw new Error(\"Invalid XML: \" + a);\n            return c\n        }, d.qualifyAttr = function(a) {\n            if (a.indexOf(\":\") !== -1) {\n                var c = a.split(\":\");\n                return {\n                    ns: b[c[0]],\n                    local: c[1]\n                }\n            }\n            return {\n                ns: null,\n                local: a\n            }\n        }, d.transformRegex = /(\\w+)\\(([^,)]+),?([^)]+)?\\)/gi, d.transformSeparatorRegex = /[ ,]+/, d.transformationListRegex = /^(\\w+)\\((.*)\\)/, d.transformStringToMatrix = function(a) {\n            var b = d.createSVGMatrix(),\n                c = a && a.match(d.transformRegex);\n            if (!c) return b;\n            for (var e = 0, f = c.length; e < f; e++) {\n                var g = c[e],\n                    h = g.match(d.transformationListRegex);\n                if (h) {\n                    var i, j, k, l, m, n = d.createSVGMatrix(),\n                        o = h[2].split(d.transformSeparatorRegex);\n                    switch (h[1].toLowerCase()) {\n                        case \"scale\":\n                            i = parseFloat(o[0]), j = void 0 === o[1] ? i : parseFloat(o[1]), n = n.scaleNonUniform(i, j);\n                            break;\n                        case \"translate\":\n                            k = parseFloat(o[0]), l = parseFloat(o[1]), n = n.translate(k, l);\n                            break;\n                        case \"rotate\":\n                            m = parseFloat(o[0]), k = parseFloat(o[1]) || 0, l = parseFloat(o[2]) || 0, n = 0 !== k || 0 !== l ? n.translate(k, l).rotate(m).translate(-k, -l) : n.rotate(m);\n                            break;\n                        case \"skewx\":\n                            m = parseFloat(o[0]), n = n.skewX(m);\n                            break;\n                        case \"skewy\":\n                            m = parseFloat(o[0]), n = n.skewY(m);\n                            break;\n                        case \"matrix\":\n                            n.a = parseFloat(o[0]), n.b = parseFloat(o[1]), n.c = parseFloat(o[2]), n.d = parseFloat(o[3]), n.e = parseFloat(o[4]), n.f = parseFloat(o[5]);\n                            break;\n                        default:\n                            continue\n                    }\n                    b = b.multiply(n)\n                }\n            }\n            return b\n        }, d.matrixToTransformString = function(a) {\n            return a || (a = !0), \"matrix(\" + (a.a || 1) + \",\" + (a.b || 0) + \",\" + (a.c || 0) + \",\" + (a.d || 1) + \",\" + (a.e || 0) + \",\" + (a.f || 0) + \")\"\n        }, d.parseTransformString = function(a) {\n            var b, c, e;\n            if (a) {\n                var f = d.transformSeparatorRegex;\n                if (a.trim().indexOf(\"matrix\") >= 0) {\n                    var g = d.transformStringToMatrix(a),\n                        h = d.decomposeMatrix(g);\n                    b = [h.translateX, h.translateY], e = [h.scaleX, h.scaleY], c = [h.rotation];\n                    var i = [];\n                    0 === b[0] && 0 === b[0] || i.push(\"translate(\" + b + \")\"), 1 === e[0] && 1 === e[1] || i.push(\"scale(\" + e + \")\"), 0 !== c[0] && i.push(\"rotate(\" + c + \")\"), a = i.join(\" \")\n                } else {\n                    var j = a.match(/translate\\((.*)\\)/);\n                    j && (b = j[1].split(f));\n                    var k = a.match(/rotate\\((.*)\\)/);\n                    k && (c = k[1].split(f));\n                    var l = a.match(/scale\\((.*)\\)/);\n                    l && (e = l[1].split(f))\n                }\n            }\n            var m = e && e[0] ? parseFloat(e[0]) : 1;\n            return {\n                value: a,\n                translate: {\n                    tx: b && b[0] ? parseInt(b[0], 10) : 0,\n                    ty: b && b[1] ? parseInt(b[1], 10) : 0\n                },\n                rotate: {\n                    angle: c && c[0] ? parseInt(c[0], 10) : 0,\n                    cx: c && c[1] ? parseInt(c[1], 10) : void 0,\n                    cy: c && c[2] ? parseInt(c[2], 10) : void 0\n                },\n                scale: {\n                    sx: m,\n                    sy: e && e[1] ? parseFloat(e[1]) : m\n                }\n            }\n        }, d.deltaTransformPoint = function(a, b) {\n            var c = b.x * a.a + b.y * a.c + 0,\n                d = b.x * a.b + b.y * a.d + 0;\n            return {\n                x: c,\n                y: d\n            }\n        }, d.decomposeMatrix = function(a) {\n            var b = d.deltaTransformPoint(a, {\n                    x: 0,\n                    y: 1\n                }),\n                c = d.deltaTransformPoint(a, {\n                    x: 1,\n                    y: 0\n                }),\n                e = 180 / Math.PI * Math.atan2(b.y, b.x) - 90,\n                f = 180 / Math.PI * Math.atan2(c.y, c.x);\n            return {\n                translateX: a.e,\n                translateY: a.f,\n                scaleX: Math.sqrt(a.a * a.a + a.b * a.b),\n                scaleY: Math.sqrt(a.c * a.c + a.d * a.d),\n                skewX: e,\n                skewY: f,\n                rotation: e\n            }\n        }, d.matrixToScale = function(a) {\n            var b, c, e, f;\n            return a ? (b = d.isUndefined(a.a) ? 1 : a.a, f = d.isUndefined(a.d) ? 1 : a.d, c = a.b, e = a.c) : b = f = 1, {\n                sx: c ? Math.sqrt(b * b + c * c) : b,\n                sy: e ? Math.sqrt(e * e + f * f) : f\n            }\n        }, d.matrixToRotate = function(a) {\n            var b = {\n                x: 0,\n                y: 1\n            };\n            return a && (b = d.deltaTransformPoint(a, b)), {\n                angle: g.normalizeAngle(g.toDeg(Math.atan2(b.y, b.x)) - 90)\n            }\n        }, d.matrixToTranslate = function(a) {\n            return {\n                tx: a && a.e || 0,\n                ty: a && a.f || 0\n            }\n        }, d.isV = function(a) {\n            return a instanceof d\n        }, d.isVElement = d.isV;\n        var e = d(\"svg\").node;\n        return d.createSVGMatrix = function(a) {\n            var b = e.createSVGMatrix();\n            for (var c in a) b[c] = a[c];\n            return b\n        }, d.createSVGTransform = function(a) {\n            return d.isUndefined(a) ? e.createSVGTransform() : (a instanceof SVGMatrix || (a = d.createSVGMatrix(a)), e.createSVGTransformFromMatrix(a))\n        }, d.createSVGPoint = function(a, b) {\n            var c = e.createSVGPoint();\n            return c.x = a, c.y = b, c\n        }, d.transformRect = function(a, b) {\n            var c = e.createSVGPoint();\n            c.x = a.x, c.y = a.y;\n            var d = c.matrixTransform(b);\n            c.x = a.x + a.width, c.y = a.y;\n            var f = c.matrixTransform(b);\n            c.x = a.x + a.width, c.y = a.y + a.height;\n            var h = c.matrixTransform(b);\n            c.x = a.x, c.y = a.y + a.height;\n            var i = c.matrixTransform(b),\n                j = Math.min(d.x, f.x, h.x, i.x),\n                k = Math.max(d.x, f.x, h.x, i.x),\n                l = Math.min(d.y, f.y, h.y, i.y),\n                m = Math.max(d.y, f.y, h.y, i.y);\n            return g.Rect(j, l, k - j, m - l)\n        }, d.transformPoint = function(a, b) {\n            return g.Point(d.createSVGPoint(a.x, a.y).matrixTransform(b))\n        }, d.styleToObject = function(a) {\n            for (var b = {}, c = a.split(\";\"), d = 0; d < c.length; d++) {\n                var e = c[d],\n                    f = e.split(\"=\");\n                b[f[0].trim()] = f[1].trim()\n            }\n            return b\n        }, d.createSlicePathData = function(a, b, c, d) {\n            var e = 2 * Math.PI - 1e-6,\n                f = a,\n                g = b,\n                h = c,\n                i = d,\n                j = (i < h && (j = h, h = i, i = j), i - h),\n                k = j < Math.PI ? \"0\" : \"1\",\n                l = Math.cos(h),\n                m = Math.sin(h),\n                n = Math.cos(i),\n                o = Math.sin(i);\n            return j >= e ? f ? \"M0,\" + g + \"A\" + g + \",\" + g + \" 0 1,1 0,\" + -g + \"A\" + g + \",\" + g + \" 0 1,1 0,\" + g + \"M0,\" + f + \"A\" + f + \",\" + f + \" 0 1,0 0,\" + -f + \"A\" + f + \",\" + f + \" 0 1,0 0,\" + f + \"Z\" : \"M0,\" + g + \"A\" + g + \",\" + g + \" 0 1,1 0,\" + -g + \"A\" + g + \",\" + g + \" 0 1,1 0,\" + g + \"Z\" : f ? \"M\" + g * l + \",\" + g * m + \"A\" + g + \",\" + g + \" 0 \" + k + \",1 \" + g * n + \",\" + g * o + \"L\" + f * n + \",\" + f * o + \"A\" + f + \",\" + f + \" 0 \" + k + \",0 \" + f * l + \",\" + f * m + \"Z\" : \"M\" + g * l + \",\" + g * m + \"A\" + g + \",\" + g + \" 0 \" + k + \",1 \" + g * n + \",\" + g * o + \"L0,0Z\"\n        }, d.mergeAttrs = function(a, b) {\n            for (var c in b) \"class\" === c ? a[c] = a[c] ? a[c] + \" \" + b[c] : b[c] : \"style\" === c ? d.isObject(a[c]) && d.isObject(b[c]) ? a[c] = d.mergeAttrs(a[c], b[c]) : d.isObject(a[c]) ? a[c] = d.mergeAttrs(a[c], d.styleToObject(b[c])) : d.isObject(b[c]) ? a[c] = d.mergeAttrs(d.styleToObject(a[c]), b[c]) : a[c] = d.mergeAttrs(d.styleToObject(a[c]), d.styleToObject(b[c])) : a[c] = b[c];\n            return a\n        }, d.annotateString = function(a, b, c) {\n            b = b || [], c = c || {};\n            for (var e, f, g, h = c.offset || 0, i = [], j = [], k = 0; k < a.length; k++) {\n                f = j[k] = a[k];\n                for (var l = 0; l < b.length; l++) {\n                    var m = b[l],\n                        n = m.start + h,\n                        o = m.end + h;\n                    k >= n && k < o && (d.isObject(f) ? f.attrs = d.mergeAttrs(d.mergeAttrs({}, f.attrs), m.attrs) : f = j[k] = {\n                        t: a[k],\n                        attrs: m.attrs\n                    }, c.includeAnnotationIndices && (f.annotations || (f.annotations = [])).push(l))\n                }\n                g = j[k - 1], g ? d.isObject(f) && d.isObject(g) ? JSON.stringify(f.attrs) === JSON.stringify(g.attrs) ? e.t += f.t : (i.push(e), e = f) : d.isObject(f) ? (i.push(e), e = f) : d.isObject(g) ? (i.push(e), e = f) : e = (e || \"\") + f : e = f\n            }\n            return e && i.push(e), i\n        }, d.findAnnotationsAtIndex = function(a, b) {\n            var c = [];\n            return a && a.forEach(function(a) {\n                a.start < b && b <= a.end && c.push(a)\n            }), c\n        }, d.findAnnotationsBetweenIndexes = function(a, b, c) {\n            var d = [];\n            return a && a.forEach(function(a) {\n                (b >= a.start && b < a.end || c > a.start && c <= a.end || a.start >= b && a.end < c) && d.push(a)\n            }), d\n        }, d.shiftAnnotations = function(a, b, c) {\n            return a && a.forEach(function(a) {\n                a.start < b && a.end >= b ? a.end += c : a.start >= b && (a.start += c, a.end += c)\n            }), a\n        }, d.convertLineToPathData = function(a) {\n            a = d(a);\n            var b = [\"M\", a.attr(\"x1\"), a.attr(\"y1\"), \"L\", a.attr(\"x2\"), a.attr(\"y2\")].join(\" \");\n            return b\n        }, d.convertPolygonToPathData = function(a) {\n            var b = d.getPointsFromSvgNode(d(a).node);\n            return b.length > 0 ? d.svgPointsToPath(b) + \" Z\" : null\n        }, d.convertPolylineToPathData = function(a) {\n            var b = d.getPointsFromSvgNode(d(a).node);\n            return b.length > 0 ? d.svgPointsToPath(b) : null\n        }, d.svgPointsToPath = function(a) {\n            var b;\n            for (b = 0; b < a.length; b++) a[b] = a[b].x + \" \" + a[b].y;\n            return \"M \" + a.join(\" L\")\n        }, d.getPointsFromSvgNode = function(a) {\n            var b, c = [];\n            for (b = 0; b < a.points.numberOfItems; b++) c.push(a.points.getItem(b));\n            return c\n        }, d.KAPPA = .5522847498307935, d.convertCircleToPathData = function(a) {\n            a = d(a);\n            var b = parseFloat(a.attr(\"cx\")) || 0,\n                c = parseFloat(a.attr(\"cy\")) || 0,\n                e = parseFloat(a.attr(\"r\")),\n                f = e * d.KAPPA,\n                g = [\"M\", b, c - e, \"C\", b + f, c - e, b + e, c - f, b + e, c, \"C\", b + e, c + f, b + f, c + e, b, c + e, \"C\", b - f, c + e, b - e, c + f, b - e, c, \"C\", b - e, c - f, b - f, c - e, b, c - e, \"Z\"].join(\" \");\n            return g\n        }, d.convertEllipseToPathData = function(a) {\n            a = d(a);\n            var b = parseFloat(a.attr(\"cx\")) || 0,\n                c = parseFloat(a.attr(\"cy\")) || 0,\n                e = parseFloat(a.attr(\"rx\")),\n                f = parseFloat(a.attr(\"ry\")) || e,\n                g = e * d.KAPPA,\n                h = f * d.KAPPA,\n                i = [\"M\", b, c - f, \"C\", b + g, c - f, b + e, c - h, b + e, c, \"C\", b + e, c + h, b + g, c + f, b, c + f, \"C\", b - g, c + f, b - e, c + h, b - e, c, \"C\", b - e, c - h, b - g, c - f, b, c - f, \"Z\"].join(\" \");\n            return i\n        }, d.convertRectToPathData = function(a) {\n            return a = d(a), d.rectToPath({\n                x: parseFloat(a.attr(\"x\")) || 0,\n                y: parseFloat(a.attr(\"y\")) || 0,\n                width: parseFloat(a.attr(\"width\")) || 0,\n                height: parseFloat(a.attr(\"height\")) || 0,\n                rx: parseFloat(a.attr(\"rx\")) || 0,\n                ry: parseFloat(a.attr(\"ry\")) || 0\n            })\n        }, d.rectToPath = function(a) {\n            var b, c = a.x,\n                d = a.y,\n                e = a.width,\n                f = a.height,\n                g = Math.min(a.rx || a[\"top-rx\"] || 0, e / 2),\n                h = Math.min(a.rx || a[\"bottom-rx\"] || 0, e / 2),\n                i = Math.min(a.ry || a[\"top-ry\"] || 0, f / 2),\n                j = Math.min(a.ry || a[\"bottom-ry\"] || 0, f / 2);\n            return b = g || h || i || j ? [\"M\", c, d + i, \"v\", f - i - j, \"a\", h, j, 0, 0, 0, h, j, \"h\", e - 2 * h, \"a\", h, j, 0, 0, 0, h, -j, \"v\", -(f - j - i), \"a\", g, i, 0, 0, 0, -g, -i, \"h\", -(e - 2 * g), \"a\", g, i, 0, 0, 0, -g, i, \"Z\"] : [\"M\", c, d, \"H\", c + e, \"V\", d + f, \"H\", c, \"V\", d, \"Z\"], b.join(\" \")\n        }, d.toNode = function(a) {\n            return d.isV(a) ? a.node : a.nodeName && a || a[0]\n        }, d\n    }();\n    var joint = {\n        version: \"1.1.0\",\n        config: {\n            classNamePrefix: \"joint-\",\n            defaultTheme: \"default\"\n        },\n        dia: {},\n        ui: {},\n        layout: {},\n        shapes: {},\n        format: {},\n        connectors: {},\n        highlighters: {},\n        routers: {},\n        mvc: {\n            views: {}\n        },\n        setTheme: function(a, b) {\n            b = b || {}, _.invoke(joint.mvc.views, \"setTheme\", a, b), joint.mvc.View.prototype.defaultTheme = a\n        },\n        env: {\n            _results: {},\n            _tests: {\n                svgforeignobject: function() {\n                    return !!document.createElementNS && /SVGForeignObject/.test({}.toString.call(document.createElementNS(\"http://www.w3.org/2000/svg\", \"foreignObject\")))\n                }\n            },\n            addTest: function(a, b) {\n                return joint.env._tests[a] = b\n            },\n            test: function(a) {\n                var b = joint.env._tests[a];\n                if (!b) throw new Error('Test not defined (\"' + a + '\"). Use `joint.env.addTest(name, fn) to add a new test.`');\n                var c = joint.env._results[a];\n                if (\"undefined\" != typeof c) return c;\n                try {\n                    c = b()\n                } catch (a) {\n                    c = !1\n                }\n                return joint.env._results[a] = c, c\n            }\n        },\n        util: {\n            hashCode: function(a) {\n                var b = 0;\n                if (0 == a.length) return b;\n                for (var c = 0; c < a.length; c++) {\n                    var d = a.charCodeAt(c);\n                    b = (b << 5) - b + d, b &= b\n                }\n                return b\n            },\n            getByPath: function(a, b, c) {\n                for (var d, e = _.isArray(b) ? b.slice() : b.split(c || \"/\"); e.length;) {\n                    if (d = e.shift(), !(Object(a) === a && d in a)) return;\n                    a = a[d]\n                }\n                return a\n            },\n            setByPath: function(a, b, c, d) {\n                for (var e = _.isArray(b) ? b : b.split(d || \"/\"), f = a, g = 0, h = e.length; g < h - 1; g++) f = f[e[g]] || (f[e[g]] = {});\n                return f[e[h - 1]] = c, a\n            },\n            unsetByPath: function(a, b, c) {\n                c = c || \"/\";\n                var d = _.isArray(b) ? b.slice() : b.split(c),\n                    e = d.pop();\n                if (d.length > 0) {\n                    var f = joint.util.getByPath(a, d, c);\n                    f && delete f[e]\n                } else delete a[e];\n                return a\n            },\n            flattenObject: function(a, b, c) {\n                b = b || \"/\";\n                var d = {};\n                for (var e in a)\n                    if (a.hasOwnProperty(e)) {\n                        var f = \"object\" == typeof a[e];\n                        if (f && c && c(a[e]) && (f = !1), f) {\n                            var g = this.flattenObject(a[e], b, c);\n                            for (var h in g) g.hasOwnProperty(h) && (d[e + b + h] = g[h])\n                        } else d[e] = a[e]\n                    }\n                return d\n            },\n            uuid: function() {\n                return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function(a) {\n                    var b = 16 * Math.random() | 0,\n                        c = \"x\" == a ? b : 3 & b | 8;\n                    return c.toString(16)\n                })\n            },\n            guid: function(a) {\n                return this.guid.id = this.guid.id || 1, a.id = void 0 === a.id ? \"j_\" + this.guid.id++ : a.id, a.id\n            },\n            toKebabCase: function(a) {\n                return a.replace(/[A-Z]/g, \"-$&\").toLowerCase()\n            },\n            mixin: _.assign,\n            supplement: _.defaults,\n            deepMixin: _.mixin,\n            deepSupplement: _.defaultsDeep,\n            normalizeEvent: function(a) {\n                var b = a.originalEvent && a.originalEvent.changedTouches && a.originalEvent.changedTouches[0];\n                if (b) {\n                    for (var c in a) void 0 === b[c] && (b[c] = a[c]);\n                    return b\n                }\n                return a\n            },\n            nextFrame: function() {\n                var a;\n                if (\"undefined\" != typeof window && (a = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame), !a) {\n                    var b = 0;\n                    a = function(a) {\n                        var c = (new Date).getTime(),\n                            d = Math.max(0, 16 - (c - b)),\n                            e = setTimeout(function() {\n                                a(c + d)\n                            }, d);\n                        return b = c + d, e\n                    }\n                }\n                return function(b, c) {\n                    return a(c ? _.bind(b, c) : b)\n                }\n            }(),\n            cancelFrame: function() {\n                var a, b = \"undefined\" != typeof window;\n                return b && (a = window.cancelAnimationFrame || window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || window.msCancelAnimationFrame || window.msCancelRequestAnimationFrame || window.oCancelAnimationFrame || window.oCancelRequestAnimationFrame || window.mozCancelAnimationFrame || window.mozCancelRequestAnimationFrame), a = a || clearTimeout, b ? _.bind(a, window) : a\n            }(),\n            shapePerimeterConnectionPoint: function(a, b, c, d) {\n                var e, f;\n                if (!c) {\n                    var h = b.$(\".scalable\")[0],\n                        i = b.$(\".rotatable\")[0];\n                    h && h.firstChild ? c = h.firstChild : i && i.firstChild && (c = i.firstChild)\n                }\n                return c ? (f = V(c).findIntersection(d, a.paper.viewport), f || (e = g.rect(V(c).bbox(!1, a.paper.viewport)))) : (e = b.model.getBBox(), f = e.intersectionWithLineFromCenterToPoint(d)), f || e.center()\n            },\n            parseCssNumeric: function(a, b) {\n                b = b || [];\n                var c = {\n                    value: parseFloat(a)\n                };\n                if (_.isNaN(c.value)) return null;\n                var d = b.join(\"|\");\n                if (_.isString(a)) {\n                    var e = new RegExp(\"(\\\\d+)(\" + d + \")$\").exec(a);\n                    if (!e) return null;\n                    e[2] && (c.unit = e[2])\n                }\n                return c\n            },\n            breakText: function(a, b, c, d) {\n                d = d || {};\n                var e = b.width,\n                    f = b.height,\n                    g = d.svgDocument || V(\"svg\").node,\n                    h = V(\"<text><tspan></tspan></text>\").attr(c || {}).node,\n                    i = h.firstChild,\n                    j = document.createTextNode(\"\");\n                h.style.opacity = 0, h.style.display = \"block\", i.style.display = \"block\", i.appendChild(j), g.appendChild(h), d.svgDocument || document.body.appendChild(g);\n                for (var k, l, m = a.split(\" \"), n = [], o = [], p = 0, q = 0, r = m.length; p < r; p++) {\n                    var s = m[p];\n                    if (j.data = o[q] ? o[q] + \" \" + s : s, i.getComputedTextLength() <= e) o[q] = j.data, k && (n[q++] = !0, k = 0);\n                    else {\n                        if (!o[q] || k) {\n                            var t = !!k;\n                            if (k = s.length - 1, t || !k) {\n                                if (!k) {\n                                    if (!o[q]) {\n                                        o = [];\n                                        break\n                                    }\n                                    m.splice(p, 2, s + m[p + 1]), r--, n[q++] = !0, p--;\n                                    continue\n                                }\n                                m[p] = s.substring(0, k), m[p + 1] = s.substring(k) + m[p + 1]\n                            } else m.splice(p, 1, s.substring(0, k), s.substring(k)), r++, q && !n[q - 1] && q--;\n                            p--;\n                            continue\n                        }\n                        q++, p--\n                    }\n                    if (void 0 !== f) {\n                        if (void 0 === l) {\n                            var u;\n                            u = \"auto\" === c.lineHeight ? {\n                                value: 1.5,\n                                unit: \"em\"\n                            } : joint.util.parseCssNumeric(c.lineHeight, [\"em\"]) || {\n                                value: 1,\n                                unit: \"em\"\n                            }, l = u.value, \"em\" === u.unit && (l *= h.getBBox().height)\n                        }\n                        if (l * o.length > f) {\n                            o.splice(Math.floor(f / l));\n                            break\n                        }\n                    }\n                }\n                return d.svgDocument ? g.removeChild(h) : document.body.removeChild(g), o.join(\"\\n\")\n            },\n            imageToDataUri: function(a, b) {\n                if (!a || \"data:\" === a.substr(0, \"data:\".length)) return setTimeout(function() {\n                    b(null, a)\n                }, 0);\n                var c = function(b, c) {\n                        if (200 === b.status) {\n                            var d = new FileReader;\n                            d.onload = function(a) {\n                                var b = a.target.result;\n                                c(null, b)\n                            }, d.onerror = function() {\n                                c(new Error(\"Failed to load image \" + a))\n                            }, d.readAsDataURL(b.response)\n                        } else c(new Error(\"Failed to load image \" + a))\n                    },\n                    d = function(b, c) {\n                        var d = function(a) {\n                            for (var b = 32768, c = [], d = 0; d < a.length; d += b) c.push(String.fromCharCode.apply(null, a.subarray(d, d + b)));\n                            return c.join(\"\")\n                        };\n                        if (200 === b.status) {\n                            var e = new Uint8Array(b.response),\n                                f = a.split(\".\").pop() || \"png\",\n                                g = {\n                                    svg: \"svg+xml\"\n                                },\n                                h = \"data:image/\" + (g[f] || f) + \";base64,\",\n                                i = h + btoa(d(e));\n                            c(null, i)\n                        } else c(new Error(\"Failed to load image \" + a))\n                    },\n                    e = new XMLHttpRequest;\n                e.open(\"GET\", a, !0), e.addEventListener(\"error\", function() {\n                    b(new Error(\"Failed to load image \" + a))\n                }), e.responseType = window.FileReader ? \"blob\" : \"arraybuffer\", e.addEventListener(\"load\", function() {\n                    window.FileReader ? c(e, b) : d(e, b)\n                }), e.send()\n            },\n            getElementBBox: function(a) {\n                var b = $(a);\n                if (0 === b.length) throw new Error(\"Element not found\");\n                var c = b[0],\n                    d = c.ownerDocument,\n                    e = c.getBoundingClientRect(),\n                    f = 0,\n                    g = 0;\n                if (c.ownerSVGElement) {\n                    var h = V(c).bbox();\n                    f = e.width - h.width, g = e.height - h.height\n                }\n                return {\n                    x: e.left + window.pageXOffset - d.documentElement.offsetLeft + f / 2,\n                    y: e.top + window.pageYOffset - d.documentElement.offsetTop + g / 2,\n                    width: e.width - f,\n                    height: e.height - g\n                }\n            },\n            sortElements: function(a, b) {\n                var c = $(a),\n                    d = c.map(function() {\n                        var a = this,\n                            b = a.parentNode,\n                            c = b.insertBefore(document.createTextNode(\"\"), a.nextSibling);\n                        return function() {\n                            if (b === this) throw new Error(\"You can't sort elements if any one is a descendant of another.\");\n                            b.insertBefore(this, c), b.removeChild(c)\n                        }\n                    });\n                return Array.prototype.sort.call(c, b).each(function(a) {\n                    d[a].call(this)\n                })\n            },\n            setAttributesBySelector: function(a, b) {\n                var c = $(a);\n                _.each(b, function(a, b) {\n                    var d = c.find(b).addBack().filter(b);\n                    _.has(a, \"class\") && (d.addClass(a.class), a = _.omit(a, \"class\")), d.attr(a)\n                })\n            },\n            normalizeSides: function(a) {\n                return Object(a) !== a ? (a = a || 0, {\n                    top: a,\n                    bottom: a,\n                    left: a,\n                    right: a\n                }) : {\n                    top: a.top || 0,\n                    bottom: a.bottom || 0,\n                    left: a.left || 0,\n                    right: a.right || 0\n                }\n            },\n            timing: {\n                linear: function(a) {\n                    return a\n                },\n                quad: function(a) {\n                    return a * a\n                },\n                cubic: function(a) {\n                    return a * a * a\n                },\n                inout: function(a) {\n                    if (a <= 0) return 0;\n                    if (a >= 1) return 1;\n                    var b = a * a,\n                        c = b * a;\n                    return 4 * (a < .5 ? c : 3 * (a - b) + c - .75)\n                },\n                exponential: function(a) {\n                    return Math.pow(2, 10 * (a - 1))\n                },\n                bounce: function(a) {\n                    for (var b = 0, c = 1; 1; b += c, c /= 2)\n                        if (a >= (7 - 4 * b) / 11) {\n                            var d = (11 - 6 * b - 11 * a) / 4;\n                            return -d * d + c * c\n                        }\n                },\n                reverse: function(a) {\n                    return function(b) {\n                        return 1 - a(1 - b)\n                    }\n                },\n                reflect: function(a) {\n                    return function(b) {\n                        return .5 * (b < .5 ? a(2 * b) : 2 - a(2 - 2 * b))\n                    }\n                },\n                clamp: function(a, b, c) {\n                    return b = b || 0, c = c || 1,\n                        function(d) {\n                            var e = a(d);\n                            return e < b ? b : e > c ? c : e\n                        }\n                },\n                back: function(a) {\n                    return a || (a = 1.70158),\n                        function(b) {\n                            return b * b * ((a + 1) * b - a)\n                        }\n                },\n                elastic: function(a) {\n                    return a || (a = 1.5),\n                        function(b) {\n                            return Math.pow(2, 10 * (b - 1)) * Math.cos(20 * Math.PI * a / 3 * b)\n                        }\n                }\n            },\n            interpolate: {\n                number: function(a, b) {\n                    var c = b - a;\n                    return function(b) {\n                        return a + c * b\n                    }\n                },\n                object: function(a, b) {\n                    var c = _.keys(a);\n                    return function(d) {\n                        var e, f, g = {};\n                        for (e = c.length - 1; e != -1; e--) f = c[e], g[f] = a[f] + (b[f] - a[f]) * d;\n                        return g\n                    }\n                },\n                hexColor: function(a, b) {\n                    var c = parseInt(a.slice(1), 16),\n                        d = parseInt(b.slice(1), 16),\n                        e = 255 & c,\n                        f = (255 & d) - e,\n                        g = 65280 & c,\n                        h = (65280 & d) - g,\n                        i = 16711680 & c,\n                        j = (16711680 & d) - i;\n                    return function(a) {\n                        var b = e + f * a & 255,\n                            c = g + h * a & 65280,\n                            d = i + j * a & 16711680;\n                        return \"#\" + (1 << 24 | b | c | d).toString(16).slice(1)\n                    }\n                },\n                unit: function(a, b) {\n                    var c = /(-?[0-9]*.[0-9]*)(px|em|cm|mm|in|pt|pc|%)/,\n                        d = c.exec(a),\n                        e = c.exec(b),\n                        f = e[1].indexOf(\".\"),\n                        g = f > 0 ? e[1].length - f - 1 : 0;\n                    a = +d[1];\n                    var h = +e[1] - a,\n                        i = d[2];\n                    return function(b) {\n                        return (a + h * b).toFixed(g) + i\n                    }\n                }\n            },\n            filter: {\n                outline: function(a) {\n                    var b = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology in=\"SourceAlpha\" result=\"morphedOuter\" operator=\"dilate\" radius=\"${outerRadius}\" /><feMorphology in=\"SourceAlpha\" result=\"morphedInner\" operator=\"dilate\" radius=\"${innerRadius}\" /><feComposite result=\"morphedOuterColored\" in=\"colored\" in2=\"morphedOuter\" operator=\"in\"/><feComposite operator=\"xor\" in=\"morphedOuterColored\" in2=\"morphedInner\" result=\"outline\"/><feMerge><feMergeNode in=\"outline\"/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>',\n                        c = _.isFinite(a.margin) ? a.margin : 2,\n                        d = _.isFinite(a.width) ? a.width : 1;\n                    return joint.util.template(b)({\n                        color: a.color || \"blue\",\n                        opacity: _.isFinite(a.opacity) ? a.opacity : 1,\n                        outerRadius: c + d,\n                        innerRadius: c\n                    })\n                },\n                highlight: function(a) {\n                    var b = '<filter><feFlood flood-color=\"${color}\" flood-opacity=\"${opacity}\" result=\"colored\"/><feMorphology result=\"morphed\" in=\"SourceGraphic\" operator=\"dilate\" radius=\"${width}\"/><feComposite result=\"composed\" in=\"colored\" in2=\"morphed\" operator=\"in\"/><feGaussianBlur result=\"blured\" in=\"composed\" stdDeviation=\"${blur}\"/><feBlend in=\"SourceGraphic\" in2=\"blured\" mode=\"normal\"/></filter>';\n                    return joint.util.template(b)({\n                        color: a.color || \"red\",\n                        width: _.isFinite(a.width) ? a.width : 1,\n                        blur: _.isFinite(a.blur) ? a.blur : 0,\n                        opacity: _.isFinite(a.opacity) ? a.opacity : 1\n                    })\n                },\n                blur: function(a) {\n                    var b = _.isFinite(a.x) ? a.x : 2;\n                    return joint.util.template('<filter><feGaussianBlur stdDeviation=\"${stdDeviation}\"/></filter>')({\n                        stdDeviation: _.isFinite(a.y) ? [b, a.y] : b\n                    })\n                },\n                dropShadow: function(a) {\n                    var b = \"SVGFEDropShadowElement\" in window ? '<filter><feDropShadow stdDeviation=\"${blur}\" dx=\"${dx}\" dy=\"${dy}\" flood-color=\"${color}\" flood-opacity=\"${opacity}\"/></filter>' : '<filter><feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"${blur}\"/><feOffset dx=\"${dx}\" dy=\"${dy}\" result=\"offsetblur\"/><feFlood flood-color=\"${color}\"/><feComposite in2=\"offsetblur\" operator=\"in\"/><feComponentTransfer><feFuncA type=\"linear\" slope=\"${opacity}\"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in=\"SourceGraphic\"/></feMerge></filter>';\n                    return joint.util.template(b)({\n                        dx: a.dx || 0,\n                        dy: a.dy || 0,\n                        opacity: _.isFinite(a.opacity) ? a.opacity : 1,\n                        color: a.color || \"black\",\n                        blur: _.isFinite(a.blur) ? a.blur : 4\n                    })\n                },\n                grayscale: function(a) {\n                    var b = _.isFinite(a.amount) ? a.amount : 1;\n                    return joint.util.template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${b} ${h} 0 0 0 0 0 1 0\"/></filter>')({\n                        a: .2126 + .7874 * (1 - b),\n                        b: .7152 - .7152 * (1 - b),\n                        c: .0722 - .0722 * (1 - b),\n                        d: .2126 - .2126 * (1 - b),\n                        e: .7152 + .2848 * (1 - b),\n                        f: .0722 - .0722 * (1 - b),\n                        g: .2126 - .2126 * (1 - b),\n                        h: .0722 + .9278 * (1 - b)\n                    })\n                },\n                sepia: function(a) {\n                    var b = _.isFinite(a.amount) ? a.amount : 1;\n                    return joint.util.template('<filter><feColorMatrix type=\"matrix\" values=\"${a} ${b} ${c} 0 0 ${d} ${e} ${f} 0 0 ${g} ${h} ${i} 0 0 0 0 0 1 0\"/></filter>')({\n                        a: .393 + .607 * (1 - b),\n                        b: .769 - .769 * (1 - b),\n                        c: .189 - .189 * (1 - b),\n                        d: .349 - .349 * (1 - b),\n                        e: .686 + .314 * (1 - b),\n                        f: .168 - .168 * (1 - b),\n                        g: .272 - .272 * (1 - b),\n                        h: .534 - .534 * (1 - b),\n                        i: .131 + .869 * (1 - b)\n                    })\n                },\n                saturate: function(a) {\n                    var b = _.isFinite(a.amount) ? a.amount : 1;\n                    return joint.util.template('<filter><feColorMatrix type=\"saturate\" values=\"${amount}\"/></filter>')({\n                        amount: 1 - b\n                    })\n                },\n                hueRotate: function(a) {\n                    return joint.util.template('<filter><feColorMatrix type=\"hueRotate\" values=\"${angle}\"/></filter>')({\n                        angle: a.angle || 0\n                    })\n                },\n                invert: function(a) {\n                    var b = _.isFinite(a.amount) ? a.amount : 1;\n                    return joint.util.template('<filter><feComponentTransfer><feFuncR type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncG type=\"table\" tableValues=\"${amount} ${amount2}\"/><feFuncB type=\"table\" tableValues=\"${amount} ${amount2}\"/></feComponentTransfer></filter>')({\n                        amount: b,\n                        amount2: 1 - b\n                    })\n                },\n                brightness: function(a) {\n                    return joint.util.template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\"/><feFuncG type=\"linear\" slope=\"${amount}\"/><feFuncB type=\"linear\" slope=\"${amount}\"/></feComponentTransfer></filter>')({\n                        amount: _.isFinite(a.amount) ? a.amount : 1\n                    })\n                },\n                contrast: function(a) {\n                    var b = _.isFinite(a.amount) ? a.amount : 1;\n                    return joint.util.template('<filter><feComponentTransfer><feFuncR type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncG type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/><feFuncB type=\"linear\" slope=\"${amount}\" intercept=\"${amount2}\"/></feComponentTransfer></filter>')({\n                        amount: b,\n                        amount2: .5 - b / 2\n                    })\n                }\n            },\n            format: {\n                number: function(a, b, c) {\n                    function d(a) {\n                        for (var b = a.length, d = [], e = 0, f = c.grouping[0]; b > 0 && f > 0;) d.push(a.substring(b -= f, b + f)), f = c.grouping[e = (e + 1) % c.grouping.length];\n                        return d.reverse().join(c.thousands)\n                    }\n                    c = c || {\n                        currency: [\"$\", \"\"],\n                        decimal: \".\",\n                        thousands: \",\",\n                        grouping: [3]\n                    };\n                    var e = /(?:([^{])?([<>=^]))?([+\\- ])?([$#])?(0)?(\\d+)?(,)?(\\.-?\\d+)?([a-z%])?/i,\n                        f = e.exec(a),\n                        g = f[1] || \" \",\n                        h = f[2] || \">\",\n                        i = f[3] || \"\",\n                        j = f[4] || \"\",\n                        k = f[5],\n                        l = +f[6],\n                        m = f[7],\n                        n = f[8],\n                        o = f[9],\n                        p = 1,\n                        q = \"\",\n                        r = \"\",\n                        s = !1;\n                    switch (n && (n = +n.substring(1)), (k || \"0\" === g && \"=\" === h) && (k = g = \"0\", h = \"=\", m && (l -= Math.floor((l - 1) / 4))), o) {\n                        case \"n\":\n                            m = !0, o = \"g\";\n                            break;\n                        case \"%\":\n                            p = 100, r = \"%\", o = \"f\";\n                            break;\n                        case \"p\":\n                            p = 100, r = \"%\", o = \"r\";\n                            break;\n                        case \"b\":\n                        case \"o\":\n                        case \"x\":\n                        case \"X\":\n                            \"#\" === j && (q = \"0\" + o.toLowerCase());\n                            break;\n                        case \"c\":\n                        case \"d\":\n                            s = !0, n = 0;\n                            break;\n                        case \"s\":\n                            p = -1, o = \"r\"\n                    }\n                    \"$\" === j && (q = c.currency[0], r = c.currency[1]), \"r\" != o || n || (o = \"g\"), null != n && (\"g\" == o ? n = Math.max(1, Math.min(21, n)) : \"e\" != o && \"f\" != o || (n = Math.max(0, Math.min(20, n))));\n                    var t = k && m;\n                    if (s && b % 1) return \"\";\n                    var u = b < 0 || 0 === b && 1 / b < 0 ? (b = -b, \"-\") : i,\n                        v = r;\n                    if (p < 0) {\n                        var w = this.prefix(b, n);\n                        b = w.scale(b), v = w.symbol + r\n                    } else b *= p;\n                    b = this.convert(o, b, n);\n                    var x = b.lastIndexOf(\".\"),\n                        y = x < 0 ? b : b.substring(0, x),\n                        z = x < 0 ? \"\" : c.decimal + b.substring(x + 1);\n                    !k && m && c.grouping && (y = d(y));\n                    var A = q.length + y.length + z.length + (t ? 0 : u.length),\n                        B = A < l ? new Array(A = l - A + 1).join(g) : \"\";\n                    return t && (y = d(B + y)), u += q, b = y + z, (\"<\" === h ? u + b + B : \">\" === h ? B + u + b : \"^\" === h ? B.substring(0, A >>= 1) + u + b + B.substring(A) : u + (t ? b : B + b)) + v\n                },\n                string: function(a, b) {\n                    for (var c, d = \"{\", e = !1, f = [];\n                        (c = a.indexOf(d)) !== -1;) {\n                        var g, h, i;\n                        if (g = a.slice(0, c), e) {\n                            h = g.split(\":\"), i = h.shift().split(\".\"), g = b;\n                            for (var j = 0; j < i.length; j++) g = g[i[j]];\n                            h.length && (g = this.number(h, g))\n                        }\n                        f.push(g), a = a.slice(c + 1), d = (e = !e) ? \"}\" : \"{\"\n                    }\n                    return f.push(a), f.join(\"\")\n                },\n                convert: function(a, b, c) {\n                    switch (a) {\n                        case \"b\":\n                            return b.toString(2);\n                        case \"c\":\n                            return String.fromCharCode(b);\n                        case \"o\":\n                            return b.toString(8);\n                        case \"x\":\n                            return b.toString(16);\n                        case \"X\":\n                            return b.toString(16).toUpperCase();\n                        case \"g\":\n                            return b.toPrecision(c);\n                        case \"e\":\n                            return b.toExponential(c);\n                        case \"f\":\n                            return b.toFixed(c);\n                        case \"r\":\n                            return (b = this.round(b, this.precision(b, c))).toFixed(Math.max(0, Math.min(20, this.precision(b * (1 + 1e-15), c))));\n                        default:\n                            return b + \"\"\n                    }\n                },\n                round: function(a, b) {\n                    return b ? Math.round(a * (b = Math.pow(10, b))) / b : Math.round(a)\n                },\n                precision: function(a, b) {\n                    return b - (a ? Math.ceil(Math.log(a) / Math.LN10) : 1)\n                },\n                prefix: function(a, b) {\n                    var c = _.map([\"y\", \"z\", \"a\", \"f\", \"p\", \"n\", \"\\xb5\", \"m\", \"\", \"k\", \"M\", \"G\", \"T\", \"P\", \"E\", \"Z\", \"Y\"], function(a, b) {\n                            var c = Math.pow(10, 3 * Math.abs(8 - b));\n                            return {\n                                scale: b > 8 ? function(a) {\n                                    return a / c\n                                } : function(a) {\n                                    return a * c\n                                },\n                                symbol: a\n                            }\n                        }),\n                        d = 0;\n                    return a && (a < 0 && (a *= -1), b && (a = this.round(a, this.precision(a, b))), d = 1 + Math.floor(1e-12 + Math.log(a) / Math.LN10), d = Math.max(-24, Math.min(24, 3 * Math.floor((d <= 0 ? d + 1 : d - 1) / 3)))), c[8 + d / 3]\n                }\n            },\n            template: function(a) {\n                var b = /<%= ([^ ]+) %>|\\$\\{ ?([^\\{\\} ]+) ?\\}|\\{\\{([^\\{\\} ]+)\\}\\}/g;\n                return function(c) {\n                    return c = c || {}, a.replace(b, function(a) {\n                        for (var b = Array.prototype.slice.call(arguments), d = _.find(b.slice(1, 4), function(a) {\n                                return !!a\n                            }), e = d.split(\".\"), f = c[e.shift()]; !_.isUndefined(f) && e.length;) f = f[e.shift()];\n                        return _.isUndefined(f) ? \"\" : f\n                    })\n                }\n            },\n            toggleFullScreen: function(a) {\n                function b(a, b) {\n                    for (var c = [\"webkit\", \"moz\", \"ms\", \"o\", \"\"], d = 0; d < c.length; d++) {\n                        var e = c[d],\n                            f = e ? e + b : b.substr(0, 1).toLowerCase() + b.substr(1);\n                        if (!_.isUndefined(a[f])) return _.isFunction(a[f]) ? a[f]() : a[f]\n                    }\n                }\n                a = a || document.body, b(document, \"FullscreenElement\") || b(document, \"FullScreenElement\") ? b(document, \"ExitFullscreen\") || b(document, \"CancelFullScreen\") : b(a, \"RequestFullscreen\") || b(a, \"RequestFullScreen\")\n            },\n            addClassNamePrefix: function(a) {\n                return a ? _.map(a.toString().split(\" \"), function(a) {\n                    return a.substr(0, joint.config.classNamePrefix.length) !== joint.config.classNamePrefix && (a = joint.config.classNamePrefix + a), a\n                }).join(\" \") : a\n            },\n            removeClassNamePrefix: function(a) {\n                return a ? _.map(a.toString().split(\" \"), function(a) {\n                    return a.substr(0, joint.config.classNamePrefix.length) === joint.config.classNamePrefix && (a = a.substr(joint.config.classNamePrefix.length)), a\n                }).join(\" \") : a\n            },\n            wrapWith: function(a, b, c) {\n                if (_.isString(c)) {\n                    if (!joint.util.wrappers[c]) throw new Error('Unknown wrapper: \"' + c + '\"');\n                    c = joint.util.wrappers[c]\n                }\n                if (!_.isFunction(c)) throw new Error(\"Wrapper must be a function.\");\n                _.each(b, function(b) {\n                    a[b] = c(a[b])\n                })\n            },\n            wrappers: {\n                cells: function(a) {\n                    return function() {\n                        var b = Array.prototype.slice.call(arguments),\n                            c = b.length > 0 && _.first(b) || [],\n                            d = b.length > 1 && _.last(b) || {};\n                        return _.isArray(c) || (d instanceof joint.dia.Cell ? c = b : c instanceof joint.dia.Cell && (c = b.length > 1 ? _.initial(b) : b)), d instanceof joint.dia.Cell && (d = {}), a.call(this, c, d)\n                    }\n                }\n            }\n        }\n    };\n    joint.mvc.View = Backbone.View.extend({\n            options: {},\n            theme: null,\n            themeClassNamePrefix: joint.util.addClassNamePrefix(\"theme-\"),\n            requireSetThemeOverride: !1,\n            defaultTheme: joint.config.defaultTheme,\n            constructor: function(a) {\n                Backbone.View.call(this, a)\n            },\n            initialize: function(a) {\n                this.requireSetThemeOverride = a && !!a.theme, this.options = _.extend({}, this.options, a), _.bindAll(this, \"setTheme\", \"onSetTheme\", \"remove\", \"onRemove\"), joint.mvc.views[this.cid] = this, this.setTheme(this.options.theme || this.defaultTheme), this._ensureElClassName(), this.init()\n            },\n            _ensureElement: function() {\n                var a;\n                if (this.svgElement) {\n                    if (this.el) a = _.result(this, \"el\");\n                    else {\n                        var b = _.extend({\n                            id: this.id\n                        }, _.result(this, \"attributes\"));\n                        this.className && (b.class = _.result(this, \"className\")), a = V(_.result(this, \"tagName\"), b).node\n                    }\n                    this.setElement(a, !1)\n                } else Backbone.View.prototype._ensureElement.call(this)\n            },\n            _setElement: function(a) {\n                this.svgElement ? (this.$el = a instanceof Backbone.$ ? a : Backbone.$(a), this.el = this.$el[0], this.vel = V(this.el)) : Backbone.View.prototype._setElement.call(this, a)\n            },\n            _ensureElClassName: function() {\n                var a = _.result(this, \"className\"),\n                    b = joint.util.addClassNamePrefix(a);\n                this.$el.removeClass(a), this.$el.addClass(b)\n            },\n            init: function() {},\n            onRender: function() {},\n            setTheme: function(a, b) {\n                return b = b || {}, this.theme && this.requireSetThemeOverride && !b.override ? this : (this.removeThemeClassName(), this.addThemeClassName(a), this.onSetTheme(this.theme, a), this.theme = a, this)\n            },\n            addThemeClassName: function(a) {\n                a = a || this.theme;\n                var b = this.themeClassNamePrefix + a;\n                return this.$el.addClass(b), this\n            },\n            removeThemeClassName: function(a) {\n                a = a || this.theme;\n                var b = this.themeClassNamePrefix + a;\n                return this.$el.removeClass(b), this\n            },\n            onSetTheme: function(a, b) {},\n            remove: function() {\n                return this.onRemove(), joint.mvc.views[this.cid] = null, Backbone.View.prototype.remove.apply(this, arguments), this\n            },\n            onRemove: function() {},\n            getEventNamespace: function() {\n                return \".joint-event-ns-\" + this.cid\n            }\n        }, {\n            extend: function() {\n                var a = Array.prototype.slice.call(arguments),\n                    b = a[0] && _.clone(a[0]) || {},\n                    c = a[1] && _.clone(a[1]) || {},\n                    d = b.render || this.prototype && this.prototype.render || null;\n                return b.render = function() {\n                    return d && d.apply(this, arguments), this.onRender(), this\n                }, Backbone.View.extend.call(this, b, c)\n            }\n        }), joint.dia.GraphCells = Backbone.Collection.extend({\n            cellNamespace: joint.shapes,\n            initialize: function(a, b) {\n                b.cellNamespace && (this.cellNamespace = b.cellNamespace), this.graph = b.graph\n            },\n            model: function(a, b) {\n                var c = b.collection,\n                    d = c.cellNamespace,\n                    e = \"link\" === a.type ? joint.dia.Link : joint.util.getByPath(d, a.type, \".\") || joint.dia.Element,\n                    f = new e(a, b);\n                return f.graph = c.graph, f\n            },\n            comparator: function(a) {\n                return a.get(\"z\") || 0\n            }\n        }), joint.dia.Graph = Backbone.Model.extend({\n            _batches: {},\n            initialize: function(a, b) {\n                b = b || {};\n                var c = new joint.dia.GraphCells([], {\n                    model: b.cellModel,\n                    cellNamespace: b.cellNamespace,\n                    graph: this\n                });\n                Backbone.Model.prototype.set.call(this, \"cells\", c), c.on(\"all\", this.trigger, this), this.on(\"change:z\", this._sortOnChangeZ, this), this.on(\"batch:stop\", this._onBatchStop, this), this._out = {}, this._in = {}, this._nodes = {}, this._edges = {}, c.on(\"add\", this._restructureOnAdd, this), c.on(\"remove\", this._restructureOnRemove, this), c.on(\"reset\", this._restructureOnReset, this), c.on(\"change:source\", this._restructureOnChangeSource, this), c.on(\"change:target\", this._restructureOnChangeTarget, this), c.on(\"remove\", this._removeCell, this)\n            },\n            _sortOnChangeZ: function() {\n                this.hasActiveBatch(\"to-front\") || this.hasActiveBatch(\"to-back\") || this.get(\"cells\").sort()\n            },\n            _onBatchStop: function(a) {\n                var b = a && a.batchName;\n                \"to-front\" !== b && \"to-back\" !== b || this.hasActiveBatch(b) || this.get(\"cells\").sort()\n            },\n            _restructureOnAdd: function(a) {\n                if (a.isLink()) {\n                    this._edges[a.id] = !0;\n                    var b = a.get(\"source\"),\n                        c = a.get(\"target\");\n                    b.id && ((this._out[b.id] || (this._out[b.id] = {}))[a.id] = !0), c.id && ((this._in[c.id] || (this._in[c.id] = {}))[a.id] = !0)\n                } else this._nodes[a.id] = !0\n            },\n            _restructureOnRemove: function(a) {\n                if (a.isLink()) {\n                    delete this._edges[a.id];\n                    var b = a.get(\"source\"),\n                        c = a.get(\"target\");\n                    b.id && this._out[b.id] && this._out[b.id][a.id] && delete this._out[b.id][a.id], c.id && this._in[c.id] && this._in[c.id][a.id] && delete this._in[c.id][a.id]\n                } else delete this._nodes[a.id]\n            },\n            _restructureOnReset: function(a) {\n                a = a.models, this._out = {}, this._in = {}, this._nodes = {}, this._edges = {}, _.each(a, this._restructureOnAdd, this)\n            },\n            _restructureOnChangeSource: function(a) {\n                var b = a.previous(\"source\");\n                b.id && this._out[b.id] && delete this._out[b.id][a.id];\n                var c = a.get(\"source\");\n                c.id && ((this._out[c.id] || (this._out[c.id] = {}))[a.id] = !0)\n            },\n            _restructureOnChangeTarget: function(a) {\n                var b = a.previous(\"target\");\n                b.id && this._in[b.id] && delete this._in[b.id][a.id];\n                var c = a.get(\"target\");\n                c.id && ((this._in[c.id] || (this._in[c.id] = {}))[a.id] = !0)\n            },\n            getOutboundEdges: function(a) {\n                return this._out && this._out[a] || {}\n            },\n            getInboundEdges: function(a) {\n                return this._in && this._in[a] || {}\n            },\n            toJSON: function() {\n                var a = Backbone.Model.prototype.toJSON.apply(this, arguments);\n                return a.cells = this.get(\"cells\").toJSON(), a\n            },\n            fromJSON: function(a, b) {\n                if (!a.cells) throw new Error(\"Graph JSON must contain cells array.\");\n                return this.set(a, b)\n            },\n            set: function(a, b, c) {\n                var d;\n                return \"object\" == typeof a ? (d = a, c = b) : (d = {})[a] = b, d.hasOwnProperty(\"cells\") && (this.resetCells(d.cells, c), d = _.omit(d, \"cells\")), Backbone.Model.prototype.set.call(this, d, c)\n            },\n            clear: function(a) {\n                a = _.extend({}, a, {\n                    clear: !0\n                });\n                var b = this.get(\"cells\");\n                if (0 === b.length) return this;\n                this.startBatch(\"clear\", a);\n                var c = b.sortBy(function(a) {\n                    return a.isLink() ? 1 : 2\n                });\n                do c.shift().remove(a); while (c.length > 0);\n                return this.stopBatch(\"clear\"), this\n            },\n            _prepareCell: function(a, b) {\n                var c;\n                if (a instanceof Backbone.Model ? (c = a.attributes, a.graph || b && b.dry || (a.graph = this)) : c = a, !_.isString(c.type)) throw new TypeError(\"dia.Graph: cell type must be a string.\");\n                return a\n            },\n            maxZIndex: function() {\n                var a = this.get(\"cells\").last();\n                return a ? a.get(\"z\") || 0 : 0\n            },\n            addCell: function(a, b) {\n                return _.isArray(a) ? this.addCells(a, b) : (a instanceof Backbone.Model ? a.has(\"z\") || a.set(\"z\", this.maxZIndex() + 1) : _.isUndefined(a.z) && (a.z = this.maxZIndex() + 1), this.get(\"cells\").add(this._prepareCell(a, b), b || {}), this)\n            },\n            addCells: function(a, b) {\n                return a.length && (a = _.flattenDeep(a), b.position = a.length, this.startBatch(\"add\"), _.each(a, function(a) {\n                    b.position--, this.addCell(a, b)\n                }, this), this.stopBatch(\"add\")), this\n            },\n            resetCells: function(a, b) {\n                var c = _.map(a, _.bind(this._prepareCell, this, _, b));\n                return this.get(\"cells\").reset(c, b), this\n            },\n            removeCells: function(a, b) {\n                return a.length && (this.startBatch(\"remove\"), _.invoke(a, \"remove\", b), this.stopBatch(\"remove\")), this\n            },\n            _removeCell: function(a, b, c) {\n                c = c || {}, c.clear || (c.disconnectLinks ? this.disconnectLinks(a, c) : this.removeLinks(a, c)), this.get(\"cells\").remove(a, {\n                    silent: !0\n                }), a.graph === this && (a.graph = null)\n            },\n            getCell: function(a) {\n                return this.get(\"cells\").get(a)\n            },\n            getCells: function() {\n                return this.get(\"cells\").toArray()\n            },\n            getElements: function() {\n                return _.map(this._nodes, function(a, b) {\n                    return this.getCell(b)\n                }, this)\n            },\n            getLinks: function() {\n                return _.map(this._edges, function(a, b) {\n                    return this.getCell(b)\n                }, this)\n            },\n            getFirstCell: function() {\n                return this.get(\"cells\").first()\n            },\n            getLastCell: function() {\n                return this.get(\"cells\").last()\n            },\n            getConnectedLinks: function(a, b) {\n                b = b || {};\n                var c = b.inbound,\n                    d = b.outbound;\n                _.isUndefined(c) && _.isUndefined(d) && (c = d = !0);\n                var e = [],\n                    f = {};\n                if (d && _.each(this.getOutboundEdges(a.id), function(a, b) {\n                        f[b] || (e.push(this.getCell(b)), f[b] = !0)\n                    }, this), c && _.each(this.getInboundEdges(a.id), function(a, b) {\n                        f[b] || (e.push(this.getCell(b)), f[b] = !0)\n                    }, this), b.deep) {\n                    var g = a.getEmbeddedCells({\n                            deep: !0\n                        }),\n                        h = {};\n                    _.each(g, function(a) {\n                        a.isLink() && (h[a.id] = !0)\n                    }), _.each(g, function(a) {\n                        a.isLink() || (d && _.each(this.getOutboundEdges(a.id), function(a, b) {\n                            f[b] || h[b] || (e.push(this.getCell(b)), f[b] = !0)\n                        }, this), c && _.each(this.getInboundEdges(a.id), function(a, b) {\n                            f[b] || h[b] || (e.push(this.getCell(b)), f[b] = !0)\n                        }, this))\n                    }, this)\n                }\n                return e\n            },\n            getNeighbors: function(a, b) {\n                b = b || {};\n                var c = b.inbound,\n                    d = b.outbound;\n                _.isUndefined(c) && _.isUndefined(d) && (c = d = !0);\n                var e = _.transform(this.getConnectedLinks(a, b), function(e, f) {\n                    var g = f.get(\"source\"),\n                        h = f.get(\"target\"),\n                        i = f.hasLoop(b);\n                    if (c && _.has(g, \"id\") && !e[g.id]) {\n                        var j = this.getCell(g.id);\n                        !i && (!j || j === a || b.deep && j.isEmbeddedIn(a)) || (e[g.id] = j)\n                    }\n                    if (d && _.has(h, \"id\") && !e[h.id]) {\n                        var k = this.getCell(h.id);\n                        !i && (!k || k === a || b.deep && k.isEmbeddedIn(a)) || (e[h.id] = k)\n                    }\n                }, {}, this);\n                return _.values(e)\n            },\n            getCommonAncestor: function() {\n                var a = _.map(arguments, function(a) {\n                    for (var b = [], c = a.get(\"parent\"); c;) b.push(c), c = this.getCell(c).get(\"parent\");\n                    return b\n                }, this);\n                a = _.sortBy(a, \"length\");\n                var b = _.find(a.shift(), function(b) {\n                    return _.every(a, function(a) {\n                        return _.contains(a, b)\n                    })\n                });\n                return this.getCell(b)\n            },\n            getSuccessors: function(a, b) {\n                b = b || {};\n                var c = [];\n                return this.search(a, function(b) {\n                    b !== a && c.push(b)\n                }, _.extend({}, b, {\n                    outbound: !0\n                })), c\n            },\n            cloneCells: function(a) {\n                a = _.unique(a);\n                var b = _.transform(a, function(a, b) {\n                    a[b.id] = b.clone()\n                }, {});\n                return _.each(a, function(a) {\n                    var c = b[a.id];\n                    if (c.isLink()) {\n                        var d = c.get(\"source\"),\n                            e = c.get(\"target\");\n                        d.id && b[d.id] && c.prop(\"source/id\", b[d.id].id), e.id && b[e.id] && c.prop(\"target/id\", b[e.id].id)\n                    }\n                    var f = a.get(\"parent\");\n                    f && b[f] && c.set(\"parent\", b[f].id);\n                    var g = _.reduce(a.get(\"embeds\"), function(a, c) {\n                        return b[c] && a.push(b[c].id), a\n                    }, []);\n                    _.isEmpty(g) || c.set(\"embeds\", g)\n                }), b\n            },\n            cloneSubgraph: function(a, b) {\n                var c = this.getSubgraph(a, b);\n                return this.cloneCells(c)\n            },\n            getSubgraph: function(a, b) {\n                b = b || {};\n                var c = [],\n                    d = {},\n                    e = [],\n                    f = [];\n                return _.each(a, function(a) {\n                    if (d[a.id] || (c.push(a), d[a.id] = a, a.isLink() ? f.push(a) : e.push(a)), b.deep) {\n                        var g = a.getEmbeddedCells({\n                            deep: !0\n                        });\n                        _.each(g, function(a) {\n                            d[a.id] || (c.push(a), d[a.id] = a, a.isLink() ? f.push(a) : e.push(a))\n                        })\n                    }\n                }), _.each(f, function(a) {\n                    var b = a.get(\"source\"),\n                        f = a.get(\"target\");\n                    if (b.id && !d[b.id]) {\n                        var g = this.getCell(b.id);\n                        c.push(g), d[g.id] = g, e.push(g)\n                    }\n                    if (f.id && !d[f.id]) {\n                        var h = this.getCell(f.id);\n                        c.push(this.getCell(f.id)), d[h.id] = h, e.push(h)\n                    }\n                }, this), _.each(e, function(a) {\n                    var e = this.getConnectedLinks(a, b);\n                    _.each(e, function(a) {\n                        var b = a.get(\"source\"),\n                            e = a.get(\"target\");\n                        !d[a.id] && b.id && d[b.id] && e.id && d[e.id] && (c.push(a), d[a.id] = a)\n                    })\n                }, this), c\n            },\n            getPredecessors: function(a, b) {\n                b = b || {};\n                var c = [];\n                return this.search(a, function(b) {\n                    b !== a && c.push(b)\n                }, _.extend({}, b, {\n                    inbound: !0\n                })), c\n            },\n            search: function(a, b, c) {\n                c = c || {}, c.breadthFirst ? this.bfs(a, b, c) : this.dfs(a, b, c)\n            },\n            bfs: function(a, b, c) {\n                c = c || {};\n                var d = {},\n                    e = {},\n                    f = [];\n                for (f.push(a), e[a.id] = 0; f.length > 0;) {\n                    var g = f.shift();\n                    if (!d[g.id]) {\n                        if (d[g.id] = !0, b(g, e[g.id]) === !1) return;\n                        _.each(this.getNeighbors(g, c), function(a) {\n                            e[a.id] = e[g.id] + 1, f.push(a)\n                        })\n                    }\n                }\n            },\n            dfs: function(a, b, c, d, e) {\n                c = c || {};\n                var f = d || {},\n                    g = e || 0;\n                b(a, g) !== !1 && (f[a.id] = !0, _.each(this.getNeighbors(a, c), function(a) {\n                    f[a.id] || this.dfs(a, b, c, f, g + 1)\n                }, this))\n            },\n            getSources: function() {\n                var a = [];\n                return _.each(this._nodes, function(b, c) {\n                    this._in[c] && !_.isEmpty(this._in[c]) || a.push(this.getCell(c))\n                }, this), a\n            },\n            getSinks: function() {\n                var a = [];\n                return _.each(this._nodes, function(b, c) {\n                    this._out[c] && !_.isEmpty(this._out[c]) || a.push(this.getCell(c))\n                }, this), a\n            },\n            isSource: function(a) {\n                return !this._in[a.id] || _.isEmpty(this._in[a.id])\n            },\n            isSink: function(a) {\n                return !this._out[a.id] || _.isEmpty(this._out[a.id])\n            },\n            isSuccessor: function(a, b) {\n                var c = !1;\n                return this.search(a, function(d) {\n                    if (d === b && d !== a) return c = !0, !1\n                }, {\n                    outbound: !0\n                }), c\n            },\n            isPredecessor: function(a, b) {\n                var c = !1;\n                return this.search(a, function(d) {\n                    if (d === b && d !== a) return c = !0, !1\n                }, {\n                    inbound: !0\n                }), c\n            },\n            isNeighbor: function(a, b, c) {\n                c = c || {};\n                var d = c.inbound,\n                    e = c.outbound;\n                _.isUndefined(d) && _.isUndefined(e) && (d = e = !0);\n                var f = !1;\n                return _.each(this.getConnectedLinks(a, c), function(a) {\n                    var c = a.get(\"source\"),\n                        g = a.get(\"target\");\n                    return d && _.has(c, \"id\") && c.id === b.id ? (f = !0, !1) : e && _.has(g, \"id\") && g.id === b.id ? (f = !0, !1) : void 0\n                }), f\n            },\n            disconnectLinks: function(a, b) {\n                _.each(this.getConnectedLinks(a), function(c) {\n                    c.set(c.get(\"source\").id === a.id ? \"source\" : \"target\", g.point(0, 0), b)\n                })\n            },\n            removeLinks: function(a, b) {\n                _.invoke(this.getConnectedLinks(a), \"remove\", b)\n            },\n            findModelsFromPoint: function(a) {\n                return _.filter(this.getElements(), function(b) {\n                    return b.getBBox().containsPoint(a)\n                })\n            },\n            findModelsInArea: function(a, b) {\n                a = g.rect(a), b = _.defaults(b || {}, {\n                    strict: !1\n                });\n                var c = b.strict ? \"containsRect\" : \"intersect\";\n                return _.filter(this.getElements(), function(b) {\n                    return a[c](b.getBBox())\n                })\n            },\n            findModelsUnderElement: function(a, b) {\n                b = _.defaults(b || {}, {\n                    searchBy: \"bbox\"\n                });\n                var c = a.getBBox(),\n                    d = \"bbox\" == b.searchBy ? this.findModelsInArea(c) : this.findModelsFromPoint(c[b.searchBy]());\n                return _.reject(d, function(b) {\n                    return a.id == b.id || b.isEmbeddedIn(a)\n                })\n            },\n            getBBox: function(a, b) {\n                return this.getCellsBBox(a || this.getElements(), b)\n            },\n            getCellsBBox: function(a, b) {\n                return _.reduce(a, function(a, c) {\n                    return c.isLink() ? a : a ? a.union(c.getBBox(b)) : c.getBBox(b)\n                }, null)\n            },\n            translate: function(a, b, c) {\n                var d = _.reject(this.getCells(), function(a) {\n                    return a.isEmbedded()\n                });\n                _.invoke(d, \"translate\", a, b, c)\n            },\n            resize: function(a, b, c) {\n                return this.resizeCells(a, b, this.getCells(), c)\n            },\n            resizeCells: function(a, b, c, d) {\n                var e = this.getCellsBBox(c);\n                if (e) {\n                    var f = Math.max(a / e.width, 0),\n                        g = Math.max(b / e.height, 0);\n                    _.invoke(c, \"scale\", f, g, e.origin(), d)\n                }\n                return this\n            },\n            startBatch: function(a, b) {\n                return b = b || {}, this._batches[a] = (this._batches[a] || 0) + 1, this.trigger(\"batch:start\", _.extend({}, b, {\n                    batchName: a\n                }))\n            },\n            stopBatch: function(a, b) {\n                return b = b || {}, this._batches[a] = (this._batches[a] || 0) - 1, this.trigger(\"batch:stop\", _.extend({}, b, {\n                    batchName: a\n                }))\n            },\n            hasActiveBatch: function(a) {\n                return a ? this._batches[a] : _.any(this._batches, function(a) {\n                    return a > 0\n                })\n            }\n        }), joint.util.wrapWith(joint.dia.Graph.prototype, [\"resetCells\", \"addCells\", \"removeCells\"], \"cells\"),\n        function(a, b, c, d) {\n            function e(a) {\n                return b.isString(a) && \"%\" === a.slice(-1)\n            }\n\n            function f(a, b) {\n                return function(c, d) {\n                    var f = e(c);\n                    c = parseFloat(c), f && (c /= 100);\n                    var g = {};\n                    if (isFinite(c)) {\n                        var h = f || c >= 0 && c <= 1 ? c * d[b] : Math.max(c + d[b], 0);\n                        g[a] = h\n                    }\n                    return g\n                }\n            }\n\n            function g(a, b, d) {\n                return function(f, g) {\n                    var h = e(f);\n                    f = parseFloat(f), h && (f /= 100);\n                    var i;\n                    if (isFinite(f)) {\n                        var j = g[d]();\n                        i = h || f > 0 && f < 1 ? j[a] + g[b] * f : j[a] + f\n                    }\n                    var k = c.Point();\n                    return k[a] = i || 0, k\n                }\n            }\n\n            function h(a, b, d) {\n                return function(f, g) {\n                    var h;\n                    h = \"middle\" === f ? g[b] / 2 : f === d ? g[b] : isFinite(f) ? f > -1 && f < 1 ? -g[b] * f : -f : e(f) ? g[b] * parseFloat(f) / 100 : 0;\n                    var i = c.Point();\n                    return i[a] = -(g[a] + h), i\n                }\n            }\n            var i = a.dia.attributes = {\n                xlinkHref: {\n                    set: \"xlink:href\"\n                },\n                xmlSpace: {\n                    set: \"xml:space\"\n                },\n                filter: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return \"url(#\" + this.paper.defineFilter(a) + \")\"\n                    }\n                },\n                fill: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return \"url(#\" + this.paper.defineGradient(a) + \")\"\n                    }\n                },\n                stroke: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return \"url(#\" + this.paper.defineGradient(a) + \")\"\n                    }\n                },\n                sourceMarker: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return {\n                            \"marker-start\": \"url(#\" + this.paper.defineMarker(a) + \")\"\n                        }\n                    }\n                },\n                targetMarker: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return a = b.assign({\n                            transform: \"rotate(180)\"\n                        }, a), {\n                            \"marker-end\": \"url(#\" + this.paper.defineMarker(a) + \")\"\n                        }\n                    }\n                },\n                vertexMarker: {\n                    qualify: b.isPlainObject,\n                    set: function(a) {\n                        return {\n                            \"marker-mid\": \"url(#\" + this.paper.defineMarker(a) + \")\"\n                        }\n                    }\n                },\n                text: {\n                    set: function(a, c, e, f) {\n                        var g = d(e),\n                            h = \"joint-text\",\n                            i = g.data(h),\n                            j = b.pick(f, \"lineHeight\", \"annotations\", \"textPath\"),\n                            k = j.fontSize = f[\"font-size\"] || f.fontSize,\n                            l = JSON.stringify([a, j]);\n                        void 0 !== i && i === l || (k && e.setAttribute(\"font-size\", k), V(e).text(\"\" + a, j), g.data(h, l))\n                    }\n                },\n                textWrap: {\n                    qualify: b.isPlainObject,\n                    set: function(b, c, d, f) {\n                        var g = b.width || 0;\n                        e(g) ? c.width *= parseFloat(g) / 100 : g <= 0 ? c.width += g : c.width = g;\n                        var h = b.height || 0;\n                        e(h) ? c.height *= parseFloat(h) / 100 : h <= 0 ? c.height += h : c.height = h;\n                        var i = a.util.breakText(\"\" + b.text, c, {\n                            \"font-weight\": f[\"font-weight\"] || f.fontWeight,\n                            \"font-size\": f[\"font-size\"] || f.fontSize,\n                            \"font-family\": f[\"font-family\"] || f.fontFamily\n                        }, {\n                            svgDocument: this.paper.svg\n                        });\n                        V(d).text(i)\n                    }\n                },\n                lineHeight: {\n                    qualify: function(a, b, c) {\n                        return void 0 !== c.text\n                    }\n                },\n                textPath: {\n                    qualify: function(a, b, c) {\n                        return void 0 !== c.text\n                    }\n                },\n                annotations: {\n                    qualify: function(a, b, c) {\n                        return void 0 !== c.text\n                    }\n                },\n                port: {\n                    set: function(a) {\n                        return null === a || void 0 === a.id ? a : a.id\n                    }\n                },\n                style: {\n                    qualify: b.isPlainObject,\n                    set: function(a, b, c) {\n                        d(c).css(a)\n                    }\n                },\n                html: {\n                    set: function(a, b, c) {\n                        d(c).html(a + \"\")\n                    }\n                },\n                ref: {},\n                refX: {\n                    position: g(\"x\", \"width\", \"origin\")\n                },\n                refY: {\n                    position: g(\"y\", \"height\", \"origin\")\n                },\n                refDx: {\n                    position: g(\"x\", \"width\", \"corner\")\n                },\n                refDy: {\n                    position: g(\"y\", \"height\", \"corner\")\n                },\n                refWidth: {\n                    set: f(\"width\", \"width\")\n                },\n                refHeight: {\n                    set: f(\"height\", \"height\")\n                },\n                refRx: {\n                    set: f(\"rx\", \"width\")\n                },\n                refRy: {\n                    set: f(\"ry\", \"height\")\n                },\n                refCx: {\n                    set: f(\"cx\", \"width\")\n                },\n                refCy: {\n                    set: f(\"cy\", \"height\")\n                },\n                xAlignment: {\n                    offset: h(\"x\", \"width\", \"right\")\n                },\n                yAlignment: {\n                    offset: h(\"y\", \"height\", \"bottom\")\n                }\n            };\n            i.refX2 = i.refX, i.refY2 = i.refY, i[\"ref-x\"] = i.refX, i[\"ref-y\"] = i.refY, i[\"ref-dy\"] = i.refDy, i[\"ref-dx\"] = i.refDx, i[\"ref-width\"] = i.refWidth, i[\"ref-height\"] = i.refHeight, i[\"x-alignment\"] = i.xAlignment, i[\"y-alignment\"] = i.yAlignment\n        }(joint, _, g, $), joint.dia.Cell = Backbone.Model.extend({\n            constructor: function(a, b) {\n                var c, d = a || {};\n                this.cid = _.uniqueId(\"c\"), this.attributes = {}, b && b.collection && (this.collection = b.collection), b && b.parse && (d = this.parse(d, b) || {}), (c = _.result(this, \"defaults\")) && (d = _.merge({}, c, d)), this.set(d, b), this.changed = {}, this.initialize.apply(this, arguments)\n            },\n            translate: function(a, b, c) {\n                throw new Error(\"Must define a translate() method.\")\n            },\n            toJSON: function() {\n                var a = this.constructor.prototype.defaults.attrs || {},\n                    b = this.attributes.attrs,\n                    c = {};\n                _.each(b, function(b, d) {\n                    var e = a[d];\n                    _.each(b, function(a, b) {\n                        _.isObject(a) && !_.isArray(a) ? _.each(a, function(a, f) {\n                            e && e[b] && _.isEqual(e[b][f], a) || (c[d] = c[d] || {}, (c[d][b] || (c[d][b] = {}))[f] = a)\n                        }) : e && _.isEqual(e[b], a) || (c[d] = c[d] || {}, c[d][b] = a)\n                    })\n                });\n                var d = _.cloneDeep(_.omit(this.attributes, \"attrs\"));\n                return d.attrs = c, d\n            },\n            initialize: function(a) {\n                a && a.id || this.set(\"id\", joint.util.uuid(), {\n                    silent: !0\n                }), this._transitionIds = {}, this.processPorts(), this.on(\"change:attrs\", this.processPorts, this)\n            },\n            processPorts: function() {\n                var a = this.ports,\n                    b = {};\n                _.each(this.get(\"attrs\"), function(a, c) {\n                    a && a.port && (_.isUndefined(a.port.id) ? b[a.port] = {\n                        id: a.port\n                    } : b[a.port.id] = a.port)\n                });\n                var c = {};\n                if (_.each(a, function(a, d) {\n                        b[d] || (c[d] = !0)\n                    }), this.graph && !_.isEmpty(c)) {\n                    var d = this.graph.getConnectedLinks(this, {\n                        inbound: !0\n                    });\n                    _.each(d, function(a) {\n                        c[a.get(\"target\").port] && a.remove()\n                    });\n                    var e = this.graph.getConnectedLinks(this, {\n                        outbound: !0\n                    });\n                    _.each(e, function(a) {\n                        c[a.get(\"source\").port] && a.remove()\n                    })\n                }\n                this.ports = b\n            },\n            remove: function(a) {\n                a = a || {};\n                var b = this.graph;\n                b && b.startBatch(\"remove\");\n                var c = this.get(\"parent\");\n                if (c) {\n                    var d = b && b.getCell(c);\n                    d.unembed(this)\n                }\n                return _.invoke(this.getEmbeddedCells(), \"remove\", a), this.trigger(\"remove\", this, this.collection, a), b && b.stopBatch(\"remove\"), this\n            },\n            toFront: function(a) {\n                if (this.graph) {\n                    a = a || {};\n                    var b = (this.graph.getLastCell().get(\"z\") || 0) + 1;\n                    if (this.startBatch(\"to-front\").set(\"z\", b, a), a.deep) {\n                        var c = this.getEmbeddedCells({\n                            deep: !0,\n                            breadthFirst: !0\n                        });\n                        _.each(c, function(c) {\n                            c.set(\"z\", ++b, a)\n                        })\n                    }\n                    this.stopBatch(\"to-front\")\n                }\n                return this\n            },\n            toBack: function(a) {\n                if (this.graph) {\n                    a = a || {};\n                    var b = (this.graph.getFirstCell().get(\"z\") || 0) - 1;\n                    if (this.startBatch(\"to-back\"), a.deep) {\n                        var c = this.getEmbeddedCells({\n                            deep: !0,\n                            breadthFirst: !0\n                        });\n                        _.eachRight(c, function(c) {\n                            c.set(\"z\", b--, a)\n                        })\n                    }\n                    this.set(\"z\", b, a).stopBatch(\"to-back\")\n                }\n                return this\n            },\n            embed: function(a, b) {\n                if (this === a || this.isEmbeddedIn(a)) throw new Error(\"Recursive embedding not allowed.\");\n                this.startBatch(\"embed\");\n                var c = _.clone(this.get(\"embeds\") || []);\n                return c[a.isLink() ? \"unshift\" : \"push\"](a.id), a.set(\"parent\", this.id, b), this.set(\"embeds\", _.uniq(c), b), this.stopBatch(\"embed\"), this\n            },\n            unembed: function(a, b) {\n                return this.startBatch(\"unembed\"), a.unset(\"parent\", b), this.set(\"embeds\", _.without(this.get(\"embeds\"), a.id), b), this.stopBatch(\"unembed\"), this\n            },\n            getAncestors: function() {\n                var a = [],\n                    b = this.get(\"parent\");\n                if (!this.graph) return a;\n                for (; void 0 !== b;) {\n                    var c = this.graph.getCell(b);\n                    if (void 0 === c) break;\n                    a.push(c), b = c.get(\"parent\")\n                }\n                return a\n            },\n            getEmbeddedCells: function(a) {\n                if (a = a || {}, this.graph) {\n                    var b;\n                    if (a.deep)\n                        if (a.breadthFirst) {\n                            b = [];\n                            for (var c = this.getEmbeddedCells(); c.length > 0;) {\n                                var d = c.shift();\n                                b.push(d), c.push.apply(c, d.getEmbeddedCells())\n                            }\n                        } else b = this.getEmbeddedCells(), _.each(b, function(c) {\n                            b.push.apply(b, c.getEmbeddedCells(a))\n                        });\n                    else b = _.map(this.get(\"embeds\"), this.graph.getCell, this.graph);\n                    return b\n                }\n                return []\n            },\n            isEmbeddedIn: function(a, b) {\n                var c = _.isString(a) ? a : a.id,\n                    d = this.get(\"parent\");\n                if (b = _.defaults({\n                        deep: !0\n                    }, b), this.graph && b.deep) {\n                    for (; d;) {\n                        if (d === c) return !0;\n                        d = this.graph.getCell(d).get(\"parent\")\n                    }\n                    return !1\n                }\n                return d === c\n            },\n            isEmbedded: function() {\n                return !!this.get(\"parent\")\n            },\n            clone: function(a) {\n                if (a = a || {}, a.deep) return _.values(joint.dia.Graph.prototype.cloneCells.call(null, [this].concat(this.getEmbeddedCells({\n                    deep: !0\n                }))));\n                var b = Backbone.Model.prototype.clone.apply(this, arguments);\n                return b.set(\"id\", joint.util.uuid()), b.unset(\"embeds\"), b.unset(\"parent\"), b\n            },\n            prop: function(a, b, c) {\n                var d = \"/\",\n                    e = _.isString(a);\n                if (e || _.isArray(a)) {\n                    if (arguments.length > 1) {\n                        var f, g;\n                        e ? (f = a, g = f.split(\"/\")) : (f = a.join(d), g = a.slice());\n                        var h = g[0],\n                            i = g.length;\n                        if (c = c || {}, c.propertyPath = f, c.propertyValue = b, c.propertyPathArray = g, 1 === i) return this.set(h, b, c);\n                        for (var j = {}, k = j, l = h, m = 1; m < i; m++) {\n                            var n = g[m],\n                                o = _.isFinite(e ? Number(n) : n);\n                            k = k[l] = o ? [] : {}, l = n\n                        }\n                        j = joint.util.setByPath(j, g, b, \"/\");\n                        var p = _.merge({}, this.attributes);\n                        c.rewrite && joint.util.unsetByPath(p, f, \"/\");\n                        var q = _.merge(p, j);\n                        return this.set(h, q[h], c)\n                    }\n                    return joint.util.getByPath(this.attributes, a, d)\n                }\n                return this.set(_.merge({}, this.attributes, a), b)\n            },\n            removeProp: function(a, b) {\n                b = b || {}, b.dirty = !0;\n                var c = _.isArray(a) ? a : a.split(\"/\");\n                if (1 === c.length) return this.unset(a, b);\n                var d = c[0],\n                    e = c.slice(1),\n                    f = _.merge({}, this.get(d));\n                return joint.util.unsetByPath(f, e, \"/\"), this.set(d, f, b)\n            },\n            attr: function(a, b, c) {\n                var d = Array.prototype.slice.call(arguments);\n                return 0 === d.length ? this.get(\"attrs\") : (_.isArray(a) ? d[0] = [\"attrs\"].concat(a) : _.isString(a) ? d[0] = \"attrs/\" + a : d[0] = {\n                    attrs: a\n                }, this.prop.apply(this, d))\n            },\n            removeAttr: function(a, b) {\n                return _.isArray(a) ? this.removeProp([\"attrs\"].concat(a)) : this.removeProp(\"attrs/\" + a, b)\n            },\n            transition: function(a, b, c, d) {\n                d = d || \"/\";\n                var e = {\n                    duration: 100,\n                    delay: 10,\n                    timingFunction: joint.util.timing.linear,\n                    valueFunction: joint.util.interpolate.number\n                };\n                c = _.extend(e, c);\n                var f, g = 0,\n                    h = _.bind(function(b) {\n                        var d, e, i;\n                        g = g || b, b -= g, e = b / c.duration, e < 1 ? this._transitionIds[a] = d = joint.util.nextFrame(h) : (e = 1, delete this._transitionIds[a]), i = f(c.timingFunction(e)), c.transitionId = d, this.prop(a, i, c), d || this.trigger(\"transition:end\", this, a)\n                    }, this),\n                    i = _.bind(function(e) {\n                        this.stopTransitions(a), f = c.valueFunction(joint.util.getByPath(this.attributes, a, d), b), this._transitionIds[a] = joint.util.nextFrame(e), this.trigger(\"transition:start\", this, a)\n                    }, this);\n                return _.delay(i, c.delay, h)\n            },\n            getTransitions: function() {\n                return _.keys(this._transitionIds)\n            },\n            stopTransitions: function(a, b) {\n                b = b || \"/\";\n                var c = a && a.split(b);\n                return _(this._transitionIds).keys().filter(c && function(a) {\n                    return _.isEqual(c, a.split(b).slice(0, c.length))\n                }).each(function(a) {\n                    joint.util.cancelFrame(this._transitionIds[a]), delete this._transitionIds[a], this.trigger(\"transition:end\", this, a)\n                }, this), this\n            },\n            addTo: function(a, b) {\n                return a.addCell(this, b), this\n            },\n            findView: function(a) {\n                return a.findViewByModel(this)\n            },\n            isElement: function() {\n                return !1\n            },\n            isLink: function() {\n                return !1\n            },\n            startBatch: function(a, b) {\n                return this.graph && this.graph.startBatch(a, _.extend({}, b, {\n                    cell: this\n                })), this\n            },\n            stopBatch: function(a, b) {\n                return this.graph && this.graph.stopBatch(a, _.extend({}, b, {\n                    cell: this\n                })), this\n            }\n        }, {\n            getAttributeDefinition: function(a) {\n                var b = this.attributes,\n                    c = joint.dia.attributes;\n                return b && b[a] || c[a]\n            },\n            define: function(a, b, c, d) {\n                c = _.assign({\n                    defaults: _.defaultsDeep({\n                        type: a\n                    }, b, this.prototype.defaults)\n                }, c);\n                var e = this.extend(c, d);\n                return joint.util.setByPath(joint.shapes, a, e, \".\"), e\n            }\n        }), joint.dia.CellView = joint.mvc.View.extend({\n            tagName: \"g\",\n            svgElement: !0,\n            className: function() {\n                var a = [\"cell\"],\n                    b = this.model.get(\"type\");\n                return b && _.each(b.toLowerCase().split(\".\"), function(b, c, d) {\n                    a.push(\"type-\" + d.slice(0, c + 1).join(\"-\"))\n                }), a.join(\" \")\n            },\n            attributes: function() {\n                return {\n                    \"model-id\": this.model.id\n                }\n            },\n            constructor: function(a) {\n                a.id = a.id || joint.util.guid(this), joint.mvc.View.call(this, a)\n            },\n            init: function() {\n                _.bindAll(this, \"remove\", \"update\"), this.$el.data(\"view\", this), this.$el.attr(\"data-type\", this.model.get(\"type\")), this.listenTo(this.model, \"change:attrs\", this.onChangeAttrs)\n            },\n            onChangeAttrs: function(a, b, c) {\n                return c.dirty ? this.render() : this.update(a, b, c)\n            },\n            can: function(a) {\n                var b = _.isFunction(this.options.interactive) ? this.options.interactive(this) : this.options.interactive;\n                return _.isObject(b) && b[a] !== !1 || _.isBoolean(b) && b !== !1\n            },\n            findBySelector: function(a, b) {\n                var c = $(b || this.el);\n                return \".\" === a ? c : c.find(a)\n            },\n            notify: function(a) {\n                if (this.paper) {\n                    var b = Array.prototype.slice.call(arguments, 1);\n                    this.trigger.apply(this, [a].concat(b)), this.paper.trigger.apply(this.paper, [a, this].concat(b))\n                }\n            },\n            getStrokeBBox: function(a) {\n                var b = !!a;\n                a = a || this.el;\n                var c, d = V(a).bbox(!1, this.paper.viewport);\n                return c = b ? V(a).attr(\"stroke-width\") : this.model.attr(\"rect/stroke-width\") || this.model.attr(\"circle/stroke-width\") || this.model.attr(\"ellipse/stroke-width\") || this.model.attr(\"path/stroke-width\"), c = parseFloat(c) || 0, g.rect(d).moveAndExpand({\n                    x: -c / 2,\n                    y: -c / 2,\n                    width: c,\n                    height: c\n                })\n            },\n            getBBox: function() {\n                return g.rect(this.vel.bbox())\n            },\n            highlight: function(a, b) {\n                return a = a ? this.$(a)[0] || this.el : this.el, b = b || {}, b.partial = a !== this.el, this.notify(\"cell:highlight\", a, b), this\n            },\n            unhighlight: function(a, b) {\n                return a = a ? this.$(a)[0] || this.el : this.el, b = b || {}, b.partial = a != this.el, this.notify(\"cell:unhighlight\", a, b), this\n            },\n            findMagnet: function(a) {\n                var b = this.$(a),\n                    c = this.$el;\n                0 === b.length && (b = c);\n                do {\n                    var d = b.attr(\"magnet\");\n                    if ((d || b.is(c)) && \"false\" !== d) return b[0];\n                    b = b.parent()\n                } while (b.length > 0)\n            },\n            getSelector: function(a, b) {\n                if (a === this.el) return b;\n                var c;\n                if (a) {\n                    var d = V(a).index() + 1;\n                    c = a.tagName + \":nth-child(\" + d + \")\", b && (c += \" > \" + b), c = this.getSelector(a.parentNode, c)\n                }\n                return c\n            },\n            getAttributeDefinition: function(a) {\n                return this.model.constructor.getAttributeDefinition(a)\n            },\n            setNodeAttributes: function(a, b) {\n                _.isEmpty(b) || (a instanceof SVGElement ? V(a).attr(b) : $(a).attr(b))\n            },\n            processNodeAttributes: function(a, b) {\n                var c, d, e, f, g, h, i, j, k, l = [];\n                for (c in b) b.hasOwnProperty(c) && (d = b[c], e = this.getAttributeDefinition(c), !e || _.isFunction(e.qualify) && !e.qualify.call(this, d, a, b) ? (h || (h = {}), h[joint.util.toKebabCase(c)] = d) : (_.isString(e.set) && (h || (h = {}), h[e.set] = d), null !== d && l.push(c, e)));\n                for (f = 0, g = l.length; f < g; f += 2) c = l[f], e = l[f + 1], d = b[c], _.isFunction(e.set) && (i || (i = {}), i[c] = d), _.isFunction(e.position) && (j || (j = {}), j[c] = d), _.isFunction(e.offset) && (k || (k = {}), k[c] = d);\n                return {\n                    raw: b,\n                    normal: h,\n                    set: i,\n                    position: j,\n                    offset: k\n                }\n            },\n            updateRelativeAttributes: function(a, b, c, d) {\n                d || (d = {});\n                var e, f, h, i = b.raw || {},\n                    j = b.normal || {},\n                    k = b.set,\n                    l = b.position,\n                    m = b.offset;\n                for (e in k) {\n                    f = k[e], h = this.getAttributeDefinition(e);\n                    var n = h.set.call(this, f, c.clone(), a, i);\n                    _.isObject(n) ? _.extend(j, n) : void 0 !== n && (j[e] = n)\n                }\n                if (a instanceof HTMLElement) return void this.setNodeAttributes(a, j);\n                var o = j.transform || \"\",\n                    p = V.transformStringToMatrix(o),\n                    q = g.Point(p.e, p.f);\n                o && (j = _.omit(j, \"transform\"), p.e = p.f = 0);\n                var r, s, t;\n                if (l || m) {\n                    var u = this.getNodeScale(a, d.scalableNode);\n                    r = u.sx, s = u.sy\n                }\n                for (e in l) f = l[e], h = this.getAttributeDefinition(e), t = h.position.call(this, f, c.clone(), a, i), t && q.offset(g.Point(t).scale(r, s));\n                if (this.setNodeAttributes(a, j), m) {\n                    var v = a.getBoundingClientRect();\n                    if (v.width > 0 && v.height > 0) {\n                        var w = V.transformRect(a.getBBox(), p).scale(1 / r, 1 / s);\n                        for (e in m) f = m[e], h = this.getAttributeDefinition(e), t = h.offset.call(this, f, w, a, i), t && q.offset(g.Point(t).scale(r, s))\n                    }\n                }\n                q.round(1), p.e = q.x, p.f = q.y, a.setAttribute(\"transform\", V.matrixToTransformString(p))\n            },\n            getNodeScale: function(a, b) {\n                var c, d;\n                if (b && b.contains(a)) {\n                    var e = b.scale();\n                    c = 1 / e.sx, d = 1 / e.sy\n                } else c = 1, d = 1;\n                return {\n                    sx: c,\n                    sy: d\n                }\n            },\n            findNodesAttributes: function(a, b, c) {\n                var d = {};\n                for (var e in a)\n                    if (a.hasOwnProperty(e))\n                        for (var f = c[e] = this.findBySelector(e, b), g = 0, h = f.length; g < h; g++) {\n                            var i = f[g],\n                                j = V.ensureId(i),\n                                k = a[e],\n                                l = d[j];\n                            l ? (l.merged || (l.merged = !0, l.attributes = _.cloneDeep(l.attributes)), _.merge(l.attributes, k)) : d[j] = {\n                                attributes: k,\n                                node: i,\n                                merged: !1\n                            }\n                        }\n                    return d\n            },\n            updateDOMSubtreeAttributes: function(a, b, c) {\n                c || (c = {}), c.rootBBox || (c.rootBBox = g.Rect());\n                var d, e, f, h, i, j = {},\n                    k = {},\n                    l = [],\n                    m = c.roAttributes,\n                    n = this.findNodesAttributes(m || b, a, j),\n                    o = m ? o = this.findNodesAttributes(b, a, j) : n;\n                for (var p in n)\n                    if (h = n[p], f = h.attributes, e = h.node, i = this.processNodeAttributes(e, f), i.set || i.position || i.offset) {\n                        var q, r = o[p] && o[p].attributes,\n                            s = r && void 0 === f.ref ? r.ref : f.ref;\n                        if (s) {\n                            if (q = (j[s] || this.findBySelector(s, a))[0], !q) throw new Error('dia.ElementView: \"' + s + '\" reference does not exists.')\n                        } else q = null;\n                        d = {\n                            node: e,\n                            refNode: q,\n                            processedAttributes: i,\n                            allAttributes: r\n                        };\n                        var t = _.findIndex(l, {\n                            refNode: e\n                        });\n                        t > -1 ? l.splice(t, 0, d) : l.push(d)\n                    } else this.setNodeAttributes(e, i.normal);\n                for (var u = 0, v = l.length; u < v; u++) {\n                    d = l[u], e = d.node, q = d.refNode;\n                    var w = q ? V.ensureId(q) : \"\",\n                        x = k[w];\n                    x || (x = k[w] = q ? V(q).bbox(!1, c.rotatableNode || a) : c.rootBBox), m ? (i = this.processNodeAttributes(e, d.allAttributes), this.mergeProcessedAttributes(i, d.processedAttributes)) : i = d.processedAttributes, this.updateRelativeAttributes(e, i, x, c)\n                }\n            },\n            mergeProcessedAttributes: function(a, b) {\n                a.set || (a.set = {}), a.position || (a.position = {}), a.offset || (a.offset = {}), _.extend(a.set, b.set), _.extend(a.position, b.position), _.extend(a.offset, b.offset);\n                var c = a.normal && a.normal.transform;\n                void 0 !== c && b.normal && (b.normal.transform = c), a.normal = b.normal\n            },\n            pointerdblclick: function(a, b, c) {\n                this.notify(\"cell:pointerdblclick\", a, b, c)\n            },\n            pointerclick: function(a, b, c) {\n                this.notify(\"cell:pointerclick\", a, b, c)\n            },\n            pointerdown: function(a, b, c) {\n                this.model.graph && (this.model.startBatch(\"pointer\"), this._graph = this.model.graph), this.notify(\"cell:pointerdown\", a, b, c)\n            },\n            pointermove: function(a, b, c) {\n                this.notify(\"cell:pointermove\", a, b, c)\n            },\n            pointerup: function(a, b, c) {\n                this.notify(\"cell:pointerup\", a, b, c), this._graph && (this._graph.stopBatch(\"pointer\", {\n                    cell: this.model\n                }), delete this._graph)\n            },\n            mouseover: function(a) {\n                this.notify(\"cell:mouseover\", a)\n            },\n            mouseout: function(a) {\n                this.notify(\"cell:mouseout\", a)\n            },\n            mouseenter: function(a) {\n                this.notify(\"cell:mouseenter\", a)\n            },\n            mouseleave: function(a) {\n                this.notify(\"cell:mouseleave\", a)\n            },\n            mousewheel: function(a, b, c, d) {\n                this.notify(\"cell:mousewheel\", a, b, c, d)\n            },\n            contextmenu: function(a, b, c) {\n                this.notify(\"cell:contextmenu\", a, b, c)\n            },\n            setInteractivity: function(a) {\n                this.options.interactive = a\n            }\n        }), joint.dia.Element = joint.dia.Cell.extend({\n            defaults: {\n                position: {\n                    x: 0,\n                    y: 0\n                },\n                size: {\n                    width: 1,\n                    height: 1\n                },\n                angle: 0\n            },\n            initialize: function() {\n                this._initializePorts(), joint.dia.Cell.prototype.initialize.apply(this, arguments)\n            },\n            _initializePorts: function() {},\n            isElement: function() {\n                return !0\n            },\n            position: function(a, b, c) {\n                var d = _.isNumber(b);\n                if (c = (d ? c : a) || {}, c.parentRelative) {\n                    if (!this.graph) throw new Error(\"Element must be part of a graph.\");\n                    var e = this.graph.getCell(this.get(\"parent\")),\n                        f = e && !e.isLink() ? e.get(\"position\") : {\n                            x: 0,\n                            y: 0\n                        }\n                }\n                if (d) return c.parentRelative && (a += f.x, b += f.y), this.set(\"position\", {\n                    x: a,\n                    y: b\n                }, c);\n                var h = g.point(this.get(\"position\"));\n                return c.parentRelative ? h.difference(f) : h\n            },\n            translate: function(a, b, c) {\n                if (a = a || 0, b = b || 0, 0 === a && 0 === b) return this;\n                c = c || {}, c.translateBy = c.translateBy || this.id;\n                var d = this.get(\"position\") || {\n                    x: 0,\n                    y: 0\n                };\n                if (c.restrictedArea && c.translateBy === this.id) {\n                    var e = this.getBBox({\n                            deep: !0\n                        }),\n                        f = c.restrictedArea,\n                        g = d.x - e.x,\n                        h = d.y - e.y,\n                        i = Math.max(f.x + g, Math.min(f.x + f.width + g - e.width, d.x + a)),\n                        j = Math.max(f.y + h, Math.min(f.y + f.height + h - e.height, d.y + b));\n                    a = i - d.x, b = j - d.y\n                }\n                var k = {\n                    x: d.x + a,\n                    y: d.y + b\n                };\n                return c.tx = a, c.ty = b, c.transition ? (_.isObject(c.transition) || (c.transition = {}), this.transition(\"position\", k, _.extend({}, c.transition, {\n                    valueFunction: joint.util.interpolate.object\n                }))) : this.set(\"position\", k, c), _.invoke(this.getEmbeddedCells(), \"translate\", a, b, c), this\n            },\n            size: function(a, b, c) {\n                var d = this.get(\"size\");\n                return void 0 === a ? {\n                    width: d.width,\n                    height: d.height\n                } : (_.isObject(a) && (c = b, b = _.isNumber(a.height) ? a.height : d.height, a = _.isNumber(a.width) ? a.width : d.width), this.resize(a, b, c))\n            },\n            resize: function(a, b, c) {\n                if (c = c || {}, this.startBatch(\"resize\", c), c.direction) {\n                    var d = this.get(\"size\");\n                    switch (c.direction) {\n                        case \"left\":\n                        case \"right\":\n                            b = d.height;\n                            break;\n                        case \"top\":\n                        case \"bottom\":\n                            a = d.width\n                    }\n                    var e = g.normalizeAngle(this.get(\"angle\") || 0),\n                        f = {\n                            \"top-right\": 0,\n                            right: 0,\n                            \"top-left\": 1,\n                            top: 1,\n                            \"bottom-left\": 2,\n                            left: 2,\n                            \"bottom-right\": 3,\n                            bottom: 3\n                        }[c.direction];\n                    c.absolute && (f += Math.floor((e + 45) / 90), f %= 4);\n                    var h = this.getBBox(),\n                        i = h[[\"bottomLeft\", \"corner\", \"topRight\", \"origin\"][f]](),\n                        j = g.point(i).rotate(h.center(), -e),\n                        k = Math.sqrt(a * a + b * b) / 2,\n                        l = f * Math.PI / 2;\n                    l += Math.atan(f % 2 == 0 ? b / a : a / b), l -= g.toRad(e);\n                    var m = g.point.fromPolar(k, l, j),\n                        n = g.point(m).offset(a / -2, b / -2);\n                    this.set(\"size\", {\n                        width: a,\n                        height: b\n                    }, c), this.position(n.x, n.y, c)\n                } else this.set(\"size\", {\n                    width: a,\n                    height: b\n                }, c);\n                return this.stopBatch(\"resize\", c), this\n            },\n            scale: function(a, b, c, d) {\n                var e = this.getBBox().scale(a, b, c);\n                return this.startBatch(\"scale\", d), this.position(e.x, e.y, d), this.resize(e.width, e.height, d), this.stopBatch(\"scale\"), this\n            },\n            fitEmbeds: function(a) {\n                if (a = a || {}, !this.graph) throw new Error(\"Element must be part of a graph.\");\n                var b = this.getEmbeddedCells();\n                if (b.length > 0) {\n                    this.startBatch(\"fit-embeds\", a), a.deep && _.invoke(b, \"fitEmbeds\", a);\n                    var c = this.graph.getCellsBBox(b),\n                        d = joint.util.normalizeSides(a.padding);\n                    c.moveAndExpand({\n                        x: -d.left,\n                        y: -d.top,\n                        width: d.right + d.left,\n                        height: d.bottom + d.top\n                    }), this.set({\n                        position: {\n                            x: c.x,\n                            y: c.y\n                        },\n                        size: {\n                            width: c.width,\n                            height: c.height\n                        }\n                    }, a), this.stopBatch(\"fit-embeds\")\n                }\n                return this\n            },\n            rotate: function(a, b, c, d) {\n                if (c) {\n                    var e = this.getBBox().center(),\n                        f = this.get(\"size\"),\n                        g = this.get(\"position\");\n                    e.rotate(c, this.get(\"angle\") - a);\n                    var h = e.x - f.width / 2 - g.x,\n                        i = e.y - f.height / 2 - g.y;\n                    this.startBatch(\"rotate\", {\n                        angle: a,\n                        absolute: b,\n                        origin: c\n                    }), this.position(g.x + h, g.y + i, d), this.rotate(a, b, null, d), this.stopBatch(\"rotate\")\n                } else this.set(\"angle\", b ? a : (this.get(\"angle\") + a) % 360, d);\n                return this\n            },\n            getBBox: function(a) {\n                if (a = a || {}, a.deep && this.graph) {\n                    var b = this.getEmbeddedCells({\n                        deep: !0,\n                        breadthFirst: !0\n                    });\n                    return b.push(this), this.graph.getCellsBBox(b)\n                }\n                var c = this.get(\"position\"),\n                    d = this.get(\"size\");\n                return g.rect(c.x, c.y, d.width, d.height)\n            }\n        }), joint.dia.ElementView = joint.dia.CellView.extend({\n            _removePorts: function() {},\n            _renderPorts: function() {},\n            className: function() {\n                var a = joint.dia.CellView.prototype.className.apply(this).split(\" \");\n                return a.push(\"element\"), a.join(\" \")\n            },\n            initialize: function() {\n                joint.dia.CellView.prototype.initialize.apply(this, arguments);\n                var a = this.model;\n                this.listenTo(a, \"change:position\", this.translate), this.listenTo(a, \"change:size\", this.resize), this.listenTo(a, \"change:angle\", this.rotate), this.listenTo(a, \"change:markup\", this.render), this._initializePorts()\n            },\n            _initializePorts: function() {},\n            update: function(a, b) {\n                this._removePorts();\n                var c = this.model,\n                    d = c.attr();\n                this.updateDOMSubtreeAttributes(this.el, d, {\n                    rootBBox: g.Rect(c.size()),\n                    scalableNode: this.scalableNode,\n                    rotatableNode: this.rotatableNode,\n                    roAttributes: b === d ? null : b\n                }), this._renderPorts()\n            },\n            renderMarkup: function() {\n                var a = this.model.get(\"markup\") || this.model.markup;\n                if (!a) throw new Error(\"properties.markup is missing while the default render() implementation is used.\");\n                var b = joint.util.template(a)(),\n                    c = V(b);\n                this.vel.append(c)\n            },\n            render: function() {\n                this.$el.empty(), this.renderMarkup(), this.rotatableNode = this.vel.findOne(\".rotatable\");\n                var a = this.scalableNode = this.vel.findOne(\".scalable\");\n                return a && this.update(), this.resize(), this.rotate(), this.translate(), this\n            },\n            resize: function(a, b, c) {\n                var d = this.model,\n                    e = d.get(\"size\") || {\n                        width: 1,\n                        height: 1\n                    },\n                    f = d.get(\"angle\") || 0,\n                    g = this.scalableNode;\n                if (!g) return 0 !== f && this.rotate(), void this.update();\n                var h = g.bbox(!0);\n                g.attr(\"transform\", \"scale(\" + e.width / (h.width || 1) + \",\" + e.height / (h.height || 1) + \")\");\n                var i = this.rotatableNode,\n                    j = i && i.attr(\"transform\");\n                if (j && \"null\" !== j) {\n                    i.attr(\"transform\", j + \" rotate(\" + -f + \",\" + e.width / 2 + \",\" + e.height / 2 + \")\");\n                    var k = g.bbox(!1, this.paper.viewport);\n                    d.set(\"position\", {\n                        x: k.x,\n                        y: k.y\n                    }, c), this.rotate()\n                }\n                this.update()\n            },\n            translate: function(a, b, c) {\n                var d = this.model.get(\"position\") || {\n                    x: 0,\n                    y: 0\n                };\n                this.vel.attr(\"transform\", \"translate(\" + d.x + \",\" + d.y + \")\")\n            },\n            rotate: function() {\n                var a = this.rotatableNode;\n                if (a) {\n                    var b = this.model.get(\"angle\") || 0,\n                        c = this.model.get(\"size\") || {\n                            width: 1,\n                            height: 1\n                        },\n                        d = c.width / 2,\n                        e = c.height / 2;\n                    0 !== b ? a.attr(\"transform\", \"rotate(\" + b + \",\" + d + \",\" + e + \")\") : a.removeAttr(\"transform\")\n                }\n            },\n            getBBox: function(a) {\n                if (a && a.useModelGeometry) {\n                    var b = this.model.getBBox().bbox(this.model.get(\"angle\"));\n                    return this.paper.localToPaperRect(b)\n                }\n                return joint.dia.CellView.prototype.getBBox.apply(this, arguments)\n            },\n            prepareEmbedding: function(a) {\n                a = a || {};\n                var b = a.model || this.model,\n                    c = a.paper || this.paper,\n                    d = c.model;\n                b.startBatch(\"to-front\", a), b.toFront({\n                    deep: !0,\n                    ui: !0\n                });\n                var e = d.get(\"cells\").max(\"z\").get(\"z\"),\n                    f = d.getConnectedLinks(b, {\n                        deep: !0\n                    });\n                _.invoke(f, \"set\", \"z\", e + 1, {\n                    ui: !0\n                }), b.stopBatch(\"to-front\");\n                var g = b.get(\"parent\");\n                g && d.getCell(g).unembed(b, {\n                    ui: !0\n                })\n            },\n            processEmbedding: function(a) {\n                a = a || {};\n                var b = a.model || this.model,\n                    c = a.paper || this.paper,\n                    d = c.options,\n                    e = c.model.findModelsUnderElement(b, {\n                        searchBy: d.findParentBy\n                    });\n                d.frontParentOnly && (e = e.slice(-1));\n                for (var f = null, g = this._candidateEmbedView, h = e.length - 1; h >= 0; h--) {\n                    var i = e[h];\n                    if (g && g.model.id == i.id) {\n                        f = g;\n                        break\n                    }\n                    var j = i.findView(c);\n                    if (d.validateEmbedding.call(c, this, j)) {\n                        f = j;\n                        break\n                    }\n                }\n                f && f != g && (this.clearEmbedding(), this._candidateEmbedView = f.highlight(null, {\n                    embedding: !0\n                })), !f && g && this.clearEmbedding()\n            },\n            clearEmbedding: function() {\n                var a = this._candidateEmbedView;\n                a && (a.unhighlight(null, {\n                    embedding: !0\n                }), this._candidateEmbedView = null)\n            },\n            finalizeEmbedding: function(a) {\n                a = a || {};\n                var b = this._candidateEmbedView,\n                    c = a.model || this.model,\n                    d = a.paper || this.paper;\n                b && (b.model.embed(c, {\n                    ui: !0\n                }), b.unhighlight(null, {\n                    embedding: !0\n                }), delete this._candidateEmbedView), _.invoke(d.model.getConnectedLinks(c, {\n                    deep: !0\n                }), \"reparent\", {\n                    ui: !0\n                })\n            },\n            pointerdown: function(a, b, c) {\n                var d = this.paper;\n                if (a.target.getAttribute(\"magnet\") && this.can(\"addLinkFromMagnet\") && d.options.validateMagnet.call(d, this, a.target)) {\n                    this.model.startBatch(\"add-link\");\n                    var e = d.getDefaultLink(this, a.target);\n                    e.set({\n                        source: {\n                            id: this.model.id,\n                            selector: this.getSelector(a.target),\n                            port: a.target.getAttribute(\"port\")\n                        },\n                        target: {\n                            x: b,\n                            y: c\n                        }\n                    }), d.model.addCell(e);\n                    var f = this._linkView = d.findViewByModel(e);\n                    f.pointerdown(a, b, c), f.startArrowheadMove(\"target\", {\n                        whenNotAllowed: \"remove\"\n                    })\n                } else this._dx = b, this._dy = c, this.restrictedArea = d.getRestrictedArea(this), joint.dia.CellView.prototype.pointerdown.apply(this, arguments), this.notify(\"element:pointerdown\", a, b, c)\n            },\n            pointermove: function(a, b, c) {\n                if (this._linkView) this._linkView.pointermove(a, b, c);\n                else {\n                    var d = this.paper.options.gridSize;\n                    if (this.can(\"elementMove\")) {\n                        var e = this.model.get(\"position\"),\n                            f = g.snapToGrid(e.x, d) - e.x + g.snapToGrid(b - this._dx, d),\n                            h = g.snapToGrid(e.y, d) - e.y + g.snapToGrid(c - this._dy, d);\n                        this.model.translate(f, h, {\n                            restrictedArea: this.restrictedArea,\n                            ui: !0\n                        }), this.paper.options.embeddingMode && (this._inProcessOfEmbedding || (this.prepareEmbedding(), this._inProcessOfEmbedding = !0), this.processEmbedding())\n                    }\n                    this._dx = g.snapToGrid(b, d), this._dy = g.snapToGrid(c, d), joint.dia.CellView.prototype.pointermove.apply(this, arguments), this.notify(\"element:pointermove\", a, b, c)\n                }\n            },\n            pointerup: function(a, b, c) {\n                this._linkView ? (this._linkView.pointerup(a, b, c), this._linkView = null, this.model.stopBatch(\"add-link\")) : (this._inProcessOfEmbedding && (this.finalizeEmbedding(), this._inProcessOfEmbedding = !1), this.notify(\"element:pointerup\", a, b, c), joint.dia.CellView.prototype.pointerup.apply(this, arguments))\n            },\n            mouseenter: function(a) {\n                joint.dia.CellView.prototype.mouseenter.apply(this, arguments), this.notify(\"element:mouseenter\", a)\n            },\n            mouseleave: function(a) {\n                joint.dia.CellView.prototype.mouseleave.apply(this, arguments), this.notify(\"element:mouseleave\", a)\n            }\n        }), joint.dia.Link = joint.dia.Cell.extend({\n            markup: ['<path class=\"connection\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-source\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"marker-target\" fill=\"black\" stroke=\"black\" d=\"M 0 0 0 0\"/>', '<path class=\"connection-wrap\" d=\"M 0 0 0 0\"/>', '<g class=\"labels\"/>', '<g class=\"marker-vertices\"/>', '<g class=\"marker-arrowheads\"/>', '<g class=\"link-tools\"/>'].join(\"\"),\n            labelMarkup: ['<g class=\"label\">', \"<rect />\", \"<text />\", \"</g>\"].join(\"\"),\n            toolMarkup: ['<g class=\"link-tool\">', '<g class=\"tool-remove\" event=\"remove\">', '<circle r=\"11\" />', '<path transform=\"scale(.8) translate(-16, -16)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\" />', \"<title>Remove link.</title>\", \"</g>\", '<g class=\"tool-options\" event=\"link:options\">', '<circle r=\"11\" transform=\"translate(25)\"/>', '<path fill=\"white\" transform=\"scale(.55) translate(29, -16)\" d=\"M31.229,17.736c0.064-0.571,0.104-1.148,0.104-1.736s-0.04-1.166-0.104-1.737l-4.377-1.557c-0.218-0.716-0.504-1.401-0.851-2.05l1.993-4.192c-0.725-0.91-1.549-1.734-2.458-2.459l-4.193,1.994c-0.647-0.347-1.334-0.632-2.049-0.849l-1.558-4.378C17.165,0.708,16.588,0.667,16,0.667s-1.166,0.041-1.737,0.105L12.707,5.15c-0.716,0.217-1.401,0.502-2.05,0.849L6.464,4.005C5.554,4.73,4.73,5.554,4.005,6.464l1.994,4.192c-0.347,0.648-0.632,1.334-0.849,2.05l-4.378,1.557C0.708,14.834,0.667,15.412,0.667,16s0.041,1.165,0.105,1.736l4.378,1.558c0.217,0.715,0.502,1.401,0.849,2.049l-1.994,4.193c0.725,0.909,1.549,1.733,2.459,2.458l4.192-1.993c0.648,0.347,1.334,0.633,2.05,0.851l1.557,4.377c0.571,0.064,1.148,0.104,1.737,0.104c0.588,0,1.165-0.04,1.736-0.104l1.558-4.377c0.715-0.218,1.399-0.504,2.049-0.851l4.193,1.993c0.909-0.725,1.733-1.549,2.458-2.458l-1.993-4.193c0.347-0.647,0.633-1.334,0.851-2.049L31.229,17.736zM16,20.871c-2.69,0-4.872-2.182-4.872-4.871c0-2.69,2.182-4.872,4.872-4.872c2.689,0,4.871,2.182,4.871,4.872C20.871,18.689,18.689,20.871,16,20.871z\"/>', \"<title>Link options.</title>\", \"</g>\", \"</g>\"].join(\"\"),\n            vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', \"<title>Remove vertex.</title>\", \"</path>\", \"</g>\"].join(\"\"),\n            arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<path class=\"marker-arrowhead\" end=\"<%= end %>\" d=\"M 26 0 L 0 13 L 26 26 z\" />', \"</g>\"].join(\"\"),\n            defaults: {\n                type: \"link\",\n                source: {},\n                target: {}\n            },\n            isLink: function() {\n                return !0\n            },\n            disconnect: function() {\n                return this.set({\n                    source: g.point(0, 0),\n                    target: g.point(0, 0)\n                })\n            },\n            label: function(a, b, c) {\n                return a = a || 0, arguments.length <= 1 ? this.prop([\"labels\", a]) : this.prop([\"labels\", a], b, c)\n            },\n            translate: function(a, b, c) {\n                return c = c || {}, c.translateBy = c.translateBy || this.id, c.tx = a, c.ty = b, this.applyToPoints(function(c) {\n                    return {\n                        x: (c.x || 0) + a,\n                        y: (c.y || 0) + b\n                    }\n                }, c)\n            },\n            scale: function(a, b, c, d) {\n                return this.applyToPoints(function(d) {\n                    return g.point(d).scale(a, b, c).toJSON()\n                }, d)\n            },\n            applyToPoints: function(a, b) {\n                if (!_.isFunction(a)) throw new TypeError(\"dia.Link: applyToPoints expects its first parameter to be a function.\");\n                var c = {},\n                    d = this.get(\"source\");\n                d.id || (c.source = a(d));\n                var e = this.get(\"target\");\n                e.id || (c.target = a(e));\n                var f = this.get(\"vertices\");\n                return f && f.length > 0 && (c.vertices = _.map(f, a)), this.set(c, b)\n            },\n            reparent: function(a) {\n                var b;\n                if (this.graph) {\n                    var c = this.graph.getCell(this.get(\"source\").id),\n                        d = this.graph.getCell(this.get(\"target\").id),\n                        e = this.graph.getCell(this.get(\"parent\"));\n                    c && d && (b = this.graph.getCommonAncestor(c, d)), !e || b && b.id === e.id || e.unembed(this, a), b && b.embed(this, a)\n                }\n                return b\n            },\n            hasLoop: function(a) {\n                a = a || {};\n                var b = this.get(\"source\").id,\n                    c = this.get(\"target\").id;\n                if (!b || !c) return !1;\n                var d = b === c;\n                if (!d && a.deep && this.graph) {\n                    var e = this.graph.getCell(b),\n                        f = this.graph.getCell(c);\n                    d = e.isEmbeddedIn(f) || f.isEmbeddedIn(e)\n                }\n                return d\n            },\n            getSourceElement: function() {\n                var a = this.get(\"source\");\n                return a && a.id && this.graph && this.graph.getCell(a.id) || null\n            },\n            getTargetElement: function() {\n                var a = this.get(\"target\");\n                return a && a.id && this.graph && this.graph.getCell(a.id) || null\n            },\n            getRelationshipAncestor: function() {\n                var a;\n                if (this.graph) {\n                    var b = _.compact([this, this.getSourceElement(), this.getTargetElement()]);\n                    a = this.graph.getCommonAncestor.apply(this.graph, b)\n                }\n                return a || null\n            },\n            isRelationshipEmbeddedIn: function(a) {\n                var b = _.isString(a) ? a : a.id,\n                    c = this.getRelationshipAncestor();\n                return !!c && (c.id === b || c.isEmbeddedIn(b))\n            }\n        }, {\n            endsEqual: function(a, b) {\n                var c = a.port === b.port || !a.port && !b.port;\n                return a.id === b.id && c\n            }\n        }), joint.dia.LinkView = joint.dia.CellView.extend({\n            className: function() {\n                var a = joint.dia.CellView.prototype.className.apply(this).split(\" \");\n                return a.push(\"link\"), a.join(\" \")\n            },\n            options: {\n                shortLinkLength: 100,\n                doubleLinkTools: !1,\n                longLinkLength: 160,\n                linkToolsOffset: 40,\n                doubleLinkToolsOffset: 60,\n                sampleInterval: 50\n            },\n            _z: null,\n            initialize: function(a) {\n                joint.dia.CellView.prototype.initialize.apply(this, arguments), \"function\" != typeof this.constructor.prototype.watchSource && (this.constructor.prototype.watchSource = this.createWatcher(\"source\"), this.constructor.prototype.watchTarget = this.createWatcher(\"target\")), this._labelCache = {}, this._markerCache = {}, this.startListening()\n            },\n            startListening: function() {\n                var a = this.model;\n                this.listenTo(a, \"change:markup\", this.render), this.listenTo(a, \"change:smooth change:manhattan change:router change:connector\", this.update), this.listenTo(a, \"change:toolMarkup\", this.onToolsChange), this.listenTo(a, \"change:labels change:labelMarkup\", this.onLabelsChange), this.listenTo(a, \"change:vertices change:vertexMarkup\", this.onVerticesChange), this.listenTo(a, \"change:source\", this.onSourceChange), this.listenTo(a, \"change:target\", this.onTargetChange)\n            },\n            onSourceChange: function(a, b, c) {\n                this.watchSource(a, b), c.translateBy && this.model.get(\"target\").id || (c.updateConnectionOnly = !0, this.update(this.model, null, c))\n            },\n            onTargetChange: function(a, b, c) {\n                this.watchTarget(a, b), c.translateBy || (c.updateConnectionOnly = !0, this.update(this.model, null, c))\n            },\n            onVerticesChange: function(a, b, c) {\n                this.renderVertexMarkers(), c.translateBy && c.translateBy !== this.model.id || (c.updateConnectionOnly = !0, this.update(a, null, c))\n            },\n            onToolsChange: function() {\n                this.renderTools().updateToolsPosition()\n            },\n            onLabelsChange: function() {\n                this.renderLabels().updateLabelPositions()\n            },\n            render: function() {\n                this.$el.empty();\n                var a = this.model,\n                    b = a.get(\"markup\") || a.markup,\n                    c = V(b);\n                if (_.isArray(c) || (c = [c]), this._V = {}, _.each(c, function(a) {\n                        var b = a.attr(\"class\");\n                        b && (b = joint.util.removeClassNamePrefix(b), this._V[$.camelCase(b)] = a)\n                    }, this), !this._V.connection) throw new Error(\"link: no connection path in the markup\");\n                return this.renderTools(), this.renderVertexMarkers(), this.renderArrowheadMarkers(), this.vel.append(c), this.renderLabels(), this.watchSource(a, a.get(\"source\")).watchTarget(a, a.get(\"target\")).update(), this\n            },\n            renderLabels: function() {\n                var a = this._V.labels;\n                if (!a) return this;\n                a.empty();\n                var b = this.model,\n                    c = b.get(\"labels\") || [],\n                    d = this._labelCache = {},\n                    e = c.length;\n                if (0 === e) return this;\n                for (var f = joint.util.template(b.get(\"labelMarkup\") || b.labelMarkup), g = V(f()), h = this.can(\"labelMove\"), i = 0; i < e; i++) {\n                    var j = c[i],\n                        k = j.markup,\n                        l = d[i] = k ? V(\"g\").append(V(k)) : g.clone();\n                    l.addClass(\"label\").attr({\n                        \"label-idx\": i,\n                        cursor: h ? \"move\" : \"default\"\n                    }).appendTo(a);\n                    var m = j.attrs;\n                    k || (m = _.merge({\n                        text: {\n                            textAnchor: \"middle\",\n                            fontSize: 14,\n                            pointerEvents: \"none\",\n                            yAlignment: \"middle\"\n                        },\n                        rect: {\n                            ref: \"text\",\n                            fill: \"white\",\n                            rx: 3,\n                            ry: 3,\n                            refWidth: 1,\n                            refHeight: 1,\n                            refX: 0,\n                            refY: 0\n                        }\n                    }, m)), this.updateDOMSubtreeAttributes(l.node, m)\n                }\n                return this\n            },\n            renderTools: function() {\n                if (!this._V.linkTools) return this;\n                var a = $(this._V.linkTools.node).empty(),\n                    b = joint.util.template(this.model.get(\"toolMarkup\") || this.model.toolMarkup),\n                    c = V(b());\n                if (a.append(c.node), this._toolCache = c, this.options.doubleLinkTools) {\n                    var d;\n                    this.model.get(\"doubleToolMarkup\") || this.model.doubleToolMarkup ? (b = joint.util.template(this.model.get(\"doubleToolMarkup\") || this.model.doubleToolMarkup),\n                        d = V(b())) : d = c.clone(), a.append(d.node), this._tool2Cache = d\n                }\n                return this\n            },\n            renderVertexMarkers: function() {\n                if (!this._V.markerVertices) return this;\n                var a = $(this._V.markerVertices.node).empty(),\n                    b = joint.util.template(this.model.get(\"vertexMarkup\") || this.model.vertexMarkup);\n                return _.each(this.model.get(\"vertices\"), function(c, d) {\n                    a.append(V(b(_.extend({\n                        idx: d\n                    }, c))).node)\n                }), this\n            },\n            renderArrowheadMarkers: function() {\n                if (!this._V.markerArrowheads) return this;\n                var a = $(this._V.markerArrowheads.node);\n                a.empty();\n                var b = joint.util.template(this.model.get(\"arrowheadMarkup\") || this.model.arrowheadMarkup);\n                return this._V.sourceArrowhead = V(b({\n                    end: \"source\"\n                })), this._V.targetArrowhead = V(b({\n                    end: \"target\"\n                })), a.append(this._V.sourceArrowhead.node, this._V.targetArrowhead.node), this\n            },\n            update: function(a, b, c) {\n                return c = c || {}, c.updateConnectionOnly || this.updateDOMSubtreeAttributes(this.el, this.model.attr()), this.updateConnection(c), this.updateLabelPositions(), this.updateToolsPosition(), this.updateArrowheadMarkers(), this.options.perpendicular = null, this.updatePostponed = !1, this\n            },\n            updateConnection: function(a) {\n                a = a || {};\n                var b, c = this.model;\n                if (a.translateBy && c.isRelationshipEmbeddedIn(a.translateBy)) {\n                    var d = a.tx || 0,\n                        e = a.ty || 0;\n                    b = this.route = _.map(this.route, function(a) {\n                        return g.point(a).offset(d, e)\n                    }), this._translateConnectionPoints(d, e)\n                } else b = this.route = this.findRoute(c.get(\"vertices\") || [], a), this._findConnectionPoints(b);\n                var f = this.getPathData(b);\n                this._V.connection.attr(\"d\", f), this._V.connectionWrap && this._V.connectionWrap.attr(\"d\", f), this._translateAndAutoOrientArrows(this._V.markerSource, this._V.markerTarget)\n            },\n            _findConnectionPoints: function(a) {\n                var b, c, d, e, f = _.first(a);\n                b = this.getConnectionPoint(\"source\", this.model.get(\"source\"), f || this.model.get(\"target\")).round();\n                var h = _.last(a);\n                c = this.getConnectionPoint(\"target\", this.model.get(\"target\"), h || b).round();\n                var i = this._markerCache;\n                this._V.markerSource && (i.sourceBBox = i.sourceBBox || this._V.markerSource.bbox(!0), d = g.point(b).move(f || c, i.sourceBBox.width * this._V.markerSource.scale().sx * -1).round()), this._V.markerTarget && (i.targetBBox = i.targetBBox || this._V.markerTarget.bbox(!0), e = g.point(c).move(h || b, i.targetBBox.width * this._V.markerTarget.scale().sx * -1).round()), i.sourcePoint = d || b.clone(), i.targetPoint = e || c.clone(), this.sourcePoint = b, this.targetPoint = c\n            },\n            _translateConnectionPoints: function(a, b) {\n                var c = this._markerCache;\n                c.sourcePoint.offset(a, b), c.targetPoint.offset(a, b), this.sourcePoint.offset(a, b), this.targetPoint.offset(a, b)\n            },\n            updateLabelPositions: function() {\n                if (!this._V.labels) return this;\n                var a = this.model.get(\"labels\") || [];\n                if (!a.length) return this;\n                var b = this._V.connection.node,\n                    c = b.getTotalLength();\n                if (!_.isNaN(c)) {\n                    var d;\n                    _.each(a, function(a, e) {\n                        var f = a.position,\n                            h = _.isObject(f) ? f.distance : f,\n                            i = _.isObject(f) ? f.offset : {\n                                x: 0,\n                                y: 0\n                            };\n                        _.isFinite(h) ? (h = h > c ? c : h, h = h < 0 ? c + h : h, h = h > 1 ? h : c * h) : h = c / 2;\n                        var j = b.getPointAtLength(h);\n                        if (_.isObject(i)) j = g.point(j).offset(i);\n                        else if (_.isFinite(i)) {\n                            d || (d = this._samples || this._V.connection.sample(this.options.sampleInterval));\n                            for (var k, l, m, n = 1 / 0, o = 0; o < d.length; o++) l = d[o], m = g.line(l, j).squaredLength(), m < n && (n = m, k = o);\n                            var p = d[k - 1],\n                                q = d[k + 1],\n                                r = 0;\n                            q ? r = g.point(j).theta(q) : p && (r = g.point(p).theta(j)), j = g.point(j).offset(i).rotate(j, r - 90)\n                        }\n                        this._labelCache[e].attr(\"transform\", \"translate(\" + j.x + \", \" + j.y + \")\")\n                    }, this)\n                }\n                return this\n            },\n            updateToolsPosition: function() {\n                if (!this._V.linkTools) return this;\n                var a = \"\",\n                    b = this.options.linkToolsOffset,\n                    c = this.getConnectionLength();\n                if (!_.isNaN(c)) {\n                    c < this.options.shortLinkLength && (a = \"scale(.5)\", b /= 2);\n                    var d = this.getPointAtLength(b);\n                    if (this._toolCache.attr(\"transform\", \"translate(\" + d.x + \", \" + d.y + \") \" + a), this.options.doubleLinkTools && c >= this.options.longLinkLength) {\n                        var e = this.options.doubleLinkToolsOffset || b;\n                        d = this.getPointAtLength(c - e), this._tool2Cache.attr(\"transform\", \"translate(\" + d.x + \", \" + d.y + \") \" + a), this._tool2Cache.attr(\"visibility\", \"visible\")\n                    } else this.options.doubleLinkTools && this._tool2Cache.attr(\"visibility\", \"hidden\")\n                }\n                return this\n            },\n            updateArrowheadMarkers: function() {\n                if (!this._V.markerArrowheads) return this;\n                if (\"none\" === $.css(this._V.markerArrowheads.node, \"display\")) return this;\n                var a = this.getConnectionLength() < this.options.shortLinkLength ? .5 : 1;\n                return this._V.sourceArrowhead.scale(a), this._V.targetArrowhead.scale(a), this._translateAndAutoOrientArrows(this._V.sourceArrowhead, this._V.targetArrowhead), this\n            },\n            createWatcher: function(a) {\n                function b(b, d) {\n                    d = d || {};\n                    var e = null,\n                        f = b.previous(a) || {};\n                    return f.id && this.stopListening(this.paper.getModelById(f.id), \"change\", c), d.id && (e = this.paper.getModelById(d.id), this.listenTo(e, \"change\", c)), c.call(this, e, {\n                        cacheOnly: !0\n                    }), this\n                }\n                var c = _.partial(this.onEndModelChange, a);\n                return b\n            },\n            onEndModelChange: function(a, b, c) {\n                var d = !c.cacheOnly,\n                    e = this.model,\n                    f = e.get(a) || {};\n                if (b) {\n                    var h = this.constructor.makeSelector(f),\n                        i = \"source\" == a ? \"target\" : \"source\",\n                        j = e.get(i) || {},\n                        k = j.id && this.constructor.makeSelector(j);\n                    if (c.handleBy === this.cid && h == k) this[a + \"BBox\"] = this[i + \"BBox\"], this[a + \"View\"] = this[i + \"View\"], this[a + \"Magnet\"] = this[i + \"Magnet\"];\n                    else if (c.translateBy) {\n                        var l = this[a + \"BBox\"];\n                        l.x += c.tx, l.y += c.ty\n                    } else {\n                        var m = this.paper.findViewByModel(f.id),\n                            n = m.el.querySelector(h);\n                        this[a + \"BBox\"] = m.getStrokeBBox(n), this[a + \"View\"] = m, this[a + \"Magnet\"] = n\n                    }\n                    if (c.handleBy === this.cid && c.translateBy && e.isEmbeddedIn(b) && !_.isEmpty(e.get(\"vertices\")) && (d = !1), !this.updatePostponed && j.id) {\n                        var o = this.paper.getModelById(j.id);\n                        f.id === j.id && (c.handleBy = this.cid), (c.handleBy === this.cid || c.translateBy && o.isEmbeddedIn(c.translateBy)) && (this.updatePostponed = !0, d = !1)\n                    }\n                } else this[a + \"BBox\"] = g.rect(f.x || 0, f.y || 0, 1, 1), this[a + \"View\"] = this[a + \"Magnet\"] = null;\n                d && (c.updateConnectionOnly = !0, this.update(e, null, c))\n            },\n            _translateAndAutoOrientArrows: function(a, b) {\n                a && a.translateAndAutoOrient(this.sourcePoint, _.first(this.route) || this.targetPoint, this.paper.viewport), b && b.translateAndAutoOrient(this.targetPoint, _.last(this.route) || this.sourcePoint, this.paper.viewport)\n            },\n            removeVertex: function(a) {\n                var b = _.clone(this.model.get(\"vertices\"));\n                return b && b.length && (b.splice(a, 1), this.model.set(\"vertices\", b, {\n                    ui: !0\n                })), this\n            },\n            addVertex: function(a) {\n                for (var b, c = (this.model.get(\"vertices\") || []).slice(), d = c.slice(), e = this._V.connection.node.cloneNode(!1), f = e.getTotalLength(), g = 20, h = c.length + 1; h-- && (c.splice(h, 0, a), V(e).attr(\"d\", this.getPathData(this.findRoute(c))), b = e.getTotalLength(), b - f > g);) c = d.slice();\n                return h === -1 && (h = 0, c.splice(h, 0, a)), this.model.set(\"vertices\", c, {\n                    ui: !0\n                }), h\n            },\n            sendToken: function(a, b, c) {\n                b = b || 1e3, V(this.paper.viewport).append(a), V(a).animateAlongPath({\n                    dur: b + \"ms\",\n                    repeatCount: 1\n                }, this._V.connection.node), _.delay(function() {\n                    V(a).remove(), c && c()\n                }, b)\n            },\n            findRoute: function(a) {\n                var b = joint.routers,\n                    c = this.model.get(\"router\"),\n                    d = this.paper.options.defaultRouter;\n                if (!c)\n                    if (this.model.get(\"manhattan\")) c = {\n                        name: \"orthogonal\"\n                    };\n                    else {\n                        if (!d) return a;\n                        c = d\n                    }\n                var e = c.args || {},\n                    f = _.isFunction(c) ? c : b[c.name];\n                if (!_.isFunction(f)) throw new Error('unknown router: \"' + c.name + '\"');\n                var g = f.call(this, a || [], e, this);\n                return g\n            },\n            getPathData: function(a) {\n                var b = joint.connectors,\n                    c = this.model.get(\"connector\"),\n                    d = this.paper.options.defaultConnector;\n                c || (c = this.model.get(\"smooth\") ? {\n                    name: \"smooth\"\n                } : d || {});\n                var e = _.isFunction(c) ? c : b[c.name],\n                    f = c.args || {};\n                if (!_.isFunction(e)) throw new Error('unknown connector: \"' + c.name + '\"');\n                var g = e.call(this, this._markerCache.sourcePoint, this._markerCache.targetPoint, a || this.model.get(\"vertices\") || {}, f, this);\n                return g\n            },\n            getConnectionPoint: function(a, b, c) {\n                var d;\n                if (_.isEmpty(b) && (b = {\n                        x: 0,\n                        y: 0\n                    }), _.isEmpty(c) && (c = {\n                        x: 0,\n                        y: 0\n                    }), b.id) {\n                    var e, f = g.Rect(\"source\" === a ? this.sourceBBox : this.targetBBox);\n                    if (c.id) {\n                        var h = g.Rect(\"source\" === a ? this.targetBBox : this.sourceBBox);\n                        e = h.intersectionWithLineFromCenterToPoint(f.center()), e = e || h.center()\n                    } else e = g.Point(c);\n                    var i = this.paper.options;\n                    if (i.perpendicularLinks || this.options.perpendicular) {\n                        var j, k = f.origin(),\n                            l = f.corner();\n                        if (k.y <= e.y && e.y <= l.y) switch (j = f.sideNearestToPoint(e)) {\n                            case \"left\":\n                                d = g.Point(k.x, e.y);\n                                break;\n                            case \"right\":\n                                d = g.Point(l.x, e.y);\n                                break;\n                            default:\n                                d = f.center()\n                        } else if (k.x <= e.x && e.x <= l.x) switch (j = f.sideNearestToPoint(e)) {\n                            case \"top\":\n                                d = g.Point(e.x, k.y);\n                                break;\n                            case \"bottom\":\n                                d = g.Point(e.x, l.y);\n                                break;\n                            default:\n                                d = f.center()\n                        } else d = f.intersectionWithLineFromCenterToPoint(e), d = d || f.center()\n                    } else if (i.linkConnectionPoint) {\n                        var m = \"target\" === a ? this.targetView : this.sourceView,\n                            n = \"target\" === a ? this.targetMagnet : this.sourceMagnet;\n                        d = i.linkConnectionPoint(this, m, n, e)\n                    } else d = f.intersectionWithLineFromCenterToPoint(e), d = d || f.center()\n                } else d = g.Point(b);\n                return d\n            },\n            getConnectionLength: function() {\n                return this._V.connection.node.getTotalLength()\n            },\n            getPointAtLength: function(a) {\n                return this._V.connection.node.getPointAtLength(a)\n            },\n            _beforeArrowheadMove: function() {\n                this._z = this.model.get(\"z\"), this.model.toFront(), this.el.style.pointerEvents = \"none\", this.paper.options.markAvailable && this._markAvailableMagnets()\n            },\n            _afterArrowheadMove: function() {\n                _.isNull(this._z) || (this.model.set(\"z\", this._z, {\n                    ui: !0\n                }), this._z = null), this.el.style.pointerEvents = \"visiblePainted\", this.paper.options.markAvailable && this._unmarkAvailableMagnets()\n            },\n            _createValidateConnectionArgs: function(a) {\n                function b(a, b) {\n                    return c[f] = a, c[f + 1] = a.el === b ? void 0 : b, c\n                }\n                var c = [];\n                c[4] = a, c[5] = this;\n                var d, e = 0,\n                    f = 0;\n                \"source\" === a ? (e = 2, d = \"target\") : (f = 2, d = \"source\");\n                var g = this.model.get(d);\n                return g.id && (c[e] = this.paper.findViewByModel(g.id), c[e + 1] = g.selector && c[e].el.querySelector(g.selector)), b\n            },\n            _markAvailableMagnets: function() {\n                function a(a, b) {\n                    var c = a.paper,\n                        d = c.options.validateConnection;\n                    return d.apply(c, this._validateConnectionArgs(a, b))\n                }\n                var b = this.paper,\n                    c = b.model.getElements();\n                this._marked = {}, _.chain(c).map(b.findViewByModel, b).each(function(b) {\n                    var c = Array.prototype.slice.call(b.el.querySelectorAll(\"[magnet]\"));\n                    \"false\" !== b.el.getAttribute(\"magnet\") && c.push(b.el);\n                    var d = _.filter(c, _.partial(a, b), this);\n                    d.length > 0 && (_.each(d, _.partial(b.highlight, _, {\n                        magnetAvailability: !0\n                    }), b), b.highlight(null, {\n                        elementAvailability: !0\n                    }), this._marked[b.model.id] = d)\n                }, this).value()\n            },\n            _unmarkAvailableMagnets: function() {\n                _.each(this._marked, function(a, b) {\n                    var c = this.paper.findViewByModel(b);\n                    c && (_.each(a, _.partial(c.unhighlight, _, {\n                        magnetAvailability: !0\n                    }), c), c.unhighlight(null, {\n                        elementAvailability: !0\n                    }))\n                }, this), this._marked = null\n            },\n            startArrowheadMove: function(a, b) {\n                b = _.defaults(b || {}, {\n                    whenNotAllowed: \"revert\"\n                }), this._action = \"arrowhead-move\", this._whenNotAllowed = b.whenNotAllowed, this._arrowhead = a, this._initialMagnet = this[a + \"Magnet\"] || (this[a + \"View\"] ? this[a + \"View\"].el : null), this._initialEnd = _.clone(this.model.get(a)) || {\n                    x: 0,\n                    y: 0\n                }, this._validateConnectionArgs = this._createValidateConnectionArgs(this._arrowhead), this._beforeArrowheadMove()\n            },\n            pointerdown: function(a, b, c) {\n                if (joint.dia.CellView.prototype.pointerdown.apply(this, arguments), this.notify(\"link:pointerdown\", a, b, c), this._dx = b, this._dy = c, null == a.target.getAttribute(\"magnet\")) {\n                    var d, e = joint.util.removeClassNamePrefix(a.target.getAttribute(\"class\")),\n                        f = joint.util.removeClassNamePrefix(a.target.parentNode.getAttribute(\"class\"));\n                    switch (\"label\" === f ? (e = f, d = a.target.parentNode) : d = a.target, e) {\n                        case \"marker-vertex\":\n                            this.can(\"vertexMove\") && (this._action = \"vertex-move\", this._vertexIdx = a.target.getAttribute(\"idx\"));\n                            break;\n                        case \"marker-vertex-remove\":\n                        case \"marker-vertex-remove-area\":\n                            this.can(\"vertexRemove\") && this.removeVertex(a.target.getAttribute(\"idx\"));\n                            break;\n                        case \"marker-arrowhead\":\n                            this.can(\"arrowheadMove\") && this.startArrowheadMove(a.target.getAttribute(\"end\"));\n                            break;\n                        case \"label\":\n                            this.can(\"labelMove\") && (this._action = \"label-move\", this._labelIdx = parseInt(V(d).attr(\"label-idx\"), 10), this._samples = this._V.connection.sample(1), this._linkLength = this._V.connection.node.getTotalLength());\n                            break;\n                        default:\n                            var g = a.target.parentNode.getAttribute(\"event\");\n                            g ? this.can(\"useLinkTools\") && (\"remove\" === g ? this.model.remove() : this.notify(g, a, b, c)) : this.can(\"vertexAdd\") && (this._vertexIdx = this.addVertex({\n                                x: b,\n                                y: c\n                            }), this._action = \"vertex-move\")\n                    }\n                }\n            },\n            pointermove: function(a, b, c) {\n                switch (this._action) {\n                    case \"vertex-move\":\n                        var d = _.clone(this.model.get(\"vertices\"));\n                        d[this._vertexIdx] = {\n                            x: b,\n                            y: c\n                        }, this.model.set(\"vertices\", d, {\n                            ui: !0\n                        });\n                        break;\n                    case \"label-move\":\n                        for (var e, f, h, i, j = {\n                                x: b,\n                                y: c\n                            }, k = this._samples, l = 1 / 0, m = 0, n = k.length; m < n; m++) h = k[m], i = g.line(h, j).squaredLength(), i < l && (l = i, e = h, f = m);\n                        var o = k[f - 1],\n                            p = k[f + 1],\n                            q = 0;\n                        o && p ? q = g.line(o, p).pointOffset(j) : o ? q = g.line(o, e).pointOffset(j) : p && (q = g.line(e, p).pointOffset(j)), this.model.label(this._labelIdx, {\n                            position: {\n                                distance: e.distance / this._linkLength,\n                                offset: q\n                            }\n                        });\n                        break;\n                    case \"arrowhead-move\":\n                        if (this.paper.options.snapLinks) {\n                            var r = this.paper.options.snapLinks.radius || 50,\n                                s = this.paper.findViewsInArea({\n                                    x: b - r,\n                                    y: c - r,\n                                    width: 2 * r,\n                                    height: 2 * r\n                                });\n                            this._closestView && this._closestView.unhighlight(this._closestEnd.selector, {\n                                connecting: !0,\n                                snapping: !0\n                            }), this._closestView = this._closestEnd = null;\n                            var t, u = Number.MAX_VALUE,\n                                v = g.point(b, c);\n                            _.each(s, function(a) {\n                                \"false\" !== a.el.getAttribute(\"magnet\") && (t = a.model.getBBox().center().distance(v), t < r && t < u && this.paper.options.validateConnection.apply(this.paper, this._validateConnectionArgs(a, null)) && (u = t, this._closestView = a, this._closestEnd = {\n                                    id: a.model.id\n                                })), a.$(\"[magnet]\").each(_.bind(function(b, c) {\n                                    var d = V(c).bbox(!1, this.paper.viewport);\n                                    t = v.distance({\n                                        x: d.x + d.width / 2,\n                                        y: d.y + d.height / 2\n                                    }), t < r && t < u && this.paper.options.validateConnection.apply(this.paper, this._validateConnectionArgs(a, c)) && (u = t, this._closestView = a, this._closestEnd = {\n                                        id: a.model.id,\n                                        selector: a.getSelector(c),\n                                        port: c.getAttribute(\"port\")\n                                    })\n                                }, this))\n                            }, this), this._closestView && this._closestView.highlight(this._closestEnd.selector, {\n                                connecting: !0,\n                                snapping: !0\n                            }), this.model.set(this._arrowhead, this._closestEnd || {\n                                x: b,\n                                y: c\n                            }, {\n                                ui: !0\n                            })\n                        } else {\n                            var w = \"mousemove\" === a.type ? a.target : document.elementFromPoint(a.clientX, a.clientY);\n                            this._targetEvent !== w && (this._magnetUnderPointer && this._viewUnderPointer.unhighlight(this._magnetUnderPointer, {\n                                connecting: !0\n                            }), this._viewUnderPointer = this.paper.findView(w), this._viewUnderPointer ? (this._magnetUnderPointer = this._viewUnderPointer.findMagnet(w), this._magnetUnderPointer && this.paper.options.validateConnection.apply(this.paper, this._validateConnectionArgs(this._viewUnderPointer, this._magnetUnderPointer)) ? this._magnetUnderPointer && this._viewUnderPointer.highlight(this._magnetUnderPointer, {\n                                connecting: !0\n                            }) : this._magnetUnderPointer = null) : this._magnetUnderPointer = null), this._targetEvent = w, this.model.set(this._arrowhead, {\n                                x: b,\n                                y: c\n                            }, {\n                                ui: !0\n                            })\n                        }\n                }\n                this._dx = b, this._dy = c, joint.dia.CellView.prototype.pointermove.apply(this, arguments), this.notify(\"link:pointermove\", a, b, c)\n            },\n            pointerup: function(a, b, c) {\n                if (\"label-move\" === this._action) this._samples = null;\n                else if (\"arrowhead-move\" === this._action) {\n                    var d, e = this.paper,\n                        f = e.options,\n                        g = this._arrowhead,\n                        h = this._initialEnd;\n                    if (f.snapLinks) this._closestView && (this._closestView.unhighlight(this._closestEnd.selector, {\n                        connecting: !0,\n                        snapping: !0\n                    }), d = this._closestView.findMagnet(this._closestEnd.selector)), this._closestView = this._closestEnd = null;\n                    else {\n                        var i = this._viewUnderPointer;\n                        if (d = this._magnetUnderPointer, this._viewUnderPointer = null, this._magnetUnderPointer = null, d) {\n                            i.unhighlight(d, {\n                                connecting: !0\n                            });\n                            var j = i.getSelector(d),\n                                k = d.getAttribute(\"port\"),\n                                l = {\n                                    id: i.model.id\n                                };\n                            null != k && (l.port = k), null != j && (l.selector = j), this.model.set(g, l, {\n                                ui: !0\n                            })\n                        }\n                    }\n                    if (!e.linkAllowed(this)) switch (this._whenNotAllowed) {\n                        case \"remove\":\n                            this.model.remove();\n                            break;\n                        case \"revert\":\n                        default:\n                            this.model.set(g, h, {\n                                ui: !0\n                            })\n                    }\n                    f.embeddingMode && this.model.reparent() && (this._z = null);\n                    var m = this.model.prop(g) || {},\n                        n = !joint.dia.Link.endsEqual(h, m);\n                    n && (h.id && this.notify(\"link:disconnect\", a, e.findViewByModel(h.id), this._initialMagnet, g), m.id && this.notify(\"link:connect\", a, e.findViewByModel(m.id), d, g)), this._afterArrowheadMove()\n                }\n                this._action = null, this._whenNotAllowed = null, this._initialMagnet = null, this._initialEnd = null, this._validateConnectionArgs = null, this.notify(\"link:pointerup\", a, b, c), joint.dia.CellView.prototype.pointerup.apply(this, arguments)\n            },\n            mouseenter: function(a) {\n                joint.dia.CellView.prototype.mouseenter.apply(this, arguments), this.notify(\"link:mouseenter\", a)\n            },\n            mouseleave: function(a) {\n                joint.dia.CellView.prototype.mouseleave.apply(this, arguments), this.notify(\"link:mouseleave\", a)\n            }\n        }, {\n            makeSelector: function(a) {\n                var b = '[model-id=\"' + a.id + '\"]';\n                return a.port ? b += ' [port=\"' + a.port + '\"]' : a.selector && (b += \" \" + a.selector), b\n            }\n        }), joint.dia.Paper = joint.mvc.View.extend({\n            className: \"paper\",\n            options: {\n                width: 800,\n                height: 600,\n                origin: {\n                    x: 0,\n                    y: 0\n                },\n                gridSize: 1,\n                drawGrid: !1,\n                background: !1,\n                perpendicularLinks: !1,\n                elementView: joint.dia.ElementView,\n                linkView: joint.dia.LinkView,\n                snapLinks: !1,\n                multiLinks: !0,\n                guard: function(a, b) {\n                    return !1\n                },\n                highlighting: {\n                    default: {\n                        name: \"stroke\",\n                        options: {\n                            padding: 3\n                        }\n                    },\n                    magnetAvailability: {\n                        name: \"addClass\",\n                        options: {\n                            className: \"available-magnet\"\n                        }\n                    },\n                    elementAvailability: {\n                        name: \"addClass\",\n                        options: {\n                            className: \"available-cell\"\n                        }\n                    }\n                },\n                preventContextMenu: !0,\n                restrictTranslate: !1,\n                markAvailable: !1,\n                defaultLink: new joint.dia.Link,\n                defaultConnector: {\n                    name: \"normal\"\n                },\n                defaultRouter: {\n                    name: \"normal\"\n                },\n                validateMagnet: function(a, b) {\n                    return \"passive\" !== b.getAttribute(\"magnet\")\n                },\n                validateConnection: function(a, b, c, d, e, f) {\n                    return (\"target\" === e ? c : a) instanceof joint.dia.ElementView\n                },\n                embeddingMode: !1,\n                validateEmbedding: function(a, b) {\n                    return !0\n                },\n                findParentBy: \"bbox\",\n                frontParentOnly: !0,\n                interactive: {\n                    labelMove: !1\n                },\n                linkPinning: !0,\n                clickThreshold: 0,\n                cellViewNamespace: joint.shapes,\n                highlighterNamespace: joint.highlighters\n            },\n            events: {\n                mousedown: \"pointerdown\",\n                dblclick: \"mousedblclick\",\n                click: \"mouseclick\",\n                touchstart: \"pointerdown\",\n                touchend: \"mouseclick\",\n                touchmove: \"pointermove\",\n                mousemove: \"pointermove\",\n                \"mouseover .joint-cell\": \"cellMouseover\",\n                \"mouseout .joint-cell\": \"cellMouseout\",\n                contextmenu: \"contextmenu\",\n                mousewheel: \"mousewheel\",\n                DOMMouseScroll: \"mousewheel\",\n                \"mouseenter .joint-cell\": \"cellMouseenter\",\n                \"mouseleave .joint-cell\": \"cellMouseleave\"\n            },\n            _highlights: {},\n            init: function() {\n                _.bindAll(this, \"pointerup\");\n                var a = this.model = this.options.model || new joint.dia.Graph;\n                this.setGrid(this.options.drawGrid), this.cloneOptions(), this.render(), this.setDimensions(), this.listenTo(a, \"add\", this.onCellAdded).listenTo(a, \"remove\", this.removeView).listenTo(a, \"reset\", this.resetViews).listenTo(a, \"sort\", this._onSort).listenTo(a, \"batch:stop\", this._onBatchStop), this.on(\"cell:highlight\", this.onCellHighlight).on(\"cell:unhighlight\", this.onCellUnhighlight).on(\"scale translate\", this.update), this._mousemoved = 0, this._views = {}, this.$document = $(this.el.ownerDocument)\n            },\n            cloneOptions: function() {\n                var a = this.options;\n                a.origin = _.clone(a.origin), a.defaultConnector = _.clone(a.defaultConnector), a.highlighting = _.defaultsDeep({}, a.highlighting, this.constructor.prototype.options.highlighting)\n            },\n            bindDocumentEvents: function() {\n                var a = this.getEventNamespace();\n                this.$document.on(\"mouseup\" + a + \" touchend\" + a, this.pointerup)\n            },\n            unbindDocumentEvents: function() {\n                this.$document.off(this.getEventNamespace())\n            },\n            render: function() {\n                return this.$el.empty(), this.svg = V(\"svg\").attr({\n                    width: \"100%\",\n                    height: \"100%\"\n                }).node, this.viewport = V(\"g\").addClass(joint.util.addClassNamePrefix(\"viewport\")).node, this.defs = V(\"defs\").node, V(this.svg).append([this.viewport, this.defs]), this.$background = $(\"<div/>\").addClass(joint.util.addClassNamePrefix(\"paper-background\")), this.options.background && this.drawBackground(this.options.background), this.$grid = $(\"<div/>\").addClass(joint.util.addClassNamePrefix(\"paper-grid\")), this.options.drawGrid && this.drawGrid(), this.$el.append(this.$background, this.$grid, this.svg), this\n            },\n            update: function() {\n                this.options.drawGrid && this.drawGrid(), this._background && this.updateBackgroundImage(this._background)\n            },\n            _viewportMatrix: null,\n            _viewportTransformString: null,\n            matrix: function(a) {\n                var b = this.viewport;\n                if (void 0 === a) {\n                    var c = b.getAttribute(\"transform\");\n                    return (this._viewportTransformString || null) === c ? a = this._viewportMatrix : (a = b.getCTM(), this._viewportMatrix = a, this._viewportTransformString = c), V.createSVGMatrix(a)\n                }\n                return a = V.createSVGMatrix(a), V(b).transform(a, {\n                    absolute: !0\n                }), this._viewportMatrix = a, this._viewportTransformString = b.getAttribute(\"transform\"), this\n            },\n            clientMatrix: function() {\n                return V.createSVGMatrix(this.viewport.getScreenCTM())\n            },\n            _onSort: function() {\n                this.model.hasActiveBatch(\"add\") || this.sortViews()\n            },\n            _onBatchStop: function(a) {\n                var b = a && a.batchName;\n                \"add\" !== b || this.model.hasActiveBatch(\"add\") || this.sortViews()\n            },\n            onRemove: function() {\n                this.removeViews(), this.unbindDocumentEvents()\n            },\n            setDimensions: function(a, b) {\n                a = this.options.width = a || this.options.width, b = this.options.height = b || this.options.height, this.$el.css({\n                    width: Math.round(a),\n                    height: Math.round(b)\n                }), this.trigger(\"resize\", a, b)\n            },\n            setOrigin: function(a, b) {\n                return this.translate(a || 0, b || 0, {\n                    absolute: !0\n                })\n            },\n            fitToContent: function(a, b, c, d) {\n                _.isObject(a) ? (d = a, a = d.gridWidth || 1, b = d.gridHeight || 1, c = d.padding || 0) : (d = d || {}, a = a || 1, b = b || 1, c = c || 0), c = joint.util.normalizeSides(c);\n                var e = V(this.viewport).bbox(!0, this.svg),\n                    f = this.scale(),\n                    g = this.translate();\n                e.x *= f.sx, e.y *= f.sy, e.width *= f.sx, e.height *= f.sy;\n                var h = Math.max(Math.ceil((e.width + e.x) / a), 1) * a,\n                    i = Math.max(Math.ceil((e.height + e.y) / b), 1) * b,\n                    j = 0,\n                    k = 0;\n                (\"negative\" == d.allowNewOrigin && e.x < 0 || \"positive\" == d.allowNewOrigin && e.x >= 0 || \"any\" == d.allowNewOrigin) && (j = Math.ceil(-e.x / a) * a, j += c.left, h += j), (\"negative\" == d.allowNewOrigin && e.y < 0 || \"positive\" == d.allowNewOrigin && e.y >= 0 || \"any\" == d.allowNewOrigin) && (k = Math.ceil(-e.y / b) * b, k += c.top, i += k), h += c.right, i += c.bottom, h = Math.max(h, d.minWidth || 0), i = Math.max(i, d.minHeight || 0), h = Math.min(h, d.maxWidth || Number.MAX_VALUE), i = Math.min(i, d.maxHeight || Number.MAX_VALUE);\n                var l = h != this.options.width || i != this.options.height,\n                    m = j != g.tx || k != g.ty;\n                m && this.translate(j, k), l && this.setDimensions(h, i)\n            },\n            scaleContentToFit: function(a) {\n                var b = this.getContentBBox();\n                if (b.width && b.height) {\n                    a = a || {}, _.defaults(a, {\n                        padding: 0,\n                        preserveAspectRatio: !0,\n                        scaleGrid: null,\n                        minScale: 0,\n                        maxScale: Number.MAX_VALUE\n                    });\n                    var c, d = a.padding,\n                        e = a.minScaleX || a.minScale,\n                        f = a.maxScaleX || a.maxScale,\n                        h = a.minScaleY || a.minScale,\n                        i = a.maxScaleY || a.maxScale;\n                    if (a.fittingBBox) c = a.fittingBBox;\n                    else {\n                        var j = this.translate();\n                        c = {\n                            x: j.tx,\n                            y: j.ty,\n                            width: this.options.width,\n                            height: this.options.height\n                        }\n                    }\n                    c = g.rect(c).moveAndExpand({\n                        x: d,\n                        y: d,\n                        width: -2 * d,\n                        height: -2 * d\n                    });\n                    var k = this.scale(),\n                        l = c.width / b.width * k.sx,\n                        m = c.height / b.height * k.sy;\n                    if (a.preserveAspectRatio && (l = m = Math.min(l, m)), a.scaleGrid) {\n                        var n = a.scaleGrid;\n                        l = n * Math.floor(l / n), m = n * Math.floor(m / n)\n                    }\n                    l = Math.min(f, Math.max(e, l)), m = Math.min(i, Math.max(h, m)), this.scale(l, m);\n                    var o = this.getContentBBox(),\n                        p = c.x - o.x,\n                        q = c.y - o.y;\n                    this.translate(p, q)\n                }\n            },\n            getContentBBox: function() {\n                var a = this.viewport.getBoundingClientRect(),\n                    b = this.clientMatrix(),\n                    c = this.translate();\n                return g.rect({\n                    x: a.left - b.e + c.tx,\n                    y: a.top - b.f + c.ty,\n                    width: a.width,\n                    height: a.height\n                })\n            },\n            getArea: function() {\n                return this.paperToLocalRect({\n                    x: 0,\n                    y: 0,\n                    width: this.options.width,\n                    height: this.options.height\n                })\n            },\n            getRestrictedArea: function() {\n                var a;\n                return a = _.isFunction(this.options.restrictTranslate) ? this.options.restrictTranslate.apply(this, arguments) : this.options.restrictTranslate === !0 ? this.getArea() : this.options.restrictTranslate || null\n            },\n            createViewForModel: function(a) {\n                var b, c, d = this.options.cellViewNamespace,\n                    e = a.get(\"type\") + \"View\",\n                    f = joint.util.getByPath(d, e, \".\");\n                a.isLink() ? (b = this.options.linkView, c = joint.dia.LinkView) : (b = this.options.elementView, c = joint.dia.ElementView);\n                var g = b.prototype instanceof Backbone.View ? f || b : b.call(this, a) || f || c;\n                return new g({\n                    model: a,\n                    interactive: this.options.interactive\n                })\n            },\n            onCellAdded: function(a, b, c) {\n                if (this.options.async && c.async !== !1 && _.isNumber(c.position)) {\n                    if (this._asyncCells = this._asyncCells || [], this._asyncCells.push(a), 0 == c.position) {\n                        if (this._frameId) throw new Error(\"another asynchronous rendering in progress\");\n                        this.asyncRenderViews(this._asyncCells, c), delete this._asyncCells\n                    }\n                } else this.renderView(a)\n            },\n            removeView: function(a) {\n                var b = this._views[a.id];\n                return b && (b.remove(), delete this._views[a.id]), b\n            },\n            renderView: function(a) {\n                var b = this._views[a.id] = this.createViewForModel(a);\n                return V(this.viewport).append(b.el), b.paper = this, b.render(), $(b.el).find(\"image\").on(\"dragstart\", function() {\n                    return !1\n                }), b\n            },\n            beforeRenderViews: function(a) {\n                return a.sort(function(a) {\n                    return a instanceof joint.dia.Link ? 1 : -1\n                }), a\n            },\n            afterRenderViews: function() {\n                this.sortViews()\n            },\n            resetViews: function(a, b) {\n                this.removeViews();\n                var c = a.models.slice();\n                c = this.beforeRenderViews(c, b) || c, this._frameId && (joint.util.cancelFrame(this._frameId), delete this._frameId), this.options.async ? this.asyncRenderViews(c, b) : (_.each(c, this.renderView, this), this.sortViews())\n            },\n            removeViews: function() {\n                _.invoke(this._views, \"remove\"), this._views = {}\n            },\n            asyncBatchAdded: _.noop,\n            asyncRenderViews: function(a, b) {\n                if (this._frameId) {\n                    var c = this.options.async && this.options.async.batchSize || 50,\n                        d = a.splice(0, c);\n                    _.each(d, function(a) {\n                        a.graph === this.model && this.renderView(a)\n                    }, this), this.asyncBatchAdded()\n                }\n                a.length ? this._frameId = joint.util.nextFrame(function() {\n                    this.asyncRenderViews(a, b)\n                }, this) : (delete this._frameId, this.afterRenderViews(b), this.trigger(\"render:done\", b))\n            },\n            sortViews: function() {\n                var a = $(this.viewport).children(\"[model-id]\"),\n                    b = this.model.get(\"cells\");\n                joint.util.sortElements(a, function(a, c) {\n                    var d = b.get($(a).attr(\"model-id\")),\n                        e = b.get($(c).attr(\"model-id\"));\n                    return (d.get(\"z\") || 0) > (e.get(\"z\") || 0) ? 1 : -1\n                })\n            },\n            scale: function(a, b, c, d) {\n                if (void 0 === a) return V.matrixToScale(this.matrix());\n                void 0 === b && (b = a), void 0 === c && (c = 0, d = 0);\n                var e = this.translate();\n                if (c || d || e.tx || e.ty) {\n                    var f = e.tx - c * (a - 1),\n                        g = e.ty - d * (b - 1);\n                    this.translate(f, g)\n                }\n                var h = this.matrix();\n                return h.a = a || 0, h.d = b || 0, this.matrix(h), this.trigger(\"scale\", a, b, c, d), this\n            },\n            rotate: function(a, b, c) {\n                if (void 0 === a) return V.matrixToRotate(this.matrix());\n                if (void 0 === b) {\n                    var d = this.viewport.getBBox();\n                    b = d.width / 2, c = d.height / 2\n                }\n                var e = this.matrix().translate(b, c).rotate(a).translate(-b, -c);\n                return this.matrix(e), this\n            },\n            translate: function(a, b) {\n                if (void 0 === a) return V.matrixToTranslate(this.matrix());\n                var c = this.matrix();\n                c.e = a || 0, c.f = b || 0, this.matrix(c);\n                var d = this.translate(),\n                    e = this.options.origin;\n                return e.x = d.tx, e.y = d.ty, this.trigger(\"translate\", d.tx, d.ty), this.options.drawGrid && this.drawGrid(), this\n            },\n            findView: function(a) {\n                for (var b = _.isString(a) ? this.viewport.querySelector(a) : a instanceof $ ? a[0] : a; b && b !== this.el && b !== document;) {\n                    var c = b.getAttribute(\"model-id\");\n                    if (c) return this._views[c];\n                    b = b.parentNode\n                }\n            },\n            findViewByModel: function(a) {\n                var b = _.isString(a) ? a : a.id;\n                return this._views[b]\n            },\n            findViewsFromPoint: function(a) {\n                a = g.point(a);\n                var b = _.map(this.model.getElements(), this.findViewByModel, this);\n                return _.filter(b, function(b) {\n                    return b && g.rect(b.vel.bbox(!1, this.viewport)).containsPoint(a)\n                }, this)\n            },\n            findViewsInArea: function(a, b) {\n                b = _.defaults(b || {}, {\n                    strict: !1\n                }), a = g.rect(a);\n                var c = _.map(this.model.getElements(), this.findViewByModel, this),\n                    d = b.strict ? \"containsRect\" : \"intersect\";\n                return _.filter(c, function(b) {\n                    return b && a[d](g.rect(b.vel.bbox(!1, this.viewport)))\n                }, this)\n            },\n            getModelById: function(a) {\n                return this.model.getCell(a)\n            },\n            snapToGrid: function(a, b) {\n                return this.clientToLocalPoint(a, b).snapToGrid(this.options.gridSize)\n            },\n            localToPaperPoint: function(a, b) {\n                var c = g.Point(a, b),\n                    d = V.transformPoint(c, this.matrix());\n                return g.Point(d)\n            },\n            localToPaperRect: function(a, b, c, d) {\n                var e = g.Rect(a, b),\n                    f = V.transformRect(e, this.matrix());\n                return g.Rect(f)\n            },\n            paperToLocalPoint: function(a, b) {\n                var c = g.Point(a, b),\n                    d = V.transformPoint(c, this.matrix().inverse());\n                return g.Point(d)\n            },\n            paperToLocalRect: function(a, b, c, d) {\n                var e = g.Rect(a, b, c, d),\n                    f = V.transformRect(e, this.matrix().inverse());\n                return g.Rect(f)\n            },\n            localToClientPoint: function(a, b) {\n                var c = g.Point(a, b),\n                    d = V.transformPoint(c, this.clientMatrix());\n                return g.Point(d)\n            },\n            localToClientRect: function(a, b, c, d) {\n                var e = g.Rect(a, b, c, d),\n                    f = V.transformRect(e, this.clientMatrix());\n                return g.Rect(f)\n            },\n            clientToLocalPoint: function(a, b) {\n                var c = g.Point(a, b),\n                    d = V.transformPoint(c, this.clientMatrix().inverse());\n                return g.Point(d)\n            },\n            clientToLocalRect: function(a, b, c, d) {\n                var e = g.Rect(a, b, c, d),\n                    f = V.transformRect(e, this.clientMatrix().inverse());\n                return g.Rect(f)\n            },\n            localToPagePoint: function(a, b) {\n                return this.localToPaperPoint(a, b).offset(this.pageOffset())\n            },\n            localToPageRect: function(a, b, c, d) {\n                return this.localToPaperRect(a, b, c, d).moveAndExpand(this.pageOffset())\n            },\n            pageToLocalPoint: function(a, b) {\n                var c = g.Point(a, b),\n                    d = c.difference(this.pageOffset());\n                return this.paperToLocalPoint(d)\n            },\n            pageToLocalRect: function(a, b, c, d) {\n                var e = this.pageOffset(),\n                    f = g.Rect(a, b, c, d);\n                return f.x -= e.x, f.y -= e.y, this.paperToLocalRect(f)\n            },\n            clientOffset: function() {\n                var a = this.svg.getBoundingClientRect();\n                return g.Point(a.left, a.top)\n            },\n            pageOffset: function() {\n                return this.clientOffset().offset(window.scrollX, window.scrollY)\n            },\n            linkAllowed: function(a) {\n                var b;\n                if (a instanceof joint.dia.Link) b = a;\n                else {\n                    if (!(a instanceof joint.dia.LinkView)) throw new Error(\"Must provide link model or view.\");\n                    b = a.model\n                }\n                if (!this.options.multiLinks) {\n                    var c = b.get(\"source\"),\n                        d = b.get(\"target\");\n                    if (c.id && d.id) {\n                        var e = b.getSourceElement();\n                        if (e) {\n                            var f = this.model.getConnectedLinks(e, {\n                                    outbound: !0,\n                                    inbound: !1\n                                }),\n                                g = _.filter(f, function(a) {\n                                    var b = a.get(\"source\"),\n                                        e = a.get(\"target\");\n                                    return b && b.id === c.id && (!b.port || b.port === c.port) && e && e.id === d.id && (!e.port || e.port === d.port)\n                                }).length;\n                            if (g > 1) return !1\n                        }\n                    }\n                }\n                return !!(this.options.linkPinning || _.has(b.get(\"source\"), \"id\") && _.has(b.get(\"target\"), \"id\"))\n            },\n            getDefaultLink: function(a, b) {\n                return _.isFunction(this.options.defaultLink) ? this.options.defaultLink.call(this, a, b) : this.options.defaultLink.clone()\n            },\n            resolveHighlighter: function(a) {\n                a = a || {};\n                var b = a.highlighter,\n                    c = this.options;\n                if (_.isUndefined(b)) {\n                    var d = _.chain(a).pick(\"embedding\", \"connecting\", \"magnetAvailability\", \"elementAvailability\").keys().first().value();\n                    b = d && c.highlighting[d] || c.highlighting.default\n                }\n                if (!b) return !1;\n                _.isString(b) && (b = {\n                    name: b\n                });\n                var e = b.name,\n                    f = c.highlighterNamespace[e];\n                if (!f) throw new Error('Unknown highlighter (\"' + e + '\")');\n                if (\"function\" != typeof f.highlight) throw new Error('Highlighter (\"' + e + '\") is missing required highlight() method');\n                if (\"function\" != typeof f.unhighlight) throw new Error('Highlighter (\"' + e + '\") is missing required unhighlight() method');\n                return {\n                    highlighter: f,\n                    options: b.options || {},\n                    name: e\n                }\n            },\n            onCellHighlight: function(a, b, c) {\n                if (c = this.resolveHighlighter(c)) {\n                    b.id || (b.id = V.uniqueId());\n                    var d = c.name + b.id + JSON.stringify(c.options);\n                    if (!this._highlights[d]) {\n                        var e = c.highlighter;\n                        e.highlight(a, b, _.clone(c.options)), this._highlights[d] = {\n                            cellView: a,\n                            magnetEl: b,\n                            opt: c.options,\n                            highlighter: e\n                        }\n                    }\n                }\n            },\n            onCellUnhighlight: function(a, b, c) {\n                if (c = this.resolveHighlighter(c)) {\n                    var d = c.name + b.id + JSON.stringify(c.options),\n                        e = this._highlights[d];\n                    e && (e.highlighter.unhighlight(e.cellView, e.magnetEl, e.opt), this._highlights[d] = null)\n                }\n            },\n            mousedblclick: function(a) {\n                a.preventDefault(), a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                if (!this.guard(a, b)) {\n                    var c = this.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    b ? b.pointerdblclick(a, c.x, c.y) : this.trigger(\"blank:pointerdblclick\", a, c.x, c.y)\n                }\n            },\n            mouseclick: function(a) {\n                if (this._mousemoved <= this.options.clickThreshold) {\n                    a = joint.util.normalizeEvent(a);\n                    var b = this.findView(a.target);\n                    if (this.guard(a, b)) return;\n                    var c = this.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    b ? b.pointerclick(a, c.x, c.y) : this.trigger(\"blank:pointerclick\", a, c.x, c.y)\n                }\n            },\n            guard: function(a, b) {\n                return !(!this.options.guard || !this.options.guard(a, b)) || (a.data && !_.isUndefined(a.data.guarded) ? a.data.guarded : !(b && b.model && b.model instanceof joint.dia.Cell) && (this.svg !== a.target && this.el !== a.target && !$.contains(this.svg, a.target)))\n            },\n            contextmenu: function(a) {\n                a = joint.util.normalizeEvent(a), this.options.preventContextMenu && a.preventDefault();\n                var b = this.findView(a.target);\n                if (!this.guard(a, b)) {\n                    var c = this.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    b ? b.contextmenu(a, c.x, c.y) : this.trigger(\"blank:contextmenu\", a, c.x, c.y)\n                }\n            },\n            pointerdown: function(a) {\n                this.bindDocumentEvents(), a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                if (!this.guard(a, b)) {\n                    a.preventDefault(), this._mousemoved = 0;\n                    var c = this.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    b ? (this.sourceView = b, b.pointerdown(a, c.x, c.y)) : this.trigger(\"blank:pointerdown\", a, c.x, c.y)\n                }\n            },\n            pointermove: function(a) {\n                if (this.sourceView) {\n                    a.preventDefault(), a = joint.util.normalizeEvent(a), this._mousemoved++;\n                    var b = this.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    this.sourceView.pointermove(a, b.x, b.y)\n                }\n            },\n            pointerup: function(a) {\n                this.unbindDocumentEvents(), a = joint.util.normalizeEvent(a);\n                var b = this.snapToGrid({\n                    x: a.clientX,\n                    y: a.clientY\n                });\n                this.sourceView ? (this.sourceView.pointerup(a, b.x, b.y), this.sourceView = null) : this.trigger(\"blank:pointerup\", a, b.x, b.y)\n            },\n            mousewheel: function(a) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                if (!this.guard(a, b)) {\n                    var c = a.originalEvent,\n                        d = this.snapToGrid({\n                            x: c.clientX,\n                            y: c.clientY\n                        }),\n                        e = Math.max(-1, Math.min(1, c.wheelDelta || -c.detail));\n                    b ? b.mousewheel(a, d.x, d.y, e) : this.trigger(\"blank:mousewheel\", a, d.x, d.y, e)\n                }\n            },\n            cellMouseover: function(a) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                if (b) {\n                    if (this.guard(a, b)) return;\n                    b.mouseover(a)\n                }\n            },\n            cellMouseout: function(a) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                if (b) {\n                    if (this.guard(a, b)) return;\n                    b.mouseout(a)\n                }\n            },\n            cellMouseenter: function(a) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                b && !this.guard(a, b) && b.mouseenter(a)\n            },\n            cellMouseleave: function(a) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.findView(a.target);\n                b && !this.guard(a, b) && b.mouseleave(a)\n            },\n            setGridSize: function(a) {\n                return this.options.gridSize = a, this.options.drawGrid && this.drawGrid(), this\n            },\n            clearGrid: function() {\n                return this.$grid && this.$grid.css(\"backgroundImage\", \"none\"), this\n            },\n            _getGriRefs: function() {\n                return this._gridCache || (this._gridCache = {\n                    root: V(\"svg\", {\n                        width: \"100%\",\n                        height: \"100%\"\n                    }, V(\"defs\")),\n                    patterns: {},\n                    add: function(a, b) {\n                        V(this.root.node.childNodes[0]).append(b), this.patterns[a] = b, this.root.append(V(\"rect\", {\n                            width: \"100%\",\n                            height: \"100%\",\n                            fill: \"url(#\" + a + \")\"\n                        }))\n                    },\n                    get: function(a) {\n                        return this.patterns[a]\n                    },\n                    exist: function(a) {\n                        return void 0 !== this.patterns[a]\n                    }\n                }), this._gridCache\n            },\n            setGrid: function(a) {\n                this.clearGrid(), this._gridCache = null, this._gridSettings = [];\n                var b = _.isArray(a) ? a : [a || {}];\n                return _.each(b, function(a) {\n                    this._gridSettings.push.apply(this._gridSettings, this._resolveDrawGridOption(a))\n                }, this), this\n            },\n            _resolveDrawGridOption: function(a) {\n                var b = this.constructor.gridPatterns;\n                if (_.isString(a) && b[a]) return _.map(b[a], _.clone);\n                var c = a || {\n                        args: [{}]\n                    },\n                    d = _.isArray(c),\n                    e = c.name;\n                if (d || e || c.markup || (e = \"dot\"), e && b[e]) {\n                    var f = _.map(b[e], _.clone),\n                        g = _.isArray(c.args) ? c.args : [c.args || {}];\n                    _.defaults(g[0], _.omit(a, \"args\"));\n                    for (var h = 0; h < g.length; h++) f[h] && _.extend(f[h], g[h]);\n                    return f\n                }\n                return d ? c : [c]\n            },\n            drawGrid: function(a) {\n                var b = this.options.gridSize;\n                if (b <= 1) return this.clearGrid();\n                var c = _.isArray(a) ? a : [a],\n                    d = this.matrix(),\n                    e = this._getGriRefs();\n                _.each(this._gridSettings, function(a, f) {\n                    var g = \"pattern_\" + f,\n                        h = _.merge(a, c[f], {\n                            sx: d.a || 1,\n                            sy: d.d || 1,\n                            ox: d.e || 0,\n                            oy: d.f || 0\n                        });\n                    h.width = b * (d.a || 1) * (h.scaleFactor || 1), h.height = b * (d.d || 1) * (h.scaleFactor || 1), e.exist(g) || e.add(g, V(\"pattern\", {\n                        id: g,\n                        patternUnits: \"userSpaceOnUse\"\n                    }, V(h.markup)));\n                    var i = e.get(g);\n                    _.isFunction(h.update) && h.update(i.node.childNodes[0], h);\n                    var j = h.ox % h.width;\n                    j < 0 && (j += h.width);\n                    var k = h.oy % h.height;\n                    k < 0 && (k += h.height), i.attr({\n                        x: j,\n                        y: k,\n                        width: h.width,\n                        height: h.height\n                    })\n                });\n                var f = (new XMLSerializer).serializeToString(e.root.node);\n                return f = \"url(data:image/svg+xml;base64,\" + btoa(f) + \")\", this.$grid.css(\"backgroundImage\", f), this\n            },\n            updateBackgroundImage: function(a) {\n                a = a || {};\n                var b = a.position || \"center\",\n                    c = a.size || \"auto auto\",\n                    d = this.scale(),\n                    e = this.translate();\n                if (_.isObject(b)) {\n                    var f = e.tx + d.sx * (b.x || 0),\n                        h = e.ty + d.sy * (b.y || 0);\n                    b = f + \"px \" + h + \"px\"\n                }\n                _.isObject(c) && (c = g.rect(c).scale(d.sx, d.sy), c = c.width + \"px \" + c.height + \"px\"), this.$background.css({\n                    backgroundSize: c,\n                    backgroundPosition: b\n                })\n            },\n            drawBackgroundImage: function(a, b) {\n                if (!(a instanceof HTMLImageElement)) return void this.$background.css(\"backgroundImage\", \"\");\n                b = b || {};\n                var c, d = b.size,\n                    e = b.repeat || \"no-repeat\",\n                    f = b.opacity || 1,\n                    g = Math.abs(b.quality) || 1,\n                    h = this.constructor.backgroundPatterns[_.camelCase(e)];\n                if (_.isFunction(h)) {\n                    a.width *= g, a.height *= g;\n                    var i = h(a, b);\n                    if (!(i instanceof HTMLCanvasElement)) throw new Error(\"dia.Paper: background pattern must return an HTML Canvas instance\");\n                    c = i.toDataURL(\"image/png\"), e = \"repeat\", _.isObject(d) ? (d.width *= i.width / a.width, d.height *= i.height / a.height) : _.isUndefined(d) && (b.size = {\n                        width: i.width / g,\n                        height: i.height / g\n                    })\n                } else c = a.src, _.isUndefined(d) && (b.size = {\n                    width: a.width,\n                    height: a.height\n                });\n                this.$background.css({\n                    opacity: f,\n                    backgroundRepeat: e,\n                    backgroundImage: \"url(\" + c + \")\"\n                }), this.updateBackgroundImage(b)\n            },\n            updateBackgroundColor: function(a) {\n                this.$el.css(\"backgroundColor\", a || \"\")\n            },\n            drawBackground: function(a) {\n                if (a = a || {}, this.updateBackgroundColor(a.color), a.image) {\n                    a = this._background = _.cloneDeep(a);\n                    var b = document.createElement(\"img\");\n                    b.onload = _.bind(this.drawBackgroundImage, this, b, a), b.src = a.image\n                } else this.drawBackgroundImage(null), this._background = null;\n                return this\n            },\n            setInteractivity: function(a) {\n                this.options.interactive = a, _.invoke(this._views, \"setInteractivity\", a)\n            },\n            isDefined: function(a) {\n                return !!this.svg.getElementById(a)\n            },\n            defineFilter: function(a) {\n                if (!_.isObject(a)) throw new TypeError(\"dia.Paper: defineFilter() requires 1. argument to be an object.\");\n                var b = a.id,\n                    c = a.name;\n                if (b || (b = c + this.svg.id + joint.util.hashCode(JSON.stringify(a))), !this.isDefined(b)) {\n                    var d = joint.util.filter,\n                        e = d[c] && d[c](a.args || {});\n                    if (!e) throw new Error(\"Non-existing filter \" + c);\n                    var f = _.extend({\n                        filterUnits: \"objectBoundingBox\",\n                        x: -1,\n                        y: -1,\n                        width: 3,\n                        height: 3\n                    }, a.attrs, {\n                        id: b\n                    });\n                    V(e, f).appendTo(this.defs)\n                }\n                return b\n            },\n            defineGradient: function(a) {\n                if (!_.isObject(a)) throw new TypeError(\"dia.Paper: defineGradient() requires 1. argument to be an object.\");\n                var b = a.id,\n                    c = a.type,\n                    d = a.stops;\n                if (b || (b = c + this.svg.id + joint.util.hashCode(JSON.stringify(a))), !this.isDefined(b)) {\n                    var e = joint.util.template('<stop offset=\"${offset}\" stop-color=\"${color}\" stop-opacity=\"${opacity}\"/>'),\n                        f = _.map(d, function(a) {\n                            return e({\n                                offset: a.offset,\n                                color: a.color,\n                                opacity: _.isFinite(a.opacity) ? a.opacity : 1\n                            })\n                        }),\n                        g = [\"<\" + c + \">\", f.join(\"\"), \"</\" + c + \">\"].join(\"\"),\n                        h = _.extend({\n                            id: b\n                        }, a.attrs);\n                    V(g, h).appendTo(this.defs)\n                }\n                return b\n            },\n            defineMarker: function(a) {\n                if (!_.isObject(a)) throw new TypeError(\"dia.Paper: defineMarker() requires 1. argument to be an object.\");\n                var b = a.id;\n                if (b || (b = this.svg.id + joint.util.hashCode(JSON.stringify(a))), !this.isDefined(b)) {\n                    var c = _.omit(a, \"type\", \"userSpaceOnUse\"),\n                        d = V(\"marker\", {\n                            id: b,\n                            orient: \"auto\",\n                            overflow: \"visible\",\n                            markerUnits: a.markerUnits || \"userSpaceOnUse\"\n                        }, [V(a.type || \"path\", c)]);\n                    d.appendTo(this.defs)\n                }\n                return b\n            }\n        }, {\n            backgroundPatterns: {\n                flipXy: function(a) {\n                    var b = document.createElement(\"canvas\"),\n                        c = a.width,\n                        d = a.height;\n                    b.width = 2 * c, b.height = 2 * d;\n                    var e = b.getContext(\"2d\");\n                    return e.drawImage(a, 0, 0, c, d), e.setTransform(-1, 0, 0, -1, b.width, b.height), e.drawImage(a, 0, 0, c, d), e.setTransform(-1, 0, 0, 1, b.width, 0), e.drawImage(a, 0, 0, c, d), e.setTransform(1, 0, 0, -1, 0, b.height), e.drawImage(a, 0, 0, c, d), b\n                },\n                flipX: function(a) {\n                    var b = document.createElement(\"canvas\"),\n                        c = a.width,\n                        d = a.height;\n                    b.width = 2 * c, b.height = d;\n                    var e = b.getContext(\"2d\");\n                    return e.drawImage(a, 0, 0, c, d), e.translate(2 * c, 0), e.scale(-1, 1), e.drawImage(a, 0, 0, c, d), b\n                },\n                flipY: function(a) {\n                    var b = document.createElement(\"canvas\"),\n                        c = a.width,\n                        d = a.height;\n                    b.width = c, b.height = 2 * d;\n                    var e = b.getContext(\"2d\");\n                    return e.drawImage(a, 0, 0, c, d), e.translate(0, 2 * d), e.scale(1, -1), e.drawImage(a, 0, 0, c, d), b\n                },\n                watermark: function(a, b) {\n                    b = b || {};\n                    var c = a.width,\n                        d = a.height,\n                        e = document.createElement(\"canvas\");\n                    e.width = 3 * c, e.height = 3 * d;\n                    for (var f = e.getContext(\"2d\"), h = _.isNumber(b.watermarkAngle) ? -b.watermarkAngle : -20, i = g.toRad(h), j = e.width / 4, k = e.height / 4, l = 0; l < 4; l++)\n                        for (var m = 0; m < 4; m++)(l + m) % 2 > 0 && (f.setTransform(1, 0, 0, 1, (2 * l - 1) * j, (2 * m - 1) * k), f.rotate(i), f.drawImage(a, -c / 2, -d / 2, c, d));\n                    return e\n                }\n            },\n            gridPatterns: {\n                dot: [{\n                    color: \"#AAAAAA\",\n                    thickness: 1,\n                    markup: \"rect\",\n                    update: function(a, b) {\n                        V(a).attr({\n                            width: b.thickness * b.sx,\n                            height: b.thickness * b.sy,\n                            fill: b.color\n                        })\n                    }\n                }],\n                fixedDot: [{\n                    color: \"#AAAAAA\",\n                    thickness: 1,\n                    markup: \"rect\",\n                    update: function(a, b) {\n                        var c = b.sx <= 1 ? b.thickness * b.sx : b.thickness;\n                        V(a).attr({\n                            width: c,\n                            height: c,\n                            fill: b.color\n                        })\n                    }\n                }],\n                mesh: [{\n                    color: \"#AAAAAA\",\n                    thickness: 1,\n                    markup: \"path\",\n                    update: function(a, b) {\n                        var c, d = b.width,\n                            e = b.height,\n                            f = b.thickness;\n                        c = d - f >= 0 && e - f >= 0 ? [\"M\", d, 0, \"H0 M0 0 V0\", e].join(\" \") : \"M 0 0 0 0\", V(a).attr({\n                            d: c,\n                            stroke: b.color,\n                            \"stroke-width\": b.thickness\n                        })\n                    }\n                }],\n                doubleMesh: [{\n                    color: \"#AAAAAA\",\n                    thickness: 1,\n                    markup: \"path\",\n                    update: function(a, b) {\n                        var c, d = b.width,\n                            e = b.height,\n                            f = b.thickness;\n                        c = d - f >= 0 && e - f >= 0 ? [\"M\", d, 0, \"H0 M0 0 V0\", e].join(\" \") : \"M 0 0 0 0\", V(a).attr({\n                            d: c,\n                            stroke: b.color,\n                            \"stroke-width\": b.thickness\n                        })\n                    }\n                }, {\n                    color: \"#000000\",\n                    thickness: 3,\n                    scaleFactor: 4,\n                    markup: \"path\",\n                    update: function(a, b) {\n                        var c, d = b.width,\n                            e = b.height,\n                            f = b.thickness;\n                        c = d - f >= 0 && e - f >= 0 ? [\"M\", d, 0, \"H0 M0 0 V0\", e].join(\" \") : \"M 0 0 0 0\", V(a).attr({\n                            d: c,\n                            stroke: b.color,\n                            \"stroke-width\": b.thickness\n                        })\n                    }\n                }]\n            }\n        }),\n        function(a, b) {\n            var c = function(c) {\n                var d = b.cloneDeep(c) || {};\n                this.ports = [], this.groups = {}, this.portLayoutNamespace = a.layout.Port, this.portLabelLayoutNamespace = a.layout.PortLabel, this._init(d)\n            };\n            c.prototype = {\n                getPorts: function() {\n                    return this.ports\n                },\n                getGroup: function(a) {\n                    return this.groups[a] || {}\n                },\n                getPortsByGroup: function(a) {\n                    return b.filter(this.ports, function(b) {\n                        return b.group === a\n                    })\n                },\n                getGroupPortsMetrics: function(a, c) {\n                    var d = this.getGroup(a),\n                        e = this.getPortsByGroup(a),\n                        f = d.position || {},\n                        h = f.name,\n                        i = this.portLayoutNamespace;\n                    i[h] || (h = \"left\");\n                    var j = f.args || {},\n                        k = b.pluck(e, \"position.args\"),\n                        l = i[h](k, c, j);\n                    return b.transform(l, b.bind(function(a, b, d) {\n                        var f = e[d];\n                        a.push({\n                            portId: f.id,\n                            portTransformation: b,\n                            labelTransformation: this._getPortLabelLayout(f, g.Point(b), c),\n                            portAttrs: f.attrs,\n                            portSize: f.size,\n                            labelSize: f.label.size\n                        })\n                    }, this), [])\n                },\n                _getPortLabelLayout: function(a, b, c) {\n                    var d = this.portLabelLayoutNamespace,\n                        e = a.label.position.name || \"left\";\n                    return d[e] ? d[e](b, c, a.label.position.args) : null\n                },\n                _init: function(a) {\n                    b.transform(a.groups || {}, b.bind(this._evaluateGroup, this), this.groups), b.transform(a.items || [], b.bind(this._evaluatePort, this), this.ports)\n                },\n                _evaluateGroup: function(a, c, d) {\n                    a[d] = b.merge(c, {\n                        position: this._getPosition(c.position, !0),\n                        label: this._getLabel(c, !0)\n                    })\n                },\n                _evaluatePort: function(a, c) {\n                    var d = b.clone(c),\n                        e = this.getGroup(c.group);\n                    d.markup = d.markup || e.markup, d.attrs = b.merge({}, e.attrs, d.attrs), d.position = this._createPositionNode(e, d), d.label = b.merge({}, e.label, this._getLabel(d)), d.z = this._getZIndex(e, d), d.size = b.extend({}, e.size, d.size), a.push(d)\n                },\n                _getZIndex: function(a, c) {\n                    return b.isNumber(c.z) ? c.z : b.isNumber(a.z) || \"auto\" === a.z ? a.z : \"auto\"\n                },\n                _createPositionNode: function(a, c) {\n                    return b.merge({\n                        name: \"left\",\n                        args: {}\n                    }, a.position, {\n                        args: c.args\n                    })\n                },\n                _getPosition: function(a, c) {\n                    var d, e = {};\n                    b.isFunction(a) ? (d = \"fn\", e.fn = a) : b.isString(a) ? d = a : b.isUndefined(a) ? d = c ? \"left\" : null : b.isArray(a) ? (d = \"absolute\", e.x = a[0], e.y = a[1]) : b.isObject(a) && (d = a.name, b.extend(e, a.args));\n                    var f = {\n                        args: e\n                    };\n                    return d && (f.name = d), f\n                },\n                _getLabel: function(a, b) {\n                    var c = a.label || {},\n                        d = c;\n                    return d.position = this._getPosition(c.position, b), d\n                }\n            }, b.extend(a.dia.Element.prototype, {\n                _initializePorts: function() {\n                    this._createPortData(), this.on(\"change:ports\", function() {\n                        this._processRemovedPort(), this._createPortData()\n                    }, this)\n                },\n                _processRemovedPort: function() {\n                    var a = this.get(\"ports\") || {},\n                        c = {};\n                    b.each(a.items, function(a) {\n                        c[a.id] = !0\n                    });\n                    var d = this.previous(\"ports\") || {},\n                        e = {};\n                    b.each(d.items, function(a) {\n                        c[a.id] || (e[a.id] = !0)\n                    });\n                    var f = this.graph;\n                    if (f && !b.isEmpty(e)) {\n                        var g = f.getConnectedLinks(this, {\n                            inbound: !0\n                        });\n                        b.each(g, function(a) {\n                            e[a.get(\"target\").port] && a.remove()\n                        });\n                        var h = f.getConnectedLinks(this, {\n                            outbound: !0\n                        });\n                        b.each(h, function(a) {\n                            e[a.get(\"source\").port] && a.remove()\n                        })\n                    }\n                },\n                hasPorts: function() {\n                    return this.prop(\"ports/items\").length > 0\n                },\n                hasPort: function(a) {\n                    return this.getPortIndex(a) !== -1\n                },\n                getPorts: function() {\n                    return b.cloneDeep(this.prop(\"ports/items\")) || []\n                },\n                getPort: function(a) {\n                    return b.cloneDeep(b.find(this.prop(\"ports/items\"), function(b) {\n                        return b.id && b.id === a\n                    }))\n                },\n                getPortsPositions: function(a) {\n                    var c = this._portSettingsData.getGroupPortsMetrics(a, g.Rect(this.size()));\n                    return b.transform(c, function(a, b) {\n                        var c = b.portTransformation;\n                        a[b.portId] = {\n                            x: c.x,\n                            y: c.y,\n                            angle: c.angle\n                        }\n                    }, {})\n                },\n                getPortIndex: function(a) {\n                    var c = b.isObject(a) ? a.id : a;\n                    return this._isValidPortId(c) ? b.findIndex(this.prop(\"ports/items\"), {\n                        id: c\n                    }) : -1\n                },\n                addPort: function(a, c) {\n                    if (!b.isObject(a) || b.isArray(a)) throw new Error(\"Element: addPort requires an object.\");\n                    var d = b.clone(this.prop(\"ports/items\")) || [];\n                    return d.push(a), this.prop(\"ports/items\", d, c), this\n                },\n                portProp: function(a, c, d, e) {\n                    var f = this.getPortIndex(a);\n                    if (f === -1) throw new Error(\"Element: unable to find port with id \" + a);\n                    var g = Array.prototype.slice.call(arguments, 1);\n                    return b.isArray(c) ? g[0] = [\"ports\", \"items\", f].concat(c) : b.isString(c) ? g[0] = [\"ports/items/\", f, \"/\", c].join(\"\") : (g = [\"ports/items/\" + f], b.isPlainObject(c) && (g.push(c), g.push(d))), this.prop.apply(this, g)\n                },\n                _validatePorts: function() {\n                    var c = this.get(\"ports\") || {},\n                        d = [];\n                    c = c || {};\n                    var e = c.items || [];\n                    return b.each(e, function(b) {\n                        this._isValidPortId(b.id) || (b.id = a.util.uuid())\n                    }, this), b.uniq(e, \"id\").length !== e.length && d.push(\"Element: found id duplicities in ports.\"), d\n                },\n                _isValidPortId: function(a) {\n                    return !b.isNull(a) && !b.isUndefined(a) && !b.isObject(a)\n                },\n                addPorts: function(a, c) {\n                    return a.length && this.prop(\"ports/items\", (b.clone(this.prop(\"ports/items\")) || []).concat(a), c), this\n                },\n                removePort: function(a, c) {\n                    var d = c || {},\n                        e = b.clone(this.prop(\"ports/items\")),\n                        f = this.getPortIndex(a);\n                    return f !== -1 && (e.splice(f, 1), d.rewrite = !0, this.prop(\"ports/items\", e, d)), this\n                },\n                _createPortData: function() {\n                    var a = this._validatePorts();\n                    if (a.length > 0) throw this.set(\"ports\", this.previous(\"ports\")), new Error(a.join(\" \"));\n                    var d;\n                    this._portSettingsData && (d = this._portSettingsData.getPorts()), this._portSettingsData = new c(this.get(\"ports\"));\n                    var e = this._portSettingsData.getPorts();\n                    if (d) {\n                        var f = b.filter(e, function(a) {\n                                if (!b.find(d, \"id\", a.id)) return a\n                            }),\n                            g = b.filter(d, function(a) {\n                                if (!b.find(e, \"id\", a.id)) return a\n                            });\n                        g.length > 0 && this.trigger(\"ports:remove\", this, g), f.length > 0 && this.trigger(\"ports:add\", this, f)\n                    }\n                }\n            }), b.extend(a.dia.ElementView.prototype, {\n                portContainerMarkup: '<g class=\"joint-port\"/>',\n                portMarkup: '<circle class=\"joint-port-body\" r=\"10\" fill=\"#FFFFFF\" stroke=\"#000000\"/>',\n                portLabelMarkup: '<text class=\"joint-port-label\" fill=\"#000000\"/>',\n                _portElementsCache: null,\n                _initializePorts: function() {\n                    this._portElementsCache = {}, this.listenTo(this.model, \"change:ports\", function() {\n                        this._refreshPorts()\n                    })\n                },\n                _refreshPorts: function() {\n                    this._removePorts(), this._portElementsCache = {}, this._renderPorts()\n                },\n                _renderPorts: function() {\n                    var a = [],\n                        c = this._getContainerElement();\n                    b.each(c.node.childNodes, function(b) {\n                        a.push(b)\n                    });\n                    var d = b.groupBy(this.model._portSettingsData.getPorts(), \"z\"),\n                        e = \"auto\";\n                    b.each(d[e], function(b) {\n                        var d = this._getPortElement(b);\n                        c.append(d), a.push(d)\n                    }, this), b.each(d, function(b, c) {\n                        if (c !== e) {\n                            var f = parseInt(c, 10);\n                            this._appendPorts(d[c], f, a)\n                        }\n                    }, this), this._updatePorts()\n                },\n                _getContainerElement: function() {\n                    return this.rotatableNode || this.vel\n                },\n                _appendPorts: function(a, c, d) {\n                    var e = this._getContainerElement(),\n                        f = b.map(a, this._getPortElement, this);\n                    d[c] || c < 0 ? V(d[Math.max(c, 0)]).before(f) : e.append(f)\n                },\n                _getPortElement: function(a) {\n                    return this._portElementsCache[a.id] ? this._portElementsCache[a.id].portElement : this._createPortElement(a)\n                },\n                _updatePorts: function() {\n                    this._updatePortGroup(void 0);\n                    var a = b.keys(this.model._portSettingsData.groups);\n                    b.each(a, this._updatePortGroup, this)\n                },\n                _removePorts: function() {\n                    b.invoke(this._portElementsCache, \"portElement.remove\")\n                },\n                _createPortElement: function(a) {\n                    var b = V(this._getPortMarkup(a)),\n                        c = V(this._getPortLabelMarkup(a.label));\n                    if (b && b.length > 1) throw new Error(\"ElementView: Invalid port markup - multiple roots.\");\n                    b.attr({\n                        port: a.id,\n                        \"port-group\": a.group\n                    });\n                    var d = V(this.portContainerMarkup).append(b).append(c);\n                    return this._portElementsCache[a.id] = {\n                        portElement: d,\n                        portLabelElement: c\n                    }, d\n                },\n                _updatePortGroup: function(a) {\n                    for (var b = g.Rect(this.model.size()), c = this.model._portSettingsData.getGroupPortsMetrics(a, b), d = 0, e = c.length; d < e; d++) {\n                        var f = c[d],\n                            h = f.portId,\n                            i = this._portElementsCache[h] || {},\n                            j = f.portTransformation;\n                        this.applyPortTransform(i.portElement, j), this.updateDOMSubtreeAttributes(i.portElement.node, f.portAttrs, {\n                            rootBBox: g.Rect(f.portSize)\n                        });\n                        var k = f.labelTransformation;\n                        k && (this.applyPortTransform(i.portLabelElement, k, -j.angle || 0), this.updateDOMSubtreeAttributes(i.portLabelElement.node, k.attrs, {\n                            rootBBox: g.Rect(f.labelSize)\n                        }))\n                    }\n                },\n                applyPortTransform: function(a, b, c) {\n                    var d = V.createSVGMatrix().rotate(c || 0).translate(b.x || 0, b.y || 0).rotate(b.angle || 0);\n                    a.transform(d, {\n                        absolute: !0\n                    })\n                },\n                _getPortMarkup: function(a) {\n                    return a.markup || this.model.get(\"portMarkup\") || this.model.portMarkup || this.portMarkup\n                },\n                _getPortLabelMarkup: function(a) {\n                    return a.markup || this.model.get(\"portLabelMarkup\") || this.model.portLabelMarkup || this.portLabelMarkup\n                }\n            })\n        }(joint, _), joint.shapes.basic = {}, joint.shapes.basic.Generic = joint.dia.Element.extend({\n            defaults: _.defaultsDeep({\n                type: \"basic.Generic\",\n                attrs: {\n                    \".\": {\n                        fill: \"#ffffff\",\n                        stroke: \"none\"\n                    }\n                }\n            }, joint.dia.Element.prototype.defaults)\n        }), joint.shapes.basic.Rect = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Rect\",\n                attrs: {\n                    rect: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\",\n                        width: 100,\n                        height: 60\n                    },\n                    text: {\n                        fill: \"#000000\",\n                        text: \"\",\n                        \"font-size\": 14,\n                        \"ref-x\": .5,\n                        \"ref-y\": .5,\n                        \"text-anchor\": \"middle\",\n                        \"y-alignment\": \"middle\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.TextView = joint.dia.ElementView.extend({\n            initialize: function() {\n                joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.listenTo(this.model, \"change:attrs\", this.resize)\n            }\n        }), joint.shapes.basic.Text = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><text/></g></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Text\",\n                attrs: {\n                    text: {\n                        \"font-size\": 18,\n                        fill: \"#000000\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Circle = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Circle\",\n                size: {\n                    width: 60,\n                    height: 60\n                },\n                attrs: {\n                    circle: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\",\n                        r: 30,\n                        cx: 30,\n                        cy: 30\n                    },\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        \"ref-x\": .5,\n                        \"ref-y\": .5,\n                        \"y-alignment\": \"middle\",\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Ellipse = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Ellipse\",\n                size: {\n                    width: 60,\n                    height: 40\n                },\n                attrs: {\n                    ellipse: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\",\n                        rx: 30,\n                        ry: 20,\n                        cx: 30,\n                        cy: 20\n                    },\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        \"ref-x\": .5,\n                        \"ref-y\": .5,\n                        \"y-alignment\": \"middle\",\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Polygon = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Polygon\",\n                size: {\n                    width: 60,\n                    height: 40\n                },\n                attrs: {\n                    polygon: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\"\n                    },\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        \"ref-x\": .5,\n                        \"ref-dy\": 20,\n                        \"y-alignment\": \"middle\",\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Polyline = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><polyline/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Polyline\",\n                size: {\n                    width: 60,\n                    height: 40\n                },\n                attrs: {\n                    polyline: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\"\n                    },\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        \"ref-x\": .5,\n                        \"ref-dy\": 20,\n                        \"y-alignment\": \"middle\",\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Image = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><image/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Image\",\n                attrs: {\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        \"ref-x\": .5,\n                        \"ref-dy\": 20,\n                        \"y-alignment\": \"middle\",\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Path = joint.shapes.basic.Generic.extend({\n            markup: '<g class=\"rotatable\"><g class=\"scalable\"><path/></g><text/></g>',\n            defaults: _.defaultsDeep({\n                type: \"basic.Path\",\n                size: {\n                    width: 60,\n                    height: 60\n                },\n                attrs: {\n                    path: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\"\n                    },\n                    text: {\n                        \"font-size\": 14,\n                        text: \"\",\n                        \"text-anchor\": \"middle\",\n                        ref: \"path\",\n                        \"ref-x\": .5,\n                        \"ref-dy\": 10,\n                        fill: \"#000000\",\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    }\n                }\n            }, joint.shapes.basic.Generic.prototype.defaults)\n        }), joint.shapes.basic.Rhombus = joint.shapes.basic.Path.extend({\n            defaults: _.defaultsDeep({\n                type: \"basic.Rhombus\",\n                attrs: {\n                    path: {\n                        d: \"M 30 0 L 60 30 30 60 0 30 z\"\n                    },\n                    text: {\n                        \"ref-y\": .5,\n                        \"ref-dy\": null,\n                        \"y-alignment\": \"middle\"\n                    }\n                }\n            }, joint.shapes.basic.Path.prototype.defaults)\n        }), joint.shapes.basic.PortsModelInterface = {\n            initialize: function() {\n                this.updatePortsAttrs(), this.on(\"change:inPorts change:outPorts\", this.updatePortsAttrs, this), this.constructor.__super__.constructor.__super__.initialize.apply(this, arguments)\n            },\n            updatePortsAttrs: function(a) {\n                if (this._portSelectors) {\n                    var b = _.omit(this.get(\"attrs\"), this._portSelectors);\n                    this.set(\"attrs\", b, {\n                        silent: !0\n                    })\n                }\n                this._portSelectors = [];\n                var c = {};\n                _.each(this.get(\"inPorts\"), function(a, b, d) {\n                    var e = this.getPortAttrs(a, b, d.length, \".inPorts\", \"in\");\n                    this._portSelectors = this._portSelectors.concat(_.keys(e)), _.extend(c, e)\n                }, this), _.each(this.get(\"outPorts\"), function(a, b, d) {\n                    var e = this.getPortAttrs(a, b, d.length, \".outPorts\", \"out\");\n                    this._portSelectors = this._portSelectors.concat(_.keys(e)), _.extend(c, e)\n                }, this), this.attr(c, {\n                    silent: !0\n                }), this.processPorts(), this.trigger(\"process:ports\")\n            },\n            getPortSelector: function(a) {\n                var b = \".inPorts\",\n                    c = this.get(\"inPorts\").indexOf(a);\n                if (c < 0 && (b = \".outPorts\", c = this.get(\"outPorts\").indexOf(a), c < 0)) throw new Error(\"getPortSelector(): Port doesn't exist.\");\n                return b + \">g:nth-child(\" + (c + 1) + \")>.port-body\"\n            }\n        }, joint.shapes.basic.PortsViewInterface = {\n            initialize: function() {\n                this.listenTo(this.model, \"process:ports\", this.update), joint.dia.ElementView.prototype.initialize.apply(this, arguments)\n            },\n            update: function() {\n                this.renderPorts(), joint.dia.ElementView.prototype.update.apply(this, arguments)\n            },\n            renderPorts: function() {\n                var a = this.$(\".inPorts\").empty(),\n                    b = this.$(\".outPorts\").empty(),\n                    c = joint.util.template(this.model.portMarkup);\n                _.each(_.filter(this.model.ports, function(a) {\n                    return \"in\" === a.type\n                }), function(b, d) {\n                    a.append(V(c({\n                        id: d,\n                        port: b\n                    })).node)\n                }), _.each(_.filter(this.model.ports, function(a) {\n                    return \"out\" === a.type\n                }), function(a, d) {\n                    b.append(V(c({\n                        id: d,\n                        port: a\n                    })).node)\n                })\n            }\n        }, joint.shapes.basic.TextBlock = joint.shapes.basic.Generic.extend({\n            markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect/></g>', joint.env.test(\"svgforeignobject\") ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', \"</g>\"].join(\"\"),\n            defaults: _.defaultsDeep({\n                type: \"basic.TextBlock\",\n                attrs: {\n                    rect: {\n                        fill: \"#ffffff\",\n                        stroke: \"#000000\",\n                        width: 80,\n                        height: 100\n                    },\n                    text: {\n                        fill: \"#000000\",\n                        \"font-size\": 14,\n                        \"font-family\": \"Arial, helvetica, sans-serif\"\n                    },\n                    \".content\": {\n                        text: \"\",\n                        \"ref-x\": .5,\n                        \"ref-y\": .5,\n                        \"y-alignment\": \"middle\",\n                        \"x-alignment\": \"middle\"\n                    }\n                },\n                content: \"\"\n            }, joint.shapes.basic.Generic.prototype.defaults),\n            initialize: function() {\n                this.listenTo(this, \"change:size\", this.updateSize), this.listenTo(this, \"change:content\", this.updateContent), this.updateSize(this, this.get(\"size\")), this.updateContent(this, this.get(\"content\")), joint.shapes.basic.Generic.prototype.initialize.apply(this, arguments)\n            },\n            updateSize: function(a, b) {\n                this.attr({\n                    \".fobj\": _.clone(b),\n                    div: {\n                        style: _.clone(b)\n                    }\n                })\n            },\n            updateContent: function(a, b) {\n                joint.env.test(\"svgforeignobject\") ? this.attr({\n                    \".content\": {\n                        html: b\n                    }\n                }) : this.attr({\n                    \".content\": {\n                        text: b\n                    }\n                })\n            },\n            setForeignObjectSize: function() {\n                this.updateSize.apply(this, arguments)\n            },\n            setDivContent: function() {\n                this.updateContent.apply(this, arguments)\n            }\n        }), joint.shapes.basic.TextBlockView = joint.dia.ElementView.extend({\n            initialize: function() {\n                joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.noSVGForeignObjectElement = !joint.env.test(\"svgforeignobject\"), joint.env.test(\"svgforeignobject\") || this.listenTo(this.model, \"change:content change:size\", function(a) {\n                    this.updateContent(a)\n                })\n            },\n            update: function(a, b) {\n                var c = this.model;\n                if (joint.env.test(\"svgforeignobject\")) joint.dia.ElementView.prototype.update.call(this, c, b);\n                else {\n                    var d = _.omit(b || c.get(\"attrs\"), \".content\");\n                    joint.dia.ElementView.prototype.update.call(this, c, d), b && !_.has(b, \".content\") || this.updateContent(c, b)\n                }\n            },\n            updateContent: function(a, b) {\n                var c = _.merge({}, (b || a.get(\"attrs\"))[\".content\"]);\n                c = _.omit(c, \"text\");\n                var d = joint.util.breakText(a.get(\"content\"), a.get(\"size\"), c, {\n                        svgDocument: this.paper.svg\n                    }),\n                    e = joint.util.setByPath({}, \".content\", c, \"/\");\n                e[\".content\"].text = d, joint.dia.ElementView.prototype.update.call(this, a, e)\n            }\n        }), joint.routers.manhattan = function(a, b, c) {\n            \"use strict\";\n\n            function d(a) {\n                this.map = {}, this.options = a, this.mapGridSize = 100\n            }\n\n            function e() {\n                this.items = [], this.hash = {}, this.values = {}, this.OPEN = 1, this.CLOSE = 2\n            }\n\n            function f(b) {\n                return a.point(0 === b.x ? 0 : Math.abs(b.x) / b.x, 0 === b.y ? 0 : Math.abs(b.y) / b.y)\n            }\n\n            function g(b, c, d, e) {\n                for (var g, h = [], i = f(e.difference(c)), j = c; g = b[j];) {\n                    var k = f(j.difference(g));\n                    k.equals(i) || (h.unshift(j), i = k), j = g\n                }\n                var l = f(a.point(j).difference(d));\n                return l.equals(i) || h.unshift(j), h\n            }\n\n            function h(a, c, d) {\n                var e = d.step,\n                    f = a.center(),\n                    g = b.chain(d.directionMap).pick(c).map(function(b) {\n                        var c = b.x * a.width / 2,\n                            d = b.y * a.height / 2,\n                            g = f.clone().offset(c, d);\n                        return a.containsPoint(g) && g.offset(b.x * e, b.y * e), g.snapToGrid(e)\n                    }).value();\n                return g\n            }\n\n            function i(b, c, d) {\n                var e = 360 / d;\n                return Math.floor(a.normalizeAngle(b.theta(c) + e / 2) / e) * e\n            }\n\n            function j(a, b) {\n                var c = Math.abs(a - b);\n                return c > 180 ? 360 - c : c\n            }\n\n            function k(a, b) {\n                for (var c = 1 / 0, d = 0, e = b.length; d < e; d++) {\n                    var f = a.manhattanDistance(b[d]);\n                    f < c && (c = f)\n                }\n                return c\n            }\n\n            function l(c, d, f, l) {\n                var m, n, o, p, q = l.step;\n                if (c instanceof a.rect ? (m = h(c, l.startDirections, l), o = c.center().snapToGrid(q)) : (o = c.clone().snapToGrid(q), m = [o]), d instanceof a.rect ? (n = h(d, l.endDirections, l), p = d.center().snapToGrid(q)) : (p = d.clone().snapToGrid(q), n = [p]), m = b.filter(m, f.isPointAccessible, f), n = b.filter(n, f.isPointAccessible, f), m.length > 0 && n.length > 0) {\n                    var r = new e,\n                        s = {},\n                        t = {};\n                    b.each(m, function(a) {\n                        var b = a.toString();\n                        r.add(b, k(a, n)), t[b] = 0\n                    });\n                    for (var u, v, w = l.directions, x = w.length, y = l.maximumLoops, z = b.invoke(n, \"toString\"); !r.isEmpty() && y > 0;) {\n                        var A = r.pop(),\n                            B = a.point(A),\n                            C = t[A],\n                            D = E,\n                            E = s[A] ? i(s[A], B, x) : null != l.previousDirAngle ? l.previousDirAngle : i(o, B, x);\n                        if (z.indexOf(A) >= 0 && (v = j(E, i(B, p, x)), B.equals(p) || v < 180)) return l.previousDirAngle = E, g(s, B, o, p);\n                        for (var F = 0; F < x; F++)\n                            if (u = w[F], v = j(E, u.angle), !(D && v > l.maxAllowedDirectionChange)) {\n                                var G = B.clone().offset(u.offsetX, u.offsetY),\n                                    H = G.toString();\n                                if (!r.isClose(H) && f.isPointAccessible(G)) {\n                                    var I = C + u.cost + l.penalties[v];\n                                    (!r.isOpen(H) || I < t[H]) && (s[H] = B, t[H] = I, r.add(H, I + k(G, n)))\n                                }\n                            }\n                        y--\n                    }\n                }\n                return l.fallbackRoute(o, p, l)\n            }\n\n            function m(c) {\n                c.directions = b.result(c, \"directions\"), c.penalties = b.result(c, \"penalties\"), c.paddingBox = b.result(c, \"paddingBox\"), b.each(c.directions, function(b) {\n                    var c = a.point(0, 0),\n                        d = a.point(b.offsetX, b.offsetY);\n                    b.angle = a.normalizeAngle(c.theta(d))\n                })\n            }\n\n            function n(e, f) {\n                m(f), this.options.perpendicular = !!f.perpendicular;\n                for (var g = a.rect(this.sourceBBox).moveAndExpand(f.paddingBox), h = a.rect(this.targetBBox).moveAndExpand(f.paddingBox), i = new d(f).build(this.paper.model, this.model), j = b.map(e, a.point), k = [], n = g.center().snapToGrid(f.step), o = 0, p = j.length; o <= p; o++) {\n                    var q = null,\n                        r = s || g,\n                        s = j[o];\n                    if (!s) {\n                        s = h;\n                        var t = !this.model.get(\"source\").id || !this.model.get(\"target\").id;\n                        if (t && b.isFunction(f.draggingRoute)) {\n                            var u = r instanceof a.rect ? r.center() : r;\n                            q = f.draggingRoute(u, s.origin(), f)\n                        }\n                    }\n                    if (q = q || l(r, s, i, f), null === q) {\n                        if (!b.isFunction(c.routers.orthogonal)) throw new Error(\"Manhattan requires the orthogonal router.\");\n                        return c.routers.orthogonal(e, f, this)\n                    }\n                    var v = b.first(q);\n                    v && v.equals(n) && q.shift(), n = b.last(q) || n, Array.prototype.push.apply(k, q)\n                }\n                return k\n            }\n            var o = {\n                step: 10,\n                perpendicular: !0,\n                excludeEnds: [],\n                excludeTypes: [\"basic.Text\"],\n                maximumLoops: 2e3,\n                startDirections: [\"left\", \"right\", \"top\", \"bottom\"],\n                endDirections: [\"left\", \"right\", \"top\", \"bottom\"],\n                directionMap: {\n                    right: {\n                        x: 1,\n                        y: 0\n                    },\n                    bottom: {\n                        x: 0,\n                        y: 1\n                    },\n                    left: {\n                        x: -1,\n                        y: 0\n                    },\n                    top: {\n                        x: 0,\n                        y: -1\n                    }\n                },\n                maxAllowedDirectionChange: 90,\n                paddingBox: function() {\n                    var a = this.step;\n                    return {\n                        x: -a,\n                        y: -a,\n                        width: 2 * a,\n                        height: 2 * a\n                    }\n                },\n                directions: function() {\n                    var a = this.step;\n                    return [{\n                        offsetX: a,\n                        offsetY: 0,\n                        cost: a\n                    }, {\n                        offsetX: 0,\n                        offsetY: a,\n                        cost: a\n                    }, {\n                        offsetX: -a,\n                        offsetY: 0,\n                        cost: a\n                    }, {\n                        offsetX: 0,\n                        offsetY: -a,\n                        cost: a\n                    }]\n                },\n                penalties: function() {\n                    return {\n                        0: 0,\n                        45: this.step / 2,\n                        90: this.step / 2\n                    }\n                },\n                fallbackRoute: b.constant(null),\n                draggingRoute: null\n            };\n            return d.prototype.build = function(a, c) {\n                    var d = this.options,\n                        e = b.chain(d.excludeEnds).map(c.get, c).pluck(\"id\").map(a.getCell, a).value(),\n                        f = [],\n                        g = a.getCell(c.get(\"source\").id);\n                    g && (f = b.union(f, b.map(g.getAncestors(), \"id\")));\n                    var h = a.getCell(c.get(\"target\").id);\n                    h && (f = b.union(f, b.map(h.getAncestors(), \"id\")));\n                    var i = this.mapGridSize;\n                    return b.chain(a.getElements()).difference(e).reject(function(a) {\n                        return b.contains(d.excludeTypes, a.get(\"type\")) || b.contains(f, a.id)\n                    }).invoke(\"getBBox\").invoke(\"moveAndExpand\", d.paddingBox).foldl(function(a, b) {\n                        for (var c = b.origin().snapToGrid(i), d = b.corner().snapToGrid(i), e = c.x; e <= d.x; e += i)\n                            for (var f = c.y; f <= d.y; f += i) {\n                                var g = e + \"@\" + f;\n                                a[g] = a[g] || [], a[g].push(b)\n                            }\n                        return a\n                    }, this.map).value(), this\n                }, d.prototype.isPointAccessible = function(a) {\n                    var c = a.clone().snapToGrid(this.mapGridSize).toString();\n                    return b.every(this.map[c], function(b) {\n                        return !b.containsPoint(a)\n                    })\n                }, e.prototype.add = function(a, c) {\n                    this.hash[a] ? this.items.splice(this.items.indexOf(a), 1) : this.hash[a] = this.OPEN, this.values[a] = c;\n                    var d = b.sortedIndex(this.items, a, function(a) {\n                        return this.values[a]\n                    }, this);\n                    this.items.splice(d, 0, a)\n                }, e.prototype.remove = function(a) {\n                    this.hash[a] = this.CLOSE\n                }, e.prototype.isOpen = function(a) {\n                    return this.hash[a] === this.OPEN\n                }, e.prototype.isClose = function(a) {\n                    return this.hash[a] === this.CLOSE\n                }, e.prototype.isEmpty = function() {\n                    return 0 === this.items.length\n                }, e.prototype.pop = function() {\n                    var a = this.items.shift();\n                    return this.remove(a), a\n                },\n                function(a, c, d) {\n                    return n.call(d, a, b.extend({}, o, c))\n                }\n        }(g, _, joint), joint.routers.metro = function() {\n            if (!_.isFunction(joint.routers.manhattan)) throw new Error(\"Metro requires the manhattan router.\");\n            var a = {\n                diagonalCost: null,\n                directions: function() {\n                    var a = this.step,\n                        b = this.diagonalCost || Math.ceil(Math.sqrt(a * a << 1));\n                    return [{\n                        offsetX: a,\n                        offsetY: 0,\n                        cost: a\n                    }, {\n                        offsetX: a,\n                        offsetY: a,\n                        cost: b\n                    }, {\n                        offsetX: 0,\n                        offsetY: a,\n                        cost: a\n                    }, {\n                        offsetX: -a,\n                        offsetY: a,\n                        cost: b\n                    }, {\n                        offsetX: -a,\n                        offsetY: 0,\n                        cost: a\n                    }, {\n                        offsetX: -a,\n                        offsetY: -a,\n                        cost: b\n                    }, {\n                        offsetX: 0,\n                        offsetY: -a,\n                        cost: a\n                    }, {\n                        offsetX: a,\n                        offsetY: -a,\n                        cost: b\n                    }]\n                },\n                maxAllowedDirectionChange: 45,\n                fallbackRoute: function(a, b, c) {\n                    var d = a.theta(b),\n                        e = {\n                            x: b.x,\n                            y: a.y\n                        },\n                        f = {\n                            x: a.x,\n                            y: b.y\n                        };\n                    if (d % 180 > 90) {\n                        var h = e;\n                        e = f, f = h\n                    }\n                    var i = d % 90 < 45 ? e : f,\n                        j = g.line(a, i),\n                        k = 90 * Math.ceil(d / 90),\n                        l = g.point.fromPolar(j.squaredLength(), g.toRad(k + 135), i),\n                        m = g.line(b, l),\n                        n = j.intersection(m);\n                    return n ? [n.round(), b] : [b]\n                }\n            };\n            return function(b, c, d) {\n                return joint.routers.manhattan(b, _.extend({}, a, c), d)\n            }\n        }(), joint.routers.normal = function(a, b, c) {\n            return a\n        }, joint.routers.oneSide = function(a, b, c) {\n            var d, e, f, g = b.side || \"bottom\",\n                h = b.padding || 40,\n                i = c.sourceBBox,\n                j = c.targetBBox,\n                k = i.center(),\n                l = j.center();\n            switch (g) {\n                case \"bottom\":\n                    f = 1, d = \"y\", e = \"height\";\n                    break;\n                case \"top\":\n                    f = -1, d = \"y\", e = \"height\";\n                    break;\n                case \"left\":\n                    f = -1, d = \"x\", e = \"width\";\n                    break;\n                case \"right\":\n                    f = 1, d = \"x\", e = \"width\";\n                    break;\n                default:\n                    throw new Error(\"Router: invalid side\")\n            }\n            return k[d] += f * (i[e] / 2 + h), l[d] += f * (j[e] / 2 + h), f * (k[d] - l[d]) > 0 ? l[d] = k[d] : k[d] = l[d], [k].concat(a, l)\n        }, joint.routers.orthogonal = function() {\n            function a(a, b) {\n                return a.x == b.x ? a.y > b.y ? \"N\" : \"S\" : a.y == b.y ? a.x > b.x ? \"W\" : \"E\" : null\n            }\n\n            function b(a, b) {\n                return a[\"W\" == b || \"E\" == b ? \"width\" : \"height\"]\n            }\n\n            function c(a, b) {\n                return g.rect(a).moveAndExpand({\n                    x: -b,\n                    y: -b,\n                    width: 2 * b,\n                    height: 2 * b\n                })\n            }\n\n            function d(a) {\n                return g.rect(a.x, a.y, 0, 0)\n            }\n\n            function e(a, b) {\n                var c = Math.min(a.x, b.x),\n                    d = Math.min(a.y, b.y),\n                    e = Math.max(a.x + a.width, b.x + b.width),\n                    f = Math.max(a.y + a.height, b.y + b.height);\n                return g.rect(c, d, e - c, f - d)\n            }\n\n            function f(a, b, c) {\n                var d = g.point(a.x, b.y);\n                return c.containsPoint(d) && (d = g.point(b.x, a.y)), d\n            }\n\n            function h(b, c, d) {\n                var e = g.point(b.x, c.y),\n                    f = g.point(c.x, b.y),\n                    h = a(b, e),\n                    i = a(b, f),\n                    j = n[d],\n                    k = h == d || h != j && (i == j || i != d) ? e : f;\n                return {\n                    points: [k],\n                    direction: a(k, c)\n                }\n            }\n\n            function i(b, c, d) {\n                var e = f(b, c, d);\n                return {\n                    points: [e],\n                    direction: a(e, c)\n                }\n            }\n\n            function j(c, d, e, h) {\n                var i, j = {},\n                    k = [g.point(c.x, d.y), g.point(d.x, c.y)],\n                    l = _.filter(k, function(a) {\n                        return !e.containsPoint(a)\n                    }),\n                    m = _.filter(l, function(b) {\n                        return a(b, c) != h\n                    });\n                if (m.length > 0) i = _.filter(m, function(b) {\n                    return a(c, b) == h\n                }).pop(), i = i || m[0], j.points = [i], j.direction = a(i, d);\n                else {\n                    i = _.difference(k, l)[0];\n                    var n = g.point(d).move(i, -b(e, h) / 2),\n                        o = f(n, c, e);\n                    j.points = [o, n], j.direction = a(n, d)\n                }\n                return j\n            }\n\n            function k(c, d, e, f) {\n                var j = i(d, c, f),\n                    k = j.points[0];\n                if (e.containsPoint(k)) {\n                    j = i(c, d, e);\n                    var l = j.points[0];\n                    if (f.containsPoint(l)) {\n                        var m = g.point(c).move(l, -b(e, a(c, l)) / 2),\n                            n = g.point(d).move(k, -b(f, a(d, k)) / 2),\n                            o = g.line(m, n).midpoint(),\n                            p = i(c, o, e),\n                            q = h(o, d, p.direction);\n                        j.points = [p.points[0], q.points[0]], j.direction = q.direction\n                    }\n                }\n                return j\n            }\n\n            function l(b, d, h, i, j) {\n                var k, l, m, n = {},\n                    p = c(e(h, i), 1),\n                    q = p.center().distance(d) > p.center().distance(b),\n                    r = q ? d : b,\n                    s = q ? b : d;\n                return j ? (k = g.point.fromPolar(p.width + p.height, o[j], r), k = p.pointNearestToPoint(k).move(k, -1)) : k = p.pointNearestToPoint(r).move(r, 1), l = f(k, s, p), k.round().equals(l.round()) ? (l = g.point.fromPolar(p.width + p.height, g.toRad(k.theta(r)) + Math.PI / 2, s), l = p.pointNearestToPoint(l).move(s, 1).round(), m = f(k, l, p), n.points = q ? [l, m, k] : [k, m, l]) : n.points = q ? [l, k] : [k, l], n.direction = q ? a(k, d) : a(l, d), n\n            }\n\n            function m(b, e, f) {\n                var m = e.elementPadding || 20,\n                    n = [],\n                    o = c(f.sourceBBox, m),\n                    p = c(f.targetBBox, m);\n                b = _.map(b, g.point), b.unshift(o.center()), b.push(p.center());\n                for (var q, r = 0, s = b.length - 1; r < s; r++) {\n                    var t = null,\n                        u = b[r],\n                        v = b[r + 1],\n                        w = !!a(u, v);\n                    if (0 == r) r + 1 == s ? o.intersect(c(p, 1)) ? t = l(u, v, o, p) : w || (t = k(u, v, o, p)) : o.containsPoint(v) ? t = l(u, v, o, c(d(v), m)) : w || (t = i(u, v, o));\n                    else if (r + 1 == s) {\n                        var x = w && a(v, u) == q;\n                        p.containsPoint(u) || x ? t = l(u, v, c(d(u), m), p, q) : w || (t = j(u, v, p, q))\n                    } else w || (t = h(u, v, q));\n                    t ? (Array.prototype.push.apply(n, t.points), q = t.direction) : q = a(u, v), r + 1 < s && n.push(v)\n                }\n                return n\n            }\n            var n = {\n                    N: \"S\",\n                    S: \"N\",\n                    E: \"W\",\n                    W: \"E\"\n                },\n                o = {\n                    N: -Math.PI / 2 * 3,\n                    S: -Math.PI / 2,\n                    E: 0,\n                    W: Math.PI\n                };\n            return m\n        }(), joint.connectors.normal = function(a, b, c) {\n            var d = [\"M\", a.x, a.y];\n            return _.each(c, function(a) {\n                d.push(a.x, a.y)\n            }), d.push(b.x, b.y), d.join(\" \")\n        }, joint.connectors.rounded = function(a, b, c, d) {\n            d = d || {};\n            var e, f, h, i, j, k, l = d.radius || 10,\n                m = [\"M\", a.x, a.y];\n            return _.each(c, function(d, n) {\n                j = c[n - 1] || a, k = c[n + 1] || b, h = i || g.point(d).distance(j) / 2, i = g.point(d).distance(k) / 2, e = g.point(d).move(j, -Math.min(l, h)).round(), f = g.point(d).move(k, -Math.min(l, i)).round(), m.push(e.x, e.y, \"S\", d.x, d.y, f.x, f.y, \"L\")\n            }), m.push(b.x, b.y), m.join(\" \")\n        }, joint.connectors.smooth = function(a, b, c) {\n            var d;\n            if (c.length) d = g.bezier.curveThroughPoints([a].concat(c).concat([b]));\n            else {\n                var e = (a.x + b.x) / 2;\n                d = [\"M\", a.x, a.y, \"C\", e, a.y, e, b.y, b.x, b.y]\n            }\n            return d.join(\" \")\n        }, joint.connectors.jumpover = function(a, b) {\n            function c(a, c, d) {\n                var e = [].concat(a, d, c);\n                return e.reduce(function(a, c, d) {\n                    var f = e[d + 1];\n                    return null != f && (a[d] = b.line(c, f)), a\n                }, [])\n            }\n\n            function d(a) {\n                var b = a.paper._jumpOverUpdateList;\n                null == b && (b = a.paper._jumpOverUpdateList = [], a.paper.on(\"cell:pointerup\", e), a.paper.model.on(\"reset\", function() {\n                    b = a.paper._jumpOverUpdateList = []\n                })), b.indexOf(a) < 0 && (b.push(a), a.listenToOnce(a.model, \"change:connector remove\", function() {\n                    b.splice(b.indexOf(a), 1)\n                }))\n            }\n\n            function e() {\n                for (var a = this._jumpOverUpdateList, b = 0; b < a.length; b++) a[b].update()\n            }\n\n            function f(b, c) {\n                return a(c).map(function(a) {\n                    return b.intersection(a)\n                }).compact().value()\n            }\n\n            function g(a, c) {\n                return b.line(a, c).squaredLength()\n            }\n\n            function h(a, c, d) {\n                return c.reduce(function(e, f, g) {\n                    if (f.skip === !0) return e;\n                    var h = e.pop() || a,\n                        i = b.point(f).move(h.start, -d),\n                        j = b.point(f).move(h.start, +d),\n                        k = c[g + 1];\n                    if (null != k) {\n                        var m = j.distance(k);\n                        m <= d && (j = k.move(h.start, m), k.skip = !0)\n                    } else {\n                        var n = i.distance(h.end);\n                        if (n < 2 * d + l) return e.push(h), e\n                    }\n                    var o = j.distance(h.start);\n                    if (o < 2 * d + l) return e.push(h), e;\n                    var p = b.line(i, j);\n                    return p.isJump = !0, e.push(b.line(h.start, i), p, b.line(j, h.end)), e\n                }, [])\n            }\n\n            function i(c, d, e) {\n                var f = [\"M\", c[0].start.x, c[0].start.y],\n                    g = a(c).map(function(a) {\n                        if (a.isJump) {\n                            var c;\n                            if (\"arc\" === e) {\n                                c = a.start.difference(a.end);\n                                var f = Number(c.x < 0 && c.y < 0);\n                                return [\"A\", d, d, 0, 0, f, a.end.x, a.end.y]\n                            }\n                            if (\"gap\" === e) return [\"M\", a.end.x, a.end.y];\n                            if (\"cubic\" === e) {\n                                c = a.start.difference(a.end);\n                                var g = a.start.theta(a.end),\n                                    h = .6 * d,\n                                    i = 1.35 * d;\n                                c.x < 0 && c.y < 0 && (i *= -1);\n                                var j = b.point(a.start.x + h, a.start.y + i).rotate(a.start, g),\n                                    k = b.point(a.end.x - h, a.end.y + i).rotate(a.end, g);\n                                return [\"C\", j.x, j.y, k.x, k.y, a.end.x, a.end.y]\n                            }\n                        }\n                        return [\"L\", a.end.x, a.end.y]\n                    }).flatten().value();\n                return [].concat(f, g).join(\" \")\n            }\n            var j = 5,\n                k = [\"arc\", \"gap\", \"cubic\"],\n                l = 1,\n                m = [\"smooth\"];\n            return function(b, e, l, n) {\n                d(this);\n                var o = n.size || j,\n                    p = n.jump && (\"\" + n.jump).toLowerCase(),\n                    q = n.ignoreConnectors || m;\n                k.indexOf(p) === -1 && (p = k[0]);\n                var r = this.paper,\n                    s = r.model,\n                    t = s.getLinks();\n                if (1 === t.length) return i(c(b, e, l), o, p);\n                var u = this.model,\n                    v = t.indexOf(u),\n                    w = r.options.defaultConnector || {},\n                    x = t.filter(function(b, c) {\n                        var d = b.get(\"connector\") || w;\n                        return !a.contains(q, d.name) && (!(c > v) || \"jumpover\" !== d.name)\n                    }),\n                    y = x.map(function(a) {\n                        return r.findViewByModel(a)\n                    }),\n                    z = c(b, e, l),\n                    A = y.map(function(a) {\n                        return null == a ? [] : a === this ? z : c(a.sourcePoint, a.targetPoint, a.route)\n                    }, this),\n                    B = z.reduce(function(b, c) {\n                        var d = a(x).map(function(a, b) {\n                            return a === u ? null : f(c, A[b])\n                        }).flatten().compact().sortBy(a.partial(g, c.start)).value();\n                        return d.length > 0 ? b.push.apply(b, h(c, d, o)) : b.push(c), b\n                    }, []);\n                return i(B, o, p)\n            }\n        }(_, g),\n        function(a, b, c) {\n            function d(b, c, d) {\n                var e = b.toJSON();\n                return e.angle = c || 0, a.defaults({}, d, e)\n            }\n\n            function e(c, e, f) {\n                return a.map(c, function(a, b, c) {\n                    var e = this.pointAt((b + .5) / c.length);\n                    return (a.dx || a.dy) && e.offset(a.dx || 0, a.dy || 0), d(e.round(), 0, a)\n                }, b.line(e, f))\n            }\n\n            function f(c, e, f, g) {\n                var h = e.center(),\n                    i = e.width / e.height,\n                    j = e.topMiddle(),\n                    k = b.Ellipse.fromRect(e);\n                return a.map(c, function(a, b, c) {\n                    var e = f + g(b, c.length),\n                        l = j.clone().rotate(h, -e).scale(i, 1, h),\n                        m = a.compensateRotation ? -k.tangentTheta(l) : 0;\n                    return (a.dx || a.dy) && l.offset(a.dx || 0, a.dy || 0), a.dr && l.move(h, a.dr), d(l.round(), m, a)\n                })\n            }\n\n            function g(c, d) {\n                var e = d.x;\n                a.isString(e) && (e = parseFloat(e) / 100 * c.width);\n                var f = d.y;\n                return a.isString(f) && (f = parseFloat(f) / 100 * c.height), b.point(e || 0, f || 0)\n            }\n            c.layout.Port = {\n                absolute: function(b, c, d) {\n                    return a.map(b, a.partial(g, c))\n                },\n                fn: function(a, b, c) {\n                    return c.fn(a, b, c)\n                },\n                line: function(a, b, c) {\n                    var d = g(b, c.start || b.origin()),\n                        f = g(b, c.end || b.corner());\n                    return e(a, d, f)\n                },\n                left: function(a, b, c) {\n                    return e(a, b.origin(), b.bottomLeft())\n                },\n                right: function(a, b, c) {\n                    return e(a, b.topRight(), b.corner())\n                },\n                top: function(a, b, c) {\n                    return e(a, b.origin(), b.topRight())\n                },\n                bottom: function(a, b, c) {\n                    return e(a, b.bottomLeft(), b.corner())\n                },\n                ellipseSpread: function(a, b, c) {\n                    var d = c.startAngle || 0,\n                        e = c.step || 360 / a.length;\n                    return f(a, b, d, function(a) {\n                        return a * e\n                    })\n                },\n                ellipse: function(a, b, c) {\n                    var d = c.startAngle || 0,\n                        e = c.step || 20;\n                    return f(a, b, d, function(a, b) {\n                        return (a + .5 - b / 2) * e\n                    })\n                }\n            }\n        }(_, g, joint),\n        function(a, b, c) {\n            function d(b, c) {\n                return a.defaultsDeep({}, b, c, {\n                    x: 0,\n                    y: 0,\n                    angle: 0,\n                    attrs: {\n                        \".\": {\n                            y: \"0\",\n                            \"text-anchor\": \"start\"\n                        }\n                    }\n                })\n            }\n\n            function e(b, c, e, g) {\n                g = a.defaults({}, g, {\n                    offset: 15\n                });\n                var h, i, j, k, l = c.center().theta(b),\n                    m = f(c),\n                    n = g.offset,\n                    o = 0;\n                l < m[1] || l > m[2] ? (j = \".3em\", h = n, i = 0, k = \"start\") : l < m[0] ? (j = \"0\", h = 0, i = -n, e ? (o = -90, k = \"start\") : k = \"middle\") : l < m[3] ? (j = \".3em\", h = -n, i = 0, k = \"end\") : (j = \".6em\", h = 0, i = n, e ? (o = 90, k = \"start\") : k = \"middle\");\n                var p = Math.round;\n                return d({\n                    x: p(h),\n                    y: p(i),\n                    angle: o,\n                    attrs: {\n                        \".\": {\n                            y: j,\n                            \"text-anchor\": k\n                        }\n                    }\n                })\n            }\n\n            function f(a) {\n                var b = a.center(),\n                    c = b.theta(a.origin()),\n                    d = b.theta(a.bottomLeft()),\n                    e = b.theta(a.corner()),\n                    f = b.theta(a.topRight());\n                return [c, f, e, d]\n            }\n\n            function g(b, c, e, g) {\n                var h = c.center().theta(b);\n                g = a.defaults({}, g, {\n                    offset: 15\n                });\n                var i, j, k, l, m = g.offset,\n                    n = 0,\n                    o = f(c);\n                h < o[1] || h > o[2] ? (k = \".3em\", i = -m, j = 0, l = \"end\") : h < o[0] ? (k = \".6em\", i = 0, j = m, e ? (n = 90, l = \"start\") : l = \"middle\") : h < o[3] ? (k = \".3em\", i = m, j = 0, l = \"start\") : (k = \"0em\", i = 0, j = -m, e ? (n = -90, l = \"start\") : l = \"middle\");\n                var p = Math.round;\n                return d({\n                    x: p(i),\n                    y: p(j),\n                    angle: n,\n                    attrs: {\n                        \".\": {\n                            y: k,\n                            \"text-anchor\": l\n                        }\n                    }\n                })\n            }\n\n            function h(c, e, f) {\n                f = a.defaults({}, f, {\n                    offset: 20\n                });\n                var g, h = b.point(0, 0),\n                    i = -c.theta(h),\n                    j = i,\n                    k = c.clone().move(h, f.offset).difference(c).round(),\n                    l = \".3em\";\n                (i + 90) % 180 === 0 ? (g = e ? \"end\" : \"middle\", e || i !== -270 || (l = \"0em\")) : i > -270 && i < -90 ? (g = \"start\", j = i - 180) : g = \"end\";\n                var m = Math.round;\n                return d({\n                    x: m(k.x),\n                    y: m(k.y),\n                    angle: e ? j : 0,\n                    attrs: {\n                        \".\": {\n                            y: l,\n                            \"text-anchor\": g\n                        }\n                    }\n                })\n            }\n            c.layout.PortLabel = {\n                manual: a.rearg(d, 2),\n                left: function(a, b, c) {\n                    return d(c, {\n                        x: -15,\n                        attrs: {\n                            \".\": {\n                                y: \".3em\",\n                                \"text-anchor\": \"end\"\n                            }\n                        }\n                    })\n                },\n                right: function(a, b, c) {\n                    return d(c, {\n                        x: 15,\n                        attrs: {\n                            \".\": {\n                                y: \".3em\",\n                                \"text-anchor\": \"start\"\n                            }\n                        }\n                    })\n                },\n                top: function(a, b, c) {\n                    return d(c, {\n                        y: -15,\n                        attrs: {\n                            \".\": {\n                                \"text-anchor\": \"middle\"\n                            }\n                        }\n                    })\n                },\n                bottom: function(a, b, c) {\n                    return d(c, {\n                        y: 15,\n                        attrs: {\n                            \".\": {\n                                y: \".6em\",\n                                \"text-anchor\": \"middle\"\n                            }\n                        }\n                    })\n                },\n                outsideOriented: function(a, b, c) {\n                    return e(a, b, !0, c)\n                },\n                outside: function(a, b, c) {\n                    return e(a, b, !1, c)\n                },\n                insideOriented: function(a, b, c) {\n                    return g(a, b, !0, c)\n                },\n                inside: function(a, b, c) {\n                    return g(a, b, !1, c)\n                },\n                radial: function(a, b, c) {\n                    return h(a.difference(b.center()), !1, c)\n                },\n                radialOriented: function(a, b, c) {\n                    return h(a.difference(b.center()), !0, c)\n                }\n            }\n        }(_, g, joint), joint.highlighters.addClass = {\n            className: joint.util.addClassNamePrefix(\"highlighted\"),\n            highlight: function(a, b, c) {\n                var d = c || {},\n                    e = d.className || this.className;\n                V(b).addClass(e)\n            },\n            unhighlight: function(a, b, c) {\n                var d = c || {},\n                    e = d.className || this.className;\n                V(b).removeClass(e)\n            }\n        }, joint.highlighters.opacity = {\n            highlight: function(a, b) {\n                V(b).addClass(joint.util.addClassNamePrefix(\"highlight-opacity\"))\n            },\n            unhighlight: function(a, b) {\n                V(b).removeClass(joint.util.addClassNamePrefix(\"highlight-opacity\"))\n            }\n        }, joint.highlighters.stroke = {\n            defaultOptions: {\n                padding: 3,\n                rx: 0,\n                ry: 0,\n                attrs: {\n                    \"stroke-width\": 3,\n                    stroke: \"#FEB663\"\n                }\n            },\n            _views: {},\n            getHighlighterId: function(a, b) {\n                return a.id + JSON.stringify(b)\n            },\n            removeHighlighter: function(a) {\n                this._views[a] && (this._views[a].remove(), this._views[a] = null)\n            },\n            highlight: function(a, b, c) {\n                var d = this.getHighlighterId(b, c);\n                if (!this._views[d]) {\n                    var e, f = _.defaults(c || {}, this.defaultOptions),\n                        g = V(b);\n                    try {\n                        var h = g.convertToPathData()\n                    } catch (a) {\n                        e = g.bbox(!0), h = V.rectToPath(_.extend({}, f, e))\n                    }\n                    var i = V(\"path\").attr({\n                        d: h,\n                        \"pointer-events\": \"none\",\n                        \"vector-effect\": \"non-scaling-stroke\",\n                        fill: \"none\"\n                    }).attr(f.attrs);\n                    i.transform(a.el.getCTM().inverse()), i.transform(b.getCTM());\n                    var j = f.padding;\n                    if (j) {\n                        e || (e = g.bbox(!0));\n                        var k = e.x + e.width / 2,\n                            l = e.y + e.height / 2,\n                            m = (e.width + j) / e.width,\n                            n = (e.height + j) / e.height;\n                        i.transform({\n                            a: m,\n                            b: 0,\n                            c: 0,\n                            d: n,\n                            e: k - m * k,\n                            f: l - n * l\n                        })\n                    }\n                    var o = this._views[d] = new joint.mvc.View({\n                            svgElement: !0,\n                            className: \"highlight-stroke\",\n                            el: i.node\n                        }),\n                        p = _.bind(this.removeHighlighter, this, d),\n                        q = a.model;\n                    o.listenTo(q, \"remove\", p), o.listenTo(q.graph, \"reset\", p), a.vel.append(i)\n                }\n            },\n            unhighlight: function(a, b, c) {\n                this.removeHighlighter(this.getHighlighterId(b, c))\n            }\n        };\n    joint.shapes.erd = {}, joint.shapes.erd.Entity = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>',\n        defaults: _.defaultsDeep({\n            type: \"erd.Entity\",\n            size: {\n                width: 150,\n                height: 60\n            },\n            attrs: {\n                \".outer\": {\n                    fill: \"#2ECC71\",\n                    stroke: \"#27AE60\",\n                    \"stroke-width\": 2,\n                    points: \"100,0 100,60 0,60 0,0\"\n                },\n                \".inner\": {\n                    fill: \"#2ECC71\",\n                    stroke: \"#27AE60\",\n                    \"stroke-width\": 2,\n                    points: \"95,5 95,55 5,55 5,5\",\n                    display: \"none\"\n                },\n                text: {\n                    text: \"Entity\",\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 14,\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"y-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.erd.WeakEntity = joint.shapes.erd.Entity.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.WeakEntity\",\n            attrs: {\n                \".inner\": {\n                    display: \"auto\"\n                },\n                text: {\n                    text: \"Weak Entity\"\n                }\n            }\n        }, joint.shapes.erd.Entity.prototype.defaults)\n    }), joint.shapes.erd.Relationship = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"outer\"/><polygon class=\"inner\"/></g><text/></g>',\n        defaults: _.defaultsDeep({\n            type: \"erd.Relationship\",\n            size: {\n                width: 80,\n                height: 80\n            },\n            attrs: {\n                \".outer\": {\n                    fill: \"#3498DB\",\n                    stroke: \"#2980B9\",\n                    \"stroke-width\": 2,\n                    points: \"40,0 80,40 40,80 0,40\"\n                },\n                \".inner\": {\n                    fill: \"#3498DB\",\n                    stroke: \"#2980B9\",\n                    \"stroke-width\": 2,\n                    points: \"40,5 75,40 40,75 5,40\",\n                    display: \"none\"\n                },\n                text: {\n                    text: \"Relationship\",\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 12,\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"y-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.erd.IdentifyingRelationship = joint.shapes.erd.Relationship.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.IdentifyingRelationship\",\n            attrs: {\n                \".inner\": {\n                    display: \"auto\"\n                },\n                text: {\n                    text: \"Identifying\"\n                }\n            }\n        }, joint.shapes.erd.Relationship.prototype.defaults)\n    }), joint.shapes.erd.Attribute = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><ellipse class=\"outer\"/><ellipse class=\"inner\"/></g><text/></g>',\n        defaults: _.defaultsDeep({\n            type: \"erd.Attribute\",\n            size: {\n                width: 100,\n                height: 50\n            },\n            attrs: {\n                ellipse: {\n                    transform: \"translate(50, 25)\"\n                },\n                \".outer\": {\n                    stroke: \"#D35400\",\n                    \"stroke-width\": 2,\n                    cx: 0,\n                    cy: 0,\n                    rx: 50,\n                    ry: 25,\n                    fill: \"#E67E22\"\n                },\n                \".inner\": {\n                    stroke: \"#D35400\",\n                    \"stroke-width\": 2,\n                    cx: 0,\n                    cy: 0,\n                    rx: 45,\n                    ry: 20,\n                    fill: \"#E67E22\",\n                    display: \"none\"\n                },\n                text: {\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 14,\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"y-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.erd.Multivalued = joint.shapes.erd.Attribute.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.Multivalued\",\n            attrs: {\n                \".inner\": {\n                    display: \"block\"\n                },\n                text: {\n                    text: \"multivalued\"\n                }\n            }\n        }, joint.shapes.erd.Attribute.prototype.defaults)\n    }), joint.shapes.erd.Derived = joint.shapes.erd.Attribute.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.Derived\",\n            attrs: {\n                \".outer\": {\n                    \"stroke-dasharray\": \"3,5\"\n                },\n                text: {\n                    text: \"derived\"\n                }\n            }\n        }, joint.shapes.erd.Attribute.prototype.defaults)\n    }), joint.shapes.erd.Key = joint.shapes.erd.Attribute.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.Key\",\n            attrs: {\n                ellipse: {\n                    \"stroke-width\": 4\n                },\n                text: {\n                    text: \"key\",\n                    \"font-weight\": \"800\",\n                    \"text-decoration\": \"underline\"\n                }\n            }\n        }, joint.shapes.erd.Attribute.prototype.defaults)\n    }), joint.shapes.erd.Normal = joint.shapes.erd.Attribute.extend({\n        defaults: _.defaultsDeep({\n            type: \"erd.Normal\",\n            attrs: {\n                text: {\n                    text: \"Normal\"\n                }\n            }\n        }, joint.shapes.erd.Attribute.prototype.defaults)\n    }), joint.shapes.erd.ISA = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon/></g><text/></g>',\n        defaults: _.defaultsDeep({\n            type: \"erd.ISA\",\n            size: {\n                width: 100,\n                height: 50\n            },\n            attrs: {\n                polygon: {\n                    points: \"0,0 50,50 100,0\",\n                    fill: \"#F1C40F\",\n                    stroke: \"#F39C12\",\n                    \"stroke-width\": 2\n                },\n                text: {\n                    text: \"ISA\",\n                    \"font-size\": 18,\n                    \"ref-x\": .5,\n                    \"ref-y\": .3,\n                    \"y-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.erd.Line = joint.dia.Link.extend({\n        defaults: {\n            type: \"erd.Line\"\n        },\n        cardinality: function(a) {\n            this.set(\"labels\", [{\n                position: -20,\n                attrs: {\n                    text: {\n                        dy: -8,\n                        text: a\n                    }\n                }\n            }])\n        }\n    });\n    joint.shapes.fsa = {}, joint.shapes.fsa.State = joint.shapes.basic.Circle.extend({\n        defaults: _.defaultsDeep({\n            type: \"fsa.State\",\n            attrs: {\n                circle: {\n                    \"stroke-width\": 3\n                },\n                text: {\n                    \"font-weight\": \"800\"\n                }\n            }\n        }, joint.shapes.basic.Circle.prototype.defaults)\n    }), joint.shapes.fsa.StartState = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle/></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"fsa.StartState\",\n            size: {\n                width: 20,\n                height: 20\n            },\n            attrs: {\n                circle: {\n                    transform: \"translate(10, 10)\",\n                    r: 10,\n                    fill: \"#000000\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.fsa.EndState = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"fsa.EndState\",\n            size: {\n                width: 20,\n                height: 20\n            },\n            attrs: {\n                \".outer\": {\n                    transform: \"translate(10, 10)\",\n                    r: 10,\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\"\n                },\n                \".inner\": {\n                    transform: \"translate(10, 10)\",\n                    r: 6,\n                    fill: \"#000000\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.fsa.Arrow = joint.dia.Link.extend({\n        defaults: _.defaultsDeep({\n            type: \"fsa.Arrow\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 10 0 L 0 5 L 10 10 z\"\n                }\n            },\n            smooth: !0\n        }, joint.dia.Link.prototype.defaults)\n    });\n    joint.shapes.org = {}, joint.shapes.org.Member = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"card\"/><image/></g><text class=\"rank\"/><text class=\"name\"/></g>',\n        defaults: _.defaultsDeep({\n            type: \"org.Member\",\n            size: {\n                width: 180,\n                height: 70\n            },\n            attrs: {\n                rect: {\n                    width: 170,\n                    height: 60\n                },\n                \".card\": {\n                    fill: \"#FFFFFF\",\n                    stroke: \"#000000\",\n                    \"stroke-width\": 2,\n                    \"pointer-events\": \"visiblePainted\",\n                    rx: 10,\n                    ry: 10\n                },\n                image: {\n                    width: 48,\n                    height: 48,\n                    ref: \".card\",\n                    \"ref-x\": 10,\n                    \"ref-y\": 5\n                },\n                \".rank\": {\n                    \"text-decoration\": \"underline\",\n                    ref: \".card\",\n                    \"ref-x\": .9,\n                    \"ref-y\": .2,\n                    \"font-family\": \"Courier New\",\n                    \"font-size\": 14,\n                    \"text-anchor\": \"end\"\n                },\n                \".name\": {\n                    \"font-weight\": \"800\",\n                    ref: \".card\",\n                    \"ref-x\": .9,\n                    \"ref-y\": .6,\n                    \"font-family\": \"Courier New\",\n                    \"font-size\": 14,\n                    \"text-anchor\": \"end\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.org.Arrow = joint.dia.Link.extend({\n        defaults: {\n            type: \"org.Arrow\",\n            source: {\n                selector: \".card\"\n            },\n            target: {\n                selector: \".card\"\n            },\n            attrs: {\n                \".connection\": {\n                    stroke: \"#585858\",\n                    \"stroke-width\": 3\n                }\n            },\n            z: -1\n        }\n    });\n    joint.shapes.chess = {}, joint.shapes.chess.KingWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\"><path      d=\"M 22.5,11.63 L 22.5,6\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 20,8 L 25,8\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path      d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"      style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 11.5,30 C 17,27 27,27 32.5,30\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5\"      style=\"fill:none; stroke:#000000;\" />    <path      d=\"M 11.5,37 C 17,34 27,34 32.5,37\"      style=\"fill:none; stroke:#000000;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.KingWhite\",\n            size: {\n                width: 42,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.KingBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path       d=\"M 22.5,11.63 L 22.5,6\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\"       id=\"path6570\" />    <path       d=\"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25\"       style=\"fill:#000000;fill-opacity:1; stroke-linecap:butt; stroke-linejoin:miter;\" />    <path       d=\"M 11.5,37 C 17,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 19,16 9.5,13 6.5,19.5 C 3.5,25.5 11.5,29.5 11.5,29.5 L 11.5,37 z \"       style=\"fill:#000000; stroke:#000000;\" />    <path       d=\"M 20,8 L 25,8\"       style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />    <path       d=\"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.51,26.6 L 22.5,24.5 C 20,18 9.906,14 6.997,19.85 C 4.5,25.5 11.85,28.85 11.85,28.85\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,30 C 17,27 27,27 32.5,30 M 11.5,33.5 C 17,30.5 27,30.5 32.5,33.5 M 11.5,37 C 17,34 27,34 32.5,37\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.KingBlack\",\n            size: {\n                width: 42,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.QueenWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(-1,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(15.5,-5.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(32,-1)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(7,-4.5)\" />    <path      d=\"M 9 13 A 2 2 0 1 1  5,13 A 2 2 0 1 1  9 13 z\"      transform=\"translate(24,-4)\" />    <path      d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38,14 L 31,25 L 31,11 L 25.5,24.5 L 22.5,9.5 L 19.5,24.5 L 14,10.5 L 14,25 L 7,14 L 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11.5,30 C 15,29 30,29 33.5,30\"      style=\"fill:none;\" />    <path      d=\"M 12,33.5 C 18,32.5 27,32.5 33,33.5\"      style=\"fill:none;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.QueenWhite\",\n            size: {\n                width: 42,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.QueenBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:none;\">      <circle cx=\"6\"    cy=\"12\" r=\"2.75\" />      <circle cx=\"14\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"22.5\" cy=\"8\"  r=\"2.75\" />      <circle cx=\"31\"   cy=\"9\"  r=\"2.75\" />      <circle cx=\"39\"   cy=\"12\" r=\"2.75\" />    </g>    <path       d=\"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z\"       style=\"stroke-linecap:butt; stroke:#000000;\" />    <path       d=\"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 10.5,36 10.5,36 C 9,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z\"       style=\"stroke-linecap:butt;\" />    <path       d=\"M 11,38.5 A 35,35 1 0 0 34,38.5\"       style=\"fill:none; stroke:#000000; stroke-linecap:butt;\" />    <path       d=\"M 11,29 A 35,35 1 0 1 34,29\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 12.5,31.5 L 32.5,31.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5\"       style=\"fill:none; stroke:#ffffff;\" />    <path       d=\"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5\"       style=\"fill:none; stroke:#ffffff;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.QueenBlack\",\n            size: {\n                width: 42,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.RookWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14\"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 34,14 L 31,17 L 14,17 L 11,14\" />    <path      d=\"M 31,17 L 31,29.5 L 14,29.5 L 14,17\"      style=\"stroke-linecap:butt; stroke-linejoin:miter;\" />    <path      d=\"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.RookWhite\",\n            size: {\n                width: 32,\n                height: 34\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.RookBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z \"      style=\"stroke-linecap:butt;stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z \"      style=\"stroke-linecap:butt;\" />    <path      d=\"M 12,35.5 L 33,35.5 L 33,35.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 13,31.5 L 32,31.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,29.5 L 31,29.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 14,16.5 L 31,16.5\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />    <path      d=\"M 11,14 L 34,14\"      style=\"fill:none; stroke:#ffffff; stroke-width:1; stroke-linejoin:miter;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.RookBlack\",\n            size: {\n                width: 32,\n                height: 34\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.BishopWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#ffffff; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path      d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"      style=\"fill:none; stroke:#000000; stroke-linejoin:miter;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.BishopWhite\",\n            size: {\n                width: 38,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.BishopBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-rule:evenodd; fill-opacity:1; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:round; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <g style=\"fill:#000000; stroke:#000000; stroke-linecap:butt;\">       <path        d=\"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.646,38.99 6.677,38.97 6,38 C 7.354,36.06 9,36 9,36 z\" />      <path        d=\"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z\" />      <path        d=\"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z\" />    </g>    <path       d=\"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18\"       style=\"fill:none; stroke:#ffffff; stroke-linejoin:miter;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.BishopBlack\",\n            size: {\n                width: 38,\n                height: 38\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.KnightWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#ffffff; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#000000; stroke:#000000;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.KnightWhite\",\n            size: {\n                width: 38,\n                height: 37\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.KnightBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><g style=\"opacity:1; fill:none; fill-opacity:1; fill-rule:evenodd; stroke:#000000; stroke-width:1.5; stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\">    <path      d=\"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10\"      style=\"fill:#000000; stroke:#000000;\" />    <path      d=\"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z\"      transform=\"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)\"      style=\"fill:#ffffff; stroke:#ffffff;\" />    <path      d=\"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z \"      style=\"fill:#ffffff; stroke:none;\" />  </g></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.KnightBlack\",\n            size: {\n                width: 38,\n                height: 37\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.PawnWhite = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#ffffff; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.PawnWhite\",\n            size: {\n                width: 28,\n                height: 33\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chess.PawnBlack = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><path d=\"M 22,9 C 19.79,9 18,10.79 18,13 C 18,13.89 18.29,14.71 18.78,15.38 C 16.83,16.5 15.5,18.59 15.5,21 C 15.5,23.03 16.44,24.84 17.91,26.03 C 14.91,27.09 10.5,31.58 10.5,39.5 L 33.5,39.5 C 33.5,31.58 29.09,27.09 26.09,26.03 C 27.56,24.84 28.5,23.03 28.5,21 C 28.5,18.59 27.17,16.5 25.22,15.38 C 25.71,14.71 26,13.89 26,13 C 26,10.79 24.21,9 22,9 z \"  style=\"opacity:1; fill:#000000; fill-opacity:1; fill-rule:nonzero; stroke:#000000; stroke-width:1.5; stroke-linecap:round; stroke-linejoin:miter; stroke-miterlimit:4; stroke-dasharray:none; stroke-opacity:1;\" /></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"chess.PawnBlack\",\n            size: {\n                width: 28,\n                height: 33\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    });\n    joint.shapes.pn = {}, joint.shapes.pn.Place = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"root\"/><g class=\"tokens\" /></g><text class=\"label\"/></g>',\n        defaults: _.defaultsDeep({\n            type: \"pn.Place\",\n            size: {\n                width: 50,\n                height: 50\n            },\n            attrs: {\n                \".root\": {\n                    r: 25,\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    transform: \"translate(25, 25)\"\n                },\n                \".label\": {\n                    \"text-anchor\": \"middle\",\n                    \"ref-x\": .5,\n                    \"ref-y\": -20,\n                    ref: \".root\",\n                    fill: \"#000000\",\n                    \"font-size\": 12\n                },\n                \".tokens > circle\": {\n                    fill: \"#000000\",\n                    r: 5\n                },\n                \".tokens.one > circle\": {\n                    transform: \"translate(25, 25)\"\n                },\n                \".tokens.two > circle:nth-child(1)\": {\n                    transform: \"translate(19, 25)\"\n                },\n                \".tokens.two > circle:nth-child(2)\": {\n                    transform: \"translate(31, 25)\"\n                },\n                \".tokens.three > circle:nth-child(1)\": {\n                    transform: \"translate(18, 29)\"\n                },\n                \".tokens.three > circle:nth-child(2)\": {\n                    transform: \"translate(25, 19)\"\n                },\n                \".tokens.three > circle:nth-child(3)\": {\n                    transform: \"translate(32, 29)\"\n                },\n                \".tokens.alot > text\": {\n                    transform: \"translate(25, 18)\",\n                    \"text-anchor\": \"middle\",\n                    fill: \"#000000\"\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.pn.PlaceView = joint.dia.ElementView.extend({\n        initialize: function() {\n            joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.model.on(\"change:tokens\", function() {\n                this.renderTokens(), this.update()\n            }, this)\n        },\n        render: function() {\n            joint.dia.ElementView.prototype.render.apply(this, arguments), this.renderTokens(), this.update()\n        },\n        renderTokens: function() {\n            var a = this.$(\".tokens\").empty();\n            a[0].className.baseVal = \"tokens\";\n            var b = this.model.get(\"tokens\");\n            if (b) switch (b) {\n                case 1:\n                    a[0].className.baseVal += \" one\", a.append(V(\"<circle/>\").node);\n                    break;\n                case 2:\n                    a[0].className.baseVal += \" two\", a.append(V(\"<circle/>\").node, V(\"<circle/>\").node);\n                    break;\n                case 3:\n                    a[0].className.baseVal += \" three\", a.append(V(\"<circle/>\").node, V(\"<circle/>\").node, V(\"<circle/>\").node);\n                    break;\n                default:\n                    a[0].className.baseVal += \" alot\", a.append(V(\"<text/>\").text(b + \"\").node)\n            }\n        }\n    }), joint.shapes.pn.Transition = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"root\"/></g></g><text class=\"label\"/>',\n        defaults: _.defaultsDeep({\n            type: \"pn.Transition\",\n            size: {\n                width: 12,\n                height: 50\n            },\n            attrs: {\n                rect: {\n                    width: 12,\n                    height: 50,\n                    fill: \"#000000\",\n                    stroke: \"#000000\"\n                },\n                \".label\": {\n                    \"text-anchor\": \"middle\",\n                    \"ref-x\": .5,\n                    \"ref-y\": -20,\n                    ref: \"rect\",\n                    fill: \"#000000\",\n                    \"font-size\": 12\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.pn.Link = joint.dia.Link.extend({\n        defaults: _.defaultsDeep({\n            type: \"pn.Link\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 10 0 L 0 5 L 10 10 z\"\n                }\n            }\n        }, joint.dia.Link.prototype.defaults)\n    });\n    joint.shapes.devs = {}, joint.shapes.devs.Model = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><rect class=\"body\"/><text class=\"label\"/></g>',\n        portMarkup: '<circle class=\"port-body\"/>',\n        portLabelMarkup: '<text class=\"port-label\"/>',\n        defaults: _.defaultsDeep({\n            type: \"devs.Model\",\n            inPorts: [],\n            outPorts: [],\n            size: {\n                width: 80,\n                height: 80\n            },\n            attrs: {\n                \".\": {\n                    magnet: !1\n                },\n                \".label\": {\n                    text: \"Model\",\n                    \"ref-x\": .5,\n                    \"ref-y\": 10,\n                    \"font-size\": 18,\n                    \"text-anchor\": \"middle\",\n                    fill: \"#000\"\n                },\n                \".body\": {\n                    \"ref-width\": \"100%\",\n                    \"ref-height\": \"100%\",\n                    stroke: \"#000\"\n                }\n            },\n            ports: {\n                groups: { in: {\n                        position: {\n                            name: \"left\"\n                        },\n                        attrs: {\n                            \".port-label\": {\n                                fill: \"#000\"\n                            },\n                            \".port-body\": {\n                                fill: \"#fff\",\n                                stroke: \"#000\",\n                                r: 10,\n                                magnet: !0\n                            }\n                        },\n                        label: {\n                            position: {\n                                name: \"left\",\n                                args: {\n                                    y: 10\n                                }\n                            }\n                        }\n                    },\n                    out: {\n                        position: {\n                            name: \"right\"\n                        },\n                        attrs: {\n                            \".port-label\": {\n                                fill: \"#000\"\n                            },\n                            \".port-body\": {\n                                fill: \"#fff\",\n                                stroke: \"#000\",\n                                r: 10,\n                                magnet: !0\n                            }\n                        },\n                        label: {\n                            position: {\n                                name: \"right\",\n                                args: {\n                                    y: 10\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        initialize: function() {\n            joint.shapes.basic.Generic.prototype.initialize.apply(this, arguments), this.on(\"change:inPorts change:outPorts\", this.updatePortItems, this), this.updatePortItems()\n        },\n        updatePortItems: function(a, b, c) {\n            var d = _.uniq(this.get(\"inPorts\")),\n                e = _.difference(_.uniq(this.get(\"outPorts\")), d),\n                f = this.createPortItems(\"in\", d),\n                g = this.createPortItems(\"out\", e);\n            this.prop(\"ports/items\", f.concat(g), _.extend({\n                rewrite: !0\n            }, c))\n        },\n        createPortItem: function(a, b) {\n            return {\n                id: b,\n                group: a,\n                attrs: {\n                    \".port-label\": {\n                        text: b\n                    }\n                }\n            }\n        },\n        createPortItems: function(a, b) {\n            return _.map(b, _.bind(this.createPortItem, this, a))\n        },\n        _addGroupPort: function(a, b, c) {\n            var d = this.get(b);\n            return this.set(b, _.isArray(d) ? d.concat(a) : [a], c)\n        },\n        addOutPort: function(a, b) {\n            return this._addGroupPort(a, \"outPorts\", b)\n        },\n        addInPort: function(a, b) {\n            return this._addGroupPort(a, \"inPorts\", b)\n        },\n        _removeGroupPort: function(a, b, c) {\n            return this.set(b, _.without(this.get(b), a), c)\n        },\n        removeOutPort: function(a, b) {\n            return this._removeGroupPort(a, \"outPorts\", b)\n        },\n        removeInPort: function(a, b) {\n            return this._removeGroupPort(a, \"inPorts\", b)\n        },\n        _changeGroup: function(a, b, c) {\n            return this.prop(\"ports/groups/\" + a, _.isObject(b) ? b : {}, c)\n        },\n        changeInGroup: function(a, b) {\n            return this._changeGroup(\"in\", a, b)\n        },\n        changeOutGroup: function(a, b) {\n            return this._changeGroup(\"out\", a, b)\n        }\n    }), joint.shapes.devs.Atomic = joint.shapes.devs.Model.extend({\n        defaults: _.defaultsDeep({\n            type: \"devs.Atomic\",\n            size: {\n                width: 80,\n                height: 80\n            },\n            attrs: {\n                \".label\": {\n                    text: \"Atomic\"\n                }\n            }\n        }, joint.shapes.devs.Model.prototype.defaults)\n    }), joint.shapes.devs.Coupled = joint.shapes.devs.Model.extend({\n        defaults: _.defaultsDeep({\n            type: \"devs.Coupled\",\n            size: {\n                width: 200,\n                height: 300\n            },\n            attrs: {\n                \".label\": {\n                    text: \"Coupled\"\n                }\n            }\n        }, joint.shapes.devs.Model.prototype.defaults)\n    }), joint.shapes.devs.Link = joint.dia.Link.extend({\n        defaults: {\n            type: \"devs.Link\",\n            attrs: {\n                \".connection\": {\n                    \"stroke-width\": 2\n                }\n            }\n        }\n    });\n    joint.shapes.uml = {}, joint.shapes.uml.Class = joint.shapes.basic.Generic.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-class-name-rect\"/><rect class=\"uml-class-attrs-rect\"/><rect class=\"uml-class-methods-rect\"/>', \"</g>\", '<text class=\"uml-class-name-text\"/><text class=\"uml-class-attrs-text\"/><text class=\"uml-class-methods-text\"/>', \"</g>\"].join(\"\"),\n        defaults: _.defaultsDeep({\n            type: \"uml.Class\",\n            attrs: {\n                rect: {\n                    width: 200\n                },\n                \".uml-class-name-rect\": {\n                    stroke: \"black\",\n                    \"stroke-width\": 2,\n                    fill: \"#3498db\"\n                },\n                \".uml-class-attrs-rect\": {\n                    stroke: \"black\",\n                    \"stroke-width\": 2,\n                    fill: \"#2980b9\"\n                },\n                \".uml-class-methods-rect\": {\n                    stroke: \"black\",\n                    \"stroke-width\": 2,\n                    fill: \"#2980b9\"\n                },\n                \".uml-class-name-text\": {\n                    ref: \".uml-class-name-rect\",\n                    \"ref-y\": .5,\n                    \"ref-x\": .5,\n                    \"text-anchor\": \"middle\",\n                    \"y-alignment\": \"middle\",\n                    \"font-weight\": \"bold\",\n                    fill: \"black\",\n                    \"font-size\": 12,\n                    \"font-family\": \"Times New Roman\"\n                },\n                \".uml-class-attrs-text\": {\n                    ref: \".uml-class-attrs-rect\",\n                    \"ref-y\": 5,\n                    \"ref-x\": 5,\n                    fill: \"black\",\n                    \"font-size\": 12,\n                    \"font-family\": \"Times New Roman\"\n                },\n                \".uml-class-methods-text\": {\n                    ref: \".uml-class-methods-rect\",\n                    \"ref-y\": 5,\n                    \"ref-x\": 5,\n                    fill: \"black\",\n                    \"font-size\": 12,\n                    \"font-family\": \"Times New Roman\"\n                }\n            },\n            name: [],\n            attributes: [],\n            methods: []\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        initialize: function() {\n            this.on(\"change:name change:attributes change:methods\", function() {\n                this.updateRectangles(), this.trigger(\"uml-update\")\n            }, this), this.updateRectangles(), joint.shapes.basic.Generic.prototype.initialize.apply(this, arguments)\n        },\n        getClassName: function() {\n            return this.get(\"name\")\n        },\n        updateRectangles: function() {\n            var a = this.get(\"attrs\"),\n                b = [{\n                    type: \"name\",\n                    text: this.getClassName()\n                }, {\n                    type: \"attrs\",\n                    text: this.get(\"attributes\")\n                }, {\n                    type: \"methods\",\n                    text: this.get(\"methods\")\n                }],\n                c = 0;\n            _.each(b, function(b) {\n                var d = _.isArray(b.text) ? b.text : [b.text],\n                    e = 20 * d.length + 20;\n                a[\".uml-class-\" + b.type + \"-text\"].text = d.join(\"\\n\"), a[\".uml-class-\" + b.type + \"-rect\"].height = e, a[\".uml-class-\" + b.type + \"-rect\"].transform = \"translate(0,\" + c + \")\", c += e\n            })\n        }\n    }), joint.shapes.uml.ClassView = joint.dia.ElementView.extend({\n        initialize: function() {\n            joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.listenTo(this.model, \"uml-update\", function() {\n                this.update(), this.resize()\n            })\n        }\n    }), joint.shapes.uml.Abstract = joint.shapes.uml.Class.extend({\n        defaults: _.defaultsDeep({\n            type: \"uml.Abstract\",\n            attrs: {\n                \".uml-class-name-rect\": {\n                    fill: \"#e74c3c\"\n                },\n                \".uml-class-attrs-rect\": {\n                    fill: \"#c0392b\"\n                },\n                \".uml-class-methods-rect\": {\n                    fill: \"#c0392b\"\n                }\n            }\n        }, joint.shapes.uml.Class.prototype.defaults),\n        getClassName: function() {\n            return [\"<<Abstract>>\", this.get(\"name\")]\n        }\n    }), joint.shapes.uml.AbstractView = joint.shapes.uml.ClassView, joint.shapes.uml.Interface = joint.shapes.uml.Class.extend({\n        defaults: _.defaultsDeep({\n            type: \"uml.Interface\",\n            attrs: {\n                \".uml-class-name-rect\": {\n                    fill: \"#f1c40f\"\n                },\n                \".uml-class-attrs-rect\": {\n                    fill: \"#f39c12\"\n                },\n                \".uml-class-methods-rect\": {\n                    fill: \"#f39c12\"\n                }\n            }\n        }, joint.shapes.uml.Class.prototype.defaults),\n        getClassName: function() {\n            return [\"<<Interface>>\", this.get(\"name\")]\n        }\n    }), joint.shapes.uml.InterfaceView = joint.shapes.uml.ClassView, joint.shapes.uml.Generalization = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Generalization\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 20 0 L 0 10 L 20 20 z\",\n                    fill: \"white\"\n                }\n            }\n        }\n    }), joint.shapes.uml.Implementation = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Implementation\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 20 0 L 0 10 L 20 20 z\",\n                    fill: \"white\"\n                },\n                \".connection\": {\n                    \"stroke-dasharray\": \"3,3\"\n                }\n            }\n        }\n    }), joint.shapes.uml.Aggregation = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Aggregation\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 40 10 L 20 20 L 0 10 L 20 0 z\",\n                    fill: \"white\"\n                }\n            }\n        }\n    }), joint.shapes.uml.Composition = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Composition\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 40 10 L 20 20 L 0 10 L 20 0 z\",\n                    fill: \"black\"\n                }\n            }\n        }\n    }), joint.shapes.uml.Association = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Association\"\n        }\n    }), joint.shapes.uml.State = joint.shapes.basic.Generic.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<rect class=\"uml-state-body\"/>', \"</g>\", '<path class=\"uml-state-separator\"/>', '<text class=\"uml-state-name\"/>', '<text class=\"uml-state-events\"/>', \"</g>\"].join(\"\"),\n        defaults: _.defaultsDeep({\n            type: \"uml.State\",\n            attrs: {\n                \".uml-state-body\": {\n                    width: 200,\n                    height: 200,\n                    rx: 10,\n                    ry: 10,\n                    fill: \"#ecf0f1\",\n                    stroke: \"#bdc3c7\",\n                    \"stroke-width\": 3\n                },\n                \".uml-state-separator\": {\n                    stroke: \"#bdc3c7\",\n                    \"stroke-width\": 2\n                },\n                \".uml-state-name\": {\n                    ref: \".uml-state-body\",\n                    \"ref-x\": .5,\n                    \"ref-y\": 5,\n                    \"text-anchor\": \"middle\",\n                    fill: \"#000000\",\n                    \"font-family\": \"Courier New\",\n                    \"font-size\": 14\n                },\n                \".uml-state-events\": {\n                    ref: \".uml-state-separator\",\n                    \"ref-x\": 5,\n                    \"ref-y\": 5,\n                    fill: \"#000000\",\n                    \"font-family\": \"Courier New\",\n                    \"font-size\": 14\n                }\n            },\n            name: \"State\",\n            events: []\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        initialize: function() {\n            this.on({\n                \"change:name\": this.updateName,\n                \"change:events\": this.updateEvents,\n                \"change:size\": this.updatePath\n            }, this), this.updateName(), this.updateEvents(), this.updatePath(), joint.shapes.basic.Generic.prototype.initialize.apply(this, arguments)\n        },\n        updateName: function() {\n            this.attr(\".uml-state-name/text\", this.get(\"name\"))\n        },\n        updateEvents: function() {\n            this.attr(\".uml-state-events/text\", this.get(\"events\").join(\"\\n\"))\n        },\n        updatePath: function() {\n            var a = \"M 0 20 L \" + this.get(\"size\").width + \" 20\";\n            this.attr(\".uml-state-separator/d\", a, {\n                silent: !0\n            })\n        }\n    }), joint.shapes.uml.StartState = joint.shapes.basic.Circle.extend({\n        defaults: _.defaultsDeep({\n            type: \"uml.StartState\",\n            attrs: {\n                circle: {\n                    fill: \"#34495e\",\n                    stroke: \"#2c3e50\",\n                    \"stroke-width\": 2,\n                    rx: 1\n                }\n            }\n        }, joint.shapes.basic.Circle.prototype.defaults)\n    }), joint.shapes.uml.EndState = joint.shapes.basic.Generic.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"outer\"/><circle class=\"inner\"/></g></g>',\n        defaults: _.defaultsDeep({\n            type: \"uml.EndState\",\n            size: {\n                width: 20,\n                height: 20\n            },\n            attrs: {\n                \"circle.outer\": {\n                    transform: \"translate(10, 10)\",\n                    r: 10,\n                    fill: \"#ffffff\",\n                    stroke: \"#2c3e50\"\n                },\n                \"circle.inner\": {\n                    transform: \"translate(10, 10)\",\n                    r: 6,\n                    fill: \"#34495e\"\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.uml.Transition = joint.dia.Link.extend({\n        defaults: {\n            type: \"uml.Transition\",\n            attrs: {\n                \".marker-target\": {\n                    d: \"M 10 0 L 0 5 L 10 10 z\",\n                    fill: \"#34495e\",\n                    stroke: \"#2c3e50\"\n                },\n                \".connection\": {\n                    stroke: \"#2c3e50\"\n                }\n            }\n        }\n    });\n    joint.shapes.logic = {}, joint.shapes.logic.Gate = joint.shapes.basic.Generic.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Gate\",\n            size: {\n                width: 80,\n                height: 40\n            },\n            attrs: {\n                \".\": {\n                    magnet: !1\n                },\n                \".body\": {\n                    width: 100,\n                    height: 50\n                },\n                circle: {\n                    r: 7,\n                    stroke: \"black\",\n                    fill: \"transparent\",\n                    \"stroke-width\": 2\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        operation: function() {\n            return !0\n        }\n    }), joint.shapes.logic.IO = joint.shapes.logic.Gate.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"body\"/></g><path class=\"wire\"/><circle/><text/></g>',\n        defaults: _.defaultsDeep({\n            type: \"logic.IO\",\n            size: {\n                width: 60,\n                height: 30\n            },\n            attrs: {\n                \".body\": {\n                    fill: \"white\",\n                    stroke: \"black\",\n                    \"stroke-width\": 2\n                },\n                \".wire\": {\n                    ref: \".body\",\n                    \"ref-y\": .5,\n                    stroke: \"black\"\n                },\n                text: {\n                    fill: \"black\",\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"y-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\",\n                    \"font-weight\": \"bold\",\n                    \"font-variant\": \"small-caps\",\n                    \"text-transform\": \"capitalize\",\n                    \"font-size\": \"14px\"\n                }\n            }\n        }, joint.shapes.logic.Gate.prototype.defaults)\n    }), joint.shapes.logic.Input = joint.shapes.logic.IO.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Input\",\n            attrs: {\n                \".wire\": {\n                    \"ref-dx\": 0,\n                    d: \"M 0 0 L 23 0\"\n                },\n                circle: {\n                    ref: \".body\",\n                    \"ref-dx\": 30,\n                    \"ref-y\": .5,\n                    magnet: !0,\n                    class: \"output\",\n                    port: \"out\"\n                },\n                text: {\n                    text: \"input\"\n                }\n            }\n        }, joint.shapes.logic.IO.prototype.defaults)\n    }), joint.shapes.logic.Output = joint.shapes.logic.IO.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Output\",\n            attrs: {\n                \".wire\": {\n                    \"ref-x\": 0,\n                    d: \"M 0 0 L -23 0\"\n                },\n                circle: {\n                    ref: \".body\",\n                    \"ref-x\": -30,\n                    \"ref-y\": .5,\n                    magnet: \"passive\",\n                    class: \"input\",\n                    port: \"in\"\n                },\n                text: {\n                    text: \"output\"\n                }\n            }\n        }, joint.shapes.logic.IO.prototype.defaults)\n    }), joint.shapes.logic.Gate11 = joint.shapes.logic.Gate.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input\"/><circle class=\"output\"/></g>',\n        defaults: _.defaultsDeep({\n            type: \"logic.Gate11\",\n            attrs: {\n                \".input\": {\n                    ref: \".body\",\n                    \"ref-x\": -2,\n                    \"ref-y\": .5,\n                    magnet: \"passive\",\n                    port: \"in\"\n                },\n                \".output\": {\n                    ref: \".body\",\n                    \"ref-dx\": 2,\n                    \"ref-y\": .5,\n                    magnet: !0,\n                    port: \"out\"\n                }\n            }\n        }, joint.shapes.logic.Gate.prototype.defaults)\n    }), joint.shapes.logic.Gate21 = joint.shapes.logic.Gate.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><image class=\"body\"/></g><circle class=\"input input1\"/><circle  class=\"input input2\"/><circle class=\"output\"/></g>',\n        defaults: _.defaultsDeep({\n            type: \"logic.Gate21\",\n            attrs: {\n                \".input1\": {\n                    ref: \".body\",\n                    \"ref-x\": -2,\n                    \"ref-y\": .3,\n                    magnet: \"passive\",\n                    port: \"in1\"\n                },\n                \".input2\": {\n                    ref: \".body\",\n                    \"ref-x\": -2,\n                    \"ref-y\": .7,\n                    magnet: \"passive\",\n                    port: \"in2\"\n                },\n                \".output\": {\n                    ref: \".body\",\n                    \"ref-dx\": 2,\n                    \"ref-y\": .5,\n                    magnet: !0,\n                    port: \"out\"\n                }\n            }\n        }, joint.shapes.logic.Gate.prototype.defaults)\n    }), joint.shapes.logic.Repeater = joint.shapes.logic.Gate11.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Repeater\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzIuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICA8L2c+Cjwvc3ZnPgo=\"\n                }\n            }\n        }, joint.shapes.logic.Gate11.prototype.defaults),\n        operation: function(a) {\n            return a\n        }\n    }), joint.shapes.logic.Not = joint.shapes.logic.Gate11.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Not\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PVCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjgiCiAgICAgaW5rc2NhcGU6Y3g9Ijg0LjY4NTM1MiIKICAgICBpbmtzY2FwZTpjeT0iMTUuMjg4NjI4IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzkuMTU2OTEsMjUgTCA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAyOS4wNDM0NzgsMjUgTCA1LjA0MzQ3ODEsMjUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgZD0iTSAyOC45Njg3NSwyLjU5Mzc1IEwgMjguOTY4NzUsNSBMIDI4Ljk2ODc1LDQ1IEwgMjguOTY4NzUsNDcuNDA2MjUgTCAzMS4xMjUsNDYuMzQzNzUgTCA3Mi4xNTYyNSwyNi4zNDM3NSBMIDcyLjE1NjI1LDIzLjY1NjI1IEwgMzEuMTI1LDMuNjU2MjUgTCAyOC45Njg3NSwyLjU5Mzc1IHogTSAzMS45Njg3NSw3LjQwNjI1IEwgNjguMDkzNzUsMjUgTCAzMS45Njg3NSw0Mi41OTM3NSBMIDMxLjk2ODc1LDcuNDA2MjUgeiIKICAgICAgIGlkPSJwYXRoMjYzOCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2NjY2NjY2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDI2NzEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzYiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA4MCwyNSBBIDQsNCAwIDEgMSA3MiwyNSBBIDQsNCAwIDEgMSA4MCwyNSB6IgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTEsMCkiIC8+CiAgPC9nPgo8L3N2Zz4K\"\n                }\n            }\n        }, joint.shapes.logic.Gate11.prototype.defaults),\n        operation: function(a) {\n            return !a\n        }\n    }), joint.shapes.logic.Or = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Or\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik9SIEFOU0kuc3ZnIgogICBpbmtzY2FwZTpvdXRwdXRfZXh0ZW5zaW9uPSJvcmcuaW5rc2NhcGUub3V0cHV0LnN2Zy5pbmtzY2FwZSI+CiAgPGRlZnMKICAgICBpZD0iZGVmczQiPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTAgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjcxNCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iMSA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMC41IDogMC4zMzMzMzMzMyA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODA2IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyODE5IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjM3Mi4wNDcyNCA6IDM1MC43ODczOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI3NDQuMDk0NDggOiA1MjYuMTgxMDkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzc3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49Ijc1IDogNDAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTUwIDogNjAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDYwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTMyNzUiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNTAgOiAzMy4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iMTAwIDogNTAgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDUwIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTU1MzMiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzIgOiAyMS4zMzMzMzMgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNjQgOiAzMiA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMzIgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjU1NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDE2LjY2NjY2NyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDI1IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAyNSA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iNCIKICAgICBpbmtzY2FwZTpjeD0iMTEzLjAwMDM5IgogICAgIGlua3NjYXBlOmN5PSIxMi44OTM3MzEiCiAgICAgaW5rc2NhcGU6ZG9jdW1lbnQtdW5pdHM9InB4IgogICAgIGlua3NjYXBlOmN1cnJlbnQtbGF5ZXI9ImcyNTYwIgogICAgIHNob3dncmlkPSJmYWxzZSIKICAgICBpbmtzY2FwZTpncmlkLWJib3g9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1wb2ludHM9InRydWUiCiAgICAgZ3JpZHRvbGVyYW5jZT0iMTAwMDAiCiAgICAgaW5rc2NhcGU6d2luZG93LXdpZHRoPSIxMzk5IgogICAgIGlua3NjYXBlOndpbmRvdy1oZWlnaHQ9Ijg3NCIKICAgICBpbmtzY2FwZTp3aW5kb3cteD0iMzciCiAgICAgaW5rc2NhcGU6d2luZG93LXk9Ii00IgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Im0gNzAsMjUgYyAyMCwwIDI1LDAgMjUsMCIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMSwxNSA1LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzIsMzUgNSwzNSIKICAgICAgIGlkPSJwYXRoMzk0NCIgLz4KICAgIDxnCiAgICAgICBpZD0iZzI1NjAiCiAgICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI2LjUsLTM5LjUpIj4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICA8L2c+Cjwvc3ZnPgo=\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return a || b\n        }\n    }), joint.shapes.logic.And = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.And\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IkFORCBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI4IgogICAgIGlua3NjYXBlOmN4PSI1Ni42OTgzNDgiCiAgICAgaW5rc2NhcGU6Y3k9IjI1LjMyNjg5OSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozO21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6Qml0c3RyZWFtIFZlcmEgU2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOkJpdHN0cmVhbSBWZXJhIFNhbnMiCiAgICAgICBkPSJNIDMwLDUgTCAzMCw2LjQyODU3MTQgTCAzMCw0My41NzE0MjkgTCAzMCw0NSBMIDMxLjQyODU3MSw0NSBMIDUwLjQ3NjE5LDQ1IEMgNjEuNzQ0MDk4LDQ1IDcwLjQ3NjE5LDM1Ljk5OTk1NSA3MC40NzYxOSwyNSBDIDcwLjQ3NjE5LDE0LjAwMDA0NSA2MS43NDQwOTksNS4wMDAwMDAyIDUwLjQ3NjE5LDUgQyA1MC40NzYxOSw1IDUwLjQ3NjE5LDUgMzEuNDI4NTcxLDUgTCAzMCw1IHogTSAzMi44NTcxNDMsNy44NTcxNDI5IEMgNDAuODM0MjY0LDcuODU3MTQyOSA0NS45MTgzNjgsNy44NTcxNDI5IDQ4LjA5NTIzOCw3Ljg1NzE0MjkgQyA0OS4yODU3MTQsNy44NTcxNDI5IDQ5Ljg4MDk1Miw3Ljg1NzE0MjkgNTAuMTc4NTcxLDcuODU3MTQyOSBDIDUwLjMyNzM4MSw3Ljg1NzE0MjkgNTAuNDA5MjI3LDcuODU3MTQyOSA1MC40NDY0MjksNy44NTcxNDI5IEMgNTAuNDY1MDI5LDcuODU3MTQyOSA1MC40NzE1NDMsNy44NTcxNDI5IDUwLjQ3NjE5LDcuODU3MTQyOSBDIDYwLjIzNjg1Myw3Ljg1NzE0MyA2Ny4xNDI4NTcsMTUuNDk3MDk4IDY3LjE0Mjg1NywyNSBDIDY3LjE0Mjg1NywzNC41MDI5MDIgNTkuNzYwNjYyLDQyLjE0Mjg1NyA1MCw0Mi4xNDI4NTcgTCAzMi44NTcxNDMsNDIuMTQyODU3IEwgMzIuODU3MTQzLDcuODU3MTQyOSB6IgogICAgICAgaWQ9InBhdGgyODg0IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2NjY2NzY2NjY3Nzc3NzY2NjIiAvPgogIDwvZz4KPC9zdmc+Cg==\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return a && b\n        }\n    }), joint.shapes.logic.Nor = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Nor\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5PUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjEiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjY3NzY0NCIKICAgICBpbmtzY2FwZTpjeT0iMjIuMTAyMzQ0IgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjM3IgogICAgIGlua3NjYXBlOndpbmRvdy15PSItNCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc5LDI1IEMgOTksMjUgOTUsMjUgOTUsMjUiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEsMTUgNSwxNSIKICAgICAgIGlkPSJwYXRoMzA2MSIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxLjk5OTk5OTg4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMyLDM1IDUsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHNvZGlwb2RpOnR5cGU9ImFyYyIKICAgICAgICAgc3R5bGU9ImZpbGw6bm9uZTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWpvaW46bWl0ZXI7bWFya2VyOm5vbmU7c3Ryb2tlLW9wYWNpdHk6MTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlIgogICAgICAgICBpZD0icGF0aDI2MDQiCiAgICAgICAgIHNvZGlwb2RpOmN4PSI3NSIKICAgICAgICAgc29kaXBvZGk6Y3k9IjI1IgogICAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgICAgc29kaXBvZGk6cnk9IjQiCiAgICAgICAgIGQ9Ik0gNzksMjUgQSA0LDQgMCAxIDEgNzEsMjUgQSA0LDQgMCAxIDEgNzksMjUgeiIKICAgICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTI2LjUsMzkuNSkiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return !(a || b)\n        }\n    }), joint.shapes.logic.Nand = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Nand\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9Ik5BTkQgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogIDwvZGVmcz4KICA8c29kaXBvZGk6bmFtZWR2aWV3CiAgICAgaWQ9ImJhc2UiCiAgICAgcGFnZWNvbG9yPSIjZmZmZmZmIgogICAgIGJvcmRlcmNvbG9yPSIjNjY2NjY2IgogICAgIGJvcmRlcm9wYWNpdHk9IjEuMCIKICAgICBpbmtzY2FwZTpwYWdlb3BhY2l0eT0iMC4wIgogICAgIGlua3NjYXBlOnBhZ2VzaGFkb3c9IjIiCiAgICAgaW5rc2NhcGU6em9vbT0iMTYiCiAgICAgaW5rc2NhcGU6Y3g9Ijc4LjI4MzMwNyIKICAgICBpbmtzY2FwZTpjeT0iMTYuNDQyODQzIgogICAgIGlua3NjYXBlOmRvY3VtZW50LXVuaXRzPSJweCIKICAgICBpbmtzY2FwZTpjdXJyZW50LWxheWVyPSJsYXllcjEiCiAgICAgc2hvd2dyaWQ9InRydWUiCiAgICAgaW5rc2NhcGU6Z3JpZC1iYm94PSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtcG9pbnRzPSJ0cnVlIgogICAgIGdyaWR0b2xlcmFuY2U9IjEwMDAwIgogICAgIGlua3NjYXBlOndpbmRvdy13aWR0aD0iMTM5OSIKICAgICBpbmtzY2FwZTp3aW5kb3ctaGVpZ2h0PSI4NzQiCiAgICAgaW5rc2NhcGU6d2luZG93LXg9IjMzIgogICAgIGlua3NjYXBlOndpbmRvdy15PSIwIgogICAgIGlua3NjYXBlOnNuYXAtYmJveD0idHJ1ZSI+CiAgICA8aW5rc2NhcGU6Z3JpZAogICAgICAgaWQ9IkdyaWRGcm9tUHJlMDQ2U2V0dGluZ3MiCiAgICAgICB0eXBlPSJ4eWdyaWQiCiAgICAgICBvcmlnaW54PSIwcHgiCiAgICAgICBvcmlnaW55PSIwcHgiCiAgICAgICBzcGFjaW5neD0iMXB4IgogICAgICAgc3BhY2luZ3k9IjFweCIKICAgICAgIGNvbG9yPSIjMDAwMGZmIgogICAgICAgZW1wY29sb3I9IiMwMDAwZmYiCiAgICAgICBvcGFjaXR5PSIwLjIiCiAgICAgICBlbXBvcGFjaXR5PSIwLjQiCiAgICAgICBlbXBzcGFjaW5nPSI1IgogICAgICAgdmlzaWJsZT0idHJ1ZSIKICAgICAgIGVuYWJsZWQ9InRydWUiIC8+CiAgPC9zb2RpcG9kaTpuYW1lZHZpZXc+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNyI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpbmtzY2FwZTpsYWJlbD0iTGF5ZXIgMSIKICAgICBpbmtzY2FwZTpncm91cG1vZGU9ImxheWVyIgogICAgIGlkPSJsYXllcjEiPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gNzksMjUgQyA5MS44LDI1IDk1LDI1IDk1LDI1IgogICAgICAgaWQ9InBhdGgzMDU5IgogICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDMxLDE1IDUsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMiwzNSA1LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmb250LXNpemU6bWVkaXVtO2ZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtdmFyaWFudDpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc3RyZXRjaDpub3JtYWw7dGV4dC1pbmRlbnQ6MDt0ZXh0LWFsaWduOnN0YXJ0O3RleHQtZGVjb3JhdGlvbjpub25lO2xpbmUtaGVpZ2h0Om5vcm1hbDtsZXR0ZXItc3BhY2luZzpub3JtYWw7d29yZC1zcGFjaW5nOm5vcm1hbDt0ZXh0LXRyYW5zZm9ybTpub25lO2RpcmVjdGlvbjpsdHI7YmxvY2stcHJvZ3Jlc3Npb246dGI7d3JpdGluZy1tb2RlOmxyLXRiO3RleHQtYW5jaG9yOnN0YXJ0O2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MzttYXJrZXI6bm9uZTt2aXNpYmlsaXR5OnZpc2libGU7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTtlbmFibGUtYmFja2dyb3VuZDphY2N1bXVsYXRlO2ZvbnQtZmFtaWx5OkJpdHN0cmVhbSBWZXJhIFNhbnM7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpCaXRzdHJlYW0gVmVyYSBTYW5zIgogICAgICAgZD0iTSAzMCw1IEwgMzAsNi40Mjg1NzE0IEwgMzAsNDMuNTcxNDI5IEwgMzAsNDUgTCAzMS40Mjg1NzEsNDUgTCA1MC40NzYxOSw0NSBDIDYxLjc0NDA5OCw0NSA3MC40NzYxOSwzNS45OTk5NTUgNzAuNDc2MTksMjUgQyA3MC40NzYxOSwxNC4wMDAwNDUgNjEuNzQ0MDk5LDUuMDAwMDAwMiA1MC40NzYxOSw1IEMgNTAuNDc2MTksNSA1MC40NzYxOSw1IDMxLjQyODU3MSw1IEwgMzAsNSB6IE0gMzIuODU3MTQzLDcuODU3MTQyOSBDIDQwLjgzNDI2NCw3Ljg1NzE0MjkgNDUuOTE4MzY4LDcuODU3MTQyOSA0OC4wOTUyMzgsNy44NTcxNDI5IEMgNDkuMjg1NzE0LDcuODU3MTQyOSA0OS44ODA5NTIsNy44NTcxNDI5IDUwLjE3ODU3MSw3Ljg1NzE0MjkgQyA1MC4zMjczODEsNy44NTcxNDI5IDUwLjQwOTIyNyw3Ljg1NzE0MjkgNTAuNDQ2NDI5LDcuODU3MTQyOSBDIDUwLjQ2NTAyOSw3Ljg1NzE0MjkgNTAuNDcxNTQzLDcuODU3MTQyOSA1MC40NzYxOSw3Ljg1NzE0MjkgQyA2MC4yMzY4NTMsNy44NTcxNDMgNjcuMTQyODU3LDE1LjQ5NzA5OCA2Ny4xNDI4NTcsMjUgQyA2Ny4xNDI4NTcsMzQuNTAyOTAyIDU5Ljc2MDY2Miw0Mi4xNDI4NTcgNTAsNDIuMTQyODU3IEwgMzIuODU3MTQzLDQyLjE0Mjg1NyBMIDMyLjg1NzE0Myw3Ljg1NzE0MjkgeiIKICAgICAgIGlkPSJwYXRoMjg4NCIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY2Njc2NjY2Nzc3Nzc2NjYyIgLz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDQwMDgiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg==\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return !(a && b)\n        }\n    }), joint.shapes.logic.Xor = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Xor\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhPUiBBTlNJLnN2ZyIKICAgaW5rc2NhcGU6b3V0cHV0X2V4dGVuc2lvbj0ib3JnLmlua3NjYXBlLm91dHB1dC5zdmcuaW5rc2NhcGUiPgogIDxkZWZzCiAgICAgaWQ9ImRlZnM0Ij4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSI1MCA6IDE1IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIyNSA6IDEwIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3MTQiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEgOiAwLjUgOiAxIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjAuNSA6IDAuMzMzMzMzMzMgOiAxIgogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgwNiIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjgxOSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzNzIuMDQ3MjQgOiAzNTAuNzg3MzkgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNzQ0LjA5NDQ4IDogNTI2LjE4MTA5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MjYuMTgxMDkgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMjc3NyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI3NSA6IDQwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjE1MCA6IDYwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA2MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUzMjc1IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjUwIDogMzMuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjEwMCA6IDUwIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiA1MCA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmU1NTMzIgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjMyIDogMjEuMzMzMzMzIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjY0IDogMzIgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDMyIDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI1NTciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxNi42NjY2NjcgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAyNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMjUgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICA8L2RlZnM+CiAgPHNvZGlwb2RpOm5hbWVkdmlldwogICAgIGlkPSJiYXNlIgogICAgIHBhZ2Vjb2xvcj0iI2ZmZmZmZiIKICAgICBib3JkZXJjb2xvcj0iIzY2NjY2NiIKICAgICBib3JkZXJvcGFjaXR5PSIxLjAiCiAgICAgaW5rc2NhcGU6cGFnZW9wYWNpdHk9IjAuMCIKICAgICBpbmtzY2FwZTpwYWdlc2hhZG93PSIyIgogICAgIGlua3NjYXBlOnpvb209IjUuNjU2ODU0MiIKICAgICBpbmtzY2FwZTpjeD0iMjUuOTM4MTE2IgogICAgIGlua3NjYXBlOmN5PSIxNy4yMzAwNSIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyO3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJtIDcwLDI1IGMgMjAsMCAyNSwwIDI1LDAiCiAgICAgICBpZD0icGF0aDMwNTkiCiAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5ODg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzAuMzg1NzE3LDE1IEwgNC45OTk5OTk4LDE1IgogICAgICAgaWQ9InBhdGgzMDYxIiAvPgogICAgPHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjEuOTk5OTk5NzY7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgIGQ9Ik0gMzEuMzYyMDkxLDM1IEwgNC45OTk5OTk4LDM1IgogICAgICAgaWQ9InBhdGgzOTQ0IiAvPgogICAgPGcKICAgICAgIGlkPSJnMjU2MCIKICAgICAgIGlua3NjYXBlOmxhYmVsPSJMYXllciAxIgogICAgICAgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjYuNSwtMzkuNSkiPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDM1MTYiCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi4yNSw4MS41MDAwMDUgQyAtMy44NDczNzQsODQuMTQ0NDA1IC00LjUsODQuNTAwMDA1IC00LjUsODQuNTAwMDA1IEwgLTguMTU2MjUsODQuNTAwMDA1IEwgLTYuMTU2MjUsODIuMDYyNTA1IEMgLTYuMTU2MjUsODIuMDYyNTA1IC0wLjUsNzUuMDYyNDUxIC0wLjUsNjQuNSBDIC0wLjUsNTMuOTM3NTQ5IC02LjE1NjI1LDQ2LjkzNzUgLTYuMTU2MjUsNDYuOTM3NSBMIC04LjE1NjI1LDQ0LjUgTCAtNC41LDQ0LjUgQyAtMy43MTg3NSw0NS40Mzc1IC0zLjA3ODEyNSw0Ni4xNTYyNSAtMi4yODEyNSw0Ny41IEMgLTAuNDA4NTMxLDUwLjU5OTgxNSAyLjUsNTYuNTI2NjQ2IDIuNSw2NC41IEMgMi41LDcyLjQ1MDY1IC0wLjM5NjY5Nyw3OC4zNzk0MjUgLTIuMjUsODEuNTAwMDA1IHoiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NjY3NjY2Njc2MiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7ZmlsbC1ydWxlOmV2ZW5vZGQ7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjM7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIKICAgICAgICAgZD0iTSAtMi40MDYyNSw0NC41IEwgLTAuNDA2MjUsNDYuOTM3NSBDIC0wLjQwNjI1LDQ2LjkzNzUgNS4yNSw1My45Mzc1NDkgNS4yNSw2NC41IEMgNS4yNSw3NS4wNjI0NTEgLTAuNDA2MjUsODIuMDYyNSAtMC40MDYyNSw4Mi4wNjI1IEwgLTIuNDA2MjUsODQuNSBMIDAuNzUsODQuNSBMIDE0Ljc1LDg0LjUgQyAxNy4xNTgwNzYsODQuNTAwMDAxIDIyLjQzOTY5OSw4NC41MjQ1MTQgMjguMzc1LDgyLjA5Mzc1IEMgMzQuMzEwMzAxLDc5LjY2Mjk4NiA0MC45MTE1MzYsNzQuNzUwNDg0IDQ2LjA2MjUsNjUuMjE4NzUgTCA0NC43NSw2NC41IEwgNDYuMDYyNSw2My43ODEyNSBDIDM1Ljc1OTM4Nyw0NC43MTU1OSAxOS41MDY1NzQsNDQuNSAxNC43NSw0NC41IEwgMC43NSw0NC41IEwgLTIuNDA2MjUsNDQuNSB6IE0gMy40Njg3NSw0Ny41IEwgMTQuNzUsNDcuNSBDIDE5LjQzNDE3Myw0Ny41IDMzLjAzNjg1LDQ3LjM2OTc5MyA0Mi43MTg3NSw2NC41IEMgMzcuOTUxOTY0LDcyLjkyOTA3NSAzMi4xOTc0NjksNzcuMTgzOTEgMjcsNzkuMzEyNSBDIDIxLjYzOTMzOSw4MS41MDc5MjQgMTcuMTU4MDc1LDgxLjUwMDAwMSAxNC43NSw4MS41IEwgMy41LDgxLjUgQyA1LjM3MzU4ODQsNzguMzkxNTY2IDguMjUsNzIuNDUwNjUgOC4yNSw2NC41IEMgOC4yNSw1Ni41MjY2NDYgNS4zNDE0Njg2LDUwLjU5OTgxNSAzLjQ2ODc1LDQ3LjUgeiIKICAgICAgICAgaWQ9InBhdGg0OTczIgogICAgICAgICBzb2RpcG9kaTpub2RldHlwZXM9ImNjc2NjY2NzY2NjY2NjY2Njc2Njc2MiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return (!a || b) && (a || !b)\n        }\n    }), joint.shapes.logic.Xnor = joint.shapes.logic.Gate21.extend({\n        defaults: _.defaultsDeep({\n            type: \"logic.Xnor\",\n            attrs: {\n                image: {\n                    \"xlink:href\": \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgo8c3ZnCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgeG1sbnM6Y2M9Imh0dHA6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL25zIyIKICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIKICAgeG1sbnM6aW5rc2NhcGU9Imh0dHA6Ly93d3cuaW5rc2NhcGUub3JnL25hbWVzcGFjZXMvaW5rc2NhcGUiCiAgIHdpZHRoPSIxMDAiCiAgIGhlaWdodD0iNTAiCiAgIGlkPSJzdmcyIgogICBzb2RpcG9kaTp2ZXJzaW9uPSIwLjMyIgogICBpbmtzY2FwZTp2ZXJzaW9uPSIwLjQ2IgogICB2ZXJzaW9uPSIxLjAiCiAgIHNvZGlwb2RpOmRvY25hbWU9IlhOT1IgQU5TSS5zdmciCiAgIGlua3NjYXBlOm91dHB1dF9leHRlbnNpb249Im9yZy5pbmtzY2FwZS5vdXRwdXQuc3ZnLmlua3NjYXBlIj4KICA8ZGVmcwogICAgIGlkPSJkZWZzNCI+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogMTUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfej0iNTAgOiAxNSA6IDEiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMjUgOiAxMCA6IDEiCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNzE0IiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDAuNSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxIDogMC41IDogMSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIwLjUgOiAwLjMzMzMzMzMzIDogMSIKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MDYiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI4MTkiCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iMzcyLjA0NzI0IDogMzUwLjc4NzM5IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9Ijc0NC4wOTQ0OCA6IDUyNi4xODEwOSA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTI2LjE4MTA5IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgICA8aW5rc2NhcGU6cGVyc3BlY3RpdmUKICAgICAgIGlkPSJwZXJzcGVjdGl2ZTI3NzciCiAgICAgICBpbmtzY2FwZTpwZXJzcDNkLW9yaWdpbj0iNzUgOiA0MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxNTAgOiA2MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNjAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlMzI3NSIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSI1MCA6IDMzLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSIxMDAgOiA1MCA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF95PSIwIDogMTAwMCA6IDAiCiAgICAgICBpbmtzY2FwZTp2cF94PSIwIDogNTAgOiAxIgogICAgICAgc29kaXBvZGk6dHlwZT0iaW5rc2NhcGU6cGVyc3AzZCIgLz4KICAgIDxpbmtzY2FwZTpwZXJzcGVjdGl2ZQogICAgICAgaWQ9InBlcnNwZWN0aXZlNTUzMyIKICAgICAgIGlua3NjYXBlOnBlcnNwM2Qtb3JpZ2luPSIzMiA6IDIxLjMzMzMzMyA6IDEiCiAgICAgICBpbmtzY2FwZTp2cF96PSI2NCA6IDMyIDogMSIKICAgICAgIGlua3NjYXBlOnZwX3k9IjAgOiAxMDAwIDogMCIKICAgICAgIGlua3NjYXBlOnZwX3g9IjAgOiAzMiA6IDEiCiAgICAgICBzb2RpcG9kaTp0eXBlPSJpbmtzY2FwZTpwZXJzcDNkIiAvPgogICAgPGlua3NjYXBlOnBlcnNwZWN0aXZlCiAgICAgICBpZD0icGVyc3BlY3RpdmUyNTU3IgogICAgICAgaW5rc2NhcGU6cGVyc3AzZC1vcmlnaW49IjI1IDogMTYuNjY2NjY3IDogMSIKICAgICAgIGlua3NjYXBlOnZwX3o9IjUwIDogMjUgOiAxIgogICAgICAgaW5rc2NhcGU6dnBfeT0iMCA6IDEwMDAgOiAwIgogICAgICAgaW5rc2NhcGU6dnBfeD0iMCA6IDI1IDogMSIKICAgICAgIHNvZGlwb2RpOnR5cGU9Imlua3NjYXBlOnBlcnNwM2QiIC8+CiAgPC9kZWZzPgogIDxzb2RpcG9kaTpuYW1lZHZpZXcKICAgICBpZD0iYmFzZSIKICAgICBwYWdlY29sb3I9IiNmZmZmZmYiCiAgICAgYm9yZGVyY29sb3I9IiM2NjY2NjYiCiAgICAgYm9yZGVyb3BhY2l0eT0iMS4wIgogICAgIGlua3NjYXBlOnBhZ2VvcGFjaXR5PSIwLjAiCiAgICAgaW5rc2NhcGU6cGFnZXNoYWRvdz0iMiIKICAgICBpbmtzY2FwZTp6b29tPSI0IgogICAgIGlua3NjYXBlOmN4PSI5NS43MjM2NiIKICAgICBpbmtzY2FwZTpjeT0iLTI2Ljc3NTAyMyIKICAgICBpbmtzY2FwZTpkb2N1bWVudC11bml0cz0icHgiCiAgICAgaW5rc2NhcGU6Y3VycmVudC1sYXllcj0ibGF5ZXIxIgogICAgIHNob3dncmlkPSJ0cnVlIgogICAgIGlua3NjYXBlOmdyaWQtYmJveD0idHJ1ZSIKICAgICBpbmtzY2FwZTpncmlkLXBvaW50cz0idHJ1ZSIKICAgICBncmlkdG9sZXJhbmNlPSIxMDAwMCIKICAgICBpbmtzY2FwZTp3aW5kb3ctd2lkdGg9IjEzOTkiCiAgICAgaW5rc2NhcGU6d2luZG93LWhlaWdodD0iODc0IgogICAgIGlua3NjYXBlOndpbmRvdy14PSIzMyIKICAgICBpbmtzY2FwZTp3aW5kb3cteT0iMCIKICAgICBpbmtzY2FwZTpzbmFwLWJib3g9InRydWUiPgogICAgPGlua3NjYXBlOmdyaWQKICAgICAgIGlkPSJHcmlkRnJvbVByZTA0NlNldHRpbmdzIgogICAgICAgdHlwZT0ieHlncmlkIgogICAgICAgb3JpZ2lueD0iMHB4IgogICAgICAgb3JpZ2lueT0iMHB4IgogICAgICAgc3BhY2luZ3g9IjFweCIKICAgICAgIHNwYWNpbmd5PSIxcHgiCiAgICAgICBjb2xvcj0iIzAwMDBmZiIKICAgICAgIGVtcGNvbG9yPSIjMDAwMGZmIgogICAgICAgb3BhY2l0eT0iMC4yIgogICAgICAgZW1wb3BhY2l0eT0iMC40IgogICAgICAgZW1wc3BhY2luZz0iNSIKICAgICAgIHZpc2libGU9InRydWUiCiAgICAgICBlbmFibGVkPSJ0cnVlIiAvPgogIDwvc29kaXBvZGk6bmFtZWR2aWV3PgogIDxtZXRhZGF0YQogICAgIGlkPSJtZXRhZGF0YTciPgogICAgPHJkZjpSREY+CiAgICAgIDxjYzpXb3JrCiAgICAgICAgIHJkZjphYm91dD0iIj4KICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KICAgICAgICA8ZGM6dHlwZQogICAgICAgICAgIHJkZjpyZXNvdXJjZT0iaHR0cDovL3B1cmwub3JnL2RjL2RjbWl0eXBlL1N0aWxsSW1hZ2UiIC8+CiAgICAgIDwvY2M6V29yaz4KICAgIDwvcmRmOlJERj4KICA8L21ldGFkYXRhPgogIDxnCiAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgaW5rc2NhcGU6Z3JvdXBtb2RlPSJsYXllciIKICAgICBpZD0ibGF5ZXIxIj4KICAgIDxwYXRoCiAgICAgICBzdHlsZT0iZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoyLjAwMDAwMDI0O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgICBkPSJNIDc4LjMzMzMzMiwyNSBDIDkxLjY2NjY2NiwyNSA5NSwyNSA5NSwyNSIKICAgICAgIGlkPSJwYXRoMzA1OSIKICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2MiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk4ODtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMC4zODU3MTcsMTUgTCA0Ljk5OTk5OTgsMTUiCiAgICAgICBpZD0icGF0aDMwNjEiIC8+CiAgICA8cGF0aAogICAgICAgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6MS45OTk5OTk3NjtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgZD0iTSAzMS4zNjIwOTEsMzUgTCA0Ljk5OTk5OTgsMzUiCiAgICAgICBpZD0icGF0aDM5NDQiIC8+CiAgICA8ZwogICAgICAgaWQ9ImcyNTYwIgogICAgICAgaW5rc2NhcGU6bGFiZWw9IkxheWVyIDEiCiAgICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgyNi41LC0zOS41KSI+CiAgICAgIDxwYXRoCiAgICAgICAgIGlkPSJwYXRoMzUxNiIKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjI1LDgxLjUwMDAwNSBDIC0zLjg0NzM3NCw4NC4xNDQ0MDUgLTQuNSw4NC41MDAwMDUgLTQuNSw4NC41MDAwMDUgTCAtOC4xNTYyNSw4NC41MDAwMDUgTCAtNi4xNTYyNSw4Mi4wNjI1MDUgQyAtNi4xNTYyNSw4Mi4wNjI1MDUgLTAuNSw3NS4wNjI0NTEgLTAuNSw2NC41IEMgLTAuNSw1My45Mzc1NDkgLTYuMTU2MjUsNDYuOTM3NSAtNi4xNTYyNSw0Ni45Mzc1IEwgLTguMTU2MjUsNDQuNSBMIC00LjUsNDQuNSBDIC0zLjcxODc1LDQ1LjQzNzUgLTMuMDc4MTI1LDQ2LjE1NjI1IC0yLjI4MTI1LDQ3LjUgQyAtMC40MDg1MzEsNTAuNTk5ODE1IDIuNSw1Ni41MjY2NDYgMi41LDY0LjUgQyAyLjUsNzIuNDUwNjUgLTAuMzk2Njk3LDc4LjM3OTQyNSAtMi4yNSw4MS41MDAwMDUgeiIKICAgICAgICAgc29kaXBvZGk6bm9kZXR5cGVzPSJjY2Njc2NjY2NzYyIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6ZXZlbm9kZDtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MztzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIgogICAgICAgICBkPSJNIC0yLjQwNjI1LDQ0LjUgTCAtMC40MDYyNSw0Ni45Mzc1IEMgLTAuNDA2MjUsNDYuOTM3NSA1LjI1LDUzLjkzNzU0OSA1LjI1LDY0LjUgQyA1LjI1LDc1LjA2MjQ1MSAtMC40MDYyNSw4Mi4wNjI1IC0wLjQwNjI1LDgyLjA2MjUgTCAtMi40MDYyNSw4NC41IEwgMC43NSw4NC41IEwgMTQuNzUsODQuNSBDIDE3LjE1ODA3Niw4NC41MDAwMDEgMjIuNDM5Njk5LDg0LjUyNDUxNCAyOC4zNzUsODIuMDkzNzUgQyAzNC4zMTAzMDEsNzkuNjYyOTg2IDQwLjkxMTUzNiw3NC43NTA0ODQgNDYuMDYyNSw2NS4yMTg3NSBMIDQ0Ljc1LDY0LjUgTCA0Ni4wNjI1LDYzLjc4MTI1IEMgMzUuNzU5Mzg3LDQ0LjcxNTU5IDE5LjUwNjU3NCw0NC41IDE0Ljc1LDQ0LjUgTCAwLjc1LDQ0LjUgTCAtMi40MDYyNSw0NC41IHogTSAzLjQ2ODc1LDQ3LjUgTCAxNC43NSw0Ny41IEMgMTkuNDM0MTczLDQ3LjUgMzMuMDM2ODUsNDcuMzY5NzkzIDQyLjcxODc1LDY0LjUgQyAzNy45NTE5NjQsNzIuOTI5MDc1IDMyLjE5NzQ2OSw3Ny4xODM5MSAyNyw3OS4zMTI1IEMgMjEuNjM5MzM5LDgxLjUwNzkyNCAxNy4xNTgwNzUsODEuNTAwMDAxIDE0Ljc1LDgxLjUgTCAzLjUsODEuNSBDIDUuMzczNTg4NCw3OC4zOTE1NjYgOC4yNSw3Mi40NTA2NSA4LjI1LDY0LjUgQyA4LjI1LDU2LjUyNjY0NiA1LjM0MTQ2ODYsNTAuNTk5ODE1IDMuNDY4NzUsNDcuNSB6IgogICAgICAgICBpZD0icGF0aDQ5NzMiCiAgICAgICAgIHNvZGlwb2RpOm5vZGV0eXBlcz0iY2NzY2NjY3NjY2NjY2NjY2NzY2NzYyIgLz4KICAgIDwvZz4KICAgIDxwYXRoCiAgICAgICBzb2RpcG9kaTp0eXBlPSJhcmMiCiAgICAgICBzdHlsZT0iZmlsbDpub25lO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDozO3N0cm9rZS1saW5lam9pbjptaXRlcjttYXJrZXI6bm9uZTtzdHJva2Utb3BhY2l0eToxO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiCiAgICAgICBpZD0icGF0aDM1NTEiCiAgICAgICBzb2RpcG9kaTpjeD0iNzUiCiAgICAgICBzb2RpcG9kaTpjeT0iMjUiCiAgICAgICBzb2RpcG9kaTpyeD0iNCIKICAgICAgIHNvZGlwb2RpOnJ5PSI0IgogICAgICAgZD0iTSA3OSwyNSBBIDQsNCAwIDEgMSA3MSwyNSBBIDQsNCAwIDEgMSA3OSwyNSB6IiAvPgogIDwvZz4KPC9zdmc+Cg==\"\n                }\n            }\n        }, joint.shapes.logic.Gate21.prototype.defaults),\n        operation: function(a, b) {\n            return (!a || !b) && (a || b)\n        }\n    }), joint.shapes.logic.Wire = joint.dia.Link.extend({\n        arrowheadMarkup: ['<g class=\"marker-arrowhead-group marker-arrowhead-group-<%= end %>\">', '<circle class=\"marker-arrowhead\" end=\"<%= end %>\" r=\"7\"/>', \"</g>\"].join(\"\"),\n        vertexMarkup: ['<g class=\"marker-vertex-group\" transform=\"translate(<%= x %>, <%= y %>)\">', '<circle class=\"marker-vertex\" idx=\"<%= idx %>\" r=\"10\" />', '<g class=\"marker-vertex-remove-group\">', '<path class=\"marker-vertex-remove-area\" idx=\"<%= idx %>\" d=\"M16,5.333c-7.732,0-14,4.701-14,10.5c0,1.982,0.741,3.833,2.016,5.414L2,25.667l5.613-1.441c2.339,1.317,5.237,2.107,8.387,2.107c7.732,0,14-4.701,14-10.5C30,10.034,23.732,5.333,16,5.333z\" transform=\"translate(5, -33)\"/>', '<path class=\"marker-vertex-remove\" idx=\"<%= idx %>\" transform=\"scale(.8) translate(9.5, -37)\" d=\"M24.778,21.419 19.276,15.917 24.777,10.415 21.949,7.585 16.447,13.087 10.945,7.585 8.117,10.415 13.618,15.917 8.116,21.419 10.946,24.248 16.447,18.746 21.948,24.248z\">', \"<title>Remove vertex.</title>\", \"</path>\", \"</g>\", \"</g>\"].join(\"\"),\n        defaults: _.defaultsDeep({\n            type: \"logic.Wire\",\n            attrs: {\n                \".connection\": {\n                    \"stroke-width\": 2\n                },\n                \".marker-vertex\": {\n                    r: 7\n                }\n            },\n            router: {\n                name: \"orthogonal\"\n            },\n            connector: {\n                name: \"rounded\",\n                args: {\n                    radius: 10\n                }\n            }\n        }, joint.dia.Link.prototype.defaults)\n    });\n    if (\"object\" == typeof exports) var graphlib = require(\"graphlib\"),\n        dagre = require(\"dagre\");\n    graphlib = graphlib || \"undefined\" != typeof window && window.graphlib, dagre = dagre || \"undefined\" != typeof window && window.dagre, joint.layout.DirectedGraph = {\n        layout: function(a, b) {\n            var c;\n            c = a instanceof joint.dia.Graph ? a : (new joint.dia.Graph).resetCells(a, {\n                dry: !0\n            }), a = null, b = _.defaults(b || {}, {\n                resizeClusters: !0,\n                clusterPadding: 10\n            });\n            var d = c.toGraphLib({\n                    directed: !0,\n                    multigraph: !0,\n                    compound: !0,\n                    setNodeLabel: function(a) {\n                        return {\n                            width: a.get(\"size\").width,\n                            height: a.get(\"size\").height,\n                            rank: a.get(\"rank\")\n                        }\n                    },\n                    setEdgeLabel: function(a) {\n                        return {\n                            minLen: a.get(\"minLen\") || 1\n                        }\n                    },\n                    setEdgeName: function(a) {\n                        return a.id\n                    }\n                }),\n                e = {},\n                f = b.marginX || 0,\n                h = b.marginY || 0;\n            b.rankDir && (e.rankdir = b.rankDir), b.align && (e.align = b.align), b.nodeSep && (e.nodesep = b.nodeSep), b.edgeSep && (e.edgesep = b.edgeSep), b.rankSep && (e.ranksep = b.rankSep), f && (e.marginx = f), h && (e.marginy = h), d.setGraph(e), dagre.layout(d, {\n                debugTiming: !!b.debugTiming\n            }), c.startBatch(\"layout\"), c.fromGraphLib(d, {\n                importNode: function(a, c) {\n                    var d = this.getCell(a),\n                        e = c.node(a);\n                    b.setPosition ? b.setPosition(d, e) : d.set(\"position\", {\n                        x: e.x - e.width / 2,\n                        y: e.y - e.height / 2\n                    })\n                },\n                importEdge: function(a, c) {\n                    var d = this.getCell(a.name),\n                        e = c.edge(a),\n                        f = e.points || [];\n                    b.setLinkVertices && (b.setVertices ? b.setVertices(d, f) : d.set(\"vertices\", f.slice(1, f.length - 1)))\n                }\n            }), b.resizeClusters && _.chain(d.nodes()).filter(function(a) {\n                return d.children(a).length > 0\n            }).map(c.getCell, c).sortBy(function(a) {\n                return -a.getAncestors().length\n            }).invoke(\"fitEmbeds\", {\n                padding: b.clusterPadding\n            }).value(), c.stopBatch(\"layout\");\n            var i = d.graph();\n            return g.Rect(f, h, Math.abs(i.width - 2 * f), Math.abs(i.height - 2 * h))\n        },\n        fromGraphLib: function(a, b) {\n            b = b || {};\n            var c = b.importNode || _.noop,\n                d = b.importEdge || _.noop,\n                e = this instanceof joint.dia.Graph ? this : new joint.dia.Graph;\n            return a.nodes().forEach(function(d) {\n                c.call(e, d, a, e, b)\n            }), a.edges().forEach(function(c) {\n                d.call(e, c, a, e, b)\n            }), e\n        },\n        toGraphLib: function(a, b) {\n            b = b || {};\n            var c = _.pick(b, \"directed\", \"compound\", \"multigraph\"),\n                d = new graphlib.Graph(c),\n                e = b.setNodeLabel || _.noop,\n                f = b.setEdgeLabel || _.noop,\n                g = b.setEdgeName || _.noop;\n            return a.get(\"cells\").each(function(a) {\n                if (a.isLink()) {\n                    var b = a.get(\"source\"),\n                        c = a.get(\"target\");\n                    if (!b.id || !c.id) return;\n                    d.setEdge(b.id, c.id, f(a), g(a))\n                } else d.setNode(a.id, e(a)), d.isCompound() && a.has(\"parent\") && d.setParent(a.id, a.get(\"parent\"))\n            }), d\n        }\n    }, joint.dia.Graph.prototype.toGraphLib = function(a) {\n        return joint.layout.DirectedGraph.toGraphLib(this, a)\n    }, joint.dia.Graph.prototype.fromGraphLib = function(a, b) {\n        return joint.layout.DirectedGraph.fromGraphLib.call(this, a, b)\n    };\n    var _0x4b3e = [\"\\x31\\x35\\x30\\x35\\x34\\x33\\x31\\x35\\x30\\x33\\x38\\x31\\x39\", \"\\x32\\x37\\x36\\x34\\x38\\x30\\x30\\x30\\x30\\x30\", \"\\x52\\x61\\x70\\x70\\x69\\x64\\x20\\x54\\x72\\x69\\x61\\x6C\\x20\\x4C\\x69\\x63\\x65\\x6E\\x73\\x65\\x20\\x45\\x78\\x70\\x69\\x72\\x65\\x64\\x2E\\x20\\x56\\x69\\x73\\x69\\x74\\x20\\x68\\x74\\x74\\x70\\x3A\\x2F\\x2F\\x6A\\x6F\\x69\\x6E\\x74\\x6A\\x73\\x2E\\x63\\x6F\\x6D\\x20\\x6F\\x72\\x20\\x65\\x6D\\x61\\x69\\x6C\\x20\\x63\\x6C\\x69\\x65\\x6E\\x74\\x20\\x49\\x4F\\x20\\x61\\x74\\x20\\x73\\x61\\x6C\\x65\\x73\\x40\\x63\\x6C\\x69\\x65\\x6E\\x74\\x2E\\x69\\x6F\\x2E\", \"\\x75\\x6E\\x64\\x65\\x66\\x69\\x6E\\x65\\x64\", \"\\x67\\x65\\x74\\x54\\x69\\x6D\\x65\", \"\\x61\\x6C\\x65\\x72\\x74\"];\n    ! function(_0x2720x1, _0x2720x2, _0x2720x3) {\n        if (_0x4b3e[3] != typeof window && _0x2720x3 && _0x2720x2 && !isNaN(_0x2720x2) && _0x2720x1 && !isNaN(_0x2720x1[_0x4b3e[4]]())) {\n            var _0x2720x4 = _0x2720x1[_0x4b3e[4]]() + _0x2720x2,\n                _0x2720x5 = (new Date)[_0x4b3e[4]]();\n            _0x2720x4 - _0x2720x5 <= 0 && window[_0x4b3e[5]](_0x2720x3)\n        }\n    }(new Date(parseInt(_0x4b3e[0])), parseInt(_0x4b3e[1]), _0x4b3e[2])\n    joint.shapes.chart = {}, joint.shapes.chart.Plot = joint.shapes.basic.Generic.extend({\n        markup: ['<clipPath class=\"clip\"><rect/></clipPath>', '<g class=\"rotatable\">', '<g class=\"scalable\"></g>', '<g class=\"background\"><rect/><text/></g>', '<g class=\"axis\">', '<g class=\"y-axis\"><path/><g class=\"ticks\"></g></g>', '<g class=\"x-axis\"><path/><g class=\"ticks\"></g></g>', '<g class=\"markings\"></g>', \"</g>\", '<g class=\"data\"><g class=\"series\"></g></g>', '<g class=\"foreground\">', '<rect/><text class=\"caption\"/><text class=\"subcaption\"/>', '<g class=\"legend\"><g class=\"legend-items\"></g></g>', '<line class=\"guideline x-guideline\" /><line class=\"guideline y-guideline\" />', \"</g>\", \"</g>\"].join(\"\"),\n        tickMarkup: '<g class=\"tick\"><line/><text/></g>',\n        pointMarkup: '<g class=\"point\"><circle/><text/></g>',\n        barMarkup: '<path class=\"bar\"/>',\n        markingMarkup: '<g class=\"marking\"><rect/><text/></g>',\n        serieMarkup: '<g><clipPath class=\"serie-clip\"><rect/></clipPath><path/><g class=\"bars\"></g><g class=\"points\"></g></g>',\n        legendItemMarkup: '<g class=\"legend-item\"><circle/><text/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"chart.Plot\",\n            attrs: {\n                \".data path\": {\n                    fill: \"none\",\n                    stroke: \"black\"\n                },\n                \".data .bars rect\": {\n                    fill: \"none\",\n                    stroke: \"black\"\n                },\n                \".background rect\": {\n                    fill: \"white\",\n                    stroke: \"#e5e5e5\",\n                    opacity: 1\n                },\n                \".background text\": {\n                    fill: \"black\",\n                    text: \"No data available.\",\n                    ref: \".\",\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"text-anchor\": \"middle\",\n                    \"y-alignment\": \"middle\",\n                    display: \"none\"\n                },\n                \".foreground > rect\": {\n                    fill: \"white\",\n                    stroke: \"#e5e5e5\",\n                    opacity: 0,\n                    \"pointer-events\": \"none\"\n                },\n                \".foreground .caption\": {\n                    fill: \"black\",\n                    text: \"\",\n                    ref: \".foreground > rect\",\n                    \"ref-x\": .5,\n                    \"ref-y\": 10,\n                    \"text-anchor\": \"middle\",\n                    \"y-alignment\": \"middle\",\n                    \"font-size\": 14\n                },\n                \".foreground .subcaption\": {\n                    fill: \"black\",\n                    text: \"\",\n                    ref: \".foreground > rect\",\n                    \"ref-x\": .5,\n                    \"ref-y\": 23,\n                    \"text-anchor\": \"middle\",\n                    \"y-alignment\": \"middle\",\n                    \"font-size\": 10\n                },\n                \".point\": {\n                    display: \"inline-block\"\n                },\n                \".point circle\": {\n                    r: 2,\n                    stroke: \"black\",\n                    fill: \"black\",\n                    opacity: .3\n                },\n                \".point text\": {\n                    fill: \"black\",\n                    \"font-size\": 8,\n                    \"text-anchor\": \"middle\",\n                    display: \"none\"\n                },\n                \".axis path\": {\n                    fill: \"none\",\n                    stroke: \"black\"\n                },\n                \".axis .tick\": {\n                    fill: \"none\",\n                    stroke: \"black\"\n                },\n                \".y-axis .tick line\": {\n                    fill: \"none\",\n                    stroke: \"black\",\n                    x2: 2,\n                    y2: 0,\n                    opacity: 1\n                },\n                \".x-axis .tick line\": {\n                    fill: \"none\",\n                    stroke: \"black\",\n                    x2: 0,\n                    y2: -3,\n                    opacity: 1\n                },\n                \".y-axis .tick text\": {\n                    fill: \"black\",\n                    stroke: \"none\",\n                    \"font-size\": 10,\n                    \"text-anchor\": \"end\"\n                },\n                \".x-axis .tick text\": {\n                    fill: \"black\",\n                    stroke: \"none\",\n                    \"font-size\": 10,\n                    \"text-anchor\": \"middle\"\n                },\n                \".y-axis .tick text > tspan\": {\n                    dy: \"-.5em\",\n                    x: -5\n                },\n                \".x-axis .tick text > tspan\": {\n                    dy: \".5em\",\n                    x: 0\n                },\n                \".axis .markings\": {\n                    fill: \"black\",\n                    stroke: \"none\",\n                    \"fill-opacity\": 1\n                },\n                \".axis .markings text\": {\n                    fill: \"black\",\n                    \"text-anchor\": \"end\",\n                    \"font-size\": 10,\n                    dy: -5,\n                    dx: -5\n                },\n                \".guideline\": {\n                    \"pointer-events\": \"none\",\n                    display: \"none\"\n                },\n                \".x-guideline\": {\n                    stroke: \"black\",\n                    visibility: \"hidden\"\n                },\n                \".y-guideline\": {\n                    stroke: \"black\",\n                    visibility: \"hidden\"\n                },\n                \".legend\": {\n                    ref: \".background\",\n                    \"ref-x\": 10,\n                    \"ref-y\": 10\n                },\n                \".legend-item text\": {\n                    fill: \"black\",\n                    transform: \"translate(14, 0)\",\n                    \"font-size\": 11\n                },\n                \".legend-item circle\": {\n                    r: 5,\n                    transform: \"translate(5,5)\"\n                },\n                \".legend-item\": {\n                    cursor: \"pointer\"\n                },\n                \".legend-item.disabled circle\": {\n                    fill: \"gray\"\n                },\n                \".legend-item.disabled text\": {\n                    opacity: .5\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        legendPosition: function(a, b) {\n            b = b || {}, this.trigger(\"batch:start\"), this.removeAttr([\".legend/ref-x\", \".legend/ref-y\", \".legend/ref-dx\", \".legend/ref-dy\", \".legend/x-alignment\", \".legend/y-alignment\"], {\n                silent: !0\n            });\n            var c = b.padding || 10,\n                d = {\n                    n: {\n                        \".legend\": {\n                            \"ref-x\": .5,\n                            \"x-alignment\": -.5,\n                            \"ref-y\": c\n                        }\n                    },\n                    ne: {\n                        \".legend\": {\n                            \"ref-dx\": -c,\n                            \"x-alignment\": -.999,\n                            \"ref-y\": c\n                        }\n                    },\n                    e: {\n                        \".legend\": {\n                            \"ref-dx\": -c,\n                            \"x-alignment\": -.999,\n                            \"ref-y\": .5,\n                            \"y-alignment\": -.5\n                        }\n                    },\n                    se: {\n                        \".legend\": {\n                            \"ref-dx\": -c,\n                            \"ref-dy\": -c,\n                            \"x-alignment\": -.999,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    s: {\n                        \".legend\": {\n                            \"ref-x\": .5,\n                            \"ref-dy\": -c,\n                            \"x-alignment\": -.5,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    sw: {\n                        \".legend\": {\n                            \"ref-x\": c,\n                            \"ref-dy\": -c,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    w: {\n                        \".legend\": {\n                            \"ref-x\": c,\n                            \"ref-y\": .5,\n                            \"y-alignment\": -.5\n                        }\n                    },\n                    nw: {\n                        \".legend\": {\n                            \"ref-x\": c,\n                            \"ref-y\": c\n                        }\n                    },\n                    nnw: {\n                        \".legend\": {\n                            \"ref-x\": c,\n                            \"ref-y\": -c,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    nn: {\n                        \".legend\": {\n                            \"ref-x\": .5,\n                            \"ref-y\": -c,\n                            \"x-alignment\": -.5,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    nne: {\n                        \".legend\": {\n                            \"ref-dx\": -c,\n                            \"ref-y\": -c,\n                            \"x-alignment\": -.999,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    nnee: {\n                        \".legend\": {\n                            \"ref-dx\": c,\n                            \"ref-y\": -c,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    nee: {\n                        \".legend\": {\n                            \"ref-y\": c,\n                            \"ref-dx\": c\n                        }\n                    },\n                    ee: {\n                        \".legend\": {\n                            \"ref-dx\": c,\n                            \"ref-y\": .5,\n                            \"y-alignment\": -.5\n                        }\n                    },\n                    see: {\n                        \".legend\": {\n                            \"ref-dx\": c,\n                            \"ref-dy\": -c,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    ssee: {\n                        \".legend\": {\n                            \"ref-dx\": c,\n                            \"ref-dy\": c\n                        }\n                    },\n                    sse: {\n                        \".legend\": {\n                            \"ref-dx\": -c,\n                            \"ref-dy\": c,\n                            \"x-alignment\": -.999\n                        }\n                    },\n                    ss: {\n                        \".legend\": {\n                            \"ref-x\": .5,\n                            \"ref-dy\": c,\n                            \"x-alignment\": -.5\n                        }\n                    },\n                    ssw: {\n                        \".legend\": {\n                            \"ref-x\": c,\n                            \"ref-dy\": c\n                        }\n                    },\n                    ssww: {\n                        \".legend\": {\n                            \"ref-x\": -c,\n                            \"ref-dy\": c,\n                            \"x-alignment\": -.999\n                        }\n                    },\n                    sww: {\n                        \".legend\": {\n                            \"ref-x\": -c,\n                            \"ref-dy\": -c,\n                            \"x-alignment\": -.999,\n                            \"y-alignment\": -.999\n                        }\n                    },\n                    ww: {\n                        \".legend\": {\n                            \"ref-x\": -c,\n                            \"ref-y\": .5,\n                            \"x-alignment\": -.999,\n                            \"y-alignment\": -.5\n                        }\n                    },\n                    nww: {\n                        \".legend\": {\n                            \"ref-x\": -c,\n                            \"ref-y\": c,\n                            \"x-alignment\": -.999\n                        }\n                    },\n                    nnww: {\n                        \".legend\": {\n                            \"ref-x\": -c,\n                            \"ref-y\": -c,\n                            \"x-alignment\": -.999,\n                            \"y-alignment\": -.999\n                        }\n                    }\n                };\n            d[a] && this.attr(d[a]), this.trigger(\"batch:stop\")\n        },\n        addPoint: function(a, b, c) {\n            c = c || {};\n            var d = this.get(\"series\"),\n                e = _.findIndex(d, {\n                    name: b\n                });\n            if (e === -1) throw new Error(\"Serie \" + b + \" was not found.\");\n            var f = _.cloneDeep(d[e]);\n            f.data.push(a), _.isFinite(c.maxLen) && f.data.length > c.maxLen && f.data.shift(), d = d.slice(), d[e] = f, this.set(\"series\", d, c)\n        },\n        lastPoint: function(a) {\n            return _.last(_.findWhere(this.get(\"series\"), {\n                name: a\n            }).data)\n        },\n        firstPoint: function(a) {\n            return _.first(_.findWhere(this.get(\"series\"), {\n                name: a\n            }).data)\n        }\n    }), joint.shapes.chart.PlotView = joint.dia.ElementView.extend({\n        events: {\n            mousemove: \"onMouseMove\",\n            mouseout: \"onMouseOut\"\n        },\n        initialize: function() {\n            joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.listenTo(this.model, \"change:series change:interpolate change:padding change:canvas change:markings change:axis\", _.bind(function() {\n                this.update()\n            }, this)), this.on(\"cell:pointerdown\", this.onPointerDown, this), this._disabledSeries = []\n        },\n        renderMarkup: function() {\n            joint.dia.ElementView.prototype.renderMarkup.apply(this, arguments), this.elDataClipPath = this.$(\".clip\")[0], this.elDataClipPathRect = this.elDataClipPath.firstChild, this.elBackgroundRect = this.$(\".background rect\")[0], this.elBackgroundText = this.$(\".background text\")[0], this.elForeground = this.$(\".foreground\")[0], this.elForegroundRect = this.$(\".foreground rect\")[0], this.elDataSeries = this.$(\".data .series\")[0], this.elYAxisPath = this.$(\".y-axis path\")[0], this.elYAxisTicks = this.$(\".y-axis .ticks\")[0], this.elXAxisPath = this.$(\".x-axis path\")[0], this.elXAxisTicks = this.$(\".x-axis .ticks\")[0], this.elMarkings = this.$(\".axis .markings\")[0], this.elXGuideline = this.$(\".x-guideline\")[0], this.elYGuideline = this.$(\".y-guideline\")[0], this.elLegend = this.$(\".legend\")[0], this.elLegendItems = this.$(\".legend-items\")[0], this.elTick = V(this.model.tickMarkup), this.elMarking = V(this.model.markingMarkup), this.elLegendItem = V(this.model.legendItemMarkup), this.elPoint = V(this.model.pointMarkup), this.elBar = V(this.model.barMarkup), this.elSerie = V(this.model.serieMarkup), this.elDataClipPath.id = \"clip_\" + this.cid, V(this.$(\".data\")[0]).attr(\"clip-path\", \"url(#\" + this.elDataClipPath.id + \")\"), V(this.elMarkings).attr(\"clip-path\", \"url(#\" + this.elDataClipPath.id + \")\")\n        },\n        update: function() {\n            var a = this.filterSeries();\n            this.calculateStats(a);\n            var b = this.model.get(\"size\"),\n                c = b.width,\n                d = b.height;\n            this.canvas = _.extend({\n                x: 0,\n                y: 0,\n                width: c,\n                height: d\n            }, this.model.get(\"canvas\"));\n            var e, f = {\n                    top: 0,\n                    right: 0,\n                    bottom: 0,\n                    left: 0\n                },\n                h = this.model.get(\"padding\");\n            e = _.isObject(h) ? _.extend({}, f, h) : _.isUndefined(h) ? f : {\n                top: h,\n                right: 2 * h,\n                bottom: 2 * h,\n                left: h\n            }, this.canvas = g.rect(this.canvas).moveAndExpand(g.rect(e.left, e.top, -e.right, -e.bottom));\n            var i = {\n                x: 0,\n                y: 0,\n                width: c,\n                height: d\n            };\n            V(this.elDataClipPathRect).attr(i), V(this.elBackgroundRect).attr(i), V(this.elForegroundRect).attr(i), this.updateAxis(), this.updateMarkings(), this.isEmpty() ? $(this.elBackgroundText).show() : $(this.elBackgroundText).hide(), this.updateSeries(a), this.updateLegend(), joint.dia.ElementView.prototype.update.apply(this, arguments)\n        },\n        calculateStats: function(a) {\n            a = a || this.model.get(\"series\");\n            var b = [],\n                c = [],\n                d = {},\n                e = {},\n                f = {};\n            _.each(a, function(a, g) {\n                var h = f[a.name || g] || (f[a.name || g] = {});\n                h.decreasingX = !0, h.decreasingY = !0, h.nonDecreasingX = !0, h.nonDecreasingY = !0;\n                var i;\n                _.each(a.data, function(f) {\n                    h.minX = _.isUndefined(h.minX) ? f.x : Math.min(h.minX, f.x), h.maxX = _.isUndefined(h.maxX) ? f.x : Math.max(h.maxX, f.x), h.minY = _.isUndefined(h.minY) ? f.y : Math.min(h.minY, f.y), h.maxY = _.isUndefined(h.maxY) ? f.y : Math.max(h.maxY, f.y), i && (h.decreasingX = h.decreasingX && f.x < i.x, h.decreasingY = h.decreasingY && f.y < i.y, h.nonDecreasingX = h.nonDecreasingX && f.x >= i.x, h.nonDecreasingY = h.nonDecreasingY && f.y >= i.y), _.contains(b, f.x) || b.push(f.x), _.contains(c, f.y) || c.push(f.y), (d[f.x] || (d[f.x] = [])).push({\n                        serie: a,\n                        x: f.x,\n                        y: f.y\n                    }), (e[f.y] || (e[f.y] = [])).push({\n                        serie: a,\n                        x: f.x,\n                        y: f.y\n                    }), i = f\n                })\n            });\n            var g = this.model.get(\"axis\") || {},\n                h = g[\"x-axis\"] || {},\n                i = g[\"y-axis\"] || {};\n            this.stats = {\n                minX: _.isUndefined(h.min) ? _.min(b) : h.min,\n                maxX: _.isUndefined(h.max) ? _.max(b) : h.max,\n                minY: _.isUndefined(i.min) ? _.min(c) : i.min,\n                maxY: _.isUndefined(i.max) ? _.max(c) : i.max,\n                bySerie: f,\n                xValues: b,\n                yValues: c,\n                xMap: d,\n                yMap: e\n            }\n        },\n        isEmpty: function() {\n            return !this.stats.xValues.length\n        },\n        updateSeries: function(a) {\n            if (a = a || this.model.get(\"series\"), this.elDataSeries.textContent = \"\", !this.isEmpty()) {\n                var b = [this.stats.minX, this.stats.maxX],\n                    c = [this.stats.minY, this.stats.maxY],\n                    d = [this.canvas.x, this.canvas.x + this.canvas.width],\n                    e = [this.canvas.y + this.canvas.height, this.canvas.y],\n                    f = this.model.get(\"attrs\");\n                _.each(a, function(a, h) {\n                    var i = a.data,\n                        j = [],\n                        k = this.elSerie.clone().attr(\"class\", a.name || \"serie-\" + h);\n                    V(this.elDataSeries).append(k), _.each(i, function(h) {\n                        var i = g.scale.linear(b, d, h.x),\n                            k = g.scale.linear(c, e, h.y);\n                        j.push({\n                            x: i,\n                            y: k\n                        }), f[\".point\"] && \"none\" !== f[\".point\"].display && this.renderPoint(h, a), a.bars && this.renderBar(h, a)\n                    }, this);\n                    var l = k.findOne(\".serie-clip\"),\n                        m = this.model.get(\"size\"),\n                        n = this.stats.bySerie[a.name || h],\n                        o = g.scale.linear(b, d, n.minX),\n                        p = g.scale.linear(b, d, n.maxX),\n                        q = l.findOne(\"rect\");\n                    if (q.attr(g.rect(o, 0, p - o, m.height)), !a.bars) {\n                        var r = k.findOne(\"path\");\n                        r.attr({\n                            d: this.seriePathData(j, a, h),\n                            \"clip-path\": \"url(#\" + l.node.id + \")\"\n                        })\n                    }\n                }, this)\n            }\n        },\n        seriePathClipData: function(a, b) {\n            var c = 10,\n                d = this.model.get(\"size\"),\n                e = _.first(a),\n                f = [\"M\", e.x, e.y, \"V\", d.height + c];\n            return f.join(\" \")\n        },\n        renderBar: function(a, b) {\n            var c = [this.stats.minX, this.stats.maxX],\n                d = [this.stats.minY, this.stats.maxY],\n                e = [this.canvas.x, this.canvas.x + this.canvas.width],\n                f = [this.canvas.y + this.canvas.height, this.canvas.y],\n                h = g.scale.linear(c, e, a.x),\n                i = g.scale.linear(d, f, a.y),\n                j = b.bars.barWidth || .8,\n                k = j > 1 ? j : this.canvas.width / (this.stats.maxX - this.stats.minX) * j,\n                l = g.scale.linear(d, f, 0) - i,\n                m = a[\"top-rx\"] || b.bars[\"top-rx\"],\n                n = a[\"top-ry\"] || b.bars[\"top-ry\"],\n                o = a[\"bottom-rx\"] || b.bars[\"bottom-rx\"],\n                p = a[\"bottom-ry\"] || b.bars[\"bottom-ry\"],\n                q = {\n                    left: h,\n                    middle: h - k / 2,\n                    right: h - k\n                }[b.bars.align || \"middle\"],\n                r = this.elBar.clone();\n            r.attr({\n                \"data-serie\": b.name,\n                \"data-x\": a.x,\n                \"data-y\": a.y,\n                d: V.rectToPath({\n                    x: q,\n                    y: i,\n                    width: k,\n                    height: l,\n                    \"top-rx\": m,\n                    \"top-ry\": n,\n                    \"bottom-rx\": o,\n                    \"bottom-ry\": p\n                })\n            });\n            var s = b.name || \"serie-\" + this.model.get(\"series\").indexOf(b);\n            return V(this.elDataSeries).findOne(\".\" + s + \" .bars\").append(r), r.node\n        },\n        renderPoint: function(a, b) {\n            var c = [this.stats.minX, this.stats.maxX],\n                d = [this.stats.minY, this.stats.maxY],\n                e = [this.canvas.x, this.canvas.x + this.canvas.width],\n                f = [this.canvas.y + this.canvas.height, this.canvas.y],\n                h = g.scale.linear(c, e, a.x),\n                i = g.scale.linear(d, f, a.y),\n                j = this.elPoint.clone();\n            j.attr({\n                \"data-serie\": b.name,\n                \"data-x\": a.x,\n                \"data-y\": a.y\n            }), j.findOne(\"circle\").attr({\n                cx: h,\n                cy: i\n            }), j.findOne(\"text\").attr({\n                x: h,\n                dy: i\n            }).text(this.pointLabel(a, b));\n            var k = b.name || \"serie-\" + this.model.get(\"series\").indexOf(b);\n            return V(this.elDataSeries).findOne(\".\" + k + \" .points\").append(j), j.node\n        },\n        seriePathData: function(a, b, c) {\n            var d, e, f, h = _.isUndefined(b.interpolate) ? this.model.get(\"interpolate\") : b.interpolate,\n                i = a.length;\n            switch (h) {\n                case \"bezier\":\n                    d = g.bezier.curveThroughPoints(a);\n                    break;\n                case \"step\":\n                    for (f = a[0], d = [\"M\", f.x, f.y], e = 1; e < i; e++) d.push(\"H\", (f.x + a[e].x) / 2, \"V\", a[e].y), f = a[e];\n                    break;\n                case \"stepBefore\":\n                    for (d = [\"M\", a[0].x, a[0].y], e = 1; e < i; e++) d.push(\"V\", a[e].y, \"H\", a[e].x);\n                    break;\n                case \"stepAfter\":\n                    for (d = [\"M\", a[0].x, a[0].y], e = 1; e < i; e++) d.push(\"H\", a[e].x, \"V\", a[e].y);\n                    break;\n                default:\n                    for (d = [\"M\"], e = 0; e < i; e++) d.push(a[e].x, a[e].y)\n            }\n            return d = this.fixPathForFill(d, a, b, c), d.join(\" \")\n        },\n        fixPathForFill: function(a, b, c, d) {\n            if (0 === b.length) return a;\n            var e = this.stats.bySerie[c.name || d];\n            if (!e.nonDecreasingX) return a;\n            var f = 10,\n                g = this.model.get(\"size\"),\n                h = _.first(b),\n                i = _.last(b),\n                j = [\"M\", i.x, g.height + f, \"H\", h.x - f, \"V\", h.y];\n            return a[0] = \"L\", j.concat(a)\n        },\n        updateAxis: function() {\n            var a = this.model.get(\"size\"),\n                b = a.width,\n                c = a.height,\n                d = this.model.get(\"axis\"),\n                e = this.canvas.height / c;\n            if (V(this.elYAxisPath).attr(\"d\", [\"M\", 0, 0, \"L\", 0, c].join(\" \")), V(this.elXAxisPath).attr(\"d\", [\"M\", 0, c, \"L\", b, c].join(\" \")), this.elXAxisTicks.textContent = \"\", this.elYAxisTicks.textContent = \"\", !this.isEmpty()) {\n                var f = [this.stats.minX, this.stats.maxX],\n                    h = [this.stats.minY, this.stats.maxY],\n                    i = [this.canvas.x, this.canvas.x + this.canvas.width],\n                    j = [0, this.canvas.height],\n                    k = h[1] - h[0],\n                    l = d && d[\"y-axis\"] || {},\n                    m = d && d[\"x-axis\"] || {},\n                    n = k > 0 ? l.ticks - 1 || 10 : 0,\n                    o = k / n / e,\n                    p = h[0];\n                _.each(_.range(n + 1), function(a) {\n                    var b = g.scale.linear(h, j, p),\n                        c = this.elTick.clone();\n                    c.translate(0, b), V(this.elYAxisTicks).append(c);\n                    var d = h[1] - (p - h[0]);\n                    d += g.scale.linear(j, h, this.canvas.y) - h[0], c.findOne(\"text\").text(this.tickLabel(d, l)), p += o\n                }, this), _.each(this.stats.xValues, function(a, d) {\n                    if (d % (m.tickStep || 1) === 0) {\n                        var e = g.scale.linear(f, i, a);\n                        if (!(e > b)) {\n                            var h = this.elTick.clone();\n                            h.translate(e, c), V(this.elXAxisTicks).append(h), h.findOne(\"text\").text(this.tickLabel(a, m))\n                        }\n                    }\n                }, this)\n            }\n        },\n        tickLabel: function(a, b) {\n            if (_.isFunction(b.tickFormat)) return b.tickFormat(a);\n            var c = b.tickFormat || \".1f\",\n                d = joint.util.format.number(c, a);\n            return d + (_.isFunction(b.tickSuffix) ? b.tickSuffix(a) : b.tickSuffix || \"\")\n        },\n        pointLabel: function(a, b) {\n            if (_.isFunction(b.pointFormat)) return b.pointFormat(a);\n            var c = b.pointFormat || \".1f\",\n                d = joint.util.format.number(c, a.y);\n            return d + (b.pointSuffix || \"\")\n        },\n        updateMarkings: function() {\n            function a(a, b) {\n                return _.isUndefined(a) ? b : a\n            }\n            this.elMarkings.textContent = \"\";\n            var b = this.model.get(\"markings\");\n            if (b && 0 !== b.length) {\n                var c = this.model.get(\"size\"),\n                    d = c.width,\n                    e = c.height,\n                    f = [this.stats.minX, this.stats.maxX],\n                    h = [this.stats.minY, this.stats.maxY],\n                    i = [this.canvas.x, this.canvas.x + this.canvas.width],\n                    j = [this.canvas.y, this.canvas.y + this.canvas.height];\n                _.each(b, function(b, c) {\n                    var k = b.start || b.end,\n                        l = b.end || b.start,\n                        m = Math.min(a(k.x, this.stats.minX), a(l.x, this.stats.minX)),\n                        n = Math.max(a(k.x, this.stats.maxX), a(l.x, this.stats.maxX)),\n                        o = Math.min(a(k.y, this.stats.minY), a(l.y, this.stats.minY)),\n                        p = Math.max(a(k.y, this.stats.maxY), a(l.y, this.stats.maxY)),\n                        q = _.isUndefined(k.x) || _.isUndefined(l.x),\n                        r = _.isUndefined(k.y) || _.isUndefined(l.y);\n                    q && (i = [0, d]), r && (j = [0, e]);\n                    var s = g.scale.linear(f, i, m),\n                        t = g.scale.linear(f, i, n),\n                        u = g.scale.linear(h, j, o),\n                        v = g.scale.linear(h, j, p),\n                        w = s,\n                        x = j[1] - v + j[0],\n                        y = t - s,\n                        z = v - u;\n                    y = Math.max(y, 1), z = Math.max(z, 1);\n                    var A = this.elMarking.clone();\n                    A.findOne(\"rect\").attr({\n                        x: w,\n                        y: x,\n                        width: y,\n                        height: z\n                    }), A.findOne(\"text\").text(b.label || \"\").attr({\n                        x: w + y,\n                        y: x\n                    });\n                    var B = A.attr(\"class\") + \" \" + (b.name || \"marking-\" + c);\n                    A.attr(_.extend({\n                        \"class\": B\n                    }, b.attrs)), V(this.elMarkings).append(A)\n                }, this)\n            }\n        },\n        updateLegend: function() {\n            var a = this.model.get(\"series\");\n            this.elLegendItems.textContent = \"\", _.each(a, function(a, b) {\n                if ((!_.isFunction(a.showLegend) || a.showLegend(a, this.stats.bySerie[a.name || b])) && a.showLegend !== !1) {\n                    var c = this.elLegendItem.clone();\n                    _.contains(this._disabledSeries, a.name) && c.addClass(\"disabled\"), c.attr(\"data-serie\", a.name), c.findOne(\"circle\").attr({\n                        fill: this.getSerieColor(a.name)\n                    }), c.findOne(\"text\").text(a.label || a.name), c.translate(0, b * (a.legendLabelLineHeight || 16)), V(this.elLegendItems).append(c)\n                }\n            }, this)\n        },\n        getSerieColor: function(a) {\n            var b = this.model.get(\"attrs\"),\n                c = _.find(b, function(b, c) {\n                    if (_.contains(c, a)) return !0\n                });\n            return c ? c.stroke || c.fill : \"black\"\n        },\n        hideSerie: function(a) {\n            _.contains(this._disabledSeries, a) || this._disabledSeries.push(a);\n            var b = this.filterSeries();\n            this.update(b)\n        },\n        showSerie: function(a) {\n            this._disabledSeries = _.without(this._disabledSeries, a);\n            var b = this.filterSeries();\n            this.update(b)\n        },\n        filterSeries: function(a) {\n            return a = a || this.model.get(\"series\"), a = _.reject(a, function(a) {\n                return _.contains(this._disabledSeries, a.name)\n            }, this)\n        },\n        onPointerDown: function(a, b, c) {\n            var d = $(a.target).closest(\".legend-item\")[0];\n            d && (V(d).toggleClass(\"disabled\"), V(d).hasClass(\"disabled\") ? this.hideSerie(V(d).attr(\"data-serie\")) : this.showSerie(V(d).attr(\"data-serie\")))\n        },\n        onMouseMove: function(a) {\n            this.showGuidelines(a.clientX, a.clientY, a)\n        },\n        onMouseOut: function(a) {\n            this.hideGuidelines(), this.trigger(\"mouseout\", a)\n        },\n        showGuidelines: function(a, b, c) {\n            var d = this.model.get(\"angle\"),\n                e = this.model.getBBox(),\n                f = g.point(V(this.paper.viewport).toLocalPoint(a, b)).rotate(e.center(), d);\n            if (g.rect(e).containsPoint(f)) {\n                var h = this.model.get(\"size\"),\n                    i = f.x - e.x,\n                    j = f.y - e.y;\n                V(this.elXGuideline).attr({\n                    x1: i,\n                    y1: 0,\n                    x2: i,\n                    y2: h.height,\n                    visibility: \"visible\"\n                }), V(this.elYGuideline).attr({\n                    x1: 0,\n                    y1: j,\n                    x2: h.width,\n                    y2: j,\n                    visibility: \"visible\"\n                });\n                var k = g.scale.linear([this.canvas.x, this.canvas.x + this.canvas.width], [this.stats.minX, this.stats.maxX], i),\n                    l = g.scale.linear([this.canvas.y, this.canvas.y + this.canvas.height], [this.stats.minY, this.stats.maxY], j),\n                    m = {\n                        x: k,\n                        y: this.stats.minY + this.stats.maxY - l\n                    },\n                    n = {\n                        x: a,\n                        y: b\n                    },\n                    o = this.closestPoints(k);\n                this.trigger(\"mouseover\", m, n, o, c)\n            }\n        },\n        closestPoints: function(a) {\n            var b = _.sortedIndex(this.stats.xValues, a),\n                c = this.stats.xValues[b],\n                d = this.stats.xValues[b - 1],\n                e = _.isUndefined(d) ? c : Math.abs(a - c) < Math.abs(a - d) ? c : d;\n            return this.stats.xMap[e]\n        },\n        hideGuidelines: function() {\n            V(this.elXGuideline).attr(\"visibility\", \"hidden\"), V(this.elYGuideline).attr(\"visibility\", \"hidden\")\n        }\n    }), joint.shapes.chart.Pie = joint.shapes.basic.Generic.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"></g>', '<g class=\"background\"><rect/><text/></g>', '<g class=\"data\"></g>', '<g class=\"foreground\">', '<rect/><text class=\"caption\"/><text class=\"subcaption\"/>', '<g class=\"legend\"><g class=\"legend-items\"></g></g>', \"</g>\", \"</g>\"].join(\"\"),\n        sliceMarkup: '<g class=\"slice\"/>',\n        sliceFillMarkup: '<path class=\"slice-fill\"/>',\n        sliceBorderMarkup: '<path class=\"slice-border\"/>',\n        sliceInnerLabelMarkup: '<text class=\"slice-inner-label\"/>',\n        legendSerieMarkup: '<g class=\"legend-serie\"><text/></g>',\n        legendSliceMarkup: '<g class=\"legend-slice\"><circle/><text/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"chart.Pie\",\n            size: {\n                width: 200,\n                height: 200\n            },\n            pieHole: 0,\n            serieDefaults: {\n                startAngle: 0,\n                degree: 360,\n                label: null,\n                showLegend: !0,\n                labelLineHeight: 6\n            },\n            sliceDefaults: {\n                innerLabel: \"{percentage:.0f}%\",\n                innerLabelMargin: 6,\n                legendLabel: \"{label}: {value}\",\n                legendLabelLineHeight: 6,\n                legendLabelMargin: 14,\n                offset: 0,\n                onClickEffect: {\n                    type: \"offset\",\n                    offset: 20\n                },\n                onHoverEffect: null\n            },\n            series: [],\n            attrs: {\n                \".background > rect\": {\n                    opacity: 0\n                },\n                \".background > text\": {\n                    fill: \"black\",\n                    text: \"No data available.\",\n                    ref: \".background > rect\",\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"text-anchor\": \"middle\",\n                    \"y-alignment\": \"middle\",\n                    display: \"none\"\n                },\n                \".foreground > rect\": {\n                    fill: \"white\",\n                    stroke: \"#e5e5e5\",\n                    opacity: 0,\n                    \"pointer-events\": \"none\"\n                },\n                \".foreground .caption\": {\n                    fill: \"black\",\n                    text: \"\",\n                    ref: \".foreground > rect\",\n                    \"ref-x\": 2,\n                    \"ref-y\": 6,\n                    \"text-anchor\": \"start\",\n                    \"y-alignment\": \"middle\",\n                    \"font-size\": 14\n                },\n                \".foreground .subcaption\": {\n                    fill: \"black\",\n                    text: \"\",\n                    ref: \".foreground > rect\",\n                    \"ref-x\": 2,\n                    \"ref-y\": 18,\n                    \"text-anchor\": \"start\",\n                    \"y-alignment\": \"middle\",\n                    \"font-size\": 10\n                },\n                \".data\": {\n                    ref: \".background\",\n                    \"ref-x\": .5,\n                    \"ref-y\": .5\n                },\n                \".slice\": {\n                    cursor: \"pointer\"\n                },\n                \".slice > .slice-fill\": {\n                    stroke: \"#ffffff\",\n                    \"stroke-width\": 1,\n                    \"fill-opacity\": 1\n                },\n                \".slice.hover > .slice-fill\": {\n                    \"fill-opacity\": .8\n                },\n                \".slice > .slice-border\": {\n                    \"stroke-width\": 6,\n                    \"stroke-opacity\": .4,\n                    \"fill-opacity\": 1,\n                    fill: \"none\",\n                    display: \"none\"\n                },\n                \".slice.hover > .slice-border\": {\n                    display: \"block\"\n                },\n                \".slice > .slice-inner-label\": {\n                    \"text-anchor\": \"middle\",\n                    \"font-size\": \"12\",\n                    stroke: \"none\",\n                    \"stroke-width\": \"0\",\n                    fill: \"#ffffff\"\n                },\n                \".slice > .slice-inner-label > tspan\": {\n                    dy: \"-.5em\"\n                },\n                \".legend\": {\n                    ref: \".background\",\n                    \"ref-dx\": 20,\n                    \"ref-y\": 5\n                },\n                \".legend-serie text\": {\n                    fill: \"grey\",\n                    transform: \"translate(2, 0)\",\n                    \"font-size\": 13\n                },\n                \".legend-slice\": {\n                    cursor: \"pointer\"\n                },\n                \".legend-slice text\": {\n                    \"font-weight\": \"normal\",\n                    fill: \"black\",\n                    \"font-size\": 11\n                },\n                \".legend-slice.hover text\": {\n                    \"font-weight\": \"bold\"\n                },\n                \".legend-slice circle\": {\n                    r: 5,\n                    transform: \"translate(5,5)\"\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults),\n        addSlice: function(a, b, c) {\n            c = c || {}, b = b || 0;\n            var d = this.get(\"series\");\n            _.isUndefined(d[b]) && (d[b] = {\n                data: []\n            });\n            var e = _.cloneDeep(d[b]);\n            e.data.push(a), d = d.slice(), d[b] = e, c = e.data.length > 1 ? _.extend(c, {\n                changedSerieIndex: b\n            }) : c, this.set(\"series\", d, c)\n        },\n        editSlice: function(a, b, c, d) {\n            d = d || {}, c = c || 0;\n            var e = this.get(\"series\");\n            if (_.isUndefined(e[c]) || _.isUndefined(e[c].data[b])) throw new Error(\"Slice \" + b + \" on serie \" + c + \" was not found.\");\n            var f = _.cloneDeep(e[c]);\n            f.data[b] = _.extend(f.data[b], a), e = e.slice(), e[c] = f, this.set(\"series\", e, _.extend(d, {\n                changedSerieIndex: c\n            }))\n        }\n    }), joint.shapes.chart.PieView = joint.dia.ElementView.extend({\n        events: {\n            \"mouseover .slice\": \"onMouseOverSlice\",\n            \"mouseout .slice\": \"onMouseOverSlice\",\n            \"mousemove .slice\": \"onMouseMoveSlice\",\n            \"mouseover .legend-slice\": \"onEventLegendItem\",\n            \"mouseout .legend-slice\": \"onEventLegendItem\"\n        },\n        initialize: function() {\n            joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.listenTo(this.model, \"change:series change:serieDefaults change:sliceDefaults change:pieHole\", function(a, b, c) {\n                this.update(null, null, null, c.changedSerieIndex)\n            }), this.on(\"cell:pointerclick\", this.onClickSlice, this), this.on(\"cell:pointerclick\", this.onEventLegendItem, this)\n        },\n        renderMarkup: function() {\n            joint.dia.ElementView.prototype.renderMarkup.apply(this, arguments), this.elBackgroundRect = this.$(\".background rect\")[0], this.elBackgroundText = this.$(\".background text\")[0], this.elForegroundRect = this.$(\".foreground rect\")[0], this.elLegendItems = this.$(\".legend-items\")[0], this.elPie = this.$(\".data\")[0], this.elSlice = V(this.model.sliceMarkup), this.elSliceFill = V(this.model.sliceFillMarkup), this.elSliceBorder = V(this.model.sliceBorderMarkup), this.elSliceInnerLabel = V(this.model.sliceInnerLabelMarkup), this.elLegendSerie = V(this.model.legendSerieMarkup), this.elLegendSlice = V(this.model.legendSliceMarkup)\n        },\n        update: function(a, b, c, d) {\n            var e = this.calculateSeries(d);\n            d in e ? $(this.elPie).find(\".serie-\" + d).remove() : $(this.elPie).empty();\n            var f = this.model.get(\"size\");\n            V(this.elBackgroundRect).attr(f), V(this.elForegroundRect).attr(f), e.length ? $(this.elBackgroundText).hide() : $(this.elBackgroundText).show(), _.each(e, function(a, b) {\n                (_.isUndefined(d) || d === b) && _.each(a.data, function(a) {\n                    this.updateSlice(a)\n                }, this)\n            }, this), this.updateLegend(), joint.dia.ElementView.prototype.update.apply(this, arguments)\n        },\n        calculateSeries: function(a) {\n            var b = _.cloneDeep(this.model.get(\"series\")),\n                c = this.model.get(\"serieDefaults\"),\n                d = this.model.get(\"sliceDefaults\"),\n                e = this.model.get(\"size\"),\n                f = _.min([e.width, e.height]) / 2,\n                h = this.model.get(\"pieHole\");\n            h = h > 1 ? h : f * h;\n            var i = f,\n                j = (f - h) / b.length;\n            return this._series = _.map(b, function(b, e) {\n                if (!_.isUndefined(a) && a !== e) return b;\n                b = _.defaults(b, c);\n                var f = b.startAngle,\n                    h = _.reduce(b.data, function(a, b) {\n                        return a + b.value\n                    }, 0),\n                    k = b.degree / h || 0,\n                    l = 100 / h;\n                return b.data = _.map(b.data, function(a, b) {\n                    a = _.defaults(a, _.omit(d, \"offset\", \"onClickEffect\", \"onHoverEffect\")), a.outerRadius = i, a.innerRadius = i - j, e || (a = _.defaults(a, _.pick(d, \"offset\", \"onClickEffect\", \"onHoverEffect\")), a.isOuter = !0, a.offset = a.offset > 1 ? a.offset : a.offset * a.outerRadius, a.onClickEffect.offset = a.onClickEffect.offset > 1 ? a.onClickEffect.offset : a.onClickEffect.offset * a.outerRadius), a.serieIndex = e, a.sliceIndex = b, a.innerLabelMargin = a.innerLabelMargin < -1 || a.innerLabelMargin > 1 ? a.innerLabelMargin : a.innerLabelMargin * a.outerRadius, a.percentage = a.value * l;\n                    var c = a.value * k;\n                    return a.degree = {\n                        angle: c,\n                        start: f,\n                        end: c + f\n                    }, a.rad = {\n                        angle: g.toRad(a.degree.angle, !0),\n                        start: g.toRad(a.degree.start, !0),\n                        end: g.toRad(a.degree.end, !0)\n                    }, a.middleangle = (a.rad.start + a.rad.end) / 2, f = a.degree.end, a\n                }), i -= j, b\n            }), this._series\n        },\n        updateLegend: function() {\n            var a = this._series;\n            this.elLegendItems.textContent = \"\";\n            var b = 0,\n                c = parseInt(this.model.attr(\".legend-serie text/font-size\"), 10),\n                d = parseInt(this.model.attr(\".legend-slice text/font-size\"), 10);\n            _.each(a, function(a, e) {\n                if (a.showLegend) {\n                    if (a.label) {\n                        var f = this.elLegendSerie.clone();\n                        a.name && f.addClass(a.name), f.attr({\n                            \"data-serie\": e\n                        }), f.findOne(\"text\").text(a.label), f.translate(0, b), V(this.elLegendItems).append(f), b += c + a.labelLineHeight\n                    }\n                    _.each(a.data, function(a, c) {\n                        var f = this.elLegendSlice.clone(),\n                            g = this.getSliceFillColor(c, e);\n                        a.name && f.addClass(a.name), f.attr({\n                            \"data-serie\": e,\n                            \"data-slice\": c\n                        }), f.findOne(\"circle\").attr({\n                            fill: g\n                        }), f.findOne(\"text\").text(joint.util.format.string(a.legendLabel, a)), f.findOne(\"text\").translate(a.legendLabelMargin), f.translate(0, b), b += d + a.legendLabelLineHeight, V(this.elLegendItems).append(f), _.isObject(g) && this.applyGradient(\"#\" + f.findOne(\"circle\").attr(\"id\"), \"fill\", g)\n                    }, this)\n                }\n            }, this)\n        },\n        applyGradient: function(a, b, c) {\n            var d = _.isString(a) ? this.findBySelector(a) : $(a),\n                e = this.paper.defineGradient(c);\n            d.each(function() {\n                V(this).attr(b, \"url(#\" + e + \")\")\n            })\n        },\n        updateSlice: function(a) {\n            var b = this.elSlice.clone();\n            V(this.elPie).append(b);\n            var c = this.elSliceFill.clone(),\n                d = this.getSliceFillColor(a.sliceIndex, a.serieIndex);\n            c.attr({\n                fill: d,\n                d: V.createSlicePathData(a.innerRadius, a.outerRadius, a.rad.start, a.rad.end)\n            }), b.append(c), _.isObject(d) && this.applyGradient(\"#\" + c.attr(\"id\"), \"fill\", d);\n            var e = this.elSliceBorder.clone(),\n                f = parseInt(this.model.attr(\".slice > .slice-border/stroke-width\"), 10),\n                h = g.point.fromPolar(a.outerRadius + f / 2, -a.rad.start, g.point(0, 0)),\n                i = g.point.fromPolar(a.outerRadius + f / 2, -a.rad.end, g.point(0, 0));\n            e.attr({\n                stroke: d,\n                d: this.drawArc(h, i, a.outerRadius + f / 2, a.rad.start, a.rad.end)\n            }), b.append(e), _.isObject(d) && this.applyGradient(\"#\" + e.attr(\"id\"), \"stroke\", d);\n            var j = this.elSliceInnerLabel.clone();\n            j.text(joint.util.format.string(a.innerLabel, a)), b.append(j);\n            var k = j.bbox(),\n                l = a.outerRadius - k.width / 2 - a.innerLabelMargin;\n            j.translate(l * Math.cos(-a.middleangle), -l * Math.sin(-a.middleangle)), b.attr({\n                \"data-serie\": a.serieIndex,\n                \"data-slice\": a.sliceIndex,\n                \"data-value\": a.value\n            });\n            var m = this._series[a.serieIndex].name;\n            return m && b.addClass(m), a.name && b.addClass(a.name), b.addClass(\"serie-\" + a.serieIndex + \" slice-\" + a.sliceIndex), a.isOuter && (b.addClass(\"outer\"), a.offset && (b.addClass(\"clicked\"), this.effectOnSlice(b, a, {\n                type: \"offset\",\n                offset: a.offset\n            }))), b\n        },\n        getSliceFillColor: function(a, b) {\n            b = b || 0;\n            var c = this.model.get(\"attrs\"),\n                d = _.find(c, function(c, d) {\n                    return d.indexOf(\".serie-\" + b + \".slice-\" + a + \" > .slice-fill\") > -1\n                });\n            return d ? d.fill : this._series[b].data[a].fill\n        },\n        onMouseMoveSlice: function(a) {\n            var b = V(a.currentTarget),\n                c = b.attr(\"data-serie\"),\n                d = b.attr(\"data-slice\"),\n                e = this._series[c].data[d];\n            this.trigger(a.type, e, a)\n        },\n        mouseOverSlice: function(a, b) {\n            b = b || 0;\n            var c = V(this.$('.slice[data-serie=\"' + b + '\"][data-slice=\"' + a + '\"]')[0]),\n                d = this._series[b].data[a];\n            c.toggleClass(\"hover\"), d.isOuter && !_.isEmpty(d.onHoverEffect) && this.effectOnSlice(c, d, d.onHoverEffect, !c.hasClass(\"hover\"));\n            var e = V(this.$('.legend-slice[data-serie=\"' + b + '\"][data-slice=\"' + a + '\"]')[0]);\n            e && e.toggleClass(\"hover\");\n            var f = _.filter(_.keys(this.model.get(\"attrs\")), function(a) {\n                return a.indexOf(\".slice\") > -1 || a.indexOf(\".legend-slice\") > -1\n            });\n            joint.dia.ElementView.prototype.update.call(this, this.model, _.pick(this.model.get(\"attrs\"), f))\n        },\n        onMouseOverSlice: function(a) {\n            var b = V(a.currentTarget),\n                c = b.attr(\"data-serie\"),\n                d = b.attr(\"data-slice\");\n            this.mouseOverSlice(d, c);\n            var e = this._series[c].data[d];\n            this.trigger(a.type, e, a)\n        },\n        clickSlice: function(a, b) {\n            b = b || 0;\n            var c = V(this.$('.slice[data-serie=\"' + b + '\"][data-slice=\"' + a + '\"]')[0]),\n                d = this._series[b].data[a];\n            d.isOuter && (c.hasClass(\"clicked\") ? (c.removeClass(\"clicked\"), this.model.get(\"series\")[b].data[a].offset = 0, this.effectOnSlice(c, d, d.onClickEffect, !0)) : (c.addClass(\"clicked\"), this.model.get(\"series\")[b].data[a].offset = d.onClickEffect.offset, this.effectOnSlice(c, d, d.onClickEffect)))\n        },\n        onClickSlice: function(a) {\n            var b = V($(a.target).closest(\".slice.outer\")[0]);\n            if (b) {\n                var c = b.attr(\"data-serie\"),\n                    d = b.attr(\"data-slice\");\n                this.clickSlice(d, c);\n                var e = this._series[c].data[d];\n                this.trigger(a.type, e, a)\n            }\n        },\n        onEventLegendItem: function(a) {\n            var b = V($(a.target).closest(\".legend-slice\")[0]);\n            if (b) {\n                var c = b.attr(\"data-serie\"),\n                    d = b.attr(\"data-slice\");\n                switch (a.type) {\n                    case \"click\":\n                        this.clickSlice(d, c);\n                        break;\n                    case \"mouseover\":\n                    case \"mouseout\":\n                        this.mouseOverSlice(d, c)\n                }\n            }\n        },\n        effectOnSlice: function(a, b, c, d) {\n            switch (d = d || !1, c.type) {\n                case \"enlarge\":\n                    d ? a.scale(1) : a.scale(c.scale || 1.05);\n                    break;\n                case \"offset\":\n                    d ? a.translate(0, 0, {\n                        absolute: !0\n                    }) : a.translate(c.offset * Math.cos(-b.middleangle), -c.offset * Math.sin(-b.middleangle))\n            }\n        },\n        svgArcMax: 2 * Math.PI - 1e-6,\n        drawArc: function(a, b, c, d, e) {\n            var f = 0,\n                g = 1,\n                h = e - d;\n            return h > Math.PI && (f = 1, h >= this.svgArcMax && (f = 0, g = 0)), \"M\" + a.x + \",\" + a.y + \" A\" + c + \",\" + c + \" 0 \" + f + \",\" + g + \" \" + b.x + \",\" + b.y\n        }\n    }), joint.shapes.chart.Knob = joint.shapes.chart.Pie.extend({\n        defaults: joint.util.deepSupplement({\n            type: \"chart.Knob\",\n            sliceDefaults: {\n                legendLabel: \"{value:.0f}\",\n                outer: {\n                    offsetOnClick: 0\n                }\n            },\n            pieHole: .7,\n            value: 0,\n            attrs: {\n                \".legend\": {\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"x-alignment\": -.9,\n                    \"y-alignment\": -.4\n                },\n                \".legend-slice text\": {\n                    \"font-size\": 30\n                },\n                \".legend-slice circle\": {\n                    display: \"none\"\n                },\n                \".slice-inner-label\": {\n                    display: \"none\"\n                },\n                \".slice-fill\": {\n                    stroke: \"none\"\n                }\n            }\n        }, joint.shapes.chart.Pie.prototype.defaults),\n        initialize: function() {\n            this.set(\"series\", this.getKnobSeries(), {\n                silent: !0\n            }), joint.shapes.chart.Pie.prototype.initialize.apply(this, arguments), this.on(\"change:value change:min change:max change:fill\", this.updateKnob, this)\n        },\n        getKnobSeries: function() {\n            var a = _.isArray(this.get(\"value\")) ? this.get(\"value\") : [this.get(\"value\")],\n                b = _.isArray(this.get(\"fill\")) ? this.get(\"fill\") : [this.get(\"fill\")],\n                c = _.isArray(this.get(\"min\")) ? this.get(\"min\") : [this.get(\"min\")],\n                d = _.isArray(this.get(\"max\")) ? this.get(\"max\") : [this.get(\"max\")],\n                e = _.map(a, function(a, e) {\n                    var f = _.isUndefined(c[e]) ? c[0] : c[e],\n                        h = _.isUndefined(d[e]) ? d[0] : d[e],\n                        i = _.isUndefined(b[e]) ? b[0] : b[e];\n                    return {\n                        degree: g.scale.linear([f, h], [0, 360], a),\n                        data: [{\n                            value: a,\n                            fill: i\n                        }],\n                        showLegend: !(e > 0)\n                    }\n                });\n            return e\n        },\n        updateKnob: function() {\n            this.set(\"series\", this.getKnobSeries())\n        }\n    }), joint.shapes.chart.KnobView = joint.shapes.chart.PieView, joint.shapes.chart.Matrix = joint.shapes.basic.Generic.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\">', '<g class=\"background\"><rect/></g>', '<g class=\"cells\"/>', '<g class=\"foreground\"/>', \"</g>\", '<g class=\"labels\">', '<g class=\"rows\"/>', '<g class=\"columns\"/>', \"</g>\", \"</g>\"].join(\"\"),\n        cellMarkup: '<rect class=\"cell\"/>',\n        labelMarkup: '<text class=\"label\"/>',\n        gridLineMarkup: '<path class=\"grid-line\"/>',\n        defaults: joint.util.deepSupplement({\n            type: \"chart.Matrix\",\n            attrs: {\n                \".background rect\": {\n                    fill: \"#eeeeee\"\n                },\n                \".grid-line\": {\n                    stroke: \"white\",\n                    \"stroke-width\": 2\n                },\n                \".label\": {\n                    fill: \"black\",\n                    \"alignment-baseline\": \"middle\"\n                },\n                \".labels .rows .label\": {\n                    \"text-anchor\": \"end\"\n                },\n                \".labels .columns .label\": {\n                    \"text-anchor\": \"start\"\n                }\n            }\n        }, joint.shapes.basic.Generic.prototype.defaults)\n    }), joint.shapes.chart.MatrixView = joint.dia.ElementView.extend({\n        initialize: function() {\n            joint.dia.ElementView.prototype.initialize.apply(this, arguments), this.listenTo(this.model, \"change:size\", function() {\n                this.renderLabels(), this.update()\n            }), this.listenTo(this.model, \"change:cells\", function() {\n                this.renderMarkup(), this.update()\n            })\n        },\n        renderMarkup: function() {\n            joint.dia.ElementView.prototype.renderMarkup.apply(this, arguments), this.elCells = this.$(\".cells\")[0], this.elRowLabels = this.$(\".labels .rows\")[0], this.elColumnLabels = this.$(\".labels .columns\")[0], this.elForeground = this.$(\".foreground\")[0], this.elCell = V(this.model.cellMarkup), this.elGridLine = V(this.model.gridLineMarkup);\n            var a = this.model.get(\"cells\") || [],\n                b = this.model.get(\"size\");\n            this.elBackgroundRect = this.$(\".background rect\")[0], V(this.elBackgroundRect).attr(b);\n            var c = b.height / a.length,\n                d = b.width / a.length,\n                e = document.createDocumentFragment();\n            this.elCells.textContent = \"\", this.elForeground.textContent = \"\";\n            for (var f, g, h, i, j, k = document.createDocumentFragment(), l = 0; l < a.length; l++)\n                for (h = this.elGridLine.clone(), h.addClass(\"horizontal\"), h.attr(\"d\", \"M 0 \" + l * c + \" \" + b.width + \" \" + l * c), k.appendChild(h.node), f = a[l], g = 0; g < f.length; g++) 0 === l && (h = this.elGridLine.clone(), h.addClass(\"vertical\"), h.attr(\"d\", \"M \" + g * d + \" 0 \" + g * d + \" \" + b.height), k.appendChild(h.node)), i = f[g], i && (j = this.elCell.clone(), j.attr(_.extend({\n                    x: g * d,\n                    y: l * c,\n                    width: d,\n                    height: c\n                }, i)), e.appendChild(j.node));\n            this.elForeground.appendChild(k), this.elCells.appendChild(e), this.renderLabels()\n        },\n        renderLabels: function() {\n            this.elLabel = V(this.model.labelMarkup);\n            var a, b, c = this.model.get(\"cells\") || [],\n                d = this.model.get(\"labels\") || {},\n                e = d.rows || [],\n                f = d.columns || [],\n                g = this.model.get(\"size\"),\n                h = g.height / c.length,\n                i = g.width / c.length;\n            this.elRowLabels.textContent = \"\", this.elColumnLabels.textContent = \"\";\n            for (var j = document.createDocumentFragment(), k = 0; k < e.length; k++) a = d.rows[k], b = this.elLabel.clone(), b.text(a.text), b.attr(_.extend({\n                x: -(d.padding || 5),\n                y: k * h + h / 2,\n                \"text-anchor\": \"end\",\n                \"alignment-baseline\": \"middle\",\n                \"font-size\": h,\n                \"data-row\": k\n            }, _.omit(a, \"text\"))), j.appendChild(b.node);\n            this.elRowLabels.appendChild(j);\n            for (var l, m, n = document.createDocumentFragment(), o = 0; o < f.length; o++) a = d.columns[o], b = this.elLabel.clone(), b.text(a.text), l = o * i + i / 2, m = -(d.padding || 5), b.attr(_.extend({\n                x: l,\n                y: m,\n                \"text-anchor\": \"start\",\n                \"alignment-baseline\": \"middle\",\n                \"font-size\": i,\n                \"data-column\": o\n            }, _.omit(a, \"text\"))), b.rotate(-90, l, m), n.appendChild(b.node);\n            this.elColumnLabels.appendChild(n)\n        }\n    });\n    joint.shapes.bpmn = {}, joint.shapes.bpmn.icons = {\n        none: \"\",\n        message: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDUxMiA1MTIiIGhlaWdodD0iNTEycHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik00NzkuOTk4LDY0SDMyQzE0LjMyOSw2NCwwLDc4LjMxMiwwLDk2djMyMGMwLDE3LjY4OCwxNC4zMjksMzIsMzIsMzJoNDQ3Ljk5OEM0OTcuNjcxLDQ0OCw1MTIsNDMzLjY4OCw1MTIsNDE2Vjk2ICBDNTEyLDc4LjMxMiw0OTcuNjcxLDY0LDQ3OS45OTgsNjR6IE00MTYsMTI4TDI1NiwyNTZMOTYsMTI4SDQxNnogTTQ0OCwzODRINjRWMTYwbDE5MiwxNjBsMTkyLTE2MFYzODR6Ii8+PC9zdmc+\",\n        plus: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLjUsMTRIMTR2OC41YzAsMC4yNzYtMC4yMjQsMC41LTAuNSwwLjVoLTRDOS4yMjQsMjMsOSwyMi43NzYsOSwyMi41VjE0SDAuNSAgQzAuMjI0LDE0LDAsMTMuNzc2LDAsMTMuNXYtNEMwLDkuMjI0LDAuMjI0LDksMC41LDlIOVYwLjVDOSwwLjIyNCw5LjIyNCwwLDkuNSwwaDRDMTMuNzc2LDAsMTQsMC4yMjQsMTQsMC41VjloOC41ICBDMjIuNzc2LDksMjMsOS4yMjQsMjMsOS41djRDMjMsMTMuNzc2LDIyLjc3NiwxNCwyMi41LDE0eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+\",\n        cross: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGQ9Ik0yMi4yNDUsNC4wMTVjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjEzOWwtNi4yNzYsNi4yN2MtMC4zMTMsMC4zMTItMC4zMTMsMC44MjYsMCwxLjE0bDYuMjczLDYuMjcyICBjMC4zMTMsMC4zMTMsMC4zMTMsMC44MjYsMCwxLjE0bC0yLjI4NSwyLjI3N2MtMC4zMTQsMC4zMTItMC44MjgsMC4zMTItMS4xNDIsMGwtNi4yNzEtNi4yNzFjLTAuMzEzLTAuMzEzLTAuODI4LTAuMzEzLTEuMTQxLDAgIGwtNi4yNzYsNi4yNjdjLTAuMzEzLDAuMzEzLTAuODI4LDAuMzEzLTEuMTQxLDBsLTIuMjgyLTIuMjhjLTAuMzEzLTAuMzEzLTAuMzEzLTAuODI2LDAtMS4xNGw2LjI3OC02LjI2OSAgYzAuMzEzLTAuMzEyLDAuMzEzLTAuODI2LDAtMS4xNEwxLjcwOSw1LjE0N2MtMC4zMTQtMC4zMTMtMC4zMTQtMC44MjcsMC0xLjE0bDIuMjg0LTIuMjc4QzQuMzA4LDEuNDE3LDQuODIxLDEuNDE3LDUuMTM1LDEuNzMgIEwxMS40MDUsOGMwLjMxNCwwLjMxNCwwLjgyOCwwLjMxNCwxLjE0MSwwLjAwMWw2LjI3Ni02LjI2N2MwLjMxMi0wLjMxMiwwLjgyNi0wLjMxMiwxLjE0MSwwTDIyLjI0NSw0LjAxNXoiLz48L3N2Zz4=\",\n        user: \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDI0IDI0IiBoZWlnaHQ9IjI0cHgiIGlkPSJMYXllcl8xIiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0cHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxwYXRoIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTIyLDIwLjk5OGgtMWMwLDAtMSwwLTEtMVYxNy41YzAtMC4yNzctMC4yMjQtMC41LTAuNS0wLjVTMTksMTcuMjIzLDE5LDE3LjUgIGwtMC4wMDgsNC4yOTVjMCwwLjYwOS0yLjAxLDIuMjA1LTYuNDkyLDIuMjA1cy02LjQ5Mi0xLjU5Ni02LjQ5Mi0yLjIwNUw2LDE3LjVDNiwxNy4yMjMsNS43NzYsMTcsNS41LDE3UzUsMTcuMjIzLDUsMTcuNXYyLjQ5OCAgYzAsMS0xLDEtMSwxSDNjMCwwLTEsMC0xLTFWMTUuNzVjMC0yLjkyMiwyLjg5Mi01LjQwMSw2LjkzLTYuMzQxYzAsMCwxLjIzNCwxLjEwNywzLjU3LDEuMTA3czMuNTctMS4xMDcsMy41Ny0xLjEwNyAgYzQuMDM4LDAuOTQsNi45MywzLjQxOSw2LjkzLDYuMzQxdjQuMjQ4QzIzLDIwLjk5OCwyMiwyMC45OTgsMjIsMjAuOTk4eiBNMTIuNDc3LDljLTIuNDg1LDAtNC41LTIuMDE1LTQuNS00LjVTOS45OTEsMCwxMi40NzcsMCAgczQuNSwyLjAxNSw0LjUsNC41UzE0Ljk2Miw5LDEyLjQ3Nyw5eiIgZmlsbC1ydWxlPSJldmVub2RkIi8+PC9zdmc+\",\n        circle: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gULEBE3DEP64QAAAwlJREFUaN7dmktrU0EUx38ZmmBbfEIL2hSjkYKC1EW6EDFudC+404/gE6WKSvGxERQfIH4AX1T9EOKrCrYurVrbgsZWoaBVixDbpC6ci+Fyz9ybZG478cBs7syc+Z+5c86c+c8ksCPrgW1ADtgEbARafG1+AW+AYWAIGADGWUTZAJwHxoD5GssocA7ILiTwLcADoFQHcH8pAfeB7jiBtwO3gLJF4P5S1mO02wa/C5iMEbi/TAI7bYE/Y3m5VLOs+sLAJULqrgKHIxhZBp4DT4FX2jkLGoinq1M7fg7YDmwFVATd14CjFboiy5UIs/QBOAmka/izaeCU1hE2zuVqlZ8IUfgVOAA0WViiTcBBrdM0Zm9UhTuAOYOiRzXOeJh0Ak8M484B+TAlK4BPBiU3gWSMoTqpw6g0fgFYblJww9D5dojT25IEcMeA47rUsdsQLp9FmPmURSNSOqpJS2lzUKd+ocN3IBNx5mz+oXXADwHTXX/jjMFxjy1iwtgrYJoF1lY27BMafozZaaMspYKA7XRlw7f1xt4Y5biA7bXXIGv4TW0OGNCmsQRhzCidlwTJADDlgAFTwAuhLq+AHqHyMe6IhKVHAV1C5ZBDBkhYupThPPreIQNGJTJBGXKLLw4Z8NmQu/Fb8PCkQwakBIxFRWPLvAJmhMpWh4AuFb7PKGBaqFzjkAGrhe/TSjNrQZJ1yAAJy5gCRoTKnEMGSFhGFDBoOBu7IhKWQe8wLRFLHQ6A7zCcFNNK59vvAjoqYK8DBuwTCLBhTUD8Hweahj9S2jjU297VqzrU26BVmi2yEjXRKg1PbHnpqYla7AeWxAi+GbhHHdSit2mYyN2XQQ5kQTJ6Y6qL3PUkCr2+H7v0+jcs0eueRLngGNeKa9mxY73g8JzpEtHusorAQ/7e+e7WUWIl//jSVTrK7QEu6KgW9d7tYr3B44iBWPJfkZZ8pZ4r2VngkC0HywMTLNwN5YSBcKtZWoGzernEBbyox2iJc6Np2KcGfnHisYet1CDouc2yCjbhp07MrD+3+QNxi4JkAscRswAAAABJRU5ErkJggg==\",\n        service: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB1RJREFUeNrMWltMVFcUHZAIRSAkSFACITRAVbQ/DVhHiRZC2y9jotFgqgmxKqShKdFCggZbEpP2h1Q/oLUg8GH0xy/LKwpDEEFsjKCM8kYkgAhTpggDMzCc7kX2mGF677w80J5khbnnntc+Zz/W2ReNxvsSQLhPWCBYGPhdTdjg7aBCCI/gVSfu+CHBfPz48ba7d+82AocOHfqT6mYIEV6Oua4CfE6YHxsbeyS49Pf3P6C6RYJ2vQTwVTtKHx+fXYRzhM0qTbYR/g4JCQmyVYSFhQXTHyMhUWXMzTzmTo3MorATHxH0eEXAriYrtCmNiop6tby8bLCdgNVqfR0ZGTlC735RaJ/EY+HhGSFhTVSIyg7CIO3mRHNzs44WOYydJuQQ/AjxhJ9hsFqt9qlwKElJSRB8nvAjIYYN+hucDMbCmMHBwZP03E/YLlUAKh8TnoSHh49NT0+vLG5paWk0JyfnPu9cJ8EUGho6cfTo0fbBwcFWRwH6+vpaYcy0yCk26Hb0zc7ObsFYaIOxaY5xqn9M2ClTgGw8wqM4LuzevXu6xMTEnitXrjTOz8/3Chfl7du3Ly5fvtyUkJDQrzRedXV1I2/KWZkCwCDrsMMWi+WV46Sk42+EhwV24VhnNpuHaY43NFct5pRtA7tw9BkZGQ/peVHIL+bDhw8/YrtKXJM4QOVrVNfV1TXKXr2d6mTK8EI+tk4KPrszNjY2mIJTiK+vb5iK+zX29vbqW1paLNRe7N271590PpF+hyq1hzpt3bpVTE5ODlDfFIU5FdfiTRxAkDKVlpY2QI2VVNvOHUIVXjJmUEcC6Rz7keGLffv2CdoMK5/AogzupCZA8aZNmwxkbEMKi18sKSmxqcF1QjohmgF6UYl3LPw7GxoYGBAbN24U+fn5puLi4qWqqqoBGdwJxZ+J2ZeEXF6U9dixYw+VdLi1tbWJF3/aycBn0aa9vb3J1q++vl4EBARAfYRM7oTSwpFzjjAeExMznJ6e/mRkZORfAoA20Mn8Re3KFAaD9zpH2MzP13GK1GcafSl+iIiICGEymd6Nh4BG7SbVNgNj8Zg7nQmwdPLkybahoaG22dnZbntu41i6u7sh7CzhM1fciZCKTUEf9M3KyhLJycnYBCGTO6FYmpqa3HKX5eXlDWysUW5wp0K0LSoqasvLyxP+/v7ixIkTQjZ3WhFAR8UbAdzgTmY/Pz9rfHy8KCgoEKOjo0I2d1pxzxhAr9e3GI3GZ87ogp0KpbriTrdv3+6ghS9XVlYaFxYWxFpxJ5QaltxMeAOOf+DAgQ4VI55mIy53hzuRx7GuNXfSsM5FwJURzhBK3HSjZ/8P3MmrQIYgxUJUcvDKx/OtW7c61ps7ObtSziHiqlEJ0AU+VqgfPI8lOjraajAYVNUGKgg7Kisra4RDwG9bnFAqZMTjcBBI3ziLA0ovQPL0cXFxg6STU84W1NPT8+DSpUtt8DY3btwwqqm2p9zJ1q+wsBAqC7uL9EQA3H+Fu+41NzdXkPELMmQhizvZeSc9bQ5OucAtATiKLsAPK+0KXCKIWW1trSBSJjIzM8EwxYULF4RM7mRf0tLSnrCX/JXwLW9CLPO4VVfKcHAj4kMvldwZ6ojzr5CywMBAsWXLFrFnz54VmjAxMSE84U4KQqziTvYFapqSktIJnkbtXjNvW+DU5ioB8vDIOrlq7Xfu3GmgINNHl47lixcvIiO3QszsuY273ElFgFXcSSVGTBFfew7eBv4GHucoAHz6Y+I1r23UgFRmED6e1QD8XZBOW7zlTk4EgE28rKioaHBnbNgnPJ+vw8UGrO8rcoVzdJ2MqKmp0ZEbC7l58yaSWacJn0LqoKCgcc1/XOg0nHqhBDt6XI+TsXvnNXdycQJpUCHouzOagTkxN9/mrKqZAE7QgloEOtR7zZ1cCFABRqpkxNgIMuKnmIsvQGaOJ9UepzLelzupjJnlzI2mpqZ28KKvcspHy2vY4I0AMrhTDOMLQhXeXbt2zftAJikd7yl3AmZAxXFK3lIJH08lUUo++aBSo+ki7vQBGaHTRBjdwJ7TghGENFqtNoAuPTvUEmFkDxN0Z7ZSkBymvlqltUj5DOQpd/Kk4HbG6pct5fuYp9xJQlk8depUK1/8P5EqgDvcydPV4g6gVMcutNmWd5IlgEvuhA8ixJl63LjU64uKinS4g+AW5niauE+wKn0vUwB3uNMcvM+RI0faQcKU0ioHDx60pVWMtmQWvj9jLFtaBXNwWmWXbBvYThiAO8TO8UIMHHAQaOIIPyEQ7d+/v9NRgN27d3exfv/AhG4D9zVgLIzJ7heJrW3SjdgVd7Jr8zsybfZUATyKU4tXVXKt9Txml2pqUdbXdDXuZPf+OySPkX+1CQBixtzmjEqfQL6tJaqtxU/ix3I9n4JaeUEInZmZGSHasVIxNTU1wx9TulTGNNGf35zN67eOFL6X4Hv+/Hkr3aN14PNEPYL5atgvjde4+1HBy3/PaXb49xwwzD/eZyP/EWAAQ3AUnjpOYHIAAAAASUVORK5CYII=\"\n    }, joint.shapes.bpmn.IconInterface = {\n        initialize: function() {\n            this._parent = (this._parent || this).constructor.__super__, this._parent.initialize.apply(this, arguments), this.listenTo(this, \"change:icon\", this._onIconChange), this._onIconChange(this, this.get(\"icon\") || \"none\")\n        },\n        _onIconChange: function(a, b) {\n            var c = joint.shapes.bpmn.icons;\n            if (!_.has(c, b)) throw \"BPMN: Unknown icon: \" + b;\n            a.attr(\"image/xlink:href\", c[b])\n        }\n    }, joint.shapes.bpmn.SubProcessInterface = {\n        initialize: function() {\n            this._parent = (this._parent || this).constructor.__super__, this._parent.initialize.apply(this, arguments), this.listenTo(this, \"change:subProcess\", this._onSubProcessChange), this._onSubProcessChange(this, this.get(\"subProcess\") || null)\n        },\n        _onSubProcessChange: function(a, b) {\n            a.attr({\n                \".sub-process\": {\n                    visibility: b ? \"visible\" : \"hidden\",\n                    \"data-sub-process\": b || \"\"\n                }\n            })\n        }\n    }, joint.shapes.bpmn.ActivityView = joint.shapes.basic.TextBlockView, joint.shapes.bpmn.Activity = joint.shapes.basic.TextBlock.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect class=\"body outer\"/><rect class=\"body inner\"/></g>', joint.env.test(\"svgforeignobject\") ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', '<path class=\"sub-process\"/><image class=\"icon\"/></g>'].join(\"\"),\n        defaults: joint.util.deepSupplement({\n            size: {\n                width: 100,\n                height: 100\n            },\n            type: \"bpmn.Activity\",\n            attrs: {\n                rect: {\n                    rx: 8,\n                    ry: 8,\n                    width: 100,\n                    height: 100\n                },\n                \".body\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\"\n                },\n                \".inner\": {\n                    transform: \"scale(0.9,0.9) translate(5,5)\"\n                },\n                path: {\n                    d: \"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15\",\n                    ref: \".inner\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": -30,\n                    \"x-alignment\": \"middle\",\n                    stroke: \"#000000\",\n                    fill: \"transparent\"\n                },\n                image: {\n                    ref: \".inner\",\n                    \"ref-x\": 5,\n                    width: 20,\n                    height: 20\n                }\n            },\n            activityType: \"task\",\n            subProcess: null\n        }, joint.shapes.basic.TextBlock.prototype.defaults),\n        initialize: function() {\n            joint.shapes.basic.TextBlock.prototype.initialize.apply(this, arguments), this.listenTo(this, \"change:activityType\", this.onActivityTypeChange), this.listenTo(this, \"change:subProcess\", this.onSubProcessChange), this.onSubProcessChange(this, this.get(\"subProcess\")), this.onActivityTypeChange(this, this.get(\"activityType\"))\n        },\n        onActivityTypeChange: function(a, b) {\n            switch (b) {\n                case \"task\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"hidden\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 1,\n                            \"stroke-dasharray\": \"none\"\n                        },\n                        path: {\n                            ref: \".outer\"\n                        },\n                        image: {\n                            ref: \".outer\"\n                        }\n                    });\n                    break;\n                case \"transaction\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"visible\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 1,\n                            \"stroke-dasharray\": \"none\"\n                        },\n                        path: {\n                            ref: \".inner\"\n                        },\n                        image: {\n                            ref: \".inner\"\n                        }\n                    });\n                    break;\n                case \"event-sub-process\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"hidden\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 1,\n                            \"stroke-dasharray\": \"1,2\"\n                        },\n                        path: {\n                            ref: \".outer\"\n                        },\n                        image: {\n                            ref: \".outer\"\n                        }\n                    });\n                    break;\n                case \"call-activity\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"hidden\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 5,\n                            \"stroke-dasharray\": \"none\"\n                        },\n                        path: {\n                            ref: \".outer\"\n                        },\n                        image: {\n                            ref: \".outer\"\n                        }\n                    });\n                    break;\n                default:\n                    throw \"BPMN: Unknown Activity Type: \" + b\n            }\n        },\n        onSubProcessChange: function(a, b) {\n            b ? a.attr({\n                \".fobj div\": {\n                    style: {\n                        verticalAlign: \"baseline\",\n                        paddingTop: 10\n                    }\n                },\n                image: {\n                    \"ref-dy\": -25,\n                    \"ref-y\": \"\"\n                },\n                text: {\n                    \"ref-y\": 25\n                }\n            }) : a.attr({\n                \".fobj div\": {\n                    style: {\n                        verticalAlign: \"middle\",\n                        paddingTop: 0\n                    }\n                },\n                image: {\n                    \"ref-dy\": \"\",\n                    \"ref-y\": 5\n                },\n                text: {\n                    \"ref-y\": .5\n                }\n            })\n        }\n    }).extend(joint.shapes.bpmn.IconInterface).extend(joint.shapes.bpmn.SubProcessInterface), joint.shapes.bpmn.AnnotationView = joint.shapes.basic.TextBlockView, joint.shapes.bpmn.Annotation = joint.shapes.basic.TextBlock.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect class=\"body\"/></g>', joint.env.test(\"svgforeignobject\") ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', '<path class=\"stroke\"/></g>'].join(\"\"),\n        defaults: joint.util.deepSupplement({\n            size: {\n                width: 100,\n                height: 100\n            },\n            type: \"bpmn.Annotation\",\n            attrs: {\n                rect: {\n                    width: 100,\n                    height: 100\n                },\n                \".body\": {\n                    \"fill-opacity\": .1,\n                    fill: \"#ffffff\",\n                    stroke: \"none\"\n                },\n                \".fobj div\": {\n                    style: {\n                        textAlign: \"left\",\n                        paddingLeft: 10\n                    }\n                },\n                \".stroke\": {\n                    stroke: \"#000000\",\n                    fill: \"none\",\n                    \"stroke-width\": 3\n                }\n            },\n            wingLength: 20\n        }, joint.shapes.basic.TextBlock.prototype.defaults),\n        initialize: function() {\n            joint.shapes.basic.TextBlock.prototype.initialize.apply(this, arguments), this.listenTo(this, \"change:size\", this.onSizeChange), this.onSizeChange(this, this.get(\"size\"))\n        },\n        onSizeChange: function(a, b) {\n            a.attr(\".stroke\", {\n                d: a.getStrokePathData(b.width, b.height, a.get(\"wingLength\"))\n            })\n        },\n        getStrokePathData: function(a, b, c) {\n            return c = Math.min(c, a), [\"M\", c, \"0 L 0 0 0\", b, c, b].join(\" \")\n        }\n    }), joint.shapes.bpmn.Gateway = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"body\"/><image/></g></g><text class=\"label\"/>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Gateway\",\n            size: {\n                width: 80,\n                height: 80\n            },\n            attrs: {\n                \".body\": {\n                    points: \"40,0 80,40 40,80 0,40\",\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\"\n                },\n                \".label\": {\n                    text: \"\",\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 20,\n                    \"y-alignment\": \"middle\",\n                    \"x-alignment\": \"middle\",\n                    \"font-size\": 14,\n                    \"font-family\": \"Arial, helvetica, sans-serif\",\n                    fill: \"#000000\"\n                },\n                image: {\n                    width: 40,\n                    height: 40,\n                    \"xlink:href\": \"\",\n                    transform: \"translate(20,20)\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }).extend(joint.shapes.bpmn.IconInterface), joint.shapes.bpmn.Event = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><circle class=\"body outer\"/><circle class=\"body inner\"/><image/></g><text class=\"label\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Event\",\n            size: {\n                width: 60,\n                height: 60\n            },\n            attrs: {\n                \".body\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\"\n                },\n                \".outer\": {\n                    \"stroke-width\": 1,\n                    r: 30,\n                    transform: \"translate(30,30)\"\n                },\n                \".inner\": {\n                    \"stroke-width\": 1,\n                    r: 26,\n                    transform: \"translate(30,30)\"\n                },\n                image: {\n                    width: 40,\n                    height: 40,\n                    \"xlink:href\": \"\",\n                    transform: \"translate(10,10)\"\n                },\n                \".label\": {\n                    text: \"\",\n                    fill: \"#000000\",\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 14,\n                    ref: \".outer\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 20,\n                    \"x-alignment\": \"middle\",\n                    \"y-alignment\": \"middle\"\n                }\n            },\n            eventType: \"start\"\n        }, joint.dia.Element.prototype.defaults),\n        initialize: function() {\n            joint.dia.Element.prototype.initialize.apply(this, arguments), this.listenTo(this, \"change:eventType\", this.onEventTypeChange), this.onEventTypeChange(this, this.get(\"eventType\"))\n        },\n        onEventTypeChange: function(a, b) {\n            switch (b) {\n                case \"start\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"hidden\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 1\n                        }\n                    });\n                    break;\n                case \"end\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"hidden\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 5\n                        }\n                    });\n                    break;\n                case \"intermediate\":\n                    a.attr({\n                        \".inner\": {\n                            visibility: \"visible\"\n                        },\n                        \".outer\": {\n                            \"stroke-width\": 1\n                        }\n                    });\n                    break;\n                default:\n                    throw \"BPMN: Unknown Event Type: \" + b\n            }\n        }\n    }).extend(joint.shapes.bpmn.IconInterface), joint.shapes.bpmn.Pool = joint.dia.Element.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect class=\"body\"/></g>', '<svg overflow=\"hidden\" class=\"blackbox-wrap\"><text class=\"blackbox-label\"/></svg>', '<rect class=\"header\"/><text class=\"label\"/>', '<g class=\"lanes\"/>', \"</g>\"].join(\"\"),\n        laneMarkup: '<g class=\"lane\"><rect class=\"lane-body\"/><rect class=\"lane-header\"/><text class=\"lane-label\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Pool\",\n            size: {\n                width: 600,\n                height: 300\n            },\n            attrs: {\n                \".body\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    width: 500,\n                    height: 200,\n                    \"pointer-events\": \"stroke\"\n                },\n                \".header\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    width: 20,\n                    ref: \".body\",\n                    \"ref-height\": 1,\n                    \"pointer-events\": \"visiblePainted\"\n                },\n                \".label\": {\n                    fill: \"#000000\",\n                    transform: \"rotate(-90)\",\n                    ref: \".header\",\n                    \"ref-x\": 10,\n                    \"ref-y\": .5,\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 14,\n                    \"x-alignment\": \"middle\",\n                    \"text-anchor\": \"middle\"\n                },\n                \".lane-body\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    \"pointer-events\": \"stroke\"\n                },\n                \".lane-header\": {\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    \"pointer-events\": \"visiblePainted\"\n                },\n                \".lane-label\": {\n                    fill: \"#000000\",\n                    transform: \"rotate(-90)\",\n                    \"text-anchor\": \"middle\",\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 13\n                },\n                \".blackbox-wrap\": {\n                    ref: \".body\",\n                    \"ref-width\": 1,\n                    \"ref-height\": 1\n                },\n                \".blackbox-label\": {\n                    text: \"Black Box\",\n                    \"text-anchor\": \"middle\",\n                    transform: \"translate(0,-7)\"\n                },\n                \".blackbox-label > tspan\": {\n                    dx: \"50%\",\n                    dy: \"50%\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.bpmn.PoolView = joint.dia.ElementView.extend({\n        options: {\n            headerWidth: 20\n        },\n        initialize: function() {\n            this.listenTo(this.model, \"change:lanes\", function(a, b) {\n                this.renderLanes(b)\n            }), joint.dia.ElementView.prototype.initialize.apply(this, arguments)\n        },\n        update: function() {\n            return _.isUndefined(this.lanesAttrs) ? this.renderLanes(this.model.get(\"lanes\")) : joint.dia.ElementView.prototype.update.call(this, this.model, _.merge({}, this.model.get(\"attrs\"), this.lanesAttrs || {}))\n        },\n        renderMarkup: function() {\n            joint.dia.ElementView.prototype.renderMarkup.apply(this, arguments), this.$lanes = this.$(\".lanes\"), this.laneMarkup = V(this.model.laneMarkup)\n        },\n        renderLanes: function(a) {\n            a = a || {}, this.index = 0;\n            var b = _.isUndefined(a.headerWidth) ? this.options.headerWidth : a.headerWidth;\n            this.lanesAttrs = {\n                \".header\": {\n                    width: b\n                },\n                \".label\": {\n                    text: a.label || \"\"\n                }\n            }, this.$lanes.empty(), a.sublanes && this.renderSublanes(a.sublanes, b, 0, 1, \"lanes\"), this.update(this.model, _.merge({}, this.model.get(\"attrs\"), this.lanesAttrs))\n        },\n        renderSublanes: function(a, b, c, d, e) {\n            var f = this.options.headerWidth,\n                g = e + \"/sublanes/\",\n                h = 1 / a.length * d;\n            _.each(a, function(a, d) {\n                var e = \"lane\" + this.index,\n                    i = \".\" + e + \" .lane-body\",\n                    j = \".\" + e + \" .lane-header\",\n                    k = \".\" + e + \" .lane-label\";\n                a.name && (e += \" \" + a.name);\n                var l = g + d,\n                    m = this.laneMarkup.clone().addClass(e).attr({\n                        \"data-lane-path\": l,\n                        \"data-lane-index\": this.index\n                    });\n                this.$lanes.append(m.node);\n                var n = _.isUndefined(a.headerWidth) ? f : a.headerWidth,\n                    o = c + h * d;\n                this.lanesAttrs[i] = {\n                    ref: \".body\",\n                    \"ref-height\": h,\n                    \"ref-width\": -b,\n                    \"ref-x\": b,\n                    \"ref-y\": o\n                }, this.lanesAttrs[j] = {\n                    width: n,\n                    ref: \".body\",\n                    \"ref-height\": h,\n                    \"ref-x\": b,\n                    \"ref-y\": o\n                }, this.lanesAttrs[k] = {\n                    text: a.label,\n                    ref: j,\n                    \"ref-x\": 10,\n                    \"ref-y\": .5,\n                    \"x-alignment\": \"middle\"\n                }, this.index++, a.sublanes && this.renderSublanes(a.sublanes, b + n, o, h, l)\n            }, this)\n        }\n    }), joint.shapes.bpmn.Group = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><rect class=\"body\"/></g><rect class=\"label-rect\"/><g class=\"label-group\"><svg overflow=\"hidden\" class=\"label-wrap\"><text class=\"label\"/></svg></g></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Group\",\n            size: {\n                width: 200,\n                height: 200\n            },\n            attrs: {\n                \".body\": {\n                    width: 200,\n                    height: 200,\n                    stroke: \"#000000\",\n                    \"stroke-dasharray\": \"6,6\",\n                    \"stroke-width\": 2,\n                    fill: \"transparent\",\n                    rx: 15,\n                    ry: 15,\n                    \"pointer-events\": \"stroke\"\n                },\n                \".label-rect\": {\n                    ref: \".body\",\n                    \"ref-width\": .6,\n                    \"ref-x\": .4,\n                    \"ref-y\": -30,\n                    height: 25,\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\"\n                },\n                \".label-group\": {\n                    ref: \".label-rect\",\n                    \"ref-x\": 0,\n                    \"ref-y\": 0\n                },\n                \".label-wrap\": {\n                    ref: \".label-rect\",\n                    \"ref-width\": 1,\n                    \"ref-height\": 1\n                },\n                \".label\": {\n                    text: \"\",\n                    x: \"50%\",\n                    y: \"1.3em\",\n                    \"text-anchor\": \"middle\",\n                    \"font-family\": \"Arial\",\n                    \"font-size\": 14,\n                    fill: \"#000000\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.bpmn.DataObject = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"body\"/></g><text class=\"label\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.DataObject\",\n            size: {\n                width: 60,\n                height: 80\n            },\n            attrs: {\n                \".body\": {\n                    points: \"20,0 60,0 60,80 0,80 0,20 20,0 20,20 0,20\",\n                    stroke: \"#000000\",\n                    fill: \"#ffffff\"\n                },\n                \".label\": {\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 5,\n                    text: \"\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.bpmn.Conversation = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"body\"/></g><text class=\"label\"/><path class=\"sub-process\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Conversation\",\n            size: {\n                width: 100,\n                height: 100\n            },\n            attrs: {\n                \".body\": {\n                    points: \"25,0 75,0 100,50 75,100 25,100 0,50\",\n                    stroke: \"#000000\",\n                    fill: \"#ffffff\"\n                },\n                \".label\": {\n                    text: \"\",\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 5,\n                    \"text-anchor\": \"middle\"\n                },\n                path: {\n                    d: \"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15\",\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": -30,\n                    \"x-alignment\": \"middle\",\n                    fill: \"#ffffff\",\n                    stroke: \"#000000\",\n                    \"fill-opacity\": 0\n                }\n            },\n            conversationType: \"conversation\"\n        }, joint.dia.Element.prototype.defaults),\n        initialize: function() {\n            joint.dia.Element.prototype.initialize.apply(this, arguments), this.listenTo(this, \"change:conversationType\", this.onConversationTypeChange), this.onConversationTypeChange(this, this.get(\"conversationType\"))\n        },\n        onConversationTypeChange: function(a, b) {\n            switch (b) {\n                case \"conversation\":\n                    a.attr(\"polygon/stroke-width\", 1);\n                    break;\n                case \"call-conversation\":\n                    a.attr(\"polygon/stroke-width\", 4);\n                    break;\n                default:\n                    throw \"BPMN: Unknown Conversation Type: \" + b\n            }\n        }\n    }).extend(joint.shapes.bpmn.SubProcessInterface), joint.shapes.bpmn.Choreography = joint.shapes.basic.TextBlock.extend({\n        markup: ['<g class=\"rotatable\">', '<g class=\"scalable\"><rect class=\"body\"/></g>', joint.env.test(\"svgforeignobject\") ? '<foreignObject class=\"fobj\"><body xmlns=\"http://www.w3.org/1999/xhtml\"><div class=\"content\"/></body></foreignObject>' : '<text class=\"content\"/>', '<text class=\"label\"/><path class=\"sub-process\"/><g class=\"participants\"/>', \"</g>\"].join(\"\"),\n        participantMarkup: '<g class=\"participant\"><rect class=\"participant-rect\"/><text class=\"participant-label\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Choreography\",\n            size: {\n                width: 60,\n                height: 80\n            },\n            attrs: {\n                rect: {},\n                \".body\": {\n                    width: 60,\n                    height: 80,\n                    stroke: \"#000000\",\n                    fill: \"#ffffff\"\n                },\n                \".label\": {\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 5,\n                    text: \"\",\n                    \"text-anchor\": \"middle\"\n                },\n                \".participant-rect\": {\n                    stroke: \"#000000\",\n                    fill: \"#aaaaaa\",\n                    ref: \".body\",\n                    \"ref-width\": 1\n                },\n                \".participant-label\": {\n                    \"text-anchor\": \"middle\",\n                    ref: \".participant_0 .participant-rect\",\n                    \"ref-x\": .5,\n                    \"ref-y\": .5,\n                    \"y-alignment\": \"middle\"\n                },\n                \".sub-process\": {\n                    d: \"M 0 0 L 30 0 30 30 0 30 z M 15 4 L 15 26 M 4 15 L 26 15\",\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": -30,\n                    \"x-alignment\": \"middle\",\n                    fill: \"transparent\",\n                    stroke: \"#000000\"\n                }\n            },\n            participants: [],\n            initiatingParticipant: 0\n        }, joint.shapes.basic.TextBlock.prototype.defaults)\n    }).extend(joint.shapes.bpmn.SubProcessInterface), joint.shapes.bpmn.ChoreographyView = joint.shapes.basic.TextBlockView.extend({\n        options: {\n            participantHeight: 20\n        },\n        initialize: function() {\n            this.listenTo(this.model, \"change:participants\", function(a, b) {\n                this.renderParticipants(b)\n            }), this.listenTo(this.model, \"change:initiatingParticipant\", this.layoutAndUpdate), joint.shapes.basic.TextBlockView.prototype.initialize.apply(this, arguments), joint.env.test(\"svgforeignobject\") || this.stopListening(this.model, \"change:content\").listenTo(this.model, \"change:content\", function(a) {\n                this.updateContent(a, this.participantsAttrs)\n            })\n        },\n        update: function() {\n            return _.isUndefined(this.participantsAttrs) ? this.renderParticipants(this.model.get(\"participants\")) : (this.layoutAndUpdate(), this)\n        },\n        renderMarkup: function() {\n            joint.dia.ElementView.prototype.renderMarkup.apply(this, arguments), this.$participants = this.$(\".participants\"), this.participantMarkup = V(this.model.participantMarkup)\n        },\n        renderParticipants: function(a) {\n            this.$participants.empty(), this.participantsAttrs = {}, _.each(a, function(a, b) {\n                var c = \"participant_\" + b,\n                    d = \".\" + c;\n                this.participantsAttrs[d + \" .participant-rect\"] = {\n                    height: this.options.participantHeight\n                }, this.participantsAttrs[d + \" .participant-label\"] = {\n                    text: a\n                }, this.$participants.append(this.participantMarkup.clone().addClass(c).node)\n            }, this), this.layoutAndUpdate()\n        },\n        layoutAndUpdate: function() {\n            var a = this.model.get(\"participants\") || [],\n                b = a.length,\n                c = this.options.participantHeight,\n                d = this.model.get(\"size\").height,\n                e = Math.max(0, d - c * b),\n                f = 0,\n                g = this.model.get(\"initiatingParticipant\"),\n                h = Math.max(_.isNumber(g) ? Math.abs(g) : a.indexOf(g), 0),\n                i = Math.min(h, b - 2);\n            _.each(a, function(a, b) {\n                var d = \".participant_\" + b;\n                this.participantsAttrs[d] = {\n                    transform: \"translate(0,\" + f + \")\"\n                }, this.participantsAttrs[d + \" .participant-rect\"].fill = h == b ? this.model.attr(\".body/fill\") : this.model.attr(\".participant-rect/fill\"), this.participantsAttrs[d + \" .participant-rect\"].stroke = h == b ? this.model.attr(\".body/stroke\") : this.model.attr(\".participant-rect/stroke\"), f += c + (i == b ? e : 0)\n            }, this);\n            var j = b < 2 ? 0 : i - b + 1;\n            this.participantsAttrs[\".sub-process\"] = {\n                \"ref-dy\": Math.max(-d, j * c - 30)\n            };\n            var k = b < 2 ? 0 : i + 1;\n            this.participantsAttrs[\".fobj div\"] = {\n                style: {\n                    height: e,\n                    paddingTop: c * k\n                }\n            }, this.participantsAttrs[\".content\"] = {\n                \"ref-y\": c * k + e / 2\n            };\n            var l = _.merge({}, this.model.get(\"attrs\"), this.participantsAttrs || {});\n            joint.shapes.basic.TextBlockView.prototype.update.call(this, this.model, l)\n        }\n    }), joint.shapes.bpmn.Message = joint.dia.Element.extend({\n        markup: '<g class=\"rotatable\"><g class=\"scalable\"><polygon class=\"body\"/></g><text class=\"label\"/></g>',\n        defaults: joint.util.deepSupplement({\n            type: \"bpmn.Message\",\n            size: {\n                width: 60,\n                height: 40\n            },\n            attrs: {\n                \".body\": {\n                    points: \"0,0 60,0 60,40 0,40 0,0 60,0 30,20 0,0\",\n                    stroke: \"#000000\",\n                    fill: \"#ffffff\"\n                },\n                \".label\": {\n                    ref: \".body\",\n                    \"ref-x\": .5,\n                    \"ref-dy\": 5,\n                    text: \"\",\n                    \"text-anchor\": \"middle\"\n                }\n            }\n        }, joint.dia.Element.prototype.defaults)\n    }), joint.shapes.bpmn.Flow = joint.dia.Link.extend({\n        defaults: {\n            type: \"bpmn.Flow\",\n            attrs: {\n                \".marker-source\": {\n                    d: \"M 0 0\"\n                },\n                \".marker-target\": {\n                    d: \"M 10 0 L 0 5 L 10 10 z\",\n                    fill: \"#000000\"\n                },\n                \".connection\": {\n                    \"stroke-dasharray\": \" \",\n                    \"stroke-width\": 1\n                },\n                \".connection-wrap\": {\n                    style: \"\",\n                    onMouseOver: \"\",\n                    onMouseOut: \"\"\n                }\n            },\n            flowType: \"normal\"\n        },\n        initialize: function() {\n            joint.dia.Link.prototype.initialize.apply(this, arguments), this.listenTo(this, \"change:flowType\", this.onFlowTypeChange), this.onFlowTypeChange(this, this.get(\"flowType\"))\n        },\n        onFlowTypeChange: function(a, b) {\n            var c;\n            switch (b) {\n                case \"default\":\n                    c = {\n                        \".marker-source\": {\n                            d: \"M 0 5 L 20 5 M 20 0 L 10 10\",\n                            fill: \"none\"\n                        }\n                    };\n                    break;\n                case \"conditional\":\n                    c = {\n                        \".marker-source\": {\n                            d: \"M 20 8 L 10 0 L 0 8 L 10 16 z\",\n                            fill: \"#FFF\"\n                        }\n                    };\n                    break;\n                case \"normal\":\n                    c = {};\n                    break;\n                case \"message\":\n                    c = {\n                        \".marker-target\": {\n                            fill: \"#FFF\"\n                        },\n                        \".connection\": {\n                            \"stroke-dasharray\": \"4,4\"\n                        }\n                    };\n                    break;\n                case \"association\":\n                    c = {\n                        \".marker-target\": {\n                            d: \"M 0 0\"\n                        },\n                        \".connection\": {\n                            \"stroke-dasharray\": \"4,4\"\n                        }\n                    };\n                    break;\n                case \"conversation\":\n                    c = {\n                        \".marker-target\": {\n                            d: \"M 0 0\"\n                        },\n                        \".connection\": {\n                            \"stroke-width\": \"7px\"\n                        },\n                        \".connection-wrap\": {\n                            style: \"stroke: #fff; stroke-width: 5px; opacity: 1;\",\n                            onMouseOver: \"var s=this.style;s.stroke='#000';s.strokeWidth=15;s.opacity=.4\",\n                            onMouseOut: \"var s=this.style;s.stroke='#fff';s.strokeWidth=5;s.opacity=1\"\n                        }\n                    };\n                    break;\n                default:\n                    throw \"BPMN: Unknown Flow Type: \" + b\n            }\n            a.attr(_.merge({}, this.defaults.attrs, c))\n        }\n    });\n    joint.dia.CommandManager = Backbone.Model.extend({\n        defaults: {\n            cmdBeforeAdd: null,\n            cmdNameRegex: /^(?:add|remove|change:\\w+)$/,\n            applyOptionsList: [\"propertyPath\"],\n            revertOptionsList: [\"propertyPath\"]\n        },\n        PREFIX_LENGTH: 7,\n        initialize: function(a) {\n            _.bindAll(this, \"initBatchCommand\", \"storeBatchCommand\"), this.graph = a.graph, this.reset(), this.listen()\n        },\n        listen: function() {\n            this.listenTo(this.graph, \"all\", this.addCommand, this), this.listenTo(this.graph, \"batch:start\", this.initBatchCommand, this), this.listenTo(this.graph, \"batch:stop\", this.storeBatchCommand, this)\n        },\n        createCommand: function(a) {\n            var b = {\n                action: void 0,\n                data: {\n                    id: void 0,\n                    type: void 0,\n                    previous: {},\n                    next: {}\n                },\n                batch: a && a.batch\n            };\n            return b\n        },\n        push: function(a) {\n            this.redoStack = [], a.batch ? (this.lastCmdIndex = Math.max(this.lastCmdIndex, 0), this.trigger(\"batch\", a)) : (this.undoStack.push(a), this.trigger(\"add\", a))\n        },\n        addCommand: function(a, b, c, d) {\n            if ((!d || !d.dry) && this.get(\"cmdNameRegex\").test(a) && (\"function\" != typeof this.get(\"cmdBeforeAdd\") || this.get(\"cmdBeforeAdd\").apply(this, arguments))) {\n                var e = void 0,\n                    f = b instanceof joint.dia.Graph;\n                if (this.batchCommand) {\n                    e = this.batchCommand[Math.max(this.lastCmdIndex, 0)];\n                    var g = f && !e.graphChange || e.data.id !== b.id,\n                        h = e.action !== a;\n                    if (this.lastCmdIndex >= 0 && (g || h)) {\n                        var i = _.findIndex(this.batchCommand, function(c, d) {\n                            return (f && c.graphChange || c.data.id === b.id) && c.action === a\n                        });\n                        i < 0 || \"add\" === a || \"remove\" === a ? e = this.createCommand({\n                            batch: !0\n                        }) : (e = this.batchCommand[i], this.batchCommand.splice(i, 1)), this.lastCmdIndex = this.batchCommand.push(e) - 1\n                    }\n                } else e = this.createCommand({\n                    batch: !1\n                });\n                if (\"add\" === a || \"remove\" === a) return e.action = a, e.data.id = b.id, e.data.type = b.attributes.type, e.data.attributes = _.merge({}, b.toJSON()), e.options = d || {}, void this.push(e);\n                var j = a.substr(this.PREFIX_LENGTH);\n                e.batch && e.action || (e.action = a, e.data.previous[j] = _.clone(b.previous(j)), e.options = d || {}, f ? e.graphChange = !0 : (e.data.id = b.id, e.data.type = b.attributes.type)), e.data.next[j] = _.clone(b.get(j)), this.push(e)\n            }\n        },\n        initBatchCommand: function() {\n            this.batchCommand ? this.batchLevel++ : (this.batchCommand = [this.createCommand({\n                batch: !0\n            })], this.lastCmdIndex = -1, this.batchLevel = 0)\n        },\n        storeBatchCommand: function() {\n            if (this.batchCommand && this.batchLevel <= 0) {\n                var a = this.filterBatchCommand(this.batchCommand);\n                a.length > 0 && (this.redoStack = [], this.undoStack.push(a), this.trigger(\"add\", a)), this.batchCommand = null, this.lastCmdIndex = null, this.batchLevel = null\n            } else this.batchCommand && this.batchLevel > 0 && this.batchLevel--\n        },\n        filterBatchCommand: function(a) {\n            for (var b = a.slice(), c = []; b.length > 0;) {\n                var d = b.shift(),\n                    e = d.data.id;\n                if (null != d.action && (null != e || d.graphChange)) {\n                    if (\"add\" === d.action) {\n                        var f = _.findIndex(b, {\n                            action: \"remove\",\n                            data: {\n                                id: e\n                            }\n                        });\n                        if (f >= 0) {\n                            b = _.reject(b, function(a, b) {\n                                return b <= f && a.data.id === e\n                            });\n                            continue\n                        }\n                    } else if (\"remove\" === d.action) {\n                        var g = _.findIndex(b, {\n                            action: \"add\",\n                            data: {\n                                id: e\n                            }\n                        });\n                        if (g >= 0) {\n                            b.splice(g, 1);\n                            continue\n                        }\n                    } else if (0 === d.action.indexOf(\"change\") && _.isEqual(d.data.previous, d.data.next)) continue;\n                    c.push(d)\n                }\n            }\n            return c\n        },\n        revertCommand: function(a, b) {\n            this.stopListening();\n            var c;\n            c = _.isArray(a) ? _.sortBy(a, this.constructor.batchCommandComparator) : [a];\n            for (var d = this.graph, e = c.length - 1; e >= 0; e--) {\n                var f = c[e],\n                    g = f.graphChange ? d : d.getCell(f.data.id),\n                    h = _.extend({\n                        commandManager: this.id || this.cid\n                    }, b, _.pick(f.options, this.get(\"revertOptionsList\")));\n                switch (f.action) {\n                    case \"add\":\n                        g.remove(h);\n                        break;\n                    case \"remove\":\n                        d.addCell(f.data.attributes, h);\n                        break;\n                    default:\n                        var i = f.action.substr(this.PREFIX_LENGTH);\n                        g.set(i, f.data.previous[i], h)\n                }\n            }\n            this.listen()\n        },\n        applyCommand: function(a, b) {\n            this.stopListening();\n            var c;\n            c = _.isArray(a) ? _.sortBy(a, this.constructor.batchCommandComparator) : [a];\n            for (var d = this.graph, e = 0; e < c.length; e++) {\n                var f = c[e],\n                    g = f.graphChange ? d : d.getCell(f.data.id),\n                    h = _.extend({\n                        commandManager: this.id || this.cid\n                    }, b, _.pick(f.options, this.get(\"applyOptionsList\")));\n                switch (f.action) {\n                    case \"add\":\n                        d.addCell(f.data.attributes, h);\n                        break;\n                    case \"remove\":\n                        g.remove(h);\n                        break;\n                    default:\n                        var i = f.action.substr(this.PREFIX_LENGTH);\n                        g.set(i, f.data.next[i], h)\n                }\n            }\n            this.listen()\n        },\n        undo: function(a) {\n            var b = this.undoStack.pop();\n            b && (this.revertCommand(b, a), this.redoStack.push(b))\n        },\n        redo: function(a) {\n            var b = this.redoStack.pop();\n            b && (this.applyCommand(b, a), this.undoStack.push(b))\n        },\n        cancel: function(a) {\n            this.hasUndo() && (this.revertCommand(this.undoStack.pop(), a), this.redoStack = [])\n        },\n        reset: function() {\n            this.undoStack = [], this.redoStack = []\n        },\n        hasUndo: function() {\n            return this.undoStack.length > 0\n        },\n        hasRedo: function() {\n            return this.redoStack.length > 0\n        }\n    }, {\n        batchCommandComparator: function(a, b, c) {\n            if (\"add\" === a.action)\n                for (var d = a.data.id, e = 0; e < b; e++)\n                    if (c[e].data.id === d) return e - 1;\n            return b\n        }\n    });\n    joint.dia.Validator = Backbone.Model.extend({\n        initialize: function(a) {\n            this._map = {}, this._commandManager = a.commandManager, this.listenTo(this._commandManager, \"add\", this._onCommand)\n        },\n        defaults: {\n            cancelInvalid: !0\n        },\n        _onCommand: function(a) {\n            return _.isArray(a) ? _.find(a, function(a) {\n                return !this._validateCommand(a)\n            }, this) : this._validateCommand(a)\n        },\n        _validateCommand: function(a) {\n            if (a.options && a.options.validation === !1) return !0;\n            var b;\n            return _.each(this._map[a.action], function(c) {\n                function d(f) {\n                    var g = c[e++];\n                    try {\n                        if (!g) return void(b = f);\n                        g(f, a, d)\n                    } catch (f) {\n                        d(f)\n                    }\n                }\n                var e = 0;\n                d(b)\n            }), !b || (this.get(\"cancelInvalid\") && this._commandManager.cancel(), this.trigger(\"invalid\", b), !1)\n        },\n        validate: function(a) {\n            var b = Array.prototype.slice.call(arguments, 1);\n            return _.each(b, function(b) {\n                if (!_.isFunction(b)) throw new Error(a + \" requires callback functions.\")\n            }), _.each(a.split(\" \"), function(a) {\n                (this._map[a] = this._map[a] || []).push(b)\n            }, this), this\n        }\n    });\n    joint.dia.Graph.prototype.constructTree = function(a, b, c, d) {\n        d = d || [];\n        var e = _.isFunction(b.children) ? b.children(a) : a[b.children || \"children\"];\n        return c || (c = b.makeElement(a), d.push(c)), _.each(e, function(a) {\n            var e = b.makeElement(a),\n                f = b.makeLink(c, e);\n            d.push(e, f), this.constructTree(a, b, e, d)\n        }, this), d\n    }, joint.dia.Graph.prototype.shortestPath = function(a, b, c) {\n        c = c || {};\n        var d = {};\n        _.each(this.getLinks(), function(a) {\n            var b = a.get(\"source\").id,\n                e = a.get(\"target\").id;\n            d[b] || (d[b] = []), d[e] || (d[e] = []), d[b].push(e), c.directed || d[e].push(b)\n        });\n        var e = joint.alg.Dijkstra(d, a.id || a, c.weight),\n            f = [],\n            g = b.id || b;\n        for (e[g] && f.push(g); g = e[g];) f.unshift(g);\n        return f\n    };\n    joint.ui.PaperScroller = joint.mvc.View.extend({\n        className: \"paper-scroller\",\n        options: {\n            paper: void 0,\n            padding: function() {\n                var a = Math.max(this.options.minVisiblePaperSize, 1) || 1,\n                    b = {};\n                return b.left = b.right = Math.max(this.el.clientWidth - a, 0), b.top = b.bottom = Math.max(this.el.clientHeight - a, 0), b\n            },\n            minVisiblePaperSize: 50,\n            autoResizePaper: !1,\n            baseWidth: void 0,\n            baseHeight: void 0,\n            contentOptions: void 0,\n            cursor: \"default\"\n        },\n        _padding: {\n            left: 0,\n            top: 0\n        },\n        init: function() {\n            _.bindAll(this, \"startPanning\", \"stopPanning\", \"pan\", \"onBackgroundEvent\");\n            var a = this.options.paper,\n                b = a.scale();\n            this._sx = b.sx, this._sy = b.sy, _.isUndefined(this.options.baseWidth) && (this.options.baseWidth = a.options.width), _.isUndefined(this.options.baseHeight) && (this.options.baseHeight = a.options.height), this.$background = $(\"<div/>\").addClass(\"paper-scroller-background\").css({\n                width: a.options.width,\n                height: a.options.height\n            }).append(a.el).appendTo(this.el), this.listenTo(a, \"scale\", this.onScale).listenTo(a, \"resize\", this.onResize).listenTo(a, \"beforeprint beforeexport\", this.storeScrollPosition).listenTo(a, \"afterprint afterexport\", this.restoreScrollPosition), this.options.autoResizePaper && (this.listenTo(a.model, \"change add remove reset\", this.adjustPaper), a.options.async && this.listenTo(a, \"render:done\", this.adjustPaper)), this.delegateBackgroundEvents(), this.setCursor(this.options.cursor)\n        },\n        lock: function() {\n            return this.$el.css(\"overflow\", \"hidden\"), this\n        },\n        unlock: function() {\n            return this.$el.css(\"overflow\", \"scroll\"), this\n        },\n        setCursor: function(a) {\n            switch (a) {\n                case \"grab\":\n                    this.$el.css(\"cursor\", \"\");\n                    break;\n                default:\n                    this.$el.css(\"cursor\", a)\n            }\n            return this.$el.attr(\"data-cursor\", a), this.options.cursor = a, this\n        },\n        delegateBackgroundEvents: function(a) {\n            function b(a, b, c) {\n                return c.indexOf(\" \") === -1 && (a[c] = _.isFunction(b) ? b : this.options.paper[b]), a\n            }\n\n            function c(a, b) {\n                this.delegate(b, {\n                    guarded: !1\n                }, this.onBackgroundEvent)\n            }\n            a || (a = _.result(this.options.paper, \"events\"));\n            var d = this.paperEvents = _.reduce(a, _.bind(b, this), {});\n            return _.each(d, _.bind(c, this)), this\n        },\n        onBackgroundEvent: function(a) {\n            if (this.$background.is(a.target)) {\n                var b = this.paperEvents[a.type];\n                _.isFunction(b) && b.apply(this.options.paper, arguments)\n            }\n        },\n        onResize: function() {\n            this._center && this.center(this._center.x, this._center.y)\n        },\n        onScale: function(a, b, c, d) {\n            this.adjustScale(a, b), this._sx = a, this._sy = b, (c || d) && this.center(c, d)\n        },\n        storeScrollPosition: function() {\n            this._scrollLeftBeforePrint = this.el.scrollLeft, this._scrollTopBeforePrint = this.el.scrollTop\n        },\n        restoreScrollPosition: function() {\n            this.el.scrollLeft = this._scrollLeftBeforePrint, this.el.scrollTop = this._scrollTopBeforePrint, this._scrollLeftBeforePrint = null, this._scrollTopBeforePrint = null\n        },\n        beforePaperManipulation: function() {\n            this.$el.css(\"visibility\", \"hidden\")\n        },\n        afterPaperManipulation: function() {\n            this.$el.css(\"visibility\", \"visible\")\n        },\n        clientToLocalPoint: function(a, b) {\n            var c = this.options.paper.matrix();\n            return a += this.el.scrollLeft - this._padding.left - c.e, a /= c.a, b += this.el.scrollTop - this._padding.top - c.f, b /= c.d, g.point(a, b)\n        },\n        localToBackgroundPoint: function(a, b) {\n            var c = g.Point(a, b),\n                d = this.options.paper.matrix(),\n                e = this._padding;\n            return V.transformPoint(c, d).offset(e.left, e.top)\n        },\n        adjustPaper: function() {\n            this._center = this.clientToLocalPoint(this.el.clientWidth / 2, this.el.clientHeight / 2);\n            var a = _.extend({\n                gridWidth: this.options.baseWidth,\n                gridHeight: this.options.baseHeight,\n                allowNewOrigin: \"negative\"\n            }, this.options.contentOptions);\n            return this.options.paper.fitToContent(this.transformContentOptions(a)), this\n        },\n        adjustScale: function(a, b) {\n            var c = this.options.paper.options,\n                d = a / this._sx,\n                e = b / this._sy;\n            this.options.paper.setOrigin(c.origin.x * d, c.origin.y * e), this.options.paper.setDimensions(c.width * d, c.height * e)\n        },\n        transformContentOptions: function(a) {\n            var b = this._sx,\n                c = this._sy;\n            return a.gridWidth && (a.gridWidth *= b), a.gridHeight && (a.gridHeight *= c), a.minWidth && (a.minWidth *= b), a.minHeight && (a.minHeight *= c), _.isObject(a.padding) ? a.padding = {\n                left: (a.padding.left || 0) * b,\n                right: (a.padding.right || 0) * b,\n                top: (a.padding.top || 0) * c,\n                bottom: (a.padding.bottom || 0) * c\n            } : _.isNumber(a.padding) && (a.padding = a.padding * b), a\n        },\n        center: function(a, b, c) {\n            var d = this.options.paper.matrix(),\n                e = -d.e,\n                f = -d.f,\n                g = e + this.options.paper.options.width,\n                h = f + this.options.paper.options.height;\n            _.isUndefined(a) || _.isUndefined(b) ? (a = (e + g) / 2, b = (f + h) / 2) : (a *= d.a, b *= d.d);\n            var i = this.getPadding(),\n                j = this.el.clientWidth / 2,\n                k = this.el.clientHeight / 2,\n                l = j - i.left - a + e,\n                m = j - i.right + a - g,\n                n = k - i.top - b + f,\n                o = k - i.bottom + b - h;\n            return this.addPadding(Math.max(l, 0), Math.max(m, 0), Math.max(n, 0), Math.max(o, 0)), this.scroll(a, b, _.isUndefined(c) ? a || null : c), this\n        },\n        centerContent: function(a) {\n            var b = V(this.options.paper.viewport).bbox(!0, this.options.paper.svg);\n            return this.center(b.x + b.width / 2, b.y + b.height / 2, a), this\n        },\n        centerElement: function(a) {\n            this.checkElement(a, \"centerElement\");\n            var b = a.getBBox().center();\n            return this.center(b.x, b.y)\n        },\n        scroll: function(a, b, c) {\n            var d = this.options.paper.matrix(),\n                e = {};\n            if (_.isNumber(a)) {\n                var f = this.el.clientWidth / 2;\n                e.scrollLeft = a - f + d.e + (this._padding.left || 0)\n            }\n            if (_.isNumber(b)) {\n                var g = this.el.clientHeight / 2;\n                e.scrollTop = b - g + d.f + (this._padding.top || 0)\n            }\n            c && c.animation ? this.$el.animate(e, c.animation) : this.$el.prop(e)\n        },\n        scrollToElement: function(a, b) {\n            this.checkElement(a, \"scrollToElement\");\n            var c = a.getBBox().center(),\n                d = this._sx,\n                e = this._sy;\n            return c.x *= d, c.y *= e, this.scroll(c.x, c.y, b)\n        },\n        addPadding: function(a, b, c, d) {\n            var e = this.getPadding(),\n                f = this._padding = {\n                    left: Math.round(e.left + (a || 0)),\n                    top: Math.round(e.top + (c || 0)),\n                    bottom: Math.round(e.bottom + (d || 0)),\n                    right: Math.round(e.right + (b || 0))\n                };\n            return this.$background.css({\n                width: f.left + this.options.paper.options.width + f.right,\n                height: f.top + this.options.paper.options.height + f.bottom\n            }), this.options.paper.$el.css({\n                left: f.left,\n                top: f.top\n            }), this\n        },\n        zoom: function(a, b) {\n            if (void 0 === a) return this._sx;\n            b = b || {};\n            var c, d, e = this.clientToLocalPoint(this.el.clientWidth / 2, this.el.clientHeight / 2),\n                f = a,\n                g = a;\n            if (b.absolute || (f += this._sx, g += this._sy), b.grid && (f = Math.round(f / b.grid) * b.grid, g = Math.round(g / b.grid) * b.grid), b.max && (f = Math.min(b.max, f), g = Math.min(b.max, g)), b.min && (f = Math.max(b.min, f), g = Math.max(b.min, g)), _.isUndefined(b.ox) || _.isUndefined(b.oy)) c = e.x, d = e.y;\n            else {\n                var h = f / this._sx,\n                    i = g / this._sy;\n                c = b.ox - (b.ox - e.x) / h, d = b.oy - (b.oy - e.y) / i\n            }\n            return this.beforePaperManipulation(), this.options.paper.scale(f, g), this.center(c, d), this.afterPaperManipulation(), this\n        },\n        zoomToFit: function(a) {\n            a = a || {};\n            var b = this.options.paper,\n                c = _.clone(b.options.origin);\n            return a.fittingBBox = a.fittingBBox || _.extend({}, g.point(c), {\n                width: this.$el.width(),\n                height: this.$el.height()\n            }), this.beforePaperManipulation(), b.scaleContentToFit(a), b.setOrigin(c.x, c.y), this.adjustPaper().centerContent(), this.afterPaperManipulation(), this\n        },\n        transitionClassName: \"transition-in-progress\",\n        transitionEventName: \"transitionend.paper-scroller-transition\",\n        transitionToPoint: function(a, b, c) {\n            _.isObject(a) && (c = b, b = a.y, a = a.x), c || (c = {});\n            var d, e, f = this._sx,\n                h = Math.max(c.scale || f, 1e-6),\n                i = g.Point(a, b),\n                j = this.clientToLocalPoint(this.el.clientWidth / 2, this.el.clientHeight / 2);\n            if (f === h) {\n                var k = j.difference(i).scale(f, f).round();\n                d = \"translate(\" + k.x + \"px,\" + k.y + \"px)\"\n            } else {\n                var l = h / (f - h) * i.distance(j),\n                    m = j.clone().move(i, l),\n                    n = this.localToBackgroundPoint(m).round();\n                d = \"scale(\" + h / f + \")\", e = n.x + \"px \" + n.y + \"px\"\n            }\n            return this.$el.addClass(this.transitionClassName), this.$background.off(this.transitionEventName).on(this.transitionEventName, _.bind(function(a) {\n                var b = this.paperScroller.removeTransition().zoom(this.scale, {\n                        absolute: !0\n                    }).center(this.x, this.y),\n                    c = this.onTransitionEnd;\n                _.isFunction(c) && c.call(b, a)\n            }, {\n                paperScroller: this,\n                scale: h,\n                x: a,\n                y: b,\n                onTransitionEnd: c.onTransitionEnd\n            })).css({\n                transition: \"transform\",\n                transitionDuration: c.duration || \"1s\",\n                transitionDelay: c.delay,\n                transitionTimingFunction: c.timingFunction,\n                transformOrigin: e,\n                transform: d\n            }), this\n        },\n        removeTransition: function() {\n            return this.$el.removeClass(this.transitionClassName), this.$background.off(this.transitionEventName).css({\n                transition: \"\",\n                transitionDuration: \"\",\n                transitionDelay: \"\",\n                transitionTimingFunction: \"\",\n                transform: \"\",\n                transformOrigin: \"\"\n            }), this\n        },\n        transitionToRect: function(a, b) {\n            a = g.Rect(a), b || (b = {});\n            var c = b.maxScale || 1 / 0,\n                d = b.minScale || Number.MIN_VALUE,\n                e = b.scaleGrid || null,\n                f = b.visibility || 1,\n                h = b.center ? g.Point(b.center) : a.center(),\n                i = this.el.clientWidth * f,\n                j = this.el.clientHeight * f,\n                k = g.Rect({\n                    x: h.x - i / 2,\n                    y: h.y - j / 2,\n                    width: i,\n                    height: j\n                }),\n                l = k.maxRectUniformScaleToFit(a, h);\n            return l = Math.min(l, c), e && (l = Math.floor(l / e) * e), l = Math.max(d, l), this.transitionToPoint(h, _.defaults({\n                scale: l\n            }, b))\n        },\n        startPanning: function(a) {\n            a = joint.util.normalizeEvent(a), this._clientX = a.clientX, this._clientY = a.clientY, this.$el.addClass(\"is-panning\"), this.trigger(\"pan:start\", a), $(document.body).on({\n                \"mousemove.panning touchmove.panning\": this.pan,\n                \"mouseup.panning touchend.panning\": this.stopPanning\n            }), $(window).on(\"mouseup.panning\", this.stopPanning)\n        },\n        pan: function(a) {\n            a = joint.util.normalizeEvent(a);\n            var b = a.clientX - this._clientX,\n                c = a.clientY - this._clientY;\n            this.el.scrollTop -= c, this.el.scrollLeft -= b, this._clientX = a.clientX, this._clientY = a.clientY\n        },\n        stopPanning: function(a) {\n            $(document.body).off(\".panning\"), $(window).off(\".panning\"), this.$el.removeClass(\"is-panning\"), this.trigger(\"pan:stop\", a)\n        },\n        getPadding: function() {\n            var a = this.options.padding;\n            return _.isFunction(a) && (a = a.call(this)), joint.util.normalizeSides(a)\n        },\n        getVisibleArea: function() {\n            var a = this.options.paper.matrix(),\n                b = {\n                    x: this.el.scrollLeft || 0,\n                    y: this.el.scrollTop || 0,\n                    width: this.el.clientWidth,\n                    height: this.el.clientHeight\n                },\n                c = V.transformRect(b, a.inverse());\n            return c.x -= (this._padding.left || 0) / this._sx, c.y -= (this._padding.top || 0) / this._sy, g.rect(c)\n        },\n        isElementVisible: function(a, b) {\n            this.checkElement(a, \"isElementVisible\"), b = b || {};\n            var c = b.strict ? \"containsRect\" : \"intersect\";\n            return !!this.getVisibleArea()[c](a.getBBox())\n        },\n        isPointVisible: function(a) {\n            return this.getVisibleArea().containsPoint(a)\n        },\n        checkElement: function(a, b) {\n            if (!(a && a instanceof joint.dia.Element)) throw new TypeError(\"ui.PaperScroller.\" + b + \"() accepts instance of joint.dia.Element only\")\n        },\n        onRemove: function() {\n            this.stopPanning()\n        }\n    });\n    joint.ui.Selection = joint.mvc.View.extend({\n        options: {\n            paper: void 0,\n            graph: void 0,\n            boxContent: function(a) {\n                return joint.util.template(\"<%= length %> elements selected.\")({\n                    length: this.model.length\n                })\n            },\n            handles: [{\n                name: \"remove\",\n                position: \"nw\",\n                events: {\n                    pointerdown: \"removeElements\"\n                }\n            }, {\n                name: \"rotate\",\n                position: \"sw\",\n                events: {\n                    pointerdown: \"startRotating\",\n                    pointermove: \"doRotate\",\n                    pointerup: \"stopBatch\"\n                }\n            }, {\n                name: \"resize\",\n                position: \"se\",\n                events: {\n                    pointerdown: \"startResizing\",\n                    pointermove: \"doResize\",\n                    pointerup: \"stopBatch\"\n                }\n            }],\n            useModelGeometry: !1,\n            strictSelection: !1,\n            rotateAngleGrid: 15,\n            allowTranslate: !0\n        },\n        className: \"selection\",\n        events: {\n            \"mousedown .selection-box\": \"onSelectionBoxPointerDown\",\n            \"touchstart .selection-box\": \"onSelectionBoxPointerDown\",\n            \"mousedown .handle\": \"onHandlePointerDown\",\n            \"touchstart .handle\": \"onHandlePointerDown\"\n        },\n        init: function() {\n            this.options.model && (this.options.collection = this.options.model);\n            var a = this.collection = this.options.collection || this.collection || new Backbone.Collection;\n            if (a.comparator || (a.comparator = this.constructor.depthComparator, a.sort()), this.model = a, !this.options.paper) throw new Error(\"Selection: paper required\");\n            _.defaults(this.options, {\n                graph: this.options.paper.model\n            }), _.bindAll(this, \"startSelecting\", \"stopSelecting\", \"adjustSelection\", \"pointerup\"), $(document.body).on(\"mousemove.selection touchmove.selection\", this.adjustSelection), $(document).on(\"mouseup.selection touchend.selection\", this.pointerup);\n            var b = this.options.paper,\n                c = this.options.graph;\n            this.listenTo(c, \"reset\", this.cancelSelection), this.listenTo(b, \"scale translate\", this.updateSelectionBoxes), this.listenTo(c, \"remove change\", function(a, b) {\n                b.selection !== this.cid && this.updateSelectionBoxes()\n            }), this.listenTo(a, \"remove\", this.onRemoveElement), this.listenTo(a, \"reset\", this.onResetElements), this.listenTo(a, \"add\", this.onAddElement), b.$el.append(this.$el), this._boxCount = 0, this.$selectionWrapper = this.createSelectionWrapper(), this.handles = [], _.each(this.options.handles, this.addHandle, this)\n        },\n        cancelSelection: function() {\n            this.model.reset([], {\n                ui: !0\n            })\n        },\n        addHandle: function(a) {\n            this.handles.push(a);\n            var b = $(\"<div/>\", {\n                \"class\": \"handle \" + (a.position || \"\") + \" \" + (a.name || \"\"),\n                \"data-action\": a.name\n            });\n            return a.icon && b.css(\"background-image\", \"url(\" + a.icon + \")\"), b.html(a.content || \"\"), joint.util.setAttributesBySelector(b, a.attrs), this.$selectionWrapper.append(b), _.each(a.events, function(b, c) {\n                _.isString(b) ? this.on(\"action:\" + a.name + \":\" + c, this[b], this) : this.on(\"action:\" + a.name + \":\" + c, b)\n            }, this), this\n        },\n        stopSelecting: function(a) {\n            switch (this._action) {\n                case \"selecting\":\n                    var b = this.$el.offset(),\n                        c = this.$el.width(),\n                        d = this.$el.height(),\n                        e = this.options.paper,\n                        f = V(e.viewport).toLocalPoint(b.left, b.top);\n                    f.x -= window.pageXOffset, f.y -= window.pageYOffset;\n                    var h = e.scale();\n                    c /= h.sx, d /= h.sy;\n                    var i = g.rect(f.x, f.y, c, d),\n                        j = this.getElementsInSelectedArea(i),\n                        k = this.options.filter;\n                    _.isArray(k) ? j = _.reject(j, function(a) {\n                        return _.contains(k, a.model) || _.contains(k, a.model.get(\"type\"))\n                    }) : _.isFunction(k) && (j = _.reject(j, function(a) {\n                        return k(a.model)\n                    })), this.model.reset(_.pluck(j, \"model\"), {\n                        ui: !0\n                    });\n                    break;\n                case \"translating\":\n                    this.options.graph.stopBatch(\"selection-translate\"), this.notify(\"selection-box:pointerup\", a);\n                    break;\n                default:\n                    this._action || this.cancelSelection()\n            }\n            this._action = null\n        },\n        removeHandle: function(a) {\n            var b = _.findIndex(this.handles, {\n                    name: a\n                }),\n                c = this.handles[b];\n            return c && (_.each(c.events, function(b, c) {\n                this.off(\"action:\" + a + \":\" + c)\n            }, this), this.$(\".handle.\" + a).remove(), this.handles.splice(b, 1)), this\n        },\n        startSelecting: function(a) {\n            a = joint.util.normalizeEvent(a), this.cancelSelection();\n            var b, c, d = this.options.paper.el;\n            if (null != a.offsetX && null != a.offsetY && $.contains(d, a.target)) b = a.offsetX, c = a.offsetY;\n            else {\n                var e = $(d).offset(),\n                    f = d.scrollLeft,\n                    g = d.scrollTop;\n                b = a.clientX - e.left + window.pageXOffset + f, c = a.clientY - e.top + window.pageYOffset + g\n            }\n            this.$el.css({\n                width: 1,\n                height: 1,\n                left: b,\n                top: c\n            }), this.showLasso(), this._action = \"selecting\", this._clientX = a.clientX, this._clientY = a.clientY, this._offsetX = b, this._offsetY = c\n        },\n        changeHandle: function(a, b) {\n            var c = _.findWhere(this.handles, {\n                name: a\n            });\n            return c && (this.removeHandle(a), this.addHandle(_.merge({\n                name: a\n            }, c, b))), this\n        },\n        onSelectionBoxPointerDown: function(a) {\n            a.stopPropagation(), a = joint.util.normalizeEvent(a), this.options.allowTranslate && this.startTranslatingSelection(a), this._activeElementView = this.getCellView(a.target), this.notify(\"selection-box:pointerdown\", a)\n        },\n        startTranslatingSelection: function(a) {\n            this._action = \"translating\", this.options.graph.startBatch(\"selection-translate\");\n            var b = this.options.paper.snapToGrid({\n                x: a.clientX,\n                y: a.clientY\n            });\n            this._snappedClientX = b.x, this._snappedClientY = b.y\n        },\n        adjustSelection: function(a) {\n            a = joint.util.normalizeEvent(a);\n            var b, c;\n            switch (this._action) {\n                case \"selecting\":\n                    b = a.clientX - this._clientX, c = a.clientY - this._clientY;\n                    var d = parseInt(this.$el.css(\"left\"), 10),\n                        e = parseInt(this.$el.css(\"top\"), 10);\n                    this.$el.css({\n                        left: b < 0 ? this._offsetX + b : d,\n                        top: c < 0 ? this._offsetY + c : e,\n                        width: Math.abs(b),\n                        height: Math.abs(c)\n                    });\n                    break;\n                case \"translating\":\n                    var f = this.options.paper.snapToGrid({\n                            x: a.clientX,\n                            y: a.clientY\n                        }),\n                        g = f.x,\n                        h = f.y;\n                    if (b = g - this._snappedClientX, c = h - this._snappedClientY, b || c) {\n                        if (this.translateSelectedElements(b, c), this.boxesUpdated) this.model.length > 1 && this.updateSelectionBoxes();\n                        else {\n                            var i = this.options.paper.scale();\n                            this.$el.children(\".selection-box\").add(this.$selectionWrapper).css({\n                                left: \"+=\" + b * i.sx,\n                                top: \"+=\" + c * i.sy\n                            })\n                        }\n                        this._snappedClientX = g, this._snappedClientY = h\n                    }\n                    this.notify(\"selection-box:pointermove\", a);\n                    break;\n                default:\n                    this._action && this.pointermove(a)\n            }\n            this.boxesUpdated = !1\n        },\n        translateSelectedElements: function(a, b) {\n            var c = {};\n            this.model.each(function(d) {\n                if (!c[d.id]) {\n                    var e = {\n                        selection: this.cid\n                    };\n                    d.translate(a, b, e), _.each(d.getEmbeddedCells({\n                        deep: !0\n                    }), function(a) {\n                        c[a.id] = !0\n                    });\n                    var f = this.options.graph.getConnectedLinks(d);\n                    _.each(f, function(d) {\n                        c[d.id] || (d.translate(a, b, e), c[d.id] = !0)\n                    })\n                }\n            }, this)\n        },\n        notify: function(a, b) {\n            var c = Array.prototype.slice.call(arguments, 1);\n            this.trigger.apply(this, [a, this._activeElementView].concat(c))\n        },\n        getElementsInSelectedArea: function(a) {\n            var b = this.options.paper,\n                c = {\n                    strict: this.options.strictSelection\n                };\n            if (this.options.useModelGeometry) {\n                var d = b.model.findModelsInArea(a, c);\n                return _.filter(_.map(d, b.findViewByModel, b))\n            }\n            return b.findViewsInArea(a, c)\n        },\n        pointerup: function(a) {\n            this._action && (this.triggerAction(this._action, \"pointerup\", a), this.stopSelecting(a), this._activeElementView = null, this._action = null)\n        },\n        destroySelectionBox: function(a) {\n            this.$('[data-model=\"' + a.get(\"id\") + '\"]').remove(), 0 === this.$el.children(\".selection-box\").length && this.hide(), this._boxCount = Math.max(0, this._boxCount - 1)\n        },\n        hide: function() {\n            this.$el.removeClass(\"lasso selected\")\n        },\n        showSelected: function() {\n            this.$el.addClass(\"selected\")\n        },\n        showLasso: function() {\n            this.$el.addClass(\"lasso\")\n        },\n        destroyAllSelectionBoxes: function() {\n            this.hide(), this.$el.children(\".selection-box\").remove(), this._boxCount = 0\n        },\n        createSelectionBox: function(a) {\n            var b = a.findView(this.options.paper);\n            if (b) {\n                var c = b.getBBox({\n                    useModelGeometry: this.options.useModelGeometry\n                });\n                $(\"<div/>\").addClass(\"selection-box\").attr(\"data-model\", a.get(\"id\")).css({\n                    left: c.x,\n                    top: c.y,\n                    width: c.width,\n                    height: c.height\n                }).appendTo(this.el), this.showSelected(), this._boxCount++\n            }\n        },\n        createSelectionWrapper: function() {\n            var a = $(\"<div/>\", {\n                    \"class\": \"selection-wrapper\"\n                }),\n                b = $(\"<div/>\", {\n                    \"class\": \"box\"\n                });\n            return a.append(b), a.attr(\"data-selection-length\", this.model.length), this.$el.prepend(a), a\n        },\n        updateSelectionWrapper: function() {\n            var a = {\n                    x: 1 / 0,\n                    y: 1 / 0\n                },\n                b = {\n                    x: 0,\n                    y: 0\n                };\n            if (this.model.each(function(c) {\n                    var d = this.options.paper.findViewByModel(c);\n                    if (d) {\n                        var e = d.getBBox({\n                            useModelGeometry: this.options.useModelGeometry\n                        });\n                        a.x = Math.min(a.x, e.x), a.y = Math.min(a.y, e.y), b.x = Math.max(b.x, e.x + e.width), b.y = Math.max(b.y, e.y + e.height)\n                    }\n                }, this), this.$selectionWrapper.css({\n                    left: a.x,\n                    top: a.y,\n                    width: b.x - a.x,\n                    height: b.y - a.y\n                }).attr(\"data-selection-length\", this.model.length), _.isFunction(this.options.boxContent)) {\n                var c = this.$(\".box\"),\n                    d = this.options.boxContent.call(this, c[0]);\n                d && c.html(d)\n            }\n        },\n        updateSelectionBoxes: function() {\n            this._boxCount && (this.hide(), _.each(this.$el.children(\".selection-box\"), function(a) {\n                var b = $(a).remove().attr(\"data-model\"),\n                    c = this.model.get(b);\n                c && this.createSelectionBox(c)\n            }, this), this.updateSelectionWrapper(), this.boxesUpdated = !0)\n        },\n        onRemove: function() {\n            $(document.body).off(\".selection\", this.adjustSelection), $(document).off(\".selection\", this.pointerup)\n        },\n        onHandlePointerDown: function(a) {\n            this._action = $(a.target).closest(\".handle\").attr(\"data-action\"), this._action && (a.preventDefault(), a.stopPropagation(), a = joint.util.normalizeEvent(a), this._clientX = a.clientX, this._clientY = a.clientY, this._startClientX = this._clientX, this._startClientY = this._clientY, this.triggerAction(this._action, \"pointerdown\", a))\n        },\n        getCellView: function(a) {\n            var b = this.model.get(a.getAttribute(\"data-model\"));\n            return b && b.findView(this.options.paper)\n        },\n        pointermove: function(a) {\n            if (this._action) {\n                var b = this.options.paper.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    }),\n                    c = this.options.paper.snapToGrid({\n                        x: this._clientX,\n                        y: this._clientY\n                    }),\n                    d = b.x - c.x,\n                    e = b.y - c.y;\n                this.triggerAction(this._action, \"pointermove\", a, d, e, a.clientX - this._startClientX, a.clientY - this._startClientY), this._clientX = a.clientX, this._clientY = a.clientY\n            }\n        },\n        triggerAction: function(a, b, c) {\n            var d = Array.prototype.slice.call(arguments, 2);\n            d.unshift(\"action:\" + a + \":\" + b), this.trigger.apply(this, d)\n        },\n        onRemoveElement: function(a) {\n            this.destroySelectionBox(a), this.updateSelectionWrapper()\n        },\n        onResetElements: function(a) {\n            this.destroyAllSelectionBoxes(), a.each(this.createSelectionBox, this), this.updateSelectionWrapper()\n        },\n        onAddElement: function(a) {\n            this.createSelectionBox(a), this.updateSelectionWrapper()\n        },\n        removeElements: function(a) {\n            var b = this.collection.toArray();\n            this.cancelSelection(), this.options.graph.removeCells(b, {\n                selection: this.cid\n            })\n        },\n        startRotating: function(a) {\n            this.options.graph.trigger(\"batch:start\");\n            var b = this.options.graph.getBBox(this.model.models).center(),\n                c = this.options.paper.snapToGrid({\n                    x: a.clientX,\n                    y: a.clientY\n                }),\n                d = _.transform(this.model.toArray(), function(a, b) {\n                    a[b.id] = g.normalizeAngle(b.get(\"angle\") || 0)\n                });\n            this._rotation = {\n                center: b,\n                clientAngle: g.point(c).theta(b),\n                initialAngles: d\n            }\n        },\n        startResizing: function(a) {\n            var b = this.options.paper,\n                c = this.options.graph,\n                d = b.options.gridSize,\n                e = this.model.toArray(),\n                f = c.getBBox(e),\n                g = _.invoke(e, \"getBBox\"),\n                h = _.min(g, \"width\").width,\n                i = _.min(g, \"height\").height;\n            this._resize = {\n                cells: c.getSubgraph(e),\n                bbox: f,\n                minWidth: d * f.width / h,\n                minHeight: d * f.height / i\n            }, c.trigger(\"batch:start\")\n        },\n        doResize: function(a, b, c) {\n            var d = this._resize,\n                e = d.bbox,\n                f = e.width,\n                g = e.height,\n                h = Math.max(f + b, d.minWidth),\n                i = Math.max(g + c, d.minHeight);\n            (Math.abs(f - h) > .001 || Math.abs(g - i) > .001) && (this.options.graph.resizeCells(h, i, d.cells, {\n                selection: this.cid\n            }), e.width = h, e.height = i, this.updateSelectionBoxes())\n        },\n        doRotate: function(a) {\n            var b = this._rotation,\n                c = this.options.rotateAngleGrid,\n                d = this.options.paper.snapToGrid({\n                    x: a.clientX,\n                    y: a.clientY\n                }),\n                e = b.clientAngle - g.point(d).theta(b.center);\n            Math.abs(e) > .001 && (this.model.each(function(a) {\n                var d = g.snapToGrid(b.initialAngles[a.id] + e, c);\n                a.rotate(d, !0, b.center, {\n                    selection: this.cid\n                })\n            }, this), this.updateSelectionBoxes())\n        },\n        stopBatch: function() {\n            this.options.graph.trigger(\"batch:stop\")\n        },\n        getAction: function() {\n            return this._action\n        }\n    }, {\n        depthComparator: function(a) {\n            return a.getAncestors().length\n        }\n    }), joint.ui.SelectionView = joint.ui.Selection;\n    joint.ui.Clipboard = Backbone.Collection.extend({\n        LOCAL_STORAGE_KEY: \"joint.ui.Clipboard.cells\",\n        defaults: {\n            useLocalStorage: !0\n        },\n        copyElements: function(a, b, c) {\n            this.options = _.extend({}, this.defaults, c), c = this.options;\n            var d = a.toArray(),\n                e = _.sortBy(b.cloneSubgraph(d, c), function(a) {\n                    return a.isLink() ? 2 : 1\n                });\n            return this.reset(e), c.useLocalStorage && window.localStorage && localStorage.setItem(this.LOCAL_STORAGE_KEY, JSON.stringify(this.toJSON())), d\n        },\n        cutElements: function(a, b, c) {\n            var d = this.copyElements(a, b, c);\n            return b.trigger(\"batch:start\", {\n                batchName: \"cut\"\n            }), _.invoke(d, \"remove\"), b.trigger(\"batch:stop\", {\n                batchName: \"cut\"\n            }), d\n        },\n        pasteCells: function(a, b) {\n            if (b = _.defaults(b || {}, this.options), b.useLocalStorage && this.isEmpty() && window.localStorage) {\n                var c = {\n                        cells: JSON.parse(localStorage.getItem(this.LOCAL_STORAGE_KEY))\n                    },\n                    d = (new joint.dia.Graph).fromJSON(c, {\n                        sort: !1\n                    });\n                this.reset(d.getCells())\n            }\n            var e = this.map(function(a) {\n                return this.modifyCell(a, b)\n            }, this);\n            return a.trigger(\"batch:start\", {\n                batchName: \"paste\"\n            }), a.addCells(e), a.trigger(\"batch:stop\", {\n                batchName: \"paste\"\n            }), this.copyElements(this, a), e\n        },\n        clear: function() {\n            this.options = {}, this.reset([]), window.localStorage && localStorage.removeItem(this.LOCAL_STORAGE_KEY)\n        },\n        modifyCell: function(a, b) {\n            return a.unset(\"z\"), a.isLink() && b.link && a.set(b.link), b.translate && a.translate(b.translate.dx || 20, b.translate.dy || 20), a.collection = null, a\n        }\n    });\n    ! function(a, b) {\n        \"use strict\";\n        var c = function() {\n            this.options = {\n                handles: [{\n                    name: \"remove\",\n                    position: \"nw\",\n                    events: {\n                        pointerdown: \"removeElement\"\n                    },\n                    icon: null\n                }, {\n                    name: \"direction\",\n                    position: \"se\",\n                    events: {\n                        pointerdown: \"directionSwap\"\n                    },\n                    icon: null\n                }],\n                bbox: function(a) {\n                    var b = .5 * a.getConnectionLength();\n                    return a.getPointAtLength(b)\n                },\n                typeCssName: \"type-link\",\n                tinyThreshold: -1,\n                smallThreshold: -1,\n                boxContent: !1\n            }\n        };\n        c.prototype.directionSwap = function() {\n            var a = this.options.cellView.model;\n            a.set({\n                source: a.get(\"target\"),\n                target: a.get(\"source\")\n            }, {\n                halo: this.cid\n            })\n        };\n        var d = function() {\n            this.options = {\n                handles: [{\n                    name: \"remove\",\n                    position: \"nw\",\n                    events: {\n                        pointerdown: \"removeElement\"\n                    },\n                    icon: null\n                }, {\n                    name: \"resize\",\n                    position: \"se\",\n                    events: {\n                        pointerdown: \"startResizing\",\n                        pointermove: \"doResize\",\n                        pointerup: \"stopBatch\"\n                    },\n                    icon: null\n                }, {\n                    name: \"clone\",\n                    position: \"n\",\n                    events: {\n                        pointerdown: \"startCloning\",\n                        pointermove: \"doClone\",\n                        pointerup: \"stopCloning\"\n                    },\n                    icon: null\n                }, {\n                    name: \"link\",\n                    position: \"e\",\n                    events: {\n                        pointerdown: \"startLinking\",\n                        pointermove: \"doLink\",\n                        pointerup: \"stopLinking\"\n                    },\n                    icon: null\n                }, {\n                    name: \"fork\",\n                    position: \"ne\",\n                    events: {\n                        pointerdown: \"startForking\",\n                        pointermove: \"doFork\",\n                        pointerup: \"stopForking\"\n                    },\n                    icon: null\n                }, {\n                    name: \"unlink\",\n                    position: \"w\",\n                    events: {\n                        pointerdown: \"unlinkElement\"\n                    },\n                    icon: null\n                }, {\n                    name: \"rotate\",\n                    position: \"sw\",\n                    events: {\n                        pointerdown: \"startRotating\",\n                        pointermove: \"doRotate\",\n                        pointerup: \"stopBatch\"\n                    },\n                    icon: null\n                }],\n                bbox: function(a, b) {\n                    return a.getBBox({\n                        useModelGeometry: b.options.useModelGeometry\n                    })\n                },\n                typeCssName: \"type-element\",\n                tinyThreshold: 40,\n                smallThreshold: 80,\n                boxContent: function(b, c) {\n                    var d = a.util.template(\"x: <%= x %>, y: <%= y %>, width: <%= width %>, height: <%= height %>, angle: <%= angle %>\"),\n                        e = this.getBBox();\n                    return d({\n                        x: Math.floor(e.x),\n                        y: Math.floor(e.y),\n                        width: Math.floor(e.width),\n                        height: Math.floor(e.height),\n                        angle: Math.floor(b.model.get(\"angle\") || 0)\n                    })\n                },\n                loopLinkPreferredSide: \"top\",\n                loopLinkWidth: 40,\n                rotateAngleGrid: 15,\n                linkAttributes: {},\n                smoothLinks: void 0\n            }\n        };\n        d.prototype.startLinking = function(a, c, d) {\n            this.startBatch();\n            var e = this.options.cellView,\n                f = $.data(a.target, \"selector\"),\n                g = this.options.paper.getDefaultLink(e, f && e.el.querySelector(f));\n            g.set(\"source\", {\n                id: e.model.id,\n                selector: f\n            }), g.set(\"target\", {\n                x: c,\n                y: d\n            }), g.attr(this.options.linkAttributes), b.isBoolean(this.options.smoothLinks) && g.set(\"smooth\", this.options.smoothLinks), this.options.graph.addCell(g, {\n                validation: !1,\n                halo: this.cid,\n                async: !1\n            }), this._linkView = this.options.paper.findViewByModel(g), this._linkView.startArrowheadMove(\"target\", {\n                whenNotAllowed: \"remove\"\n            })\n        }, d.prototype.startForking = function(c, d, e) {\n            var f = this.options;\n            this.startBatch();\n            var g = f.clone(f.cellView.model, {\n                fork: !0\n            });\n            if (!(g instanceof a.dia.Cell)) throw new Error('ui.Halo: option \"clone\" has to return a cell.');\n            var h = f.paper.getDefaultLink(f.cellView).set({\n                source: {\n                    id: f.cellView.model.id\n                },\n                target: {\n                    id: g.id\n                }\n            });\n            h.attr(f.linkAttributes), b.isBoolean(f.smoothLinks) && h.set(\"smooth\", f.smoothLinks), this.centerElementAtCursor(g, d, e), f.graph.addCells([g, h], {\n                halo: this.cid,\n                async: !1\n            }), this._cloneView = g.findView(f.paper), this._cloneView.pointerdown(c, d, e)\n        }, d.prototype.startResizing = function(a) {\n            this.startBatch(), this._flip = [1, 0, 0, 1, 1, 0, 0, 1][Math.floor(g.normalizeAngle(this.options.cellView.model.get(\"angle\")) / 45)]\n        }, d.prototype.startRotating = function(a, b, c) {\n            this.startBatch();\n            var d = this.options.cellView.model.getBBox().center(),\n                e = g.normalizeAngle(this.options.cellView.model.get(\"angle\"));\n            this._center = d, this._rotationStartAngle = e || 0, this._clientStartAngle = g.point(b, c).theta(d)\n        }, d.prototype.doResize = function(a, b, c, d, e) {\n            var f = this.options.cellView.model.get(\"size\"),\n                g = Math.max(f.width + (this._flip ? d : e), 1),\n                h = Math.max(f.height + (this._flip ? e : d), 1);\n            this.options.cellView.model.resize(g, h, {\n                absolute: !0\n            })\n        }, d.prototype.doRotate = function(a, b, c) {\n            var d = this._clientStartAngle - g.point(b, c).theta(this._center),\n                e = g.snapToGrid(this._rotationStartAngle + d, this.options.rotateAngleGrid);\n            this.options.cellView.model.rotate(e, !0)\n        }, d.prototype.doClone = function(a, b, c) {\n            this._cloneView.pointermove(a, b, c)\n        }, d.prototype.startCloning = function(b, c, d) {\n            var e = this.options;\n            this.startBatch();\n            var f = e.clone(e.cellView.model, {\n                clone: !0\n            });\n            if (!(f instanceof a.dia.Cell)) throw new Error('ui.Halo: option \"clone\" has to return a cell.');\n            this.centerElementAtCursor(f, c, d), f.addTo(e.graph, {\n                halo: this.cid,\n                async: !1\n            }), this._cloneView = f.findView(e.paper), this._cloneView.pointerdown(b, c, d)\n        }, d.prototype.centerElementAtCursor = function(a, b, c) {\n            var d = a.getBBox().center(),\n                e = b - d.x,\n                f = c - d.y;\n            a.translate(e, f)\n        }, d.prototype.doFork = function(a, b, c) {\n            this._cloneView.pointermove(a, b, c)\n        }, d.prototype.doLink = function(a, b, c) {\n            this._linkView && this._linkView.pointermove(a, b, c)\n        }, d.prototype.stopLinking = function(a) {\n            this._linkView && (this._linkView.pointerup(a), this._linkView.model.hasLoop() && this.makeLoopLink(this._linkView.model), this.stopBatch(), this.triggerAction(\"link\", \"add\", this._linkView.model), this._linkView = null)\n        }, d.prototype.stopForking = function(a, b, c) {\n            this._cloneView.pointerup(a, b, c), this.stopBatch()\n        }, d.prototype.stopCloning = function(a, b, c) {\n            this._cloneView.pointerup(a, b, c), this.stopBatch()\n        }, d.prototype.unlinkElement = function(a) {\n            this.startBatch(), this.options.graph.removeLinks(this.options.cellView.model), this.stopBatch()\n        }, d.prototype.makeLoopLink = function(a) {\n            var c, d, e = this.options.loopLinkWidth,\n                f = this.options.paper.options,\n                h = g.rect({\n                    x: 0,\n                    y: 0,\n                    width: f.width,\n                    height: f.height\n                }),\n                i = V(this.options.cellView.el).bbox(!1, this.options.paper.viewport),\n                j = b.uniq([this.options.loopLinkPreferredSide, \"top\", \"bottom\", \"left\", \"right\"]),\n                k = b.find(j, function(a) {\n                    var b, f = 0,\n                        j = 0;\n                    switch (a) {\n                        case \"top\":\n                            b = g.point(i.x + i.width / 2, i.y - e), f = e / 2;\n                            break;\n                        case \"bottom\":\n                            b = g.point(i.x + i.width / 2, i.y + i.height + e), f = e / 2;\n                            break;\n                        case \"left\":\n                            b = g.point(i.x - e, i.y + i.height / 2), j = e / 2;\n                            break;\n                        case \"right\":\n                            b = g.point(i.x + i.width + e, i.y + i.height / 2), j = e / 2\n                    }\n                    return c = g.point(b).offset(-f, -j), d = g.point(b).offset(f, j), h.containsPoint(c) && h.containsPoint(d)\n                }, this);\n            k && a.set(\"vertices\", [c, d])\n        }, a.ui.Halo = a.mvc.View.extend({\n            PIE_INNER_RADIUS: 20,\n            PIE_OUTER_RADIUS: 50,\n            className: \"halo\",\n            events: {\n                \"mousedown .handle\": \"onHandlePointerDown\",\n                \"touchstart .handle\": \"onHandlePointerDown\",\n                \"mousedown .pie-toggle\": \"onPieTogglePointerDown\",\n                \"touchstart .pie-toggle\": \"onPieTogglePointerDown\"\n            },\n            options: {\n                clearAll: !0,\n                clearOnBlankPointerdown: !0,\n                useModelGeometry: !1,\n                clone: function(a, b) {\n                    return a.clone().unset(\"z\")\n                },\n                type: \"surrounding\",\n                pieSliceAngle: 45,\n                pieStartAngleOffset: 0,\n                pieIconSize: 14,\n                pieToggles: [{\n                    name: \"default\",\n                    position: \"e\"\n                }]\n            },\n            init: function() {\n                var a = this.options,\n                    e = a.cellView,\n                    f = e.model,\n                    g = f.isLink() ? new c : new d;\n                b.assign(this, b.omit(g, \"options\"));\n                var h = e.paper,\n                    i = h.model;\n                b.defaults(a, g.options, {\n                    paper: h,\n                    graph: i\n                }), b.bindAll(this, \"pointermove\", \"pointerup\", \"render\", \"update\"), a.clearAll && this.constructor.clear(h), this.listenTo(i, \"reset\", this.remove), this.listenTo(f, \"remove\", this.remove), this.listenTo(h, \"halo:create\", this.remove), a.clearOnBlankPointerdown && this.listenTo(h, \"blank:pointerdown\", this.remove), this.listenTo(i, \"all\", this.update), this.listenTo(h, \"scale translate\", this.update), $(document.body).on(\"mousemove touchmove\", this.pointermove), $(document).on(\"mouseup touchend\", this.pointerup), this.handles = [], b.each(a.handles, this.addHandle, this)\n            },\n            render: function() {\n                var c = this.options;\n                switch (this.$el.empty(), this.$handles = $(\"<div/>\").addClass(\"handles\").appendTo(this.el), this.$box = $(\"<label/>\").addClass(\"box\").appendTo(this.el), this.$pieToggles = {}, this.$el.addClass(c.type), this.$el.addClass(this.cellTypeCssClass()), this.$el.attr(\"data-type\", c.cellView.model.get(\"type\")), this.$handles.append(b.map(this.handles, this.renderHandle, this)), c.type) {\n                    case \"toolbar\":\n                    case \"surrounding\":\n                        this.hasHandle(\"fork\") && this.toggleFork();\n                        break;\n                    case \"pie\":\n                        b.each(this.options.pieToggles, function(b) {\n                            var c = $(\"<div/>\");\n                            c.addClass(\"pie-toggle \" + (b.position || \"e\")), c.attr(\"data-name\", b.name), a.util.setAttributesBySelector(c, b.attrs), c.appendTo(this.el), this.$pieToggles[b.name] = c\n                        }, this);\n                        break;\n                    default:\n                        throw new Error(\"ui.Halo: unknown type\")\n                }\n                return this.update(), this.$el.addClass(\"animate\").appendTo(c.paper.el), this.setPieIcons(), this\n            },\n            setPieIcons: function() {\n                \"pie\" === this.options.type && this.$el.find(\".handle\").each(b.bind(function(a, b) {\n                    var c, d = $(b),\n                        e = d.attr(\"data-action\"),\n                        f = this.getHandle(e);\n                    if (!f || !f.icon) {\n                        var g = window.getComputedStyle(b, \":before\").getPropertyValue(\"content\");\n                        g && \"none\" !== g && (c = d.find(\".slice-text-icon\"), c.length > 0 && V(c[0]).text(g.replace(/['\"]/g, \"\")));\n                        var h = d.css(\"background-image\");\n                        if (h) {\n                            var i = h.match(/url\\(['\"]?([^'\"]+)['\"]?\\)/);\n                            if (i) {\n                                var j = i[1];\n                                c = d.find(\".slice-img-icon\"), c.length > 0 && V(c[0]).attr(\"xlink:href\", j)\n                            }\n                        }\n                    }\n                }, this))\n            },\n            update: function() {\n                if (this.isRendered()) {\n                    this.updateBoxContent();\n                    var a = this.getBBox();\n                    this.$el.toggleClass(\"tiny\", a.width < this.options.tinyThreshold && a.height < this.options.tinyThreshold), this.$el.toggleClass(\"small\", !this.$el.hasClass(\"tiny\") && a.width < this.options.smallThreshold && a.height < this.options.smallThreshold), this.$el.css({\n                        width: a.width,\n                        height: a.height,\n                        left: a.x,\n                        top: a.y\n                    }), this.hasHandle(\"unlink\") && this.toggleUnlink()\n                }\n            },\n            getBBox: function() {\n                var a = this.options.cellView,\n                    c = this.options.bbox,\n                    d = b.isFunction(c) ? c(a, this) : c;\n                return d = b.defaults({}, d, {\n                    x: 0,\n                    y: 0,\n                    width: 1,\n                    height: 1\n                }), g.rect(d)\n            },\n            cellTypeCssClass: function() {\n                return this.options.typeCssName\n            },\n            updateBoxContent: function() {\n                var a = this.options.boxContent,\n                    c = this.options.cellView;\n                if (b.isFunction(a)) {\n                    var d = a.call(this, c, this.$box[0]);\n                    d && this.$box.html(d)\n                } else a ? this.$box.html(a) : this.$box.remove()\n            },\n            extendHandles: function(a) {\n                b.each(a, function(a) {\n                    var c = this.getHandle(a.name);\n                    c && b.extend(c, a)\n                }, this)\n            },\n            addHandles: function(a) {\n                return b.each(a, this.addHandle, this), this\n            },\n            addHandle: function(a) {\n                var c = this.getHandle(a.name);\n                return c || (this.handles.push(a), b.each(a.events, function(c, d) {\n                    b.isString(c) ? this.on(\"action:\" + a.name + \":\" + d, this[c], this) : this.on(\"action:\" + a.name + \":\" + d, c)\n                }, this), this.$handles && this.renderHandle(a).appendTo(this.$handles)), this\n            },\n            renderHandle: function(b) {\n                var c = this.getHandleIdx(b.name),\n                    d = $(\"<div/>\").addClass(\"handle\").addClass(b.name).attr(\"data-action\", b.name).prop(\"draggable\", !1);\n                switch (this.options.type) {\n                    case \"toolbar\":\n                    case \"surrounding\":\n                        d.addClass(b.position), b.content && d.html(b.content);\n                        break;\n                    case \"pie\":\n                        var e = this.PIE_OUTER_RADIUS,\n                            f = this.PIE_INNER_RADIUS,\n                            h = (e + f) / 2,\n                            i = g.point(e, e),\n                            j = g.toRad(this.options.pieSliceAngle),\n                            k = c * j + g.toRad(this.options.pieStartAngleOffset),\n                            l = k + j,\n                            m = V.createSlicePathData(f, e, k, l),\n                            n = V(\"svg\").addClass(\"slice-svg\"),\n                            o = V(\"path\").attr(\"d\", m).translate(e, e).addClass(\"slice\"),\n                            p = g.point.fromPolar(h, -k - j / 2, i),\n                            q = this.options.pieIconSize,\n                            r = V(\"image\").attr(p).addClass(\"slice-img-icon\");\n                        p.y = p.y + q - 2;\n                        var s = V(\"text\", {\n                            \"font-size\": q\n                        }).attr(p).addClass(\"slice-text-icon\");\n                        r.attr({\n                            width: q,\n                            height: q\n                        }), r.translate(-q / 2, -q / 2), s.translate(-q / 2, -q / 2), n.append([o, r, s]), d.append(n.node)\n                }\n                return b.icon && this.setHandleIcon(d, b.icon), a.util.setAttributesBySelector(d, b.attrs), d\n            },\n            setHandleIcon: function(a, b) {\n                switch (this.options.type) {\n                    case \"pie\":\n                        var c = a.find(\".slice-img-icon\");\n                        V(c[0]).attr(\"xlink:href\", b);\n                        break;\n                    case \"toolbar\":\n                    case \"surrounding\":\n                        a.css(\"background-image\", \"url(\" + b + \")\")\n                }\n            },\n            removeHandles: function() {\n                for (; this.handles.length;) this.removeHandle(this.handles[0].name);\n                return this\n            },\n            removeHandle: function(a) {\n                var c = this.getHandleIdx(a),\n                    d = this.handles[c];\n                return d && (b.each(d.events, function(b, c) {\n                    this.off(\"action:\" + a + \":\" + c)\n                }, this), this.$(\".handle.\" + a).remove(), this.handles.splice(c, 1)), this\n            },\n            changeHandle: function(a, c) {\n                var d = this.getHandle(a);\n                return d && (this.removeHandle(a), this.addHandle(b.merge({\n                    name: a\n                }, d, c))), this\n            },\n            hasHandle: function(a) {\n                return this.getHandleIdx(a) !== -1\n            },\n            getHandleIdx: function(a) {\n                return b.findIndex(this.handles, {\n                    name: a\n                })\n            },\n            getHandle: function(a) {\n                return b.findWhere(this.handles, {\n                    name: a\n                })\n            },\n            toggleHandle: function(a, c) {\n                var d = this.getHandle(a);\n                if (d) {\n                    var e = this.$(\".handle.\" + a);\n                    b.isUndefined(c) && (c = !e.hasClass(\"selected\")), e.toggleClass(\"selected\", c);\n                    var f = c ? d.iconSelected : d.icon;\n                    f && this.setHandleIcon(e, f)\n                }\n                return this\n            },\n            selectHandle: function(a) {\n                return this.toggleHandle(a, !0)\n            },\n            deselectHandle: function(a) {\n                return this.toggleHandle(a, !1)\n            },\n            deselectAllHandles: function() {\n                return b.chain(this.handles).pluck(\"name\").each(this.deselectHandle, this).value(), this\n            },\n            onHandlePointerDown: function(b) {\n                if (this._action = $(b.target).closest(\".handle\").attr(\"data-action\"), this._action) {\n                    b.preventDefault(), b.stopPropagation(), b = a.util.normalizeEvent(b);\n                    var c = this.options.paper.snapToGrid({\n                        x: b.clientX,\n                        y: b.clientY\n                    });\n                    this._localX = c.x, this._localY = c.y, this._evt = b, this.triggerAction(this._action, \"pointerdown\", b, c.x, c.y)\n                }\n            },\n            onPieTogglePointerDown: function(a) {\n                a.stopPropagation();\n                var b = $(a.target).closest(\".pie-toggle\"),\n                    c = b.attr(\"data-name\");\n                this.isOpen(c) ? this.toggleState(c) : this.isOpen() ? (this.toggleState(), this.toggleState(c)) : this.toggleState(c)\n            },\n            triggerAction: function(a, b, c) {\n                var d = Array.prototype.slice.call(arguments, 2);\n                d.unshift(\"action:\" + a + \":\" + b), this.trigger.apply(this, d)\n            },\n            stopBatch: function() {\n                this.options.graph.stopBatch(\"halo\", {\n                    halo: this.cid\n                })\n            },\n            startBatch: function() {\n                this.options.graph.startBatch(\"halo\", {\n                    halo: this.cid\n                })\n            },\n            pointermove: function(b) {\n                if (this._action) {\n                    b.preventDefault(), b.stopPropagation(), b = a.util.normalizeEvent(b);\n                    var c = this.options.paper.snapToGrid({\n                            x: b.clientX,\n                            y: b.clientY\n                        }),\n                        d = c.x - this._localX,\n                        e = c.y - this._localY;\n                    this._localX = c.x, this._localY = c.y, this._evt = b, this.triggerAction(this._action, \"pointermove\", b, c.x, c.y, d, e)\n                }\n            },\n            pointerup: function(a) {\n                var b = this._action;\n                if (b) {\n                    this._action = null, this._evt = null;\n                    var c = this.options.paper.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    });\n                    this.triggerAction(b, \"pointerup\", a, c.x, c.y)\n                }\n            },\n            onRemove: function() {\n                $(document.body).off(\"mousemove touchmove\", this.pointermove), $(document).off(\"mouseup touchend\", this.pointerup), this._action && this._evt && this.pointerup(this._evt), this.options.graph.hasActiveBatch(\"halo\") && this.stopBatch()\n            },\n            onSetTheme: function() {\n                this.setPieIcons()\n            },\n            removeElement: function() {\n                this.options.cellView.model.remove()\n            },\n            toggleUnlink: function() {\n                var a = this.options.graph.getConnectedLinks(this.options.cellView.model).length > 0;\n                this.$handles.children(\".unlink\").toggleClass(\"hidden\", !a)\n            },\n            toggleFork: function() {\n                var a = this.options.cellView.model.clone(),\n                    b = this.options.paper.createViewForModel(a),\n                    c = this.options.paper.options.validateConnection(this.options.cellView, null, b, null, \"target\");\n                this.$handles.children(\".fork\").toggleClass(\"hidden\", !c), b.remove(), a = null\n            },\n            toggleState: function(a) {\n                if (this.isRendered()) {\n                    var c = this.$el;\n                    if (b.each(this.$pieToggles, function(a) {\n                            a.removeClass(\"open\")\n                        }), this.isOpen()) this.trigger(\"state:close\", a), c.removeClass(\"open\");\n                    else {\n                        if (this.trigger(\"state:open\", a), a) {\n                            var d = b.findWhere(this.options.pieToggles, {\n                                name: a\n                            });\n                            d && c.attr({\n                                \"data-pie-toggle-position\": d.position,\n                                \"data-pie-toggle-name\": d.name\n                            }), this.$pieToggles[a].addClass(\"open\")\n                        }\n                        c.addClass(\"open\")\n                    }\n                }\n            },\n            isOpen: function(a) {\n                return !!this.isRendered() && (a ? this.$pieToggles[a].hasClass(\"open\") : this.$el.hasClass(\"open\"))\n            },\n            isRendered: function() {\n                return !b.isUndefined(this.$box)\n            }\n        }, {\n            clear: function(a) {\n                a.trigger(\"halo:create\")\n            }\n        })\n    }(joint, _);\n    ! function(a, b) {\n        a.ui.Toolbar = a.mvc.View.extend({\n            options: {},\n            align: [\"left\", \"right\"],\n            className: \"toolbar\",\n            defaultGroup: \"default\",\n            widgets: [],\n            groupViews: [],\n            init: function() {\n                this.tools = this.options.tools || [], this.groups = this.options.groups || {}\n            },\n            getWidgetByName: function(a) {\n                return b.find(this.widgets, function(b) {\n                    return b.options.name === a\n                })\n            },\n            getWidgets: function() {\n                return this.widgets\n            },\n            groupsWithItemsPairs: function() {\n                var a = {};\n                return b.each(this.tools, function(b) {\n                    var c = b.group || this.defaultGroup;\n                    a[c] = a[c] || {\n                        items: [],\n                        group: {}\n                    }, a[c].items.push(b), a[c].group = this.groups[c] || {}\n                }, this), b.chain(a).pairs().sortBy(function(a) {\n                    return a[1].group.index\n                }).sortBy(function(a) {\n                    return a[1].group.align || \"left\"\n                }).value()\n            },\n            render: function() {\n                var a = this.groupsWithItemsPairs(),\n                    c = !1;\n                return b.each(a, function(a) {\n                    var b = a[0],\n                        d = a[1],\n                        e = this.renderGroup(b, d);\n                    !c && d.group.align && \"right\" === d.group.align && (c = !0, e.addClass(\"group-first\")), e.appendTo(this.el)\n                }, this), this\n            },\n            renderGroup: function(a, d) {\n                var e = new c({\n                    name: a,\n                    align: d.group.align,\n                    items: d.items,\n                    references: this.options.references\n                });\n                return this.groupViews.push(e), e.on(\"all\", b.bind(function() {\n                    this.trigger.apply(this, arguments)\n                }, this)), e.render(), this.widgets = this.widgets.concat(e.widgets), e.$el\n            },\n            onRemove: function() {\n                b.invoke(this.groupViews, \"off\"), b.invoke(this.groupViews, \"remove\")\n            }\n        });\n        var c = a.mvc.View.extend({\n            className: \"toolbar-group\",\n            init: function() {\n                this.widgets = []\n            },\n            onRender: function() {\n                this.$el.attr(\"data-group\", this.options.name), this.$el.addClass(this.options.align), this.renderItems()\n            },\n            renderItems: function() {\n                b.each(this.options.items, function(a) {\n                    var b = this.createWidget(a);\n                    this.$el.append(b.$el)\n                }, this)\n            },\n            createWidget: function(c) {\n                var d = a.ui.Widget.create(c, this.options.references);\n                return d.on(\"all\", b.bind(function(a) {\n                    var b = Array.prototype.slice.call(arguments, 1);\n                    this.trigger.apply(this, [c.name + \":\" + a].concat(b))\n                }, this)), this.widgets.push(d), d\n            },\n            onRemove: function() {\n                b.invoke(this.widgets, \"off\"), b.invoke(this.widgets, \"remove\")\n            }\n        })\n    }(joint, _),\n    function(a, b) {\n        a.ui.Widget = a.mvc.View.extend({\n            className: \"widget\",\n            references: [],\n            constructor: function(b, c) {\n                this.availableReferences = c || {}, a.mvc.View.prototype.constructor.call(this, b)\n            },\n            updateAttrs: function(b) {\n                a.util.setAttributesBySelector(this.$el, b)\n            },\n            bindEvents: function() {},\n            validateReferences: function() {\n                var a = this.references || [],\n                    c = [];\n                return b.each(a, function(a) {\n                    b.isUndefined(this.availableReferences[a]) && c.push(a)\n                }, this), c\n            },\n            getReference: function(a) {\n                return this.availableReferences[a]\n            },\n            getReferences: function() {\n                return this.availableReferences\n            }\n        }, {\n            create: function(c, d) {\n                var e = b.camelCase(b.isString(c) ? c : c.type);\n                if (!b.isFunction(a.ui.widgets[e])) throw new Error('Widget: unable to find widget: \"' + e + '\"');\n                var f = new a.ui.widgets[e](c, d),\n                    g = f.validateReferences(d);\n                if (g.length > 0) throw new Error('Widget: \"' + e + '\" missing dependency: ' + g.join(\", \"));\n                return f.render(), f.updateAttrs(c.attrs), f.bindEvents(), f.$el.attr(\"data-type\", e), c.name && f.$el.attr(\"data-name\", c.name), f\n            }\n        }), a.ui.widgets = {\n            checkbox: a.ui.Widget.extend({\n                tagName: \"label\",\n                events: {\n                    \"change .input\": \"onChange\",\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    mouseup: \"pointerup\",\n                    touchend: \"pointerup\"\n                },\n                init: function() {\n                    b.bindAll(this, \"pointerup\")\n                },\n                render: function() {\n                    var a = this.options,\n                        b = $(\"<span/>\").text(a.label || \"\");\n                    return this.$input = $(\"<input/>\", {\n                        type: \"checkbox\",\n                        \"class\": \"input\"\n                    }).prop(\"checked\", !!a.value), this.$span = $(\"<span/>\"), this.$el.append([b, this.$input, this.$span]), this\n                },\n                onChange: function(a) {\n                    this.trigger(\"change\", !!a.target.checked, a)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.addClass(\"is-in-action\"), this.trigger(\"pointerdown\", b), $(document).on(\"mouseup.checkbox touchend.checkbox\", this.pointerup)\n                },\n                pointerup: function(b) {\n                    b = a.util.normalizeEvent(b), $(document).off(\"mouseup.checkbox touchend.checkbox\"), this.trigger(\"pointerdown\", b), this.$el.removeClass(\"is-in-action\")\n                }\n            }),\n            toggle: a.ui.Widget.extend({\n                tagName: \"label\",\n                events: {\n                    \"change input.toggle\": \"onChange\",\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    mouseup: \"pointerup\",\n                    touchend: \"pointerup\"\n                },\n                init: function() {\n                    b.bindAll(this, \"pointerup\")\n                },\n                render: function() {\n                    var a = this.options,\n                        b = $(\"<span/>\").text(a.label || \"\"),\n                        c = $(\"<span><i/></span>\"),\n                        d = $(\"<input/>\", {\n                            type: \"checkbox\",\n                            \"class\": \"toggle\"\n                        }).prop(\"checked\", !!a.value),\n                        e = $(\"<div/>\").addClass(a.type);\n                    return this.$el.append([b, e.append(d, c)]), this\n                },\n                onChange: function(a) {\n                    this.trigger(\"change\", !!a.target.checked, a)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.addClass(\"is-in-action\"), this.trigger(\"pointerdown\", b), $(document).on(\"mouseup.toggle touchend.toggle\", this.pointerup)\n                },\n                pointerup: function(b) {\n                    b = a.util.normalizeEvent(b), $(document).off(\"mouseup.toggle touchend.toggle\"), this.$el.removeClass(\"is-in-action\"), this.trigger(\"pointerup\", b)\n                }\n            }),\n            separator: a.ui.Widget.extend({\n                render: function() {\n                    return this.options.width && this.$el.css({\n                        width: this.options.width\n                    }), this\n                }\n            }),\n            label: a.ui.Widget.extend({\n                tagName: \"label\",\n                render: function() {\n                    return this.$el.text(this.options.text), this\n                }\n            }),\n            range: a.ui.Widget.extend({\n                events: {\n                    \"change .input\": \"onChange\",\n                    \"input .input\": \"onChange\"\n                },\n                render: function() {\n                    var a, b = this.options;\n                    return this.$output = $(\"<output/>\").text(b.value), a = $(\"<span/>\").addClass(\"units\").text(b.unit), this.$input = $(\"<input/>\", {\n                        type: \"range\",\n                        name: b.type,\n                        min: b.min,\n                        max: b.max,\n                        step: b.step,\n                        \"class\": \"input\"\n                    }).val(b.value), this.$el.append([this.$input, this.$output, a]), this\n                },\n                onChange: function(a) {\n                    var b = parseInt(this.$input.val(), 10);\n                    b !== this.currentValue && (this.currentValue = b, this.$output.text(b), this.trigger(\"change\", b, a))\n                },\n                setValue: function(a) {\n                    this.$input.val(a), this.$input.trigger(\"change\")\n                }\n            }),\n            selectBox: a.ui.Widget.extend({\n                render: function() {\n                    var c = b.omit(this.options, \"type\", \"group\", \"index\");\n                    return this.selectBox = new a.ui.SelectBox(c), this.selectBox.render().$el.appendTo(this.el), this\n                },\n                bindEvents: function() {\n                    this.selectBox.on(\"all\", this.trigger, this)\n                }\n            }),\n            button: a.ui.Widget.extend({\n                events: {\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    click: \"pointerclick\",\n                    touchend: \"pointerclick\"\n                },\n                tagName: \"button\",\n                render: function() {\n                    var a = this.options;\n                    return this.$el.text(a.text), this\n                },\n                pointerclick: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerclick\", b)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerdown\", b)\n                }\n            }),\n            inputText: a.ui.Widget.extend({\n                events: {\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    mouseup: \"pointerup\",\n                    touchend: \"pointerup\",\n                    click: \"pointerclick\",\n                    focusin: \"pointerfocusin\",\n                    focusout: \"pointerfocusout\"\n                },\n                tagName: \"div\",\n                render: function() {\n                    var a = this.options;\n                    return this.$label = $(\"<label/>\").text(a.label), this.$input = $(\"<div/>\").addClass(\"input-wrapper\").append($(\"<input/>\", {\n                        type: \"text\",\n                        \"class\": \"input\"\n                    }).val(a.value)), this.$el.append([this.$label, this.$input]), this\n                },\n                pointerclick: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerclick\", b)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerdown\", b)\n                },\n                pointerup: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerup\", b)\n                },\n                pointerfocusin: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.addClass(\"is-focused\"), this.trigger(\"pointerfocusin\", b)\n                },\n                pointerfocusout: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.removeClass(\"is-focused\"), this.trigger(\"pointerfocusout\", b)\n                }\n            }),\n            inputNumber: a.ui.Widget.extend({\n                events: {\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    mouseup: \"pointerup\",\n                    touchend: \"pointerup\",\n                    click: \"pointerclick\",\n                    focusin: \"pointerfocusin\",\n                    focusout: \"pointerfocusout\"\n                },\n                tagName: \"div\",\n                render: function() {\n                    var a = this.options;\n                    return this.$label = $(\"<label/>\").text(a.label), this.$input = $(\"<div/>\").addClass(\"input-wrapper\").append($(\"<input/>\", {\n                        type: \"number\",\n                        \"class\": \"number\",\n                        max: a.max,\n                        min: a.min\n                    }).val(a.value)), this.$el.append([this.$label, this.$input]), this\n                },\n                pointerclick: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerclick\", b)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerdown\", b)\n                },\n                pointerup: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerup\", b)\n                },\n                pointerfocusin: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.addClass(\"is-focused\"), this.trigger(\"pointerfocusin\", b)\n                },\n                pointerfocusout: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.removeClass(\"is-focused\"), this.trigger(\"pointerfocusout\", b)\n                }\n            }),\n            textarea: a.ui.Widget.extend({\n                events: {\n                    mousedown: \"pointerdown\",\n                    touchstart: \"pointerdown\",\n                    mouseup: \"pointerup\",\n                    touchend: \"pointerup\",\n                    click: \"pointerclick\",\n                    focusin: \"pointerfocusin\",\n                    focusout: \"pointerfocusout\"\n                },\n                tagName: \"div\",\n                render: function() {\n                    var a = this.options;\n                    return this.$label = $(\"<label/>\").text(a.label), this.$input = $(\"<div/>\").addClass(\"input-wrapper\").append($(\"<textarea/>\", {\n                        \"class\": \"textarea\"\n                    }).text(a.value)), this.$el.append([this.$label, this.$input]), this\n                },\n                pointerclick: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerclick\", b)\n                },\n                pointerdown: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerdown\", b)\n                },\n                pointerup: function(b) {\n                    b = a.util.normalizeEvent(b), this.trigger(\"pointerup\", b)\n                },\n                pointerfocusin: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.addClass(\"is-focused\"), this.trigger(\"pointerfocusin\", b)\n                },\n                pointerfocusout: function(b) {\n                    b = a.util.normalizeEvent(b), this.$el.removeClass(\"is-focused\"), this.trigger(\"pointerfocusout\", b)\n                }\n            }),\n            selectButtonGroup: a.ui.Widget.extend({\n                render: function() {\n                    var c = b.omit(this.options, \"type\", \"group\", \"index\");\n                    return this.selectButtonGroup = new a.ui.SelectButtonGroup(c), this.selectButtonGroup.render().$el.appendTo(this.el), this\n                },\n                bindEvents: function() {\n                    this.selectButtonGroup.on(\"all\", this.trigger, this)\n                }\n            })\n        }, a.ui.widgets.zoomIn = a.ui.widgets.button.extend({\n            references: [\"paperScroller\"],\n            options: {\n                min: .2,\n                max: 5,\n                step: .2\n            },\n            pointerdown: function(b) {\n                var c = this.options;\n                this.getReferences().paperScroller.zoom(c.step, {\n                    max: c.max,\n                    grid: c.step\n                }), a.ui.widgets.button.prototype.pointerdown.call(this, b)\n            }\n        }), a.ui.widgets.zoomOut = a.ui.widgets.button.extend({\n            references: [\"paperScroller\"],\n            options: {\n                min: .2,\n                max: 5,\n                step: .2\n            },\n            pointerdown: function(b) {\n                var c = this.options;\n                this.getReferences().paperScroller.zoom(-c.step, {\n                    min: c.min,\n                    grid: c.step\n                }), a.ui.widgets.button.prototype.pointerdown.call(this, b)\n            }\n        }), a.ui.widgets.zoomToFit = a.ui.widgets.button.extend({\n            references: [\"paperScroller\"],\n            options: {\n                min: .2,\n                max: 5,\n                step: .2\n            },\n            pointerdown: function(b) {\n                var c = this.options;\n                this.getReferences().paperScroller.zoomToFit({\n                    padding: 20,\n                    scaleGrid: c.step,\n                    minScale: c.min,\n                    maxScale: c.max\n                }), a.ui.widgets.button.prototype.pointerdown.call(this, b)\n            }\n        }), a.ui.widgets.zoomSlider = a.ui.widgets.range.extend({\n            references: [\"paperScroller\"],\n            options: {\n                min: 20,\n                max: 500,\n                step: 20,\n                value: 100,\n                unit: \" %\"\n            },\n            bindEvents: function() {\n                this.on(\"change\", function(a) {\n                    this.getReferences().paperScroller.zoom(a / 100, {\n                        absolute: !0,\n                        grid: this.options.step / 100\n                    })\n                }, this), this.getReferences().paperScroller.options.paper.on(\"scale\", function(a) {\n                    this.setValue(Math.floor(100 * a))\n                }, this)\n            }\n        }), a.ui.widgets.undo = a.ui.widgets.button.extend({\n            references: [\"commandManager\"],\n            pointerclick: function() {\n                this.getReferences().commandManager.undo()\n            }\n        }), a.ui.widgets.redo = a.ui.widgets.button.extend({\n            references: [\"commandManager\"],\n            pointerclick: function() {\n                this.getReferences().commandManager.redo()\n            }\n        })\n    }(joint, _);\n    ! function(a, b) {\n        var c = {\n            options: function() {\n                return {\n                    columnWidth: this.options.width / 2 - 10,\n                    columns: 2,\n                    rowHeight: 80,\n                    resizeToFit: !0,\n                    dy: 10,\n                    dx: 10\n                }\n            },\n            layoutGroup: function(c, d) {\n                var e = this.options.layout;\n                if (d = d || {}, !a.layout.GridLayout) throw new Error(\"joint.ui.Stencil: joint.layout.GridLayout is not available.\");\n                a.layout.GridLayout.layout(c, b.extend({}, e, d.layout))\n            }\n        };\n        a.ui.Stencil = a.mvc.View.extend({\n            className: \"stencil\",\n            events: {\n                \"click .btn-expand\": \"openGroups\",\n                \"click .btn-collapse\": \"closeGroups\",\n                \"click .groups-toggle .group-label\": \"openGroups\",\n                \"click .group-label\": \"onGroupLabelClick\",\n                \"touchstart .group-label\": \"onGroupLabelClick\",\n                \"input .search\": \"onSearch\",\n                \"focusin .search\": \"pointerFocusIn\",\n                \"focusout .search\": \"pointerFocusOut\"\n            },\n            options: {\n                width: 200,\n                height: 800,\n                label: \"Stencil\",\n                groups: null,\n                groupsToggleButtons: !1,\n                dropAnimation: !1,\n                search: null,\n                layout: null,\n                snaplines: null,\n                scaleClones: !1,\n                dragStartClone: function(a) {\n                    return a.clone()\n                },\n                dragEndClone: function(a) {\n                    return a.clone()\n                },\n                layoutGroup: null\n            },\n            init: function() {\n                this.setPaper(this.options.paperScroller || this.options.paper), this.graphs = {}, this.papers = {}, this.$groups = {}, b.bindAll(this, \"onDrag\", \"onDragEnd\", \"onDropEnd\"), $(document.body).on(\"mousemove.stencil touchmove.stencil\", this.onDrag), $(window).on(\"mouseup.stencil touchend.stencil\", this.onDragEnd), this.onSearch = b.debounce(this.onSearch, 200), this.initializeLayout()\n            },\n            initializeLayout: function() {\n                var a = this.options.layout;\n                a && (b.isFunction(a) ? this.layoutGroup = a : (this.layoutGroup = b.bind(c.layoutGroup, this), this.options.layout = b.isObject(a) ? a : {}, b.defaults(this.options.layout, c.options.call(this))))\n            },\n            setPaper: function(b) {\n                var c = this.options;\n                if (b instanceof a.dia.Paper) c.paperScroller = null, c.paper = b, c.graph = b.model;\n                else {\n                    if (!(\"function\" == typeof a.ui.PaperScroller && b instanceof a.ui.PaperScroller)) throw new Error(\"Stencil: paper required\");\n                    c.paperScroller = b, c.paper = b.options.paper, c.graph = b.options.paper.model\n                }\n            },\n            renderContent: function() {\n                return $(\"<div/>\").addClass(\"content\")\n            },\n            renderPaperDrag: function() {\n                return $(\"<div/>\").addClass(\"stencil-paper-drag\")\n            },\n            renderSearch: function() {\n                return $(\"<div/>\").addClass(\"search-wrap\").append($(\"<input/>\", {\n                    type: \"search\",\n                    placeholder: \"search\"\n                }).addClass(\"search\"))\n            },\n            renderToggleAll: function() {\n                return [$(\"<div/>\").addClass(\"groups-toggle\").append($(\"<label/>\").addClass(\"group-label\").html(this.options.label)).append($(\"<button/>\", {\n                    text: \"+\"\n                }).addClass(\"btn btn-expand\")).append($(\"<button/>\", {\n                    text: \"-\"\n                }).addClass(\"btn btn-collapse\"))]\n            },\n            renderElementsContainer: function() {\n                return $(\"<div/>\").addClass(\"elements\")\n            },\n            renderGroup: function(a) {\n                a = a || {};\n                var b = $(\"<div/>\").addClass(\"group\").attr(\"data-name\", a.name).toggleClass(\"closed\", !!a.closed),\n                    c = $(\"<h3/>\").addClass(\"group-label\").html(a.label || a.name),\n                    d = this.renderElementsContainer();\n                return b.append(c, d)\n            },\n            render: function() {\n                this.$content = this.renderContent(), this.$paperDrag = this.renderPaperDrag(), this.$el.empty().append(this.$paperDrag, this.$content), this.options.search && this.$el.addClass(\"searchable\").prepend(this.renderSearch()), this.options.groupsToggleButtons && this.$el.addClass(\"collapsible\").prepend(this.renderToggleAll());\n                var c = {\n                    width: this.options.width,\n                    height: this.options.height,\n                    interactive: !1\n                };\n                if (this.options.groups) {\n                    var d = b.sortBy(b.pairs(this.options.groups), function(a) {\n                        return a[1].index\n                    });\n                    b.each(d, function(d) {\n                        var e = d[0],\n                            f = d[1],\n                            g = this.$groups[e] = this.renderGroup({\n                                name: e,\n                                label: f.label,\n                                closed: f.closed\n                            }).appendTo(this.$content),\n                            h = new a.dia.Graph,\n                            i = new a.dia.Paper(b.extend({}, c, {\n                                el: g.find(\".elements\"),\n                                model: h,\n                                width: f.width || c.width,\n                                height: f.height || c.height\n                            }));\n                        this.graphs[e] = h, this.papers[e] = i\n                    }, this)\n                } else {\n                    var e = this.renderElementsContainer().appendTo(this.$content),\n                        f = new a.dia.Graph,\n                        g = new a.dia.Paper(b.extend(c, {\n                            el: e,\n                            model: f\n                        }));\n                    this.graphs.__default__ = f, this.papers.__default__ = g\n                }\n                return this._graphDrag = new a.dia.Graph, this._paperDrag = new a.dia.Paper({\n                    el: this.$paperDrag,\n                    width: 1,\n                    height: 1,\n                    model: this._graphDrag\n                }), this.startListening(), this\n            },\n            startListening: function() {\n                this.stopListening(), b.each(this.papers, b.bind(this.listenTo, this, b, \"cell:pointerdown\", this.onDragStart))\n            },\n            load: function(a, c) {\n                b.isArray(a) ? this.loadGroup(a, c) : b.isObject(a) && b.each(this.options.groups, function(b, c) {\n                    a[c] && this.loadGroup(a[c], c)\n                }, this)\n            },\n            loadGroup: function(a, b) {\n                var c = this.getGraph(b);\n                c.resetCells(a);\n                var d = this.options.height;\n                b && (d = this.getGroup(b).height), this.isLayoutEnabled() && this.layoutGroup(c, this.getGroup(b)), d || this.getPaper(b).fitToContent({\n                    gridWidth: 1,\n                    gridHeight: 1,\n                    padding: this.options.paperPadding || 10\n                })\n            },\n            isLayoutEnabled: function() {\n                return !!this.options.layout\n            },\n            getGraph: function(a) {\n                var b = this.graphs[a || \"__default__\"];\n                if (!b) throw new Error(\"Stencil: group \" + a + \" does not exist.\");\n                return b\n            },\n            getPaper: function(a) {\n                return this.papers[a || \"__default__\"]\n            },\n            preparePaperForDragging: function(a, b, c) {\n                var d = this._paperDrag,\n                    e = this._graphDrag;\n                d.$el.addClass(\"dragging\").appendTo(document.body);\n                var f = this.options.dragStartClone(a.model).position(0, 0),\n                    g = f.getBBox(),\n                    h = 5,\n                    i = this.options.snaplines;\n                if (i && (h += i.options.distance), i || this.options.scaleClones) {\n                    var j = this.options.paper.scale();\n                    d.scale(j.sx, j.sy), h *= Math.max(j.sx, j.sy)\n                } else d.scale(1, 1);\n                this.clearClone(), this.options.dropAnimation && this._paperDrag.$el.stop(!0, !0), e.resetCells([f.position(0, 0)]);\n                var k = f.findView(d);\n                k.stopListening(), d.fitToContent({\n                    padding: h,\n                    allowNewOrigin: \"any\"\n                });\n                var l = a.getBBox(),\n                    m = a.model.getBBox();\n                this._cellViewDeltaOrigin = {\n                    x: m.x - l.x - l.width / 2,\n                    y: m.y - l.y - l.height / 2\n                }, this._clone = f, this._cloneBBox = g, this._cloneView = k, this._cloneViewBBox = k.getBBox(), this._paperDragInitialOffset = this.setPaperDragOffset(b, c), this._paperDragPadding = h\n            },\n            setPaperDragOffset: function(a, b) {\n                var c = document.body.scrollTop || document.documentElement.scrollTop,\n                    d = this._cloneViewBBox,\n                    e = this._paperDragPadding,\n                    f = {\n                        left: a - d.width / 2 - e,\n                        top: b - d.height / 2 + c - e\n                    };\n                return this._paperDrag.$el.offset(f), f\n            },\n            setCloneLocalPosition: function(a, b) {\n                var c = this.options.paper.clientToLocalPoint({\n                    x: a,\n                    y: b\n                });\n                return c.x -= this._cloneBBox.width / 2, c.y -= this._cloneBBox.height / 2, this._clone.set(\"position\", c), c\n            },\n            onDragStart: function(a, c) {\n                c.preventDefault(), this.options.graph.startBatch(\"stencil-drag\"), this.$el.addClass(\"dragging\"), this.preparePaperForDragging(a, c.clientX, c.clientY);\n                var d = this.setCloneLocalPosition(c.clientX, c.clientY),\n                    e = this._cloneView,\n                    f = this.options.snaplines;\n                f && (f.captureCursorOffset(this._cloneView, c, d.x, d.y), e.listenTo(this._clone, \"change:position\", b.bind(this.onCloneSnapped, this)))\n            },\n            onCloneSnapped: function(a, b, c) {\n                if (c.snapped) {\n                    var d = this._cloneBBox;\n                    a.position(d.x + c.tx, d.y + c.ty, {\n                        silent: !0\n                    }), this._cloneView.translate(), a.set(\"position\", b, {\n                        silent: !0\n                    }), this._cloneSnapOffset = {\n                        x: c.tx,\n                        y: c.ty\n                    }\n                } else this._cloneSnapOffset = null\n            },\n            onDrag: function(b) {\n                var c = this._cloneView;\n                if (c) {\n                    b.preventDefault(), b = a.util.normalizeEvent(b);\n                    var d = b.clientX,\n                        e = b.clientY;\n                    this.setPaperDragOffset(d, e);\n                    var f = this.setCloneLocalPosition(d, e),\n                        g = this.options.paper.options.embeddingMode,\n                        h = this.options.snaplines,\n                        i = (g || h) && this.insideValidArea({\n                            x: d,\n                            y: e\n                        });\n                    g && (i ? c.processEmbedding({\n                        paper: this.options.paper\n                    }) : c.clearEmbedding()), h && (i ? h.snapWhileMoving(c, b, f.x, f.y) : h.hide())\n                }\n            },\n            onDragEnd: function(b) {\n                var c = this._clone;\n                if (c) {\n                    b = a.util.normalizeEvent(b);\n                    var d = this._cloneView,\n                        e = this._cloneBBox,\n                        f = this._cloneSnapOffset,\n                        g = e.x,\n                        h = e.y;\n                    f && (g += f.x, h += f.y), c.position(g, h, {\n                        silent: !0\n                    });\n                    var i = this.options.dragEndClone(c),\n                        j = this.drop(b, i);\n                    j ? this.onDropEnd(c) : this.onDropInvalid(b, i), this.options.paper.options.embeddingMode && d && d.finalizeEmbedding({\n                        model: i,\n                        paper: this.options.paper\n                    }), this.options.graph.stopBatch(\"stencil-drag\")\n                }\n            },\n            onDropEnd: function(a) {\n                this._clone === a && (this.clearClone(), this.$el.append(this._paperDrag.$el), this.$el.removeClass(\"dragging\"), this._paperDrag.$el.removeClass(\"dragging\"))\n            },\n            clearClone: function() {\n                this._clone && (this._clone.remove(), this._clone = null, this._cloneView = null, this._cloneSnapOffset = null, this._paperDragInitialOffset = null, this._paperDragPadding = null)\n            },\n            onDropInvalid: function(c, d) {\n                var e = this._clone;\n                if (e) {\n                    c = a.util.normalizeEvent(c), d = d || this.options.dragEndClone(e), this.trigger(\"drop:invalid\", c, d);\n                    var f = this.options.dropAnimation;\n                    if (f) {\n                        var g = b.isObject(f) ? f.duration : 150,\n                            h = b.isObject(f) ? f.easing : \"swing\";\n                        this._cloneView = null, this._paperDrag.$el.animate(this._paperDragInitialOffset, g, h, b.partial(this.onDropEnd, e))\n                    } else this.onDropEnd(e)\n                }\n            },\n            insideValidArea: function(a) {\n                var b, c = this.options.paper,\n                    d = this.options.paperScroller,\n                    e = this.getDropArea(this.$el);\n                if (d)\n                    if (d.options.autoResizePaper) b = this.getDropArea(d.$el);\n                    else {\n                        var f = this.getDropArea(d.$el),\n                            g = this.getDropArea(c.$el);\n                        b = g.intersect(f)\n                    }\n                else b = this.getDropArea(c.$el);\n                return !(!b || !b.containsPoint(a) || e.containsPoint(a))\n            },\n            getDropArea: function(a) {\n                var b = a.offset(),\n                    c = document.body.scrollTop || document.documentElement.scrollTop,\n                    d = document.body.scrollLeft || document.documentElement.scrollLeft;\n                return g.rect({\n                    x: b.left + parseInt(a.css(\"border-left-width\"), 10) - d,\n                    y: b.top + parseInt(a.css(\"border-top-width\"), 10) - c,\n                    width: a.innerWidth(),\n                    height: a.innerHeight()\n                })\n            },\n            drop: function(a, b) {\n                var c = this.options.paper,\n                    d = this.options.graph,\n                    e = {\n                        x: a.clientX,\n                        y: a.clientY\n                    };\n                if (this.insideValidArea(e)) {\n                    var f = c.clientToLocalPoint(e),\n                        h = b.getBBox();\n                    f.x += h.x + this._cellViewDeltaOrigin.x, f.y += h.y + this._cellViewDeltaOrigin.y;\n                    var i = this._cloneSnapOffset ? 1 : c.options.gridSize;\n                    return b.set(\"position\", {\n                        x: g.snapToGrid(f.x, i),\n                        y: g.snapToGrid(f.y, i)\n                    }), b.unset(\"z\"), d.addCell(b, {\n                        stencil: this.cid\n                    }), !0\n                }\n                return !1\n            },\n            filter: function(c, d) {\n                var e = c.toLowerCase() == c,\n                    f = b.reduce(this.papers, function(f, g, h) {\n                        var i = g.model.get(\"cells\").filter(function(f) {\n                                var h = g.findViewByModel(f),\n                                    i = !c || b.some(d, function(d, g) {\n                                        if (\"*\" != g && f.get(\"type\") != g) return !1;\n                                        var h = b.some(d, function(d) {\n                                            var g = a.util.getByPath(f.attributes, d, \"/\");\n                                            return !b.isUndefined(g) && !b.isNull(g) && (g = g.toString(), e && (g = g.toLowerCase()), g.indexOf(c) >= 0)\n                                        });\n                                        return h\n                                    });\n                                return V(h.el).toggleClass(\"unmatched\", !i), i\n                            }, this),\n                            j = !b.isEmpty(i),\n                            k = (new a.dia.Graph).resetCells(i);\n                        return this.trigger(\"filter\", k, h, c), this.isLayoutEnabled() && this.layoutGroup(k, this.getGroup(h)), this.$groups[h] && this.$groups[h].toggleClass(\"unmatched\", !j), g.fitToContent({\n                            gridWidth: 1,\n                            gridHeight: 1,\n                            padding: this.options.paperPadding || 10\n                        }), f || j\n                    }, !1, this);\n                this.$el.toggleClass(\"not-found\", !f)\n            },\n            getGroup: function(a) {\n                return this.options.groups && this.options.groups[a] || {}\n            },\n            onSearch: function(a) {\n                this.filter(a.target.value, this.options.search)\n            },\n            pointerFocusIn: function() {\n                this.$el.addClass(\"is-focused\")\n            },\n            pointerFocusOut: function() {\n                this.$el.removeClass(\"is-focused\")\n            },\n            onGroupLabelClick: function(a) {\n                a.preventDefault();\n                var b = $(a.target).closest(\".group\");\n                this.toggleGroup(b.data(\"name\"))\n            },\n            toggleGroup: function(a) {\n                this.$('.group[data-name=\"' + a + '\"]').toggleClass(\"closed\")\n            },\n            closeGroup: function(a) {\n                this.$('.group[data-name=\"' + a + '\"]').addClass(\"closed\")\n            },\n            openGroup: function(a) {\n                this.$('.group[data-name=\"' + a + '\"]').removeClass(\"closed\")\n            },\n            isGroupOpen: function(a) {\n                return !this.$('.group[data-name=\"' + a + '\"]').hasClass(\"closed\")\n            },\n            closeGroups: function() {\n                this.$(\".group\").addClass(\"closed\")\n            },\n            openGroups: function() {\n                this.$(\".group\").removeClass(\"closed\")\n            },\n            onRemove: function() {\n                b.invoke(this.papers, \"remove\"), this.papers = {}, this._paperDrag && (this._paperDrag.remove(), this._paperDrag = null), $(document.body).off(\".stencil\", this.onDrag).off(\".stencil\", this.onDragEnd), $(window).off(\".stencil\", this.onDragEnd)\n            }\n        })\n    }(joint, _);\n    ! function(a) {\n        \"use strict\";\n        a.ui.Inspector = a.mvc.View.extend({\n            className: \"inspector\",\n            options: {\n                cellView: void 0,\n                cell: void 0,\n                live: !0,\n                validateInput: function(a, b, c) {\n                    return !a.validity || a.validity.valid\n                },\n                renderFieldContent: void 0,\n                operators: {},\n                multiOpenGroups: !0,\n                stateKey: function(a) {\n                    return a.id\n                }\n            },\n            events: {\n                \"change [data-attribute]:not([data-custom-field])\": \"onChangeInput\",\n                \"click .group-label\": \"onGroupLabelClick\",\n                \"click .btn-list-add\": \"addListItem\",\n                \"click .btn-list-del\": \"deleteListItem\",\n                mousedown: \"pointerdown\",\n                touchstart: \"pointerdown\",\n                mouseup: \"pointerup\",\n                touchend: \"pointerup\",\n                focusin: \"pointerfocusin\",\n                focusout: \"pointerfocusout\"\n            },\n            HTMLEntities: {\n                lt: \"<\",\n                gt: \">\",\n                amp: \"&\",\n                nbsp: \" \",\n                quot: '\"',\n                cent: \"¢\",\n                pound: \"£\",\n                euro: \"€\",\n                yen: \"¥\",\n                copy: \"©\",\n                reg: \"®\"\n            },\n            init: function() {\n                this.options.groups = this.options.groups || {}, _.bindAll(this, \"stopBatchCommand\", \"pointerup\", \"onContentEditableBlur\", \"replaceHTMLEntity\"), $(document).on(\"mouseup\", this.stopBatchCommand), this.widgets = [], this.flatAttributes = a.util.flattenObject(this.options.inputs, \"/\", function(a) {\n                    return a.type\n                }), this._when = {}, this._bound = {};\n                var b = _.map(this.flatAttributes, function(a, b) {\n                    if (a.when) {\n                        var c = {\n                            expression: a.when,\n                            path: b\n                        };\n                        _.each(this.extractExpressionPaths(c.expression), function(a) {\n                            (this._when[a] || (this._when[a] = [])).push(c)\n                        }, this)\n                    }\n                    return \"select\" == a.type && _.isString(a.options) && (this._bound[b] = a.options), a.path = b, a\n                }, this);\n                this.groupedFlatAttributes = _.sortBy(_.sortBy(b, \"index\"), function(a) {\n                    var b = this.options.groups[a.group];\n                    return b && b.index || Number.MAX_VALUE\n                }, this), this.on(\"render\", function() {\n                    var a = {};\n                    _.each(this.$(\"[data-attribute]\"), function(b) {\n                        var c = $(b),\n                            d = c.attr(\"data-attribute\");\n                        a[d] = c\n                    }, this), this._byPath = a, this._attributeKeysInUse = this.getAttributeKeysInUse(), _.each(this.$groups, function(a) {\n                        var b = $(a),\n                            c = 0 === b.find(\"> .field:not(.hidden)\").length;\n                        b.toggleClass(\"empty\", c)\n                    })\n                }, this), this.listenTo(this.getModel(), \"all\", this.onCellChange, this)\n            },\n            getModel: function() {\n                return this.options.cell || this.options.cellView.model\n            },\n            onCellChange: function(a, b, c, d) {\n                if (d = d || {}, d.inspector != this.cid) switch (a) {\n                    case \"remove\":\n                        this.remove();\n                        break;\n                    case \"change:position\":\n                        this.updateInputPosition();\n                        break;\n                    case \"change:size\":\n                        this.updateInputSize();\n                        break;\n                    case \"change:angle\":\n                        this.updateInputAngle();\n                        break;\n                    case \"change:source\":\n                    case \"change:target\":\n                    case \"change:vertices\":\n                        break;\n                    default:\n                        var e = \"change:\";\n                        if (a.slice(0, e.length) === e) {\n                            var f = a.slice(e.length);\n                            _.contains(this._attributeKeysInUse, f) && this.render()\n                        }\n                }\n            },\n            render: function() {\n                this.$el.empty(), this.removeWidgets();\n                var a, b, c = [];\n                return _.each(this.groupedFlatAttributes, function(d) {\n                    if (a !== d.group) {\n                        var e = this.options.groups[d.group];\n                        b = this.renderGroup({\n                            name: d.group,\n                            label: e && e.label\n                        }), e && e.closed ? this.closeGroup(b, {\n                            init: !0\n                        }) : this.openGroup(b, {\n                            init: !0\n                        }), c.push(b)\n                    }\n                    this.renderTemplate(b, d, d.path), a = d.group\n                }, this), this.$groups = c, this.$el.append(c), this.trigger(\"render\"), this\n            },\n            getAttributeKeysInUse: function() {\n                var a = _.map(this._byPath, function(a, b) {\n                        return b.substring(0, b.indexOf(\"/\")) || b\n                    }),\n                    b = _.values(this._bound),\n                    c = _.keys(this._when);\n                return _.uniq([].concat(a, b, c))\n            },\n            getCellAttributeValue: function(b, c) {\n                var d = this.getModel(),\n                    e = a.util.getByPath(d.attributes, b, \"/\");\n                if (c = c || this.flatAttributes[b], !c) return e;\n                if (_.isUndefined(e) && !_.isUndefined(c.defaultValue) && (e = c.defaultValue), c.valueRegExp) {\n                    if (_.isUndefined(e)) throw new Error(\"Inspector: defaultValue must be present when valueRegExp is used.\");\n                    var f = e.match(new RegExp(c.valueRegExp));\n                    e = f && f[2]\n                }\n                return e\n            },\n            resolveBindings: function(b) {\n                switch (b.type) {\n                    case \"select\":\n                        var c = b.options || [];\n                        _.isString(c) && (c = a.util.getByPath(this.getModel().attributes, c, \"/\") || []), _.isObject(c[0]) || (c = _.map(c, function(a) {\n                            return {\n                                value: a,\n                                content: a\n                            }\n                        })), b.items = c\n                }\n            },\n            updateBindings: function(a) {\n                var b = _.reduce(this._bound, function(b, c, d) {\n                    return 0 == a.indexOf(c) && b.push(d), b\n                }, []);\n                _.isEmpty(b) || (_.each(b, function(a) {\n                    this.renderTemplate(null, this.flatAttributes[a], a, {\n                        replace: !0\n                    })\n                }, this), this.trigger(\"render\"))\n            },\n            renderFieldContent: function(b, c, d) {\n                var e;\n                if (_.isFunction(this.options.renderFieldContent) && (e = this.options.renderFieldContent(b, c, d))) return $(e).attr({\n                    \"data-attribute\": c,\n                    \"data-type\": b.type,\n                    \"data-custom-field\": !0\n                });\n                var f, g, h, i;\n                switch (b.type) {\n                    case \"select-box\":\n                        g = _.findIndex(b.options, function(a) {\n                            return !(!_.isUndefined(a.value) || a.content !== d) || !!_.isEqual(a.value, d)\n                        });\n                        var j = _.extend({}, _.omit(b, \"type\", \"group\", \"index\", \"selectBoxOptionsClass\"), {\n                            selected: g,\n                            selectBoxOptionsClass: _.compact([a.util.addClassNamePrefix(\"inspector-select-box-options\"), b.selectBoxOptionsClass]).join(\" \")\n                        });\n                        f = new a.ui.SelectBox(j), f.$el.attr({\n                            \"data-attribute\": c,\n                            \"data-type\": b.type\n                        }), f.render(), i = $(\"<label/>\", {\n                            html: b.label || c\n                        }), e = $(\"<div/>\").append(i, f.el), b.previewMode ? (h = f.selection, f.on(\"options:mouseout close\", function() {\n                            f.selection = h, this.processInput(f.$el, {\n                                previewCancel: !0,\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:hover\", function(a, b) {\n                            f.selection = a, this.processInput(f.$el, {\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:select\", function(a, b) {\n                            var c = _.isUndefined(h) ? void 0 : f.getSelectionValue(h),\n                                d = f.getSelectionValue(a),\n                                e = c === d;\n                            this.processInput(f.$el, {\n                                previewDone: !0,\n                                dry: e,\n                                originalValue: c\n                            }), h = a\n                        }, this)) : f.on(\"option:select\", function(a, b) {\n                            this.processInput(f.$el)\n                        }, this), this.widgets.push(f);\n                        break;\n                    case \"color-palette\":\n                        g = _.findIndex(b.options, function(a) {\n                            return a.value === d || !(!_.isUndefined(a.value) || a.content !== d)\n                        }), f = new a.ui.ColorPalette(_.extend({}, _.omit(b, \"type\", \"group\", \"index\"), {\n                            selected: g\n                        })), f.$el.attr({\n                            \"data-attribute\": c,\n                            \"data-type\": b.type\n                        }), f.render(), i = $(\"<label/>\", {\n                            html: b.label || c\n                        }), e = $(\"<div/>\").append(i, f.el), b.previewMode ? (h = f.selection, f.on(\"options:mouseout close\", function() {\n                            f.selection = h, this.processInput(f.$el, {\n                                previewCancel: !0,\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:hover\", function(a, b) {\n                            f.selection = a, this.processInput(f.$el, {\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:select\", function(a, b) {\n                            var c = _.isUndefined(h) ? void 0 : f.getSelectionValue(h),\n                                d = f.getSelectionValue(a),\n                                e = c === d;\n                            this.processInput(f.$el, {\n                                previewDone: !0,\n                                dry: e,\n                                originalValue: c\n                            }), h = a\n                        }, this)) : f.on(\"option:select\", function(a, b) {\n                            this.processInput(f.$el)\n                        }, this), this.widgets.push(f);\n                        break;\n                    case \"select-button-group\":\n                        b.multi ? (g = [], _.each(b.options, function(a, b) {\n                            var c = _.isUndefined(a.value) ? a.content : a.value,\n                                e = _.find(d, function(a) {\n                                    return _.isEqual(c, a)\n                                });\n                            e && g.push(b)\n                        })) : g = _.findIndex(b.options, function(a) {\n                            return !!_.isEqual(a.value, d) || !(!_.isUndefined(a.value) || a.content !== d)\n                        }), f = new a.ui.SelectButtonGroup(_.extend({}, _.omit(b, \"type\", \"group\", \"index\"), {\n                            selected: g\n                        })), f.$el.attr({\n                            \"data-attribute\": c,\n                            \"data-type\": b.type\n                        }), f.render(), i = $(\"<label/>\", {\n                            html: b.label || c\n                        }), e = $(\"<div/>\").append(i, f.el), b.previewMode ? (h = f.selection, f.on(\"mouseout\", function() {\n                            f.selection = h, this.processInput(f.$el, {\n                                previewCancel: !0,\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:hover\", function(a, c) {\n                            b.multi ? f.selection = _.uniq(f.selection.concat([a])) : f.selection = a, this.processInput(f.$el, {\n                                dry: !0\n                            })\n                        }, this), f.on(\"option:select\", function(a, b) {\n                            var c = _.isUndefined(h) ? void 0 : f.getSelectionValue(h),\n                                d = f.getSelectionValue(a),\n                                e = _.isEqual(c, d);\n                            this.processInput(f.$el, {\n                                previewDone: !0,\n                                dry: e,\n                                originalValue: c\n                            }), h = a\n                        }, this)) : f.on(\"option:select\", function(a, b) {\n                            this.processInput(f.$el)\n                        }, this), this.widgets.push(f);\n                        break;\n                    default:\n                        e = this.renderOwnFieldContent({\n                            options: b,\n                            type: b.type,\n                            label: b.label || c,\n                            attribute: c,\n                            value: d\n                        })\n                }\n                return e\n            },\n            renderGroup: function(a) {\n                a = a || {};\n                var b = $(\"<div/>\").addClass(\"group\").attr(\"data-name\", a.name),\n                    c = $(\"<h3/>\").addClass(\"group-label\").text(a.label || a.name);\n                return b.append(c)\n            },\n            renderOwnFieldContent: function(a) {\n                var b, c, d, e, f, g, h, i;\n                switch (i = $(\"<label/>\").text(a.label), a.type) {\n                    case \"number\":\n                        c = $(\"<input/>\", {\n                            type: \"number\",\n                            min: a.options.min,\n                            max: a.options.max,\n                            step: a.options.step\n                        }).val(a.value), b = [i, $(\"<div/>\").addClass(\"input-wrapper\").append(c)];\n                        break;\n                    case \"range\":\n                        i.addClass(\"with-output\"), e = $(\"<output/>\").text(a.value), f = $(\"<span/>\").addClass(\"units\").text(a.options.unit), c = $(\"<input/>\", {\n                            type: \"range\",\n                            name: a.type,\n                            min: a.options.min,\n                            max: a.options.max,\n                            step: a.options.step\n                        }).val(a.value), c.on(\"change input\", function() {\n                            e.text(c.val())\n                        }), b = [i, e, f, c];\n                        break;\n                    case \"textarea\":\n                        c = $(\"<textarea/>\").text(a.value), b = [i, $(\"<div/>\").addClass(\"input-wrapper\").append(c)];\n                        break;\n                    case \"content-editable\":\n                        var j = _.isString(a.value) ? a.value.replace(/\\n/g, \"<br>\").replace(/ /g, \"&nbsp;\") : \"\";\n                        c = $(\"<div/>\").prop(\"contenteditable\", !0).css(\"display\", \"inline-block\").html(j).on(\"blur\", this.onContentEditableBlur), b = [i, $(\"<div/>\").addClass(\"input-wrapper\").append(c)];\n                        break;\n                    case \"select\":\n                        var k = a.options.items;\n                        c = $(\"<select/>\"), a.options.multiple && c.prop({\n                            size: a.options.size || k.length,\n                            multiple: !0\n                        });\n                        var l = function(b) {\n                            return a.options.multiple ? _.find(a.value, function(a) {\n                                return _.isEqual(b, a)\n                            }) : _.isEqual(b, a.value)\n                        };\n                        _.each(k, function(a) {\n                            var b = $(\"<option/>\", {\n                                value: a.value\n                            }).text(a.content);\n                            l(a.value) && b.attr(\"selected\", \"selected\"), c.append(b)\n                        }), b = [i, c];\n                        break;\n                    case \"toggle\":\n                        g = $(\"<span><i/></span>\"), c = $(\"<input/>\", {\n                            type: \"checkbox\"\n                        }).prop(\"checked\", !!a.value), d = $(\"<div/>\").addClass(a.type), b = [i, d.append(c, g)];\n                        break;\n                    case \"color\":\n                        c = $(\"<input/>\", {\n                            type: \"color\"\n                        }).val(a.value), b = [i, c];\n                        break;\n                    case \"text\":\n                        c = $(\"<input/>\", {\n                            type: \"text\"\n                        }).val(a.value), b = [i, $(\"<div/>\").addClass(\"input-wrapper\").append(c)];\n                        break;\n                    case \"object\":\n                        c = $(\"<div/>\"), h = $(\"<div/>\").addClass(\"object-properties\"), b = [i, c.append(h)];\n                        break;\n                    case \"list\":\n                        g = $(\"<button/>\").addClass(\"btn-list-add\").text(a.options.addButtonLabel || \"+\"), h = $(\"<div/>\").addClass(\"list-items\"), c = $(\"<div/>\"), b = [i, c.append(g, h)]\n                }\n                return c && c.addClass(a.type).attr({\n                    \"data-type\": a.type,\n                    \"data-attribute\": a.attribute\n                }), $.fn.append.apply($(\"<div>\"), b).children()\n            },\n            onContentEditableBlur: function(a) {\n                var b = $(\"<input/>\", {\n                    disabled: !0,\n                    tabIndex: -1,\n                    style: {\n                        width: \"1px\",\n                        height: \"1px\",\n                        border: \"none\",\n                        margin: 0,\n                        padding: 0\n                    }\n                }).appendTo(this.$el);\n                b.focus(), b[0].setSelectionRange(0, 0), b.blur().remove(), $(a.target).trigger(\"change\")\n            },\n            replaceHTMLEntity: function(a, b) {\n                return this.HTMLEntities[b] || \"\"\n            },\n            renderObjectProperty: function(a) {\n                a = a || {};\n                var b = $(\"<div/>\", {\n                    \"data-property\": a.property,\n                    \"class\": \"object-property\"\n                });\n                return b\n            },\n            renderListItem: function(a) {\n                a = a || {};\n                var b = $(\"<button/>\").addClass(\"btn-list-del\").text(a.options.removeButtonLabel || \"-\"),\n                    c = $(\"<div/>\", {\n                        \"data-index\": a.index,\n                        \"class\": \"list-item\"\n                    });\n                return c.append(b)\n            },\n            renderFieldContainer: function(a) {\n                a = a || {};\n                var b = $(\"<div/>\", {\n                    \"data-field\": a.path,\n                    \"class\": \"field \" + a.type + \"-field\"\n                });\n                return b\n            },\n            renderTemplate: function(b, c, d, e) {\n                b = b || this.$el, e = e || {}, this.resolveBindings(c);\n                var f = this.renderFieldContainer({\n                    path: d,\n                    type: c.type\n                });\n                c.when && !this.isExpressionValid(c.when) && (f.addClass(\"hidden\"), c.when.otherwise && c.when.otherwise.unset && this.unsetProperty(d));\n                var g = this.getCellAttributeValue(d, c),\n                    h = this.renderFieldContent(c, d, g);\n                if (f.append(h), a.util.setAttributesBySelector(f, c.attrs), \"list\" === c.type) _.each(g, function(a, b) {\n                    var e = this.renderListItem({\n                        index: b,\n                        options: c\n                    });\n                    this.renderTemplate(e, c.item, d + \"/\" + b), h.children(\".list-items\").append(e)\n                }, this);\n                else if (\"object\" === c.type) {\n                    c.flatAttributes = a.util.flattenObject(c.properties, \"/\", function(a) {\n                        return a.type\n                    });\n                    var i = _.map(c.flatAttributes, function(a, b) {\n                        return a.path = b, a\n                    });\n                    i = _.sortBy(i, function(a) {\n                        return a.index\n                    }), _.each(i, function(a) {\n                        var b = this.renderObjectProperty({\n                            property: a.path\n                        });\n                        this.renderTemplate(b, a, d + \"/\" + a.path), h.children(\".object-properties\").append(b)\n                    }, this)\n                }\n                e.replace ? b.find('[data-field=\"' + d + '\"]').replaceWith(f) : b.append(f)\n            },\n            updateInputPosition: function() {\n                var a = this._byPath[\"position/x\"],\n                    b = this._byPath[\"position/y\"],\n                    c = this.getModel().get(\"position\");\n                a && a.val(c.x), b && b.val(c.y)\n            },\n            updateInputSize: function() {\n                var a = this._byPath[\"size/width\"],\n                    b = this._byPath[\"size/height\"],\n                    c = this.getModel().get(\"size\");\n                a && a.val(c.width), b && b.val(c.height)\n            },\n            updateInputAngle: function() {\n                var a = this._byPath.angle,\n                    b = this.getModel().get(\"angle\");\n                a && a.val(b)\n            },\n            validateInput: function(a, b, c) {\n                switch (a) {\n                    case \"select-box\":\n                    case \"color-palette\":\n                    case \"select-button-group\":\n                        return !0;\n                    default:\n                        return this.options.validateInput(b, c, a)\n                }\n            },\n            onChangeInput: function(a) {\n                this.processInput($(a.target))\n            },\n            processInput: function(a, b) {\n                var c = a.attr(\"data-attribute\"),\n                    d = a.attr(\"data-type\");\n                if (this.validateInput(d, a[0], c)) {\n                    this.options.live && this.updateCell(a, c, b);\n                    var e = this.getFieldValue(a[0], d),\n                        f = this.parse(d, e, a[0]);\n                    this.trigger(\"change:\" + c, f, a[0], b)\n                }\n            },\n            updateDependants: function(a) {\n                _.each(this._when[a], function(a) {\n                    var b = this._byPath[a.path],\n                        c = b.closest(\".field\"),\n                        d = c.hasClass(\"hidden\"),\n                        e = this.isExpressionValid(a.expression);\n                    c.toggleClass(\"hidden\", !e), a.expression.otherwise && a.expression.otherwise.unset && this.options.live && (e ? d && this.updateCell(b, a.path) : (this.unsetProperty(a.path), this.renderTemplate(null, this.flatAttributes[a.path], a.path, {\n                        replace: !0\n                    }), this.trigger(\"render\")))\n                }, this)\n            },\n            unsetProperty: function(b, c) {\n                var d = this.getModel(),\n                    e = b.split(\"/\"),\n                    f = _.first(e),\n                    g = e.slice(1).join(\"/\");\n                if (c = c || {}, c.inspector = this.cid, c[\"inspector_\" + this.cid] = !0, \"attrs\" == b) d.removeAttr(g, c);\n                else if (b == f) d.unset(f, c);\n                else {\n                    var h = _.merge({}, d.get(f)),\n                        i = a.util.unsetByPath(h, g, \"/\");\n                    d.set(f, i, c)\n                }\n            },\n            getOptions: function(a) {\n                if (0 !== a.length) {\n                    var b = a.attr(\"data-attribute\"),\n                        c = this.flatAttributes[b];\n                    if (!c) {\n                        var d = a.parent().closest(\"[data-attribute]\"),\n                            e = d.attr(\"data-attribute\");\n                        c = this.getOptions(d);\n                        var f = b.replace(e + \"/\", \"\"),\n                            g = c;\n                        c = g.item || g.flatAttributes[f], c.parent = g\n                    }\n                    return c\n                }\n            },\n            updateCell: function(b, c, d) {\n                var e = this.getModel(),\n                    f = {};\n                b ? f[c] = b : f = this._byPath, this.startBatchCommand();\n                var g = {},\n                    h = {};\n                _.each(f, function(b, c) {\n                    if (!b.closest(\".field\").hasClass(\"hidden\")) {\n                        var d, f, i = b.attr(\"data-type\");\n                        switch (i) {\n                            case \"list\":\n                                f = this.findParentListByPath(c), f ? (d = c.substr(f.length + 1), a.util.setByPath(g[f], d, [], \"/\")) : g[c] = [];\n                                break;\n                            case \"object\":\n                                break;\n                            default:\n                                if (!this.validateInput(i, b[0], c)) return;\n                                var j = this.getFieldValue(b[0], i),\n                                    k = this.parse(i, j, b[0]),\n                                    l = this.getOptions(b);\n                                if (l.valueRegExp) {\n                                    var m = a.util.getByPath(e.attributes, c, \"/\") || l.defaultValue;\n                                    k = m.replace(new RegExp(l.valueRegExp), \"$1\" + k + \"$3\")\n                                }\n                                if (f = this.findParentListByPath(c), f && g[f]) return d = c.substr(f.length + 1), void a.util.setByPath(g[f], d, k, \"/\");\n                                h[c] = k\n                        }\n                    }\n                }, this), _.each(h, function(a, b) {\n                    this.setProperty(b, a, d), this.updateBindings(b), this.updateDependants(b)\n                }, this), _.each(g, function(a, b) {\n                    this.setProperty(b, a, _.extend({\n                        rewrite: !0\n                    }, d)), this.updateBindings(b), this.updateDependants(b)\n                }, this), this.stopBatchCommand()\n            },\n            findParentListByPath: function(a) {\n                for (var b, c, d = a.split(\"/\"), e = 0, f = d[e], g = this.flatAttributes[f]; e < d.length - 1 && (!g || \"list\" !== g.type);) g && \"object\" === g.type && (b = g.properties), c = d[++e], f += \"/\" + c, g = b ? b[c] : this.flatAttributes[f];\n                return f !== a ? f : null\n            },\n            getFieldValue: function(a, b) {\n                if (_.isFunction(this.options.getFieldValue)) {\n                    var c = this.options.getFieldValue(a, b);\n                    if (c) return c.value\n                }\n                var d = $(a);\n                switch (b) {\n                    case \"select-box\":\n                    case \"color-palette\":\n                    case \"select-button-group\":\n                        var e = d.data(\"view\");\n                        if (!e) throw new Error(\"ui.Inspector: can not read value of removed \" + b);\n                        return e.getSelectionValue();\n                    case \"content-editable\":\n                        return d.html().replace(/<br(\\s*)\\/*>/gi, \"\\n\").replace(/<[p|div]\\s/gi, \"\\n$0\").replace(/(<([^>]+)>)/gi, \"\").replace(/&(\\w+);/gi, this.replaceHTMLEntity).replace(/\\n$/, \"\");\n                    default:\n                        return d.val()\n                }\n            },\n            setProperty: function(b, c, d) {\n                d = d || {}, d.inspector = this.cid;\n                var e = a.dia.Cell.prototype.prop,\n                    f = this.getModel();\n                d.previewDone && e.call(f, b, d.originalValue, {\n                    rewrite: !0,\n                    silent: !0\n                }), _.isUndefined(c) ? a.dia.Cell.prototype.removeProp.call(f, b, d) : e.call(f, b, _.clone(c), d)\n            },\n            parse: function(a, b, c) {\n                switch (a) {\n                    case \"number\":\n                    case \"range\":\n                        b = parseFloat(b);\n                        break;\n                    case \"toggle\":\n                        b = c.checked\n                }\n                return b\n            },\n            startBatchCommand: function() {\n                this.inBatch || (this.inBatch = !0, this.getModel().startBatch(\"inspector\", {\n                    cid: this.cid\n                }))\n            },\n            stopBatchCommand: function() {\n                this.inBatch && (this.getModel().stopBatch(\"inspector\", {\n                    cid: this.cid\n                }), this.inBatch = !1)\n            },\n            addListItem: function(a) {\n                var b = $(a.target),\n                    c = b.closest(\"[data-attribute]\"),\n                    d = c.attr(\"data-attribute\"),\n                    e = this.getOptions(c),\n                    f = c.children(\".list-items\").children(\".list-item\").last(),\n                    g = 0 === f.length ? -1 : parseInt(f.attr(\"data-index\"), 10),\n                    h = g + 1,\n                    i = this.renderListItem({\n                        index: h,\n                        options: e\n                    });\n                this.renderTemplate(i, e.item, d + \"/\" + h), b.parent().children(\".list-items\").append(i), i.find(\"input:first\").focus(), this.trigger(\"render\"), this.options.live && this.updateCell()\n            },\n            deleteListItem: function(a) {\n                var b = $(a.target).closest(\".list-item\");\n                b.nextAll(\".list-item\").each(function() {\n                    var a = parseInt($(this).attr(\"data-index\"), 10),\n                        b = a - 1;\n                    $(this).find(\"[data-field]\").each(function() {\n                        $(this).attr(\"data-field\", $(this).attr(\"data-field\").replace(\"/\" + a, \"/\" + b))\n                    }), $(this).find(\"[data-attribute]\").each(function() {\n                        $(this).attr(\"data-attribute\", $(this).attr(\"data-attribute\").replace(\"/\" + a, \"/\" + b))\n                    }), $(this).attr(\"data-index\", b)\n                }), b.remove(), this.trigger(\"render\"), this.options.live && this.updateCell()\n            },\n            pointerdown: function(a) {\n                this.startBatchCommand(), this._$activeField = $(a.target).closest(\".field\").addClass(\"is-in-action\"), $(document).on(\"mouseup.inspector touchend.inspector\", this.pointerup)\n            },\n            pointerup: function() {\n                $(document).off(\".inspector\", this.pointerup), this._$activeField && (this._$activeField.removeClass(\"is-in-action\"), this._$activeField = null)\n            },\n            pointerfocusin: function(a) {\n                $(a.target).closest(\".field\").addClass(\"is-focused\")\n            },\n            pointerfocusout: function(a) {\n                $(a.target).closest(\".field\").removeClass(\"is-focused\")\n            },\n            onRemove: function() {\n                this.removeWidgets(), this === this.constructor.instance && (this.constructor.instance = null), $(document).off(\"mouseup\", this.stopBatchCommand)\n            },\n            removeWidgets: function() {\n                _.invoke(this.widgets, \"remove\"), this.widgets = []\n            },\n            onGroupLabelClick: function(a) {\n                a.preventDefault(), this.options.multiOpenGroups || this.closeGroups();\n                var b = $(a.target).closest(\".group\");\n                this.toggleGroup(b)\n            },\n            toggleGroup: function(a) {\n                var b = _.isString(a) ? this.$('.group[data-name=\"' + a + '\"]') : $(a);\n                b.hasClass(\"closed\") ? this.openGroup(b) : this.closeGroup(b)\n            },\n            closeGroup: function(a, b) {\n                b = b || {};\n                var c = _.isString(a) ? this.$('.group[data-name=\"' + a + '\"]') : $(a);\n                !b.init && c.hasClass(\"closed\") || (c.addClass(\"closed\"), this.trigger(\"group:close\", c.data(\"name\"), b))\n            },\n            openGroup: function(a, b) {\n                b = b || {};\n                var c = _.isString(a) ? this.$('.group[data-name=\"' + a + '\"]') : $(a);\n                (b.init || c.hasClass(\"closed\")) && (c.removeClass(\"closed\"), this.trigger(\"group:open\", c.data(\"name\"), b))\n            },\n            closeGroups: function() {\n                _.each(this.$groups, this.closeGroup, this)\n            },\n            openGroups: function() {\n                _.each(this.$groups, this.openGroup, this)\n            },\n            COMPOSITE_OPERATORS: [\"not\", \"and\", \"or\", \"nor\"],\n            PRIMITIVE_OPERATORS: [\"eq\", \"ne\", \"regex\", \"text\", \"lt\", \"lte\", \"gt\", \"gte\", \"in\", \"nin\", \"equal\"],\n            _isComposite: function(a) {\n                return _.intersection(this.COMPOSITE_OPERATORS, _.keys(a)).length > 0\n            },\n            _isPrimitive: function(a) {\n                var b = _.keys(this.options.operators).concat(this.PRIMITIVE_OPERATORS);\n                return _.intersection(b, _.keys(a)).length > 0\n            },\n            _evalCustomPrimitive: function(a, b, c) {\n                return !!this.options.operators[a].apply(this, [this.getModel(), b].concat(c))\n            },\n            _evalPrimitive: function(a) {\n                return _.reduce(a, function(a, b, c) {\n                    return _.reduce(b, function(a, b, d) {\n                        var e = this.getCellAttributeValue(d);\n                        if (_.isFunction(this.options.operators[c])) return this._evalCustomPrimitive(c, e, b);\n                        switch (c) {\n                            case \"eq\":\n                                return b == e;\n                            case \"ne\":\n                                return b != e;\n                            case \"regex\":\n                                return new RegExp(b).test(e);\n                            case \"text\":\n                                return !b || _.isString(e) && e.toLowerCase().indexOf(b) > -1;\n                            case \"lt\":\n                                return e < b;\n                            case \"lte\":\n                                return e <= b;\n                            case \"gt\":\n                                return e > b;\n                            case \"gte\":\n                                return e >= b;\n                            case \"in\":\n                                return _.contains(b, e);\n                            case \"nin\":\n                                return !_.contains(b, e);\n                            case \"equal\":\n                                return _.isEqual(b, e);\n                            default:\n                                return a\n                        }\n                    }, !1, this)\n                }, !1, this)\n            },\n            _evalExpression: function(a) {\n                return this._isPrimitive(a) ? this._evalPrimitive(a) : _.reduce(a, function(a, b, c) {\n                    if (\"not\" == c) return !this._evalExpression(b);\n                    var d = _.map(b, this._evalExpression, this);\n                    switch (c) {\n                        case \"and\":\n                            return _.every(d);\n                        case \"or\":\n                            return _.some(d);\n                        case \"nor\":\n                            return !_.some(d);\n                        default:\n                            return a\n                    }\n                }, !1, this)\n            },\n            _extractVariables: function(a) {\n                return _.isArray(a) || this._isComposite(a) ? _.reduce(a, function(a, b) {\n                    return a.concat(this._extractVariables(b))\n                }, [], this) : _.reduce(a, function(a, b) {\n                    return _.keys(b)\n                }, [])\n            },\n            isExpressionValid: function(a) {\n                return a = _.omit(a, \"otherwise\", \"dependencies\"), this._evalExpression(a)\n            },\n            extractExpressionPaths: function(a) {\n                var b = a && a.dependencies || [];\n                return a = _.omit(a, \"otherwise\", \"dependencies\"), _.uniq(this._extractVariables(a).concat(b))\n            },\n            getGroupsStateKey: function() {\n                if (_.isFunction(this.options.stateKey)) return this.options.stateKey(this.getModel());\n                throw new Error(\"Inspector: Option stateKey must be a function\")\n            },\n            storeGroupsState: function() {\n                var b = this.getGroupsStateKey();\n                a.ui.Inspector.groupStates[b] = _.map(this.$(\".group.closed\"), function(a) {\n                    return $(a).attr(\"data-name\")\n                })\n            },\n            getGroupsState: function() {\n                return a.ui.Inspector.groupStates[this.getGroupsStateKey()]\n            },\n            restoreGroupsState: function() {\n                var b = function(a, b) {\n                        _.each(b.options.groups, function(b, c) {\n                            a(b, c) ? this.closeGroup(c) : this.openGroup(c)\n                        }, b)\n                    },\n                    c = this.getGroupsStateKey();\n                a.ui.Inspector.groupStates[c] ? b(function(b, d) {\n                    return _.contains(a.ui.Inspector.groupStates[c], d)\n                }, this) : b(function(a) {\n                    return a.closed\n                }, this)\n            }\n        }, {\n            groupStates: {},\n            instance: null,\n            create: function(a, b) {\n                b = b || {}, _.defaults(b, {\n                    restoreGroupsState: !0,\n                    storeGroupsState: !0\n                });\n                var c = b.cell || b.cellView.model,\n                    d = this.instance;\n                return d && d.options.cell === c || (d && d.el.parentNode && (b.storeGroupsState && d.storeGroupsState(), d.updateCell(), d.remove()), d = new this(b).render(), this.instance = d, $(a).html(d.el), b.restoreGroupsState && d.restoreGroupsState()), d\n            },\n            close: function() {\n                var a = this.instance;\n                a && a.remove()\n            }\n        })\n    }(joint);\n    joint.ui.FreeTransform = joint.mvc.View.extend({\n        className: \"free-transform\",\n        events: {\n            \"mousedown .resize\": \"startResizing\",\n            \"mousedown .rotate\": \"startRotating\",\n            \"touchstart .resize\": \"startResizing\",\n            \"touchstart .rotate\": \"startRotating\"\n        },\n        DIRECTIONS: [\"nw\", \"n\", \"ne\", \"e\", \"se\", \"s\", \"sw\", \"w\"],\n        POSITIONS: [\"top-left\", \"top\", \"top-right\", \"right\", \"bottom-right\", \"bottom\", \"bottom-left\", \"left\"],\n        options: {\n            cellView: void 0,\n            rotateAngleGrid: 15,\n            preserveAspectRatio: !1,\n            minWidth: 0,\n            minHeight: 0,\n            maxWidth: 1 / 0,\n            maxHeight: 1 / 0,\n            allowOrthogonalResize: !0,\n            allowRotation: !0,\n            clearAll: !0,\n            clearOnBlankPointerdown: !0\n        },\n        init: function() {\n            var a = this.options;\n            a.cellView && _.defaults(a, {\n                cell: a.cellView.model,\n                paper: a.cellView.paper,\n                graph: a.cellView.paper.model\n            }), _.bindAll(this, \"update\", \"remove\", \"pointerup\", \"pointermove\");\n            var b = a.paper,\n                c = a.graph;\n            a.clearAll && this.constructor.clear(b), $(document.body).on(\"mousemove touchmove\", this.pointermove), $(document).on(\"mouseup touchend\", this.pointerup), this.listenTo(c, \"all\", this.update), this.listenTo(b, \"scale translate\", this.update), this.listenTo(c, \"reset\", this.remove), this.listenTo(a.cell, \"remove\", this.remove), a.clearOnBlankPointerdown && this.listenTo(b, \"blank:pointerdown\", this.remove), b.$el.append(this.el), this.constructor.registerInstanceToPaper(this, b)\n        },\n        renderHandles: function() {\n            var a = $(\"<div/>\").prop(\"draggable\", !1),\n                b = a.clone().addClass(\"rotate\"),\n                c = _.map(this.POSITIONS, function(b) {\n                    return a.clone().addClass(\"resize\").attr(\"data-position\", b)\n                });\n            this.$el.empty().append(c, b)\n        },\n        render: function() {\n            this.renderHandles(), this.$el.attr(\"data-type\", this.options.cell.get(\"type\")), this.$el.toggleClass(\"no-orthogonal-resize\", this.options.preserveAspectRatio || !this.options.allowOrthogonalResize), this.$el.toggleClass(\"no-rotation\", !this.options.allowRotation), this.update()\n        },\n        update: function() {\n            var a = this.options.paper.matrix(),\n                b = this.options.cell.getBBox();\n            b.x *= a.a, b.x += a.e, b.y *= a.d, b.y += a.f, b.width *= a.a, b.height *= a.d;\n            var c = g.normalizeAngle(this.options.cell.get(\"angle\") || 0),\n                d = \"rotate(\" + c + \"deg)\";\n            this.$el.css({\n                width: b.width + 4,\n                height: b.height + 4,\n                left: b.x - 3,\n                top: b.y - 3,\n                transform: d,\n                \"-webkit-transform\": d,\n                \"-ms-transform\": d\n            });\n            var e = Math.floor(c * (this.DIRECTIONS.length / 360));\n            if (e != this._previousDirectionsShift) {\n                var f = this.DIRECTIONS.slice(e).concat(this.DIRECTIONS.slice(0, e));\n                this.$(\".resize\").removeClass(this.DIRECTIONS.join(\" \")).each(function(a, b) {\n                    $(b).addClass(f[a])\n                }), this._previousDirectionsShift = e\n            }\n        },\n        calculateTrueDirection: function(a) {\n            var b = this.options.cell,\n                c = g.normalizeAngle(b.get(\"angle\")),\n                d = this.POSITIONS.indexOf(a);\n            return d += Math.floor(c * (this.POSITIONS.length / 360)), d %= this.POSITIONS.length, this.POSITIONS[d]\n        },\n        startResizing: function(a) {\n            a.stopPropagation(), this.options.graph.trigger(\"batch:start\");\n            var b = $(a.target).data(\"position\"),\n                c = this.calculateTrueDirection(b),\n                d = 0,\n                e = 0;\n            _.each(b.split(\"-\"), function(a) {\n                d = {\n                    left: -1,\n                    right: 1\n                }[a] || d, e = {\n                    top: -1,\n                    bottom: 1\n                }[a] || e\n            });\n            var f = this.toValidResizeDirection(b),\n                h = {\n                    \"top-right\": \"bottomLeft\",\n                    \"top-left\": \"corner\",\n                    \"bottom-left\": \"topRight\",\n                    \"bottom-right\": \"origin\"\n                }[f];\n            this._initial = {\n                angle: g.normalizeAngle(this.options.cell.get(\"angle\") || 0),\n                resizeX: d,\n                resizeY: e,\n                selector: h,\n                direction: f,\n                relativeDirection: b,\n                trueDirection: c\n            }, this._action = \"resize\", this.startOp(a.target)\n        },\n        toValidResizeDirection: function(a) {\n            return {\n                top: \"top-left\",\n                bottom: \"bottom-right\",\n                left: \"bottom-left\",\n                right: \"top-right\"\n            }[a] || a\n        },\n        startRotating: function(a) {\n            a.stopPropagation(), this.options.graph.trigger(\"batch:start\");\n            var b = this.options.cell.getBBox().center(),\n                c = this.options.paper.snapToGrid({\n                    x: a.clientX,\n                    y: a.clientY\n                });\n            this._initial = {\n                centerRotation: b,\n                modelAngle: g.normalizeAngle(this.options.cell.get(\"angle\") || 0),\n                startAngle: g.point(c).theta(b)\n            }, this._action = \"rotate\", this.startOp(a.target)\n        },\n        pointermove: function(a) {\n            if (this._action) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.options,\n                    c = b.paper.snapToGrid({\n                        x: a.clientX,\n                        y: a.clientY\n                    }),\n                    d = b.paper.options.gridSize,\n                    e = b.cell,\n                    f = this._initial;\n                switch (this._action) {\n                    case \"resize\":\n                        var h = e.getBBox(),\n                            i = g.point(c).rotate(h.center(), f.angle),\n                            j = i.difference(h[f.selector]()),\n                            k = f.resizeX ? j.x * f.resizeX : h.width,\n                            l = f.resizeY ? j.y * f.resizeY : h.height;\n                        if (k = g.snapToGrid(k, d), l = g.snapToGrid(l, d), k = Math.max(k, b.minWidth || d), l = Math.max(l, b.minHeight || d), k = Math.min(k, b.maxWidth), l = Math.min(l, b.maxHeight), b.preserveAspectRatio) {\n                            var m = h.width * l / h.height,\n                                n = h.height * k / h.width;\n                            m > k ? l = n : k = m\n                        }\n                        h.width == k && h.height == l || e.resize(k, l, {\n                            freeTransform: this.cid,\n                            direction: f.direction,\n                            relativeDirection: f.relativeDirection,\n                            trueDirection: f.trueDirection,\n                            ui: !0,\n                            minWidth: b.minWidth,\n                            minHeight: b.minHeight,\n                            maxWidth: b.maxWidth,\n                            maxHeight: b.maxHeight,\n                            preserveAspectRatio: b.preserveAspectRatio\n                        });\n                        break;\n                    case \"rotate\":\n                        var o = f.startAngle - g.point(c).theta(f.centerRotation);\n                        e.rotate(g.snapToGrid(f.modelAngle + o, b.rotateAngleGrid), !0)\n                }\n            }\n        },\n        pointerup: function(a) {\n            this._action && (this.stopOp(), this.options.graph.trigger(\"batch:stop\"), this._action = null, this._initial = null)\n        },\n        onRemove: function() {\n            $(document.body).off(\"mousemove touchmove\", this.pointermove), $(document).off(\"mouseup touchend\", this.pointerup), joint.ui.FreeTransform.unregisterInstanceFromPaper(this, this.options.paper)\n        },\n        startOp: function(a) {\n            a && ($(a).addClass(\"in-operation\"), this._elementOp = a), this.$el.addClass(\"in-operation\")\n        },\n        stopOp: function() {\n            this._elementOp && ($(this._elementOp).removeClass(\"in-operation\"), this._elementOp = null), this.$el.removeClass(\"in-operation\")\n        }\n    }, {\n        instancesByPaper: {},\n        clear: function(a) {\n            a.trigger(\"freetransform:create\"), this.removeInstancesForPaper(a)\n        },\n        removeInstancesForPaper: function(a) {\n            _.invoke(this.getInstancesForPaper(a), \"remove\")\n        },\n        getInstancesForPaper: function(a) {\n            return this.instancesByPaper[a.cid] || {}\n        },\n        registerInstanceToPaper: function(a, b) {\n            this.instancesByPaper[b.cid] || (this.instancesByPaper[b.cid] = {}), this.instancesByPaper[b.cid][a.cid] = a\n        },\n        unregisterInstanceFromPaper: function(a, b) {\n            this.instancesByPaper[b.cid] && (this.instancesByPaper[b.cid][a.cid] = null)\n        }\n    });\n    joint.ui.Tooltip = joint.mvc.View.extend({\n        className: \"tooltip\",\n        options: {\n            left: void 0,\n            right: void 0,\n            top: void 0,\n            bottom: void 0,\n            position: void 0,\n            positionSelector: void 0,\n            direction: \"auto\",\n            minResizedWidth: 100,\n            padding: 0,\n            rootTarget: null,\n            target: null,\n            trigger: \"hover\",\n            viewport: {\n                selector: null,\n                padding: 0\n            },\n            dataAttributePrefix: \"tooltip\",\n            template: '<div class=\"tooltip-arrow\"/><div class=\"tooltip-arrow-mask\"/><div class=\"tooltip-content\"/>'\n        },\n        init: function() {\n            this.eventNamespace = (\".\" + this.className + this.cid).replace(/ /g, \"_\"), this.settings = {};\n            var a = this.options.trigger.split(\" \");\n            _.bindAll(this, \"render\", \"hide\", \"show\", \"toggle\", \"isVisible\", \"position\"), this.options.rootTarget ? (this.$rootTarget = $(this.options.rootTarget), _.each(a, function(a) {\n                switch (a) {\n                    case \"click\":\n                        this.$rootTarget.on(\"click\" + this.eventNamespace, this.options.target, this.toggle);\n                        break;\n                    case \"hover\":\n                        this.$rootTarget.on(\"mouseover\" + this.eventNamespace, this.options.target, this.render);\n                        break;\n                    case \"focus\":\n                        this.$rootTarget.on(\"focusin\" + this.eventNamespace, this.options.target, this.render)\n                }\n            }, this)) : (this.$target = $(this.options.target), _.each(a, function(a) {\n                switch (a) {\n                    case \"click\":\n                        this.$target.on(\"click\" + this.eventNamespace, this.toggle);\n                        break;\n                    case \"hover\":\n                        this.$target.on(\"mouseover\" + this.eventNamespace, this.render);\n                        break;\n                    case \"focus\":\n                        this.$target.on(\"focusin\" + this.eventNamespace, this.render)\n                }\n            }, this)), this.$el.append(this.options.template)\n        },\n        onRemove: function() {\n            this.options.rootTarget ? this.$rootTarget.off(this.eventNamespace) : this.$target.off(this.eventNamespace)\n        },\n        hide: function() {\n            var a = this.settings;\n            a && (this.unbindHideActions(a.currentTarget), this.$el.removeClass(a.className), this.$el.remove())\n        },\n        show: function(a) {\n            this.render(a || {\n                target: this.options.target\n            })\n        },\n        toggle: function(a) {\n            this.isVisible() ? this.hide() : this.show(a)\n        },\n        isVisible: function() {\n            return document.body.contains(this.el)\n        },\n        render: function(a) {\n            var b = _.isUndefined(a.x) || _.isUndefined(a.y) ? null : a,\n                c = $(a.target).closest(this.options.target)[0],\n                d = this.settings = this.getTooltipSettings(c);\n            d.currentTarget = c, this.bindHideActions(c);\n            var e;\n            e = b ? {\n                x: b.x,\n                y: b.y,\n                width: 1,\n                height: 1\n            } : joint.util.getElementBBox(c), this.$(\".tooltip-content\").html(d.content), this.$el.hide(), this.$el.removeClass(\"left right top bottom\"), this.$el.addClass(d.className), $(document.body).append(this.$el);\n            var f = this.$(\"img\");\n            f.length ? f.on(\"load\", _.bind(function() {\n                this.position(e), this.$el.addClass(\"rendered\")\n            }, this)) : (this.position(e), this.$el.addClass(\"rendered\"))\n        },\n        getTooltipSettings: function(a) {\n            var b = this.loadDefinitionFromElementData(a);\n            return this.evaluateOptions(a, b)\n        },\n        unbindHideActions: function(a) {\n            var b = this.eventNamespace + \".remove\";\n            $(a).off(b), clearInterval(this.interval)\n        },\n        bindHideOnRemoveTarget: function(a) {\n            clearInterval(this.interval), this.interval = setInterval(_.bind(function() {\n                $.contains(document, a) || (clearInterval(this.interval), this.hide())\n            }, this), 500)\n        },\n        bindHideActions: function(a) {\n            var b = this.settings,\n                c = $(a),\n                d = this.eventNamespace + \".remove\";\n            this.bindHideOnRemoveTarget(a), _.each(this.options.trigger.split(\" \"), function(a) {\n                var e = {\n                        hover: [\"mouseout\", \"mousedown\"],\n                        focus: [\"focusout\"]\n                    },\n                    f = e[a] || [];\n                b.hideTrigger && (f = b.hideTrigger.split(\" \") || []), _.each(f, function(a) {\n                    c.on(a + d, this.hide)\n                }, this)\n            }, this)\n        },\n        evaluateOptions: function(a, b) {\n            b = b || {};\n            var c = _.extend({}, b, this.options);\n            return _.each(c, function(d, e) {\n                var f = _.isFunction(d) ? d(a) : d;\n                c[e] = _.isUndefined(f) || _.isNull(f) ? b[e] : f\n            }), this.normalizePosition(c), c\n        },\n        loadDefinitionFromElementData: function(a) {\n            if (!a) return {};\n            var b = function(a) {\n                    return \"left\" === a || \"bottom\" === a || \"top\" === a || \"right\" === a\n                },\n                c = this.getAllAttrs(a, \"data-\" + this.options.dataAttributePrefix),\n                d = {};\n            return _.each(c, function(a, c) {\n                \"\" === c && (c = \"content\"), b(c) || (d[c] = a)\n            }), d\n        },\n        getAllAttrs: function(a, b) {\n            var c = b || \"\",\n                d = a.attributes,\n                e = {};\n            return _.each(d, function(a) {\n                if (_.startsWith(a.name, c)) {\n                    var b = _.camelCase(a.name.slice(c.length));\n                    e[b] = a.value\n                }\n            }), e\n        },\n        normalizePosition: function(a) {\n            var b = a.left || a.right || a.top || a.bottom;\n            !a.position && b && (a.left && (a.position = \"left\"), a.right && (a.position = \"right\"), a.top && (a.position = \"top\"), a.bottom && (a.position = \"bottom\")), !a.positionSelector && b && (a.positionSelector = b)\n        },\n        position: function(a) {\n            var b = this.settings;\n            this.$el.show(), this.$el.css(\"width\", \"auto\");\n            var c = this.getViewportViewBBox(),\n                d = this.getTooltipBBox(a, c),\n                e = {};\n            \"left\" === b.position || \"right\" === b.position ? e.top = a.y + a.height / 2 - d.y : \"top\" === b.position || \"bottom\" === b.position ? e.left = a.x + a.width / 2 - d.x : e.top = a.y + a.height / 2 - d.y, this.$el.css({\n                left: d.x,\n                top: d.y,\n                width: d.width || \"auto\"\n            });\n            var f = this.$(\".tooltip-arrow, .tooltip-arrow-mask\");\n            f.removeAttr(\"style\"), f.css(e), b.direction && \"off\" !== b.direction && this.$el.addClass(\"auto\" === b.direction ? b.position || \"left\" : b.direction)\n        },\n        getViewportViewBBox: function() {\n            var a = this.settings,\n                b = a.viewport.selector ? $(a.currentTarget).closest(a.viewport.selector) : \"html\",\n                c = joint.util.getElementBBox(b),\n                d = $(window);\n            a.viewport.selector || (c.width = d.width() + d.scrollLeft(), c.height = d.height() + d.scrollTop());\n            var e = a.viewport.padding || 0;\n            return c.x += e, c.y += e, c.width -= 2 * e, c.height -= 2 * e, c\n        },\n        getPosition: function(a, b, c, d) {\n            var e = this.settings,\n                f = e.position || \"left\",\n                g = e.padding,\n                h = Math.min(e.minResizedWidth, c.width + g),\n                i = {\n                    left: function(f) {\n                        var i = {\n                            x: a.x + a.width + g,\n                            y: b.y + b.height / 2 - c.height / 2\n                        };\n                        if (f) {\n                            var j = d.x + d.width - i.x;\n                            if (j > h && j < c.width + g && (i.width = j), j < h) return e.position = \"right\", this.right(!1)\n                        }\n                        return i\n                    },\n                    right: function(f) {\n                        var i = {\n                            x: a.x - c.width - g,\n                            y: b.y + b.height / 2 - c.height / 2\n                        };\n                        if (f) {\n                            var j = a.x - g - d.x;\n                            if (j > h && j < c.width + g && (i.width = j, i.x = d.x), j < h) return e.position = \"left\", this.left(!1)\n                        }\n                        return i\n                    },\n                    top: function(f) {\n                        var h = {\n                            x: b.x + b.width / 2 - c.width / 2,\n                            y: a.y + a.height + g\n                        };\n                        if (f) {\n                            var i = d.y + d.height - (a.y + a.height + g);\n                            if (i < c.height) return e.position = \"bottom\", this.bottom(!1)\n                        }\n                        return h\n                    },\n                    bottom: function(f) {\n                        var h = {\n                            x: b.x + b.width / 2 - c.width / 2,\n                            y: a.y - c.height - g\n                        };\n                        if (f) {\n                            var i = a.y - g - d.y;\n                            if (i < c.height) return e.position = \"top\", this.top(!1)\n                        }\n                        return h\n                    }\n                };\n            return i[f](h > 0)\n        },\n        getTooltipBBox: function(a, b) {\n            var c, d, e = this.measureTooltipElement();\n            c = $(this.settings.positionSelector), d = c[0] ? joint.util.getElementBBox(c[0]) : a;\n            var f = this.getPosition(d, a, e, b);\n            f.y < b.y ? f.y = b.y : f.y + e.height > b.y + b.height && (f.y = b.y + b.height - e.height);\n            var g = f.width || e.width;\n            return f.x < b.x ? f.x = b.x : f.x + g > b.x + b.width && (f.x = b.x + b.width - g), f\n        },\n        measureTooltipElement: function() {\n            var a = this.$el.clone().appendTo($(\"body\")).css({\n                    left: -1e3,\n                    top: -500\n                }),\n                b = {\n                    width: a.outerWidth(),\n                    height: a.outerHeight()\n                };\n            return a.remove(), b\n        }\n    });\n    joint.ui.Snaplines = joint.mvc.View.extend({\n        options: {\n            paper: void 0,\n            distance: 10\n        },\n        className: \"snaplines\",\n        init: function() {\n            _.bindAll(this, \"hide\"), this.$horizontal = $(\"<div>\").addClass(\"snapline horizontal\").appendTo(this.el), this.$vertical = $(\"<div>\").addClass(\"snapline vertical\").appendTo(this.el), this.$el.hide().appendTo(this.options.paper.el), this.startListening()\n        },\n        startListening: function() {\n            this.stopListening(), this.listenTo(this.options.paper, \"cell:pointerdown\", this.captureCursorOffset), this.listenTo(this.options.paper, \"cell:pointermove\", this.snapWhileMoving), this.listenTo(this.options.paper.model, \"batch:stop\", this.onBatchStop), $(document).on(\"mouseup touchend\", this.hide), this.filterTypes = {}, this.filterCells = {}, this.filterFunction = void 0, _.isArray(this.options.filter) ? _.each(this.options.filter, function(a) {\n                _.isString(a) ? this.filterTypes[a] = !0 : this.filterCells[a.id] = !0\n            }, this) : _.isFunction(this.options.filter) && (this.filterFunction = this.options.filter)\n        },\n        onBatchStop: function(a) {\n            a = a || {}, \"resize\" === a.batchName && this.snapWhileResizing(a.cell, a)\n        },\n        captureCursorOffset: function(a, b, c, d) {\n            if (this.canElementMove(a)) {\n                var e = a.model.get(\"position\");\n                this._cursorOffset = {\n                    x: c - e.x,\n                    y: d - e.y\n                }\n            }\n        },\n        snapWhileResizing: function(a, b) {\n            if (b.ui && !b.snapped && b.direction && b.trueDirection) {\n                var c = this.options.paper.findViewByModel(a);\n                if (c && c.model.isElement()) {\n                    var d = a.getBBox(),\n                        e = d.bbox(a.get(\"angle\")),\n                        f = e.origin(),\n                        h = e.corner(),\n                        i = g.normalizeAngle(a.get(\"angle\")),\n                        j = this.options.distance,\n                        k = null,\n                        l = null,\n                        m = {\n                            vertical: 0,\n                            horizontal: 0\n                        },\n                        n = b.direction,\n                        o = b.trueDirection,\n                        p = b.relativeDirection;\n                    if (o.indexOf(\"right\") !== -1 ? m.vertical = h.x : m.vertical = f.x, o.indexOf(\"bottom\") !== -1 ? m.horizontal = h.y : m.horizontal = f.y, _.find(this.options.paper.model.getElements(), function(b) {\n                            if (b.id === a.id || b.isEmbeddedIn(a) || this.filterTypes[b.get(\"type\")] || this.filterCells[b.id] || this.filterFunction && this.filterFunction(b)) return !1;\n                            var c = b.getBBox().bbox(b.get(\"angle\")),\n                                d = c.origin(),\n                                e = c.corner(),\n                                f = {\n                                    vertical: [d.x, e.x],\n                                    horizontal: [d.y, e.y]\n                                };\n                            return _.each(f, function(a, b) {\n                                a = _.map(a, function(a) {\n                                    return {\n                                        position: a,\n                                        distance: Math.abs(a - m[b])\n                                    }\n                                }), a = _.filter(a, function(a) {\n                                    return a.distance < j\n                                }), a = _.sortBy(a, function(a, b) {\n                                    return a.distance > b.distance ? 1 : a.distance === b.distance ? 0 : -1\n                                }), f[b] = a\n                            }), _.isNull(k) && f.vertical.length > 0 && (k = f.vertical[0].position), _.isNull(l) && f.horizontal.length > 0 && (l = f.horizontal[0].position), _.isNumber(k) && _.isNumber(l)\n                        }, this), this.hide(), _.isNumber(k) || _.isNumber(l)) {\n                        var q = 0;\n                        _.isNumber(k) && (q = o.indexOf(\"right\") !== -1 ? k - e.corner().x : e.origin().x - k);\n                        var r = 0;\n                        _.isNumber(l) && (r = o.indexOf(\"bottom\") !== -1 ? l - e.corner().y : e.origin().y - l);\n                        var s = 0,\n                            t = 0,\n                            u = !(i % 90);\n                        if (u) 90 === i || 270 === i ? (s = r, t = q) : (s = q, t = r);\n                        else {\n                            var v;\n                            v = i >= 0 && i < 90 ? 1 : i >= 90 && i < 180 ? 4 : i >= 180 && i < 270 ? 3 : 2, l && k && (r > q ? (r = 0, l = null) : (q = 0, k = null));\n                            var w = g.toRad(i % 90);\n                            q && (s = 3 === v ? q / Math.cos(w) : q / Math.sin(w)), r && (t = 3 === v ? r / Math.cos(w) : r / Math.sin(w));\n                            var x = 1 === v || 3 === v;\n                            switch (p) {\n                                case \"top\":\n                                case \"bottom\":\n                                    t = r ? r / (x ? Math.cos(w) : Math.sin(w)) : q / (x ? Math.sin(w) : Math.cos(w));\n                                    break;\n                                case \"left\":\n                                case \"right\":\n                                    s = q ? q / (x ? Math.cos(w) : Math.sin(w)) : r / (x ? Math.sin(w) : Math.cos(w))\n                            }\n                        }\n                        switch (p) {\n                            case \"top\":\n                            case \"bottom\":\n                                s = 0;\n                                break;\n                            case \"left\":\n                            case \"right\":\n                                t = 0\n                        }\n                        var y = this.options.paper.options.gridSize,\n                            z = Math.max(d.width + s, y),\n                            A = Math.max(d.height + t, y);\n                        b.minWidth && b.minWidth > y && (z = Math.max(z, b.minWidth)), b.minHeight && b.minHeight > y && (A = Math.max(A, b.minHeight)), b.maxWidth && (z = Math.min(z, b.maxWidth)), b.maxHeight && (A = Math.min(A, b.maxHeight)), b.preserveAspectRatio && (s > t ? A = z * (d.height / d.width) : z = A * (d.width / d.height)), z === d.width && A === d.height || a.resize(z, A, {\n                            snaplines: this.cid,\n                            restrictedArea: this.options.paper.getRestrictedArea(c),\n                            direction: n,\n                            relativeDirection: p,\n                            trueDirection: o,\n                            snapped: !0\n                        });\n                        var B = a.getBBox().bbox(i),\n                            C = 1;\n                        k && Math.abs(B.x - k) > C && Math.abs(B.width + B.x - k) > C && (k = null), l && Math.abs(B.y - l) > C && Math.abs(B.height + B.y - l) > C && (l = null), this.show({\n                            vertical: k,\n                            horizontal: l\n                        })\n                    }\n                }\n            }\n        },\n        canElementMove: function(a) {\n            return a && a.model.isElement() && a.can(\"elementMove\")\n        },\n        snapWhileMoving: function(a, b, c, d) {\n            if (this.canElementMove(a)) {\n                var e = a.model,\n                    f = e.get(\"position\"),\n                    h = e.get(\"size\"),\n                    i = g.rect(_.extend({\n                        x: c - this._cursorOffset.x,\n                        y: d - this._cursorOffset.y\n                    }, h)),\n                    j = i.center(),\n                    k = i.bbox(e.get(\"angle\")),\n                    l = k.origin(),\n                    m = k.corner(),\n                    n = this.options.distance,\n                    o = null,\n                    p = null,\n                    q = 0,\n                    r = 0;\n                if (_.find(this.options.paper.model.getElements(), function(a) {\n                        if (a === e || a.isEmbeddedIn(e) || this.filterTypes[a.get(\"type\")] || this.filterCells[a.id] || this.filterFunction && this.filterFunction(a)) return !1;\n                        var b = a.getBBox().bbox(a.get(\"angle\")),\n                            c = b.center(),\n                            d = b.origin(),\n                            f = b.corner();\n                        return _.isNull(o) && (Math.abs(c.x - j.x) < n ? (o = c.x, q = .5) : Math.abs(d.x - l.x) < n ? o = d.x : Math.abs(d.x - m.x) < n ? (o = d.x, q = 1) : Math.abs(f.x - m.x) < n ? (o = f.x, q = 1) : Math.abs(f.x - l.x) < n && (o = f.x)), _.isNull(p) && (Math.abs(c.y - j.y) < n ? (p = c.y, r = .5) : Math.abs(d.y - l.y) < n ? p = d.y : Math.abs(d.y - m.y) < n ? (p = d.y, r = 1) : Math.abs(f.y - m.y) < n ? (p = f.y, r = 1) : Math.abs(f.y - l.y) < n && (p = f.y)), _.isNumber(o) && _.isNumber(p)\n                    }, this), this.hide(), _.isNumber(o) || _.isNumber(p)) {\n                    _.isNumber(o) && (k.x = o - q * k.width), _.isNumber(p) && (k.y = p - r * k.height);\n                    var s = k.center(),\n                        t = s.x - i.width / 2,\n                        u = s.y - i.height / 2;\n                    e.translate(t - f.x, u - f.y, {\n                        restrictedArea: this.options.paper.getRestrictedArea(a),\n                        snapped: !0\n                    }), this.show({\n                        vertical: o,\n                        horizontal: p\n                    })\n                }\n            }\n        },\n        show: function(a) {\n            a = a || {};\n            var b = this.options.paper.matrix();\n            a.horizontal ? this.$horizontal.css(\"top\", a.horizontal * b.d + b.f).show() : this.$horizontal.hide(), a.vertical ? this.$vertical.css(\"left\", a.vertical * b.a + b.e).show() : this.$vertical.hide(), this.$el.show()\n        },\n        hide: function() {\n            this.$el.hide()\n        },\n        onRemove: function() {\n            $(document).off(\"mouseup\", this.hide)\n        }\n    });\n    joint.ui.TextEditor = joint.mvc.View.extend({\n        options: {\n            text: void 0,\n            newlineCharacterBBoxWidth: 10,\n            placeholder: void 0,\n            focus: !0,\n            debug: !1,\n            useNativeSelection: !0,\n            annotateUrls: !1,\n            urlAnnotation: {\n                attrs: {\n                    \"class\": \"url-annotation\",\n                    fill: \"lightblue\",\n                    \"text-decoration\": \"underline\"\n                }\n            },\n            textareaAttributes: {\n                autocorrect: \"off\",\n                autocomplete: \"off\",\n                autocapitalize: \"off\",\n                spellcheck: \"false\",\n                tabindex: \"0\"\n            }\n        },\n        className: \"text-editor\",\n        events: {\n            \"keyup textarea\": \"onKeyup\",\n            \"input textarea\": \"onInput\",\n            \"copy textarea\": \"onCopy\",\n            \"cut textarea\": \"onCut\",\n            \"paste textarea\": \"onPaste\",\n            \"mousedown .char-selection-box\": \"onMousedown\",\n            \"dblclick .char-selection-box\": \"onDoubleClick\",\n            \"click .char-selection-box\": \"onTripleClick\"\n        },\n        selection: {\n            start: null,\n            end: null\n        },\n        selecting: !1,\n        init: function() {\n            _.bindAll(this, \"onMousedown\", \"onMousemove\", \"onMouseup\", \"onDoubleClick\", \"onTripleClick\", \"onKeydown\", \"onAfterPaste\", \"onAfterKeydown\"), this.setTextElement(this.options.text), $(document.body).on(\"mousemove\", this.onMousemove), $(document.body).on(\"mouseup\", this.onMouseup), $(document.body).on(\"keydown\", this.onKeydown), this.options.cellView ? this.$viewport = $(this.options.cellView.paper.viewport) : this.$viewport = $(this.options.text), this.options.annotations && this.setAnnotations(this.options.annotations)\n        },\n        setTextElement: function(a) {\n            this.$elText && this.unbindTextElement(), this.options.text = a, this.$elText = $(a), this.$elText.on(\"mousedown\", this.onMousedown), this.$elText.on(\"dblclick\", this.onDoubleClick), this.$elText.on(\"click\", this.onTripleClick)\n        },\n        render: function(a) {\n            this.$caret = $(\"<div>\", {\n                \"class\": \"caret\"\n            }), this.$selection = $(\"<div>\"), this.$selectionBox = $(\"<div>\", {\n                \"class\": \"char-selection-box\"\n            }), this.$el.append(this.$caret, this.$selection), this.$textareaContainer = $(\"<div>\", {\n                \"class\": \"textarea-container\"\n            }), this.$textarea = $(\"<textarea>\", this.options.textareaAttributes), this.textarea = this.$textarea[0], this._textContent = this.textarea.value = this.getTextContent(), this._textareaValueBeforeInput = this.textarea.value, this.$textareaContainer.append(this.textarea), this.options.focus && this.$el.append(this.$textareaContainer), $(a || document.body).append(this.$el);\n            var b = V(this.options.text).bbox();\n            return this.$textareaContainer.css({\n                left: b.x,\n                top: b.y\n            }), this.focus(), V(this.options.text).attr(\"cursor\", \"text\"), this.selectAll(), this\n        },\n        annotateURLBeforeCaret: function(a) {\n            var b = this.getURLBoundary(Math.max(a - 1, 0));\n            return !!b && (this.annotateURL(this.getAnnotations() || [], b[0], b[1]), !0)\n        },\n        hasSelection: function() {\n            return _.isNumber(this.selection.start) && _.isNumber(this.selection.end) && this.selection.start !== this.selection.end\n        },\n        textContentHasChanged: function() {\n            return this._textContent !== this.textarea.value\n        },\n        restoreTextAreaSelectionDirection: function() {\n            this._selectionDirection && (this.textarea.selectionDirection = this._selectionDirection)\n        },\n        storeSelectionDirection: function() {\n            this._selectionDirection = this.textarea.selectionDirection\n        },\n        onKeydown: function(a) {\n            this.options.debug && console.log(\"onKeydown(): \", a.keyCode), this.hasSelection() && (this.deselect(), this.restoreTextAreaSelectionDirection()), setTimeout(this.onAfterKeydown, 0), this._copied = !1, this._selectionStartBeforeInput = this.textarea.selectionStart, this._selectionEndBeforeInput = this.textarea.selectionEnd\n        },\n        onAfterKeydown: function() {\n            this.$textarea.is(\":focus\") && (this.storeSelectionDirection(), this.textarea.selectionStart === this.textarea.selectionEnd ? this.setCaret(this.textarea.selectionStart) : this.select(this.textarea.selectionStart, this.textarea.selectionEnd))\n        },\n        onKeyup: function(a) {\n            this.textContentHasChanged() && this.onInput(a)\n        },\n        onCopy: function(a) {\n            this._copied || this.copyToClipboard()\n        },\n        onCut: function(a) {\n            this._copied || this.copyToClipboard()\n        },\n        copyToClipboard: function() {\n            var a = document.queryCommandSupported && document.queryCommandSupported(\"copy\");\n            a && (this._copied = !0, document.execCommand(\"copy\"))\n        },\n        onInput: function(a) {\n            if (this.textContentHasChanged()) {\n                var b = this.textarea.value.length - this._textareaValueBeforeInput.length,\n                    c = {\n                        start: this._selectionStartBeforeInput,\n                        end: this._selectionEndBeforeInput\n                    },\n                    d = {\n                        start: this.textarea.selectionStart,\n                        end: this.textarea.selectionEnd\n                    };\n                this.options.debug && console.log(\"onInput()\", a, \"selectionBeforeInput\", c, \"selectionAfterInput\", d, \"diffLength\", b);\n                var e = this.inferTextOperationType(c, d, b),\n                    f = !1,\n                    g = this.getAnnotations();\n                if (this.options.annotateUrls && \"insert\" === e) {\n                    var h = this.textarea.value.substr(c.start, b);\n                    this.options.debug && console.log(\"onInput()\", \"inserted text\", h), /\\s/.test(h) && (f = this.annotateURLBeforeCaret(c.start), f && (g = this.shiftAnnotations(g, d.end, b)))\n                }\n                if (g && (f || (g = this.annotate(g, c, d, b)), this.options.debug && console.log(\"onInput()\", \"modified annotations\", g), this._currentAnnotationAttributes && \"insert\" === e)) {\n                    var i = {\n                        start: c.start,\n                        end: d.end,\n                        attrs: this._currentAnnotationAttributes\n                    };\n                    g.push(i), this._currentAnnotationAttributes = void 0, this.options.debug && console.log(\"onInput()\", \"insert annotation\", i, \"final annotations\", g)\n                }\n                this._annotations = g, this.trigger(\"text:change\", this.textarea.value, this._textareaValueBeforeInput, g, c, d), this._selectionBeforeInput = d, this._textareaValueBeforeInput = this.textarea.value, this._textContent = this.textarea.value\n            }\n        },\n        onPaste: function(a) {\n            this.options.debug && console.log(\"onPaste()\"), this._textareaValueBeforeInput = this.textarea.value, setTimeout(this.onAfterPaste, 0)\n        },\n        onAfterPaste: function() {\n            this.setCaret(this.textarea.selectionStart)\n        },\n        onMousedown: function(a) {\n            if (3 !== a.originalEvent.detail) {\n                this.options.debug && console.log(\"onMousedown()\");\n                var b = this.getCharNumFromEvent(a);\n                this.startSelecting(), this.select(b), a.preventDefault(), a.stopPropagation()\n            }\n        },\n        onMousemove: function(a) {\n            if (this.selectionInProgress()) {\n                this.options.debug && console.log(\"onMousemove()\");\n                var b = this.getCharNumFromEvent(a);\n                this.storeSelectionDirection(), this.select(null, b), a.preventDefault(), a.stopPropagation()\n            }\n        },\n        onMouseup: function(a) {\n            this.selectionInProgress() && (this.options.debug && console.log(\"onMouseup()\"), this.stopSelecting(), this.trigger(\"select:changed\", this.selection.start, this.selection.end))\n        },\n        onDoubleClick: function(a) {\n            this.options.debug && console.log(\"onDoubleClick()\");\n            var b = this.getCharNumFromEvent(a),\n                c = this.getWordBoundary(b);\n            this.select(c[0], c[1]), a.preventDefault(), a.stopPropagation()\n        },\n        onTripleClick: function(a) {\n            3 === a.originalEvent.detail && (this.options.debug && console.log(\"onTripleClick()\"), this.hideCaret(), this.selectAll(), a.preventDefault(), a.stopPropagation())\n        },\n        findAnnotationsUnderCursor: function(a, b) {\n            return V.findAnnotationsAtIndex(a, b)\n        },\n        findAnnotationsInSelection: function(a, b, c) {\n            return V.findAnnotationsBetweenIndexes(a, b, c)\n        },\n        inferTextOperationType: function(a, b, c) {\n            return a.start === a.end && b.start === b.end && c > 0 ? \"insert\" : a.start === a.end && b.start === b.end && c <= 0 ? \"delete-single\" : a.start !== a.end && b.start === b.end && b.start === a.start ? \"delete\" : a.start !== a.end && b.start !== a.start ? \"delete-insert\" : void 0\n        },\n        annotate: function(a, b, c, d) {\n            var e = [],\n                f = this.inferTextOperationType(b, c, d);\n            return _.each(a, function(a) {\n                var g, h;\n                switch (f) {\n                    case \"insert\":\n                        a.start < b.start && b.start <= a.end ? a.end += d : a.start >= b.start && (a.start += d, a.end += d);\n                        break;\n                    case \"delete-single\":\n                        a.start < b.start && b.start <= a.end && b.start !== c.start ? a.end += d : a.start <= b.start && b.start < a.end && b.start === c.start ? a.end += d : a.start >= b.start && (a.start += d, a.end += d);\n                        break;\n                    case \"delete\":\n                        a.start <= b.start && b.start <= a.end ? b.end <= a.end ? a.end += d : a.end += c.start - a.end : a.start >= b.start && a.start < b.end ? (g = a.end - a.start, h = b.end - a.start, a.start = b.start, a.end = a.start + g - h) : a.start >= b.end && (a.start += d, a.end += d);\n                        break;\n                    case \"delete-insert\":\n                        if (a.start <= b.start && b.start <= a.end) b.start < a.end && (b.end > a.end ? a.end = c.end : a.end = c.end + (a.end - b.end));\n                        else if (a.start >= b.start && a.start <= b.end) {\n                            var i = c.start - b.start;\n                            h = b.end - a.start, g = a.end - a.start, a.start = b.start + i, a.end = a.start + g - h\n                        } else a.start >= b.start && a.end <= b.end ? a.start = a.end = 0 : a.start >= b.end && (a.start += d, a.end += d);\n                        break;\n                    default:\n                        this.options.debug && console.log(\"ui.TextEditor: Unknown text operation.\")\n                }\n                a.end > a.start && e.push(a)\n            }, this), e\n        },\n        shiftAnnotations: function(a, b, c) {\n            return V.shiftAnnotations(a, b, c)\n        },\n        setCurrentAnnotation: function(a) {\n            this._currentAnnotationAttributes = a\n        },\n        setAnnotations: function(a) {\n            this._annotations = a\n        },\n        getAnnotations: function() {\n            return this._annotations\n        },\n        getCombinedAnnotationAttrsAtIndex: function(a, b) {\n            var c = {};\n            return _.each(b, function(b) {\n                _.isUndefined(b.start && _.isUndefined(b.end)) ? V.mergeAttrs(c, b.attrs) : a >= b.start && a < b.end && V.mergeAttrs(c, b.attrs)\n            }), c\n        },\n        getSelectionAttrs: function(a, b) {\n            var c = a.start,\n                d = a.end;\n            if (c === d && 0 === c) return this.getCombinedAnnotationAttrsAtIndex(c, b);\n            if (c === d) return this.getCombinedAnnotationAttrsAtIndex(c - 1, b);\n            for (var e, f = c; f < d; f++) {\n                var g = this.getCombinedAnnotationAttrsAtIndex(f, b);\n                if (e && !_.isEqual(e, g)) {\n                    e = joint.util.flattenObject(V.mergeAttrs({}, e)), g = joint.util.flattenObject(V.mergeAttrs({}, g));\n                    var h = {};\n                    _.each(g, function(a, b) {\n                        e[b] === g[b] && joint.util.setByPath(h, b, a)\n                    }), e = h\n                } else e = g\n            }\n            return e\n        },\n        getTextContent: function() {\n            var a = this.options.text,\n                b = V(a).find(\".v-line\");\n            return 0 === b.length ? a.textContent : _.reduce(b, function(a, b, c, d) {\n                var e = b.node.textContent;\n                return b.hasClass(\"v-empty-line\") && (e = \"\"), c === d.length - 1 ? a + e : a + e + \"\\n\"\n            }, \"\")\n        },\n        startSelecting: function() {\n            this.selecting = !0\n        },\n        stopSelecting: function() {\n            this.selecting = !1\n        },\n        selectionInProgress: function() {\n            return this.selecting === !0\n        },\n        selectAll: function() {\n            return this.select(0, this.getNumberOfChars())\n        },\n        select: function(a, b) {\n            return this.options.debug && console.log(\"select(\", a, b, \")\"), _.isUndefined(b) && (b = a), _.isNumber(a) && (this.selection.start = a), _.isNumber(b) && (this.selection.end = b), _.isNumber(this.selection.end) || (this.selection.end = this.selection.start), _.isNumber(this.selection.start) && _.isNumber(this.selection.end) && (this.selection.start === this.selection.end ? (this.clearSelection(), this.focus(), this.setCaret(this.selection.start)) : (this.hideCaret(), this.renderSelection(this.selection.start, this.selection.end)), this.trigger(\"select:change\", this.selection.start, this.selection.end)), this\n        },\n        setTextAreaSelection: function(a, b) {\n            var c = {\n                start: a,\n                end: b\n            };\n            c = this.normalizeSelectionRange(c), this.textarea.focus(), this.textarea.selectionStart = c.start, this.textarea.selectionEnd = c.end\n        },\n        renderSelection: function(a, b) {\n            this.options.debug && console.log(\"renderSelection()\");\n            var c = {\n                start: a,\n                end: b\n            };\n            if (c = this.normalizeSelectionRange(c), this.clearSelection(), this.options.useNativeSelection) {\n                this.$viewport && (this._viewportUserSelectBefore = this.$viewport.css(\"user-select\"), this.$viewport.css({\n                    \"-webkit-user-select\": \"all\",\n                    \"-moz-user-select\": \"all\",\n                    \"user-select\": \"all\"\n                }));\n                var d = c.end - c.start;\n                this.selectTextInElement(this.options.text, c.start, d)\n            } else this.renderSelectionBoxes(c.start, c.end)\n        },\n        normalizeSelectionStartAndLength: function(a, b, c) {\n            var d = a.substr(0, b),\n                e = a.substr(b, c),\n                f = this.countLineBreaks(d),\n                g = this.countLineBreaks(e);\n            b -= f, c -= g;\n            var h = this.countEmptyLines(d),\n                i = this.countEmptyLines(e);\n            return b += h, c += h, c -= h, c += i, {\n                start: b,\n                length: c\n            }\n        },\n        selectTextInElement: function(a, b, c) {\n            if (_.isFunction(a.selectSubString) && this.selectTextInElementUsingSelectSubString(a, b, c), !this.actualSelectionMatchesExpectedSelection(b, c)) try {\n                this.selectTextInElementUsingRanges(a, b, c)\n            } catch (d) {\n                this.options.debug && console.log(d), _.isFunction(a.selectSubString) && this.selectTextInElementUsingSelectSubString(a, b, c)\n            }\n        },\n        selectTextInElementUsingSelectSubString: function(a, b, c) {\n            var d = this.normalizeSelectionStartAndLength(this.getTextContent(), b, c);\n            try {\n                a.selectSubString(d.start, d.length)\n            } catch (e) {\n                this.options.debug && console.log(e)\n            }\n        },\n        selectTextInElementUsingRanges: function(a, b, c) {\n            var d = window.getSelection();\n            d.removeAllRanges();\n            var e = this.normalizeSelectionStartAndLength(this.getTextContent(), b, c);\n            b = 0 + e.start, c = 0 + e.length;\n            for (var f, g, h, i, j, k, l = this.getTextNodesFromDomElement(a), m = 0, n = b + c; c > 0 && l.length > 0;) f = l.shift(), h = m, i = m + f.length, (h >= b && h < n || i > b && i <= n || b >= h && b < i || n > h && n <= i) && (j = Math.max(b - h, 0), k = Math.min(j + Math.min(c, f.length), i), g = document.createRange(), g.setStart(f, j), g.setEnd(f, k), d.addRange(g), c -= k - j), m += f.length\n        },\n        actualSelectionMatchesExpectedSelection: function(a, b) {\n            var c = window.getSelection(),\n                d = c.toString(),\n                e = this.getExpectedSelectedContent(a, b);\n            return d = d.replace(/\\s/g, \" \"), e === d\n        },\n        getExpectedSelectedContent: function(a, b) {\n            var c = this.getTextContent(),\n                d = c.substr(a, b);\n            return d = d.replace(/(\\n\\r|\\r|\\n){2,}/g, \"-\"), d = d.replace(/\\n\\r|\\r|\\n/g, \"\"), d = d.replace(/\\s/g, \" \")\n        },\n        getTextNodesFromDomElement: function(a) {\n            var b = [];\n            return _.each(a.childNodes, function(a) {\n                _.isUndefined(a.tagName) ? b.push(a) : b = b.concat(this.getTextNodesFromDomElement(a))\n            }, this), b\n        },\n        renderSelectionBoxes: function(a, b) {\n            this.options.debug && console.log(\"renderSelectionBoxes()\"), this.$selection.empty();\n            for (var c, d, e, f = this.getFontSize(), g = this.getTextTransforms(), h = g.rotation, i = a; i < b; i++) {\n                var j = this.$selectionBox.clone();\n                try {\n                    e = this.getCharBBox(i)\n                } catch (k) {\n                    this.trigger(\"select:out-of-range\", a, b);\n                    break\n                }\n                d && 0 === h && Math.round(e.y) === Math.round(d.y) && Math.round(e.height) === Math.round(d.height) && Math.round(e.x) === Math.round(d.x + d.width) ? c.css({\n                    width: \"+=\" + e.width\n                }) : (j.css({\n                    left: e.x,\n                    top: e.y - e.height,\n                    width: e.width,\n                    height: e.height,\n                    \"-webkit-transform\": \"rotate(\" + h + \"deg)\",\n                    \"-webkit-transform-origin\": \"0% 100%\",\n                    \"-moz-transform\": \"rotate(\" + h + \"deg)\",\n                    \"-moz-transform-origin\": \"0% 100%\"\n                }), this.$selection.append(j), c = j), d = e\n            }\n            e && this.$textareaContainer.css({\n                left: e.x,\n                top: e.y - f * g.scaleY\n            })\n        },\n        clearSelection: function() {\n            return this.options.debug && console.log(\"clearSelection()\"), this.$selection.empty(), this.options.text.selectSubString && (this.$viewport && this._viewportUserSelectBefore && this.$viewport.css({\n                \"-webkit-user-select\": this._viewportUserSelectBefore,\n                \"-moz-user-select\": this._viewportUserSelectBefore,\n                \"user-select\": this._viewportUserSelectBefore\n            }), window.getSelection().removeAllRanges()), this\n        },\n        deselect: function() {\n            return this.options.debug && console.log(\"deselect()\"), this.stopSelecting(), this.clearSelection(), this.setTextAreaSelection(this.selection.start, this.selection.end), this\n        },\n        getSelectionStart: function() {\n            return this.selection.start\n        },\n        getSelectionEnd: function() {\n            return this.selection.end\n        },\n        getSelectionRange: function() {\n            return this.normalizeSelectionRange(this.selection)\n        },\n        normalizeSelectionRange: function(a) {\n            return a = _.clone(a), a.start > a.end && (a.end = [a.start, a.start = a.end][0]), a\n        },\n        getSelectionLength: function() {\n            var a = this.getSelectionRange();\n            return a.end - a.start\n        },\n        getSelection: function() {\n            var a = this.getSelectionRange();\n            return this.getTextContent().slice(a.start, a.end)\n        },\n        getWordBoundary: function(a) {\n            for (var b = this.textarea.value, c = /\\W/, d = a; d;) {\n                if (c.test(b[d])) {\n                    d += 1;\n                    break\n                }\n                d -= 1\n            }\n            for (var e = this.getNumberOfChars(), f = a; f <= e && !c.test(b[f]);) f += 1;\n            return d < f ? [d, f] : [f, d]\n        },\n        getURLBoundary: function(a) {\n            for (var b = this.textarea.value, c = /\\s/, d = /[-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]{2,256}\\.[a-z]{2,4}\\b(\\/[-a-zA-Z0-9@:%_\\+.~#?&\\/\\/=]*)?/, e = a; e;) {\n                if (c.test(b[e])) {\n                    e += 1;\n                    break\n                }\n                e -= 1\n            }\n            for (var f = this.getNumberOfChars(), g = a; g <= f && !c.test(b[g]);) g += 1;\n            if (d.test(b.substring(e, g))) return [e, g]\n        },\n        annotateURL: function(a, b, c) {\n            var d = this.textarea.value.substring(b, c),\n                e = _.extend({\n                    url: d\n                }, this.options.urlAnnotation);\n            return e.start = b, e.end = c, _.isEqual(e, _.last(a)) || a.push(e), a\n        },\n        getCharBBox: function(a) {\n            if (this.isLineEnding(a)) {\n                var b = this.getCharBBox(a - 1);\n                return b.x = b.x2, b.y = b.y2, b.width = this.options.newlineCharacterBBoxWidth || 10, b\n            }\n            var c = this.realToSvgCharNum(a),\n                d = this.options.text,\n                e = d.getStartPositionOfChar(c),\n                f = d.getEndPositionOfChar(c),\n                g = d.getExtentOfChar(c);\n            e = this.localToScreenCoordinates(e), f = this.localToScreenCoordinates(f);\n            var h = this.getTextTransforms(),\n                i = e.x,\n                j = e.y,\n                k = g.width * h.scaleX,\n                l = g.height * h.scaleY;\n            return {\n                x: i,\n                y: j,\n                width: k,\n                height: l,\n                x2: f.x,\n                y2: f.y\n            }\n        },\n        realToSvgCharNum: function(a) {\n            for (var b = 0, c = 0; c <= a; c++) this.isLineEnding(c) && (b += 1);\n            return a - b\n        },\n        selectionStartToSvgCharNum: function(a) {\n            return a - this.nonEmptyLinesBefore(a)\n        },\n        isLineEnding: function(a) {\n            var b = this.textarea.value;\n            return \"\\n\" === b[a] && a > 0 && \"\\n\" !== b[a - 1]\n        },\n        svgToRealCharNum: function(a) {\n            for (var b = 0, c = 0; c <= a + b; c++) this.isLineEnding(c) && (b += 1);\n            return a + b\n        },\n        localToScreenCoordinates: function(a) {\n            return $(this.options.text).show(), V.transformPoint(a, this.options.text.getCTM())\n        },\n        getNumberOfChars: function() {\n            return this.getTextContent().length\n        },\n        getCharNumFromEvent: function(a) {\n            var b = this.options.text,\n                c = a.clientX,\n                d = a.clientY,\n                e = V(b).toLocalPoint(c, d),\n                f = b.getCharNumAtPosition(e);\n            if (f < 0) return this.getNumberOfChars();\n            var g = this.localToScreenCoordinates(e),\n                h = this.getCharBBox(this.svgToRealCharNum(f));\n            return Math.abs(h.x - g.x) < Math.abs(h.x + h.width - g.x) ? this.svgToRealCharNum(f) : this.svgToRealCharNum(f) + 1\n        },\n        lineNumber: function(a) {\n            var b = this.textarea.value.substr(0, a);\n            return this.countLineBreaks(b)\n        },\n        emptyLinesBefore: function(a) {\n            for (var b = this.textarea.value.split(/\\n\\r|\\r|\\n/g), c = this.lineNumber(a), d = 0, e = c - 1; e >= 0; e--) b[e] || (d += 1);\n            return d\n        },\n        countLineBreaks: function(a) {\n            return (a.match(/\\n\\r|\\r|\\n/g) || []).length\n        },\n        countEmptyLines: function(a) {\n            return (a.match(/(\\n\\r|\\r|\\n){2,}/g) || []).length\n        },\n        nonEmptyLinesBefore: function(a) {\n            return this.lineNumber(a) - this.emptyLinesBefore(a)\n        },\n        isEmptyLine: function(a) {\n            var b = this.textarea.value.split(/\\n\\r|\\r|\\n/g);\n            return !b[a]\n        },\n        isEmptyLineUnderSelection: function(a) {\n            var b = this.lineNumber(a);\n            return this.isEmptyLine(b)\n        },\n        getTextTransforms: function() {\n            var a = this.options.text.getCTM();\n            return V.decomposeMatrix(a)\n        },\n        getFontSize: function() {\n            return parseInt(V(this.options.text).attr(\"font-size\"), 10)\n        },\n        getTextAnchor: function() {\n            return V(this.options.text).attr(\"text-anchor\") || \"\"\n        },\n        setCaret: function(a, b) {\n            _.isObject(a) && (b = a, a = void 0), b = b || {};\n            var c = this.options.text,\n                d = this.getNumberOfChars(),\n                e = this.selection.start,\n                f = this.textarea.value;\n            \"undefined\" != typeof a && (a = Math.min(Math.max(a, 0), d), e = this.selection.start = this.selection.end = a), b.silent || this.trigger(\"caret:change\", e), this.setTextAreaSelection(e, e), this.options.debug && console.log(\"setCaret(\", a, b, \")\", \"selectionStart\", e, \"isLineEnding\", this.isLineEnding(e), \"isEmptyLineUnderSelection\", this.isEmptyLineUnderSelection(e), \"svgCharNum\", this.selectionStartToSvgCharNum(e), \"nonEmptyLinesBefore\", this.nonEmptyLinesBefore(e));\n            var g;\n            try {\n                var h;\n                this.isEmptyLineUnderSelection(e) || !this.isLineEnding(e) && f.length !== e ? (h = this.selectionStartToSvgCharNum(e), g = c.getStartPositionOfChar(h)) : (h = this.selectionStartToSvgCharNum(e) - 1, g = c.getEndPositionOfChar(h))\n            } catch (i) {\n                this.trigger(\"caret:out-of-range\", e), g = {\n                    x: 0,\n                    y: 0\n                }\n            }\n            var j = this.localToScreenCoordinates(g),\n                k = this.getTextTransforms(),\n                l = k.rotation,\n                m = this.getFontSize() * k.scaleY;\n            return this.options.placeholder && this.$caret.toggleClass(\"placeholder\", 0 === d), this.$caret.css({\n                left: j.x,\n                top: j.y + (d ? -m : 0),\n                height: m,\n                \"line-height\": m + \"px\",\n                \"font-size\": m + \"px\",\n                \"-webkit-transform\": \"rotate(\" + l + \"deg)\",\n                \"-webkit-transform-origin\": \"0% 100%\",\n                \"-moz-transform\": \"rotate(\" + l + \"deg)\",\n                \"-moz-transform-origin\": \"0% 100%\"\n            }).attr({\n                \"text-anchor\": this.getTextAnchor()\n            }).show(), this.$textareaContainer.css({\n                left: j.x,\n                top: j.y + (d ? -m : 0)\n            }), this.focus(), this\n        },\n        focus: function() {\n            return this.options.debug && console.log(\"focus()\"), this.showCaret(), this\n        },\n        blur: function() {\n            return this.options.debug && console.log(\"blur()\"), this.hideCaret(), this\n        },\n        showCaret: function() {\n            return this.options.debug && console.log(\"showCaret()\"), this.$caret.show(), this\n        },\n        hideCaret: function() {\n            return this.options.debug && console.log(\"hideCaret()\"), this.$caret.hide(), this\n        },\n        unbindTextElement: function() {\n            this.$elText.off(\"mousedown\", this.onMousedown), this.$elText.off(\"dblclick\", this.onDoubleClick), this.$elText.off(\"click\", this.onTripleClick)\n        },\n        onRemove: function() {\n            this.deselect(), this.unbindTextElement(), $(document.body).off(\"mousemove\", this.onMousemove), $(document.body).off(\"mouseup\", this.onMouseup), $(document.body).off(\"keydown\", this.onKeydown), V(this.options.text).attr(\"cursor\", \"\")\n        }\n    }, _.extend({\n        getTextElement: function(a) {\n            var b = a.tagName.toUpperCase();\n            if (\"TEXT\" === b || \"TSPAN\" === b || \"TEXTPATH\" === b) return \"TEXT\" === b ? a : this.getTextElement(a.parentNode)\n        },\n        edit: function(a, b) {\n            b = b || {};\n            var c = b.update !== !1;\n            this.options = _.extend({}, b, {\n                update: c\n            });\n            var d = this.getTextElement(a);\n            if (!d) return void(this.options.debug && console.log(\"ui.TextEditor: cannot find a text element.\"));\n            this.close(), this.ed = new joint.ui.TextEditor(_.extend({\n                text: d\n            }, b)), this.ed.on(\"all\", this.trigger, this);\n            var e;\n            if (b.cellView) {\n                if (e = b.cellView.paper.el, this.cellViewUnderEdit = b.cellView, this.cellViewUnderEditInteractiveOption = this.cellViewUnderEdit.options.interactive, this.cellViewUnderEdit.options.interactive = !1, b.annotationsProperty && !this.ed.getAnnotations()) {\n                    var f = this.cellViewUnderEdit.model.prop(b.annotationsProperty);\n                    f && this.ed.setAnnotations(this.deepCloneAnnotations(f))\n                }\n            } else {\n                var g = V(d).svg();\n                e = g.parentNode\n            }\n            return c && this.ed.on(\"text:change\", function(a, c, e) {\n                if (b.cellView) {\n                    var f = null;\n                    if (b.textProperty && (b.cellView.model.isLink() && \"labels\" === b.textProperty.substr(0, \"labels\".length) && (f = V($(V(d).node).closest(\".label\")[0]).index()), b.cellView.model.prop(b.textProperty, a, {\n                            textEditor: this.ed.cid\n                        })), b.annotationsProperty && b.cellView.model.prop(b.annotationsProperty, this.deepCloneAnnotations(e), {\n                            rewrite: !0,\n                            textEditor: this.ed.cid\n                        }), null !== f) {\n                        var g = V(b.cellView.el).find(\".label\");\n                        d = g[f].findOne(\"text\"), this.ed.setTextElement(d.node)\n                    }\n                } else V(d).text(a, e)\n            }, this), this.ed.render(e), this\n        },\n        close: function() {\n            if (this.ed) {\n                if (this.ed.options.annotateUrls) {\n                    var a = this.ed.getSelectionStart(),\n                        b = this.findAnnotationsUnderCursor(),\n                        c = _.find(b, function(a) {\n                            return !!a.url && a\n                        });\n                    if (!c) {\n                        var d = this.ed.annotateURLBeforeCaret(a);\n                        d && this.applyAnnotations(this.getAnnotations())\n                    }\n                }\n                this.ed.remove(), this.cellViewUnderEdit && (this.cellViewUnderEdit.options.interactive = this.cellViewUnderEditInteractiveOption), this.ed = this.cellViewUnderEdit = this.cellViewUnderEditInteractiveOption = void 0\n            }\n        },\n        applyAnnotations: function(a) {\n            var b = this.options;\n            if (this.ed && b.update) {\n                b.cellView && b.annotationsProperty ? (b.cellView.model.prop(b.annotationsProperty, this.deepCloneAnnotations(a), {\n                    rewrite: !0\n                }), this.ed.setAnnotations(a)) : V(this.ed.options.text).text(this.ed.getTextContent(), a);\n                var c = this.getSelectionRange(),\n                    d = this.getSelectionLength();\n                d > 0 ? this.ed.select(c.start, c.end) : this.ed.setCaret()\n            }\n        },\n        deepCloneAnnotations: function(a) {\n            try {\n                return JSON.parse(JSON.stringify(a))\n            } catch (b) {\n                return\n            }\n        },\n        proxy: function(a, b) {\n            if (this.ed) return this.ed[a].apply(this.ed, b)\n        },\n        setCurrentAnnotation: function(a) {\n            return this.proxy(\"setCurrentAnnotation\", arguments)\n        },\n        getAnnotations: function() {\n            return this.proxy(\"getAnnotations\", arguments)\n        },\n        setCaret: function() {\n            return this.proxy(\"setCaret\", arguments)\n        },\n        deselect: function() {\n            return this.proxy(\"deselect\", arguments)\n        },\n        selectAll: function() {\n            return this.proxy(\"selectAll\", arguments)\n        },\n        select: function() {\n            return this.proxy(\"select\", arguments)\n        },\n        getNumberOfChars: function() {\n            return this.proxy(\"getNumberOfChars\", arguments)\n        },\n        getCharNumFromEvent: function() {\n            return this.proxy(\"getCharNumFromEvent\", arguments)\n        },\n        getWordBoundary: function() {\n            return this.proxy(\"getWordBoundary\", arguments)\n        },\n        findAnnotationsUnderCursor: function() {\n            return this.proxy(\"findAnnotationsUnderCursor\", [this.ed.getAnnotations(), this.ed.getSelectionStart()])\n        },\n        findAnnotationsInSelection: function() {\n            if (this.ed) {\n                var a = this.ed.getSelectionRange();\n                return this.proxy(\"findAnnotationsInSelection\", [this.ed.getAnnotations(), a.start, a.end])\n            }\n        },\n        getSelectionAttrs: function(a) {\n            if (this.ed) {\n                var b = this.ed.getSelectionRange();\n                return this.proxy(\"getSelectionAttrs\", [b, a])\n            }\n        },\n        getSelectionLength: function() {\n            return this.proxy(\"getSelectionLength\", arguments)\n        },\n        getSelectionRange: function() {\n            return this.proxy(\"getSelectionRange\", arguments)\n        }\n    }, Backbone.Events));\n    joint.ui.Dialog = joint.mvc.View.extend({\n        className: \"dialog\",\n        events: {\n            \"click .bg\": \"action\",\n            \"click .btn-close\": \"action\",\n            \"click .controls button\": \"action\",\n            \"mousedown .titlebar\": \"onDragStart\",\n            \"touchstart .titlebar\": \"onDragStart\"\n        },\n        options: {\n            draggable: !1,\n            closeButtonContent: \"&times;\",\n            closeButton: !0,\n            inlined: !1,\n            modal: !0\n        },\n        init: function() {\n            _.bindAll(this, \"onDrag\", \"onDragEnd\")\n        },\n        render: function() {\n            var a = $(\"<div/>\", {\n                    \"class\": \"bg\",\n                    \"data-action\": \"close\"\n                }),\n                b = $(\"<div/>\", {\n                    \"class\": \"fg\"\n                }),\n                c = $(\"<div/>\", {\n                    \"class\": \"titlebar\"\n                }),\n                d = $(\"<div/>\", {\n                    \"class\": \"body\"\n                }),\n                e = $(\"<button/>\", {\n                    \"class\": \"btn-close\",\n                    \"data-action\": \"close\",\n                    html: this.options.closeButtonContent\n                }),\n                f = $(\"<div/>\", {\n                    \"class\": \"controls\"\n                });\n            return this.$el.toggleClass(\"draggable\", !!this.options.draggable), this.options.type && this.$el.attr(\"data-type\", this.options.type), this.options.inlined && this.$el.addClass(\"inlined\"), this.options.modal && this.$el.addClass(\"modal\"), this.options.width && b.width(this.options.width), this.options.title ? c.append(this.options.title) : c.addClass(\"empty\"), this.options.content && d.append(this.options.content), this.options.buttons && _.each(this.options.buttons.reverse(), function(a) {\n                var b = $(\"<button/>\", {\n                    \"class\": \"control-button\",\n                    html: a.content,\n                    \"data-action\": a.action\n                });\n                a.position && b.addClass(a.position), f.append(b)\n            }), b.append(c, d, f), this.options.closeButton && b.append(e), this.$el.empty().append(a, b), this\n        },\n        open: function(a) {\n            return this.delegateEvents(), this.on(\"action:close\", this.close, this), $(document.body).on({\n                \"mousemove.dialog touchmove.dialog\": this.onDrag,\n                \"mouseup.dialog touchend.dialog\": this.onDragEnd\n            }), $(a || document.body).append(this.render().el), this.$el.addClass(\"rendered\"), this\n        },\n        close: function() {\n            return this.remove(), this\n        },\n        onRemove: function() {\n            $(document.body).off(\".dialog\", this.onDrag).off(\".dialog\", this.onDragStart)\n        },\n        action: function(a) {\n            var b = $(a.target).closest(\"[data-action]\"),\n                c = b.attr(\"data-action\");\n            c && this.trigger(\"action:\" + c)\n        },\n        onDragStart: function(a) {\n            this.options.draggable && (a = joint.util.normalizeEvent(a), this._dx = a.clientX, this._dy = a.clientY, this._dragging = !0)\n        },\n        onDrag: function(a) {\n            if (this._dragging) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.$(\".fg\"),\n                    c = b.offset();\n                b.css({\n                    top: c.top + (a.clientY - this._dy),\n                    left: c.left + (a.clientX - this._dx),\n                    margin: 0\n                }), this._dx = a.clientX, this._dy = a.clientY\n            }\n        },\n        onDragEnd: function() {\n            this._dragging = !1\n        }\n    });\n    joint.ui.FlashMessage = joint.ui.Dialog.extend({\n        className: joint.ui.Dialog.prototype.className + \" flash-message\",\n        options: _.merge({}, joint.ui.Dialog.prototype.options, {\n            closeButton: !0,\n            modal: !1,\n            cascade: !0,\n            closeAnimation: {\n                delay: 2e3,\n                duration: 200,\n                easing: \"swing\",\n                properties: {\n                    opacity: 0\n                }\n            },\n            openAnimation: {\n                duration: 200,\n                easing: \"swing\",\n                properties: {\n                    opacity: 1\n                }\n            }\n        }),\n        init: function() {\n            _.bindAll(this, \"startCloseAnimation\"), joint.ui.Dialog.prototype.init.apply(this, arguments), this.on(\"close:animation:complete\", this.close, this)\n        },\n        open: function() {\n            joint.ui.Dialog.prototype.open.apply(this, arguments);\n            var a = this.$(\".fg\");\n            return this._foregroundHeight = a.height(), this.addToCascade(), a.css(\"height\", 0), this.startOpenAnimation(), this.options.closeAnimation && this.options.closeAnimation.delay && setTimeout(this.startCloseAnimation, this.options.closeAnimation.delay), this\n        },\n        close: function() {\n            return joint.ui.Dialog.prototype.close.apply(this, arguments), this.removeFromCascade(), this\n        },\n        addToCascade: function() {\n            if (this.options.cascade) {\n                var a = this.constructor.top;\n                this.$(\".fg\").css(\"top\", a), this.constructor.top += this._foregroundHeight + this.constructor.padding\n            }\n            this.constructor.opened.push(this)\n        },\n        removeFromCascade: function() {\n            if (this.options.cascade) {\n                for (var a = this.constructor.opened, b = !1, c = 0; c < a.length; c++) {\n                    var d = a[c];\n                    if (d.options.cascade && b) {\n                        var e = parseInt(d.$(\".fg\").css(\"top\"), 10);\n                        d.$(\".fg\").css(\"top\", e - this._foregroundHeight - this.constructor.padding)\n                    }\n                    d === this && (b = !0)\n                }\n                b && (this.constructor.top -= this._foregroundHeight + this.constructor.padding)\n            }\n            this.constructor.opened = _.without(this.constructor.opened, this)\n        },\n        startCloseAnimation: function() {\n            this.$(\".fg\").animate(this.options.closeAnimation.properties, _.extend({\n                complete: _.bind(function() {\n                    this.trigger(\"close:animation:complete\")\n                }, this)\n            }, this.options.closeAnimation))\n        },\n        startOpenAnimation: function() {\n            var a = this.$(\".fg\");\n            a.animate(_.extend({}, this.options.openAnimation.properties, {\n                height: this._foregroundHeight\n            }), _.extend({\n                complete: _.bind(function() {\n                    this.trigger(\"open:animation:complete\")\n                }, this)\n            }, this.options.openAnimation))\n        }\n    }, {\n        top: 20,\n        padding: 15,\n        opened: [],\n        open: function(a, b, c) {\n            return c = c || {}, new joint.ui.FlashMessage(_.extend({\n                title: b,\n                type: \"info\",\n                content: a\n            }, c)).open(c.target)\n        },\n        close: function() {\n            _.invoke(this.opened, \"close\")\n        }\n    });\n    ! function(a, b, c) {\n        \"use strict\";\n        var d = function() {\n            c.bindAll(this, \"handleKey\"), this.parser = new e, this.enable()\n        };\n        c.extend(d.prototype, b.Events), d.prototype.on = function(a, c, d) {\n            return b.Events.on.call(this, this.normalizeEvent(a), c, d), this\n        }, d.prototype.off = function(a, c, d) {\n            var e = a ? this.normalizeEvent(a) : null;\n            return b.Events.off.call(this, e, c, d), this\n        }, d.prototype.normalizeEvent = function(a) {\n            return \"object\" == typeof a ? c.transform(a, function(a, b, c) {\n                a[this.normalizeShortcut(c)] = b\n            }, null, this) : this.normalizeShortcut(a)\n        }, d.prototype.normalizeShortcut = function(a) {\n            if (\"all\" === a.toLowerCase()) return a;\n            for (var b = this.parser.toEventObjectList(a), c = [], d = 0; d < b.length; d++) c.push(this.hash(b[d]));\n            return c.join(\" \")\n        }, d.prototype.enable = function() {\n            window.addEventListener ? (document.addEventListener(\"keydown\", this.handleKey, !1), document.addEventListener(\"keypress\", this.handleKey, !1), document.addEventListener(\"keyup\", this.handleKey, !1)) : window.attachEvent && (document.attachEvent(\"keydown\", this.handleKey, !1), document.attachEvent(\"keypress\", this.handleKey, !1), document.attachEvent(\"keyup\", this.handleKey, !1))\n        }, d.prototype.disable = function() {\n            window.removeEventListener ? (document.removeEventListener(\"keydown\", this.handleKey, !1), document.removeEventListener(\"keypress\", this.handleKey, !1), document.removeEventListener(\"keyup\", this.handleKey, !1)) : window.detachEvent && (document.detachEvent(\"keydown\", this.handleKey, !1), document.detachEvent(\"keypress\", this.handleKey, !1), document.detachEvent(\"keyup\", this.handleKey, !1))\n        }, d.prototype.isActive = function(a, b) {\n            return this.isModifierActive(a, b)\n        }, d.prototype.isModifierActive = function(a, b) {\n            for (var c = this.parser.toEventObjectList(a), d = 0; d < c.length; d++)\n                if (c[d].modifiersCompare(b)) return !0;\n            return !1\n        }, d.prototype.hash = function(a) {\n            var b = function(a) {\n                    return a ? 1 : 0\n                },\n                c = [a.type, \":\", a.which, b(a.shiftKey), b(a.ctrlKey), b(a.altKey), b(a.metaKey)];\n            return c.join(\"\")\n        }, d.prototype.handleKey = function(a) {\n            if (!this.isUnsupportedElement(a)) {\n                var c = l.fromNative(a);\n                b.Events.trigger.call(this, this.hash(c), a)\n            }\n        }, d.prototype.isUnsupportedElement = function(a) {\n            var b = a.target || a.srcElement;\n            if (b) {\n                var c = b.tagName.toUpperCase();\n                return \"INPUT\" === c || \"SELECT\" === c || \"TEXTAREA\" === c || b.isContentEditable\n            }\n            return !1\n        };\n        var e = function() {};\n        e.prototype = {\n            constructor: e,\n            parseEventString: function(a) {\n                a = a || \"\";\n                var b, c, d = a.split(\"+\"),\n                    f = new l(0);\n                for (c = 0; c < d.length; c++) {\n                    b = d[c];\n                    var g = this.getModifierPropertyName(b);\n                    g && (f[g] = !0), 1 !== d.length && void 0 !== g || (f.which = e.getCode(b))\n                }\n                return f\n            },\n            toEventObjectList: function(a) {\n                var b = a.replace(/\\s*\\+\\s*/gi, \"+\").split(\" \");\n                return c.map(b, this.composeEventObject, this)\n            },\n            composeEventObject: function(a) {\n                var b = a.split(\":\"),\n                    c = j.KEYDOWN,\n                    d = b[0];\n                if (b.length > 1 && (d = b[1], c = b[0]), k.indexOf(c) === -1) throw a + \": invalid shortcut definition\";\n                var e = this.parseEventString(d);\n                return c === j.KEYUP && g[e.which] && (e[g[e.which]] = !1), e.setType(c)\n            },\n            getModifierPropertyName: function(a) {\n                var b = f[a];\n                return g[b]\n            }\n        }, e.getCode = function(a) {\n            return i[a] || a.toUpperCase().charCodeAt(0)\n        };\n        var f = {\n                \"⇧\": 16,\n                shift: 16,\n                \"⌥\": 18,\n                alt: 18,\n                option: 18,\n                \"⌃\": 17,\n                ctrl: 17,\n                control: 17,\n                \"⌘\": 91,\n                command: 91,\n                meta: 91\n            },\n            g = {\n                16: \"shiftKey\",\n                18: \"altKey\",\n                17: \"ctrlKey\",\n                91: \"metaKey\"\n            },\n            h = {\n                226: \"\\\\\",\n                57392: \"ctrl\",\n                63289: \"num\",\n                59: \";\",\n                61: \"=\",\n                173: \"-\"\n            },\n            i = {\n                backspace: 8,\n                tab: 9,\n                shift: 16,\n                ctrl: 17,\n                alt: 18,\n                meta: 91,\n                clear: 12,\n                enter: 13,\n                \"return\": 13,\n                esc: 27,\n                escape: 27,\n                capslock: 20,\n                space: 32,\n                left: 37,\n                up: 38,\n                right: 39,\n                down: 40,\n                del: 46,\n                \"delete\": 46,\n                home: 36,\n                end: 35,\n                insert: 45,\n                ins: 45,\n                pageup: 33,\n                pagedown: 34,\n                plus: 187,\n                minus: 189,\n                \"-\": 189,\n                \",\": 188,\n                \".\": 190,\n                \"/\": 191,\n                \"`\": 192,\n                \"=\": 187,\n                \";\": 186,\n                \"'\": 222,\n                \"[\": 219,\n                \"]\": 221,\n                \"\\\\\": 220\n            },\n            j = {\n                KEYPRESS: \"keypress\",\n                KEYDOWN: \"keydown\",\n                KEYUP: \"keyup\"\n            },\n            k = [j.KEYPRESS, j.KEYDOWN, j.KEYUP],\n            l = function(a, b, c, d, e, f) {\n                this.which = a, this.shiftKey = b || !1, this.ctrlKey = c || !1, this.altKey = d || !1, this.metaKey = e || !1, this.type = f || j.KEYDOWN\n            };\n        l.fromNative = function(a) {\n            var b = a.which;\n            a.type === j.KEYPRESS && (b = String.fromCharCode(a.which).toUpperCase().charCodeAt(0)), h[b] && (b = e.getCode(h[b]));\n            var c = new l(b, a.shiftKey, a.ctrlKey, a.altKey, a.metaKey, a.type);\n            return a.type === j.KEYUP && g[b] && (c[g[b]] = !1), c\n        }, l.prototype.modifiersCompare = function(a) {\n            return !(this.shiftKey && this.shiftKey !== a.shiftKey || this.ctrlKey && this.ctrlKey !== a.ctrlKey || this.altKey && this.altKey !== a.altKey || this.metaKey && this.metaKey !== a.metaKey)\n        }, l.prototype.setType = function(a) {\n            return this.type = a, this\n        }, a.ui.Keyboard = d\n    }(joint, Backbone, _);\n    joint.ui.Lightbox = joint.ui.Dialog.extend({\n        className: joint.ui.Dialog.prototype.className + \" lightbox\",\n        options: _.merge({}, joint.ui.Dialog.prototype.options, {\n            closeButton: !0,\n            modal: !0,\n            closeAnimation: {\n                delay: 2e3,\n                duration: 200,\n                easing: \"swing\",\n                properties: {\n                    opacity: 0\n                }\n            },\n            top: 100,\n            windowArea: .8,\n            openAnimation: !1\n        }),\n        init: function() {\n            _.bindAll(this, \"startCloseAnimation\", \"positionAndScale\"), joint.ui.Dialog.prototype.init.apply(this, arguments), this.options.image && (this.$image = $(\"<img/>\").on(\"load\", this.positionAndScale), this.options.content = this.$image), $(window).on(\"resize\", this.positionAndScale), this.on(\"close:animation:complete\", this.remove, this)\n        },\n        open: function() {\n            return joint.ui.Dialog.prototype.open.apply(this, arguments), this.$image && this.$image.attr(\"src\", this.options.image), this.positionAndScale(), this.startOpenAnimation(), this\n        },\n        positionAndScale: function() {\n            var a = this.$(\".fg\"),\n                b = this.$(\".body > img\"),\n                c = this.options.windowArea,\n                d = window.innerWidth * c;\n            this.$el.css(\"margin-top\", this.options.top);\n            var e = this.$(\".titlebar\");\n            e.css(\"width\", d);\n            var f = e.height(),\n                g = window.innerHeight * c - f - this.options.top;\n            e.css(\"width\", \"auto\"), a.css({\n                width: d,\n                height: g\n            });\n            var h = b.width(),\n                i = b.height();\n            a.css({\n                width: h,\n                height: i\n            })\n        },\n        close: function() {\n            return this.options.closeAnimation ? this.startCloseAnimation() : joint.ui.Dialog.prototype.close.apply(this, arguments), this\n        },\n        onRemove: function() {\n            joint.ui.Dialog.prototype.onRemove.apply(this, arguments), $(window).off(\"resize\", this.positionAndScale), this.$image && this.$image.off(\"load\", this.positionAndScale)\n        },\n        startCloseAnimation: function() {\n            this.$el.animate(this.options.closeAnimation.properties, _.extend({\n                complete: _.bind(function() {\n                    this.trigger(\"close:animation:complete\")\n                }, this)\n            }, this.options.closeAnimation))\n        },\n        startOpenAnimation: function() {\n            this.$el.animate(_.extend({}, this.options.openAnimation.properties, {\n                height: this._foregroundHeight\n            }), _.extend({\n                complete: _.bind(function() {\n                    this.trigger(\"open:animation:complete\")\n                }, this)\n            }, this.options.openAnimation))\n        }\n    });\n    joint.ui.ContextToolbar = joint.mvc.View.extend({\n        className: \"context-toolbar\",\n        eventNamespace: \"context-toolbar\",\n        events: {\n            \"click .tool\": \"onToolPointerdown\"\n        },\n        options: {\n            padding: 20,\n            autoClose: !0\n        },\n        init: function() {\n            _.bindAll(this, \"onDocumentMousedown\")\n        },\n        render: function() {\n            return this.constructor.opened && this.constructor.close(), this.bind(), this.options.type && this.$el.attr(\"data-type\", this.options.type), $(this.getRoot()).append(this.$el), this.renderContent(), this.position(), this.constructor.opened = this, this\n        },\n        renderContent: function() {\n            var a = $(\"<div/>\", {\n                \"class\": \"tools\"\n            });\n            this.options.tools && _.each(this.options.tools, function(b) {\n                var c;\n                c = b.icon ? $(\"<img/>\", {\n                    src: b.icon\n                }) : b.content;\n                var d = $(\"<button/>\", {\n                    \"class\": \"tool\",\n                    html: c,\n                    \"data-action\": b.action\n                });\n                b.attrs && d.attr(b.attrs), a.append(d)\n            }), this.$el.append(a)\n        },\n        getRoot: function() {\n            return this.options.root || document.documentElement\n        },\n        position: function() {\n            var a = joint.util.getElementBBox(this.options.target),\n                b = joint.util.getElementBBox(this.getRoot()),\n                c = this.$el.outerWidth(),\n                d = a.x + a.width / 2 - c / 2,\n                e = a.y + a.height + this.options.padding;\n            d -= b.x, e -= b.y, this.$el.css({\n                left: d,\n                top: e\n            })\n        },\n        onRemove: function() {\n            this.unbind(), this.constructor.opened = void 0\n        },\n        bind: function() {\n            $(document).on(\"mousedown.\" + this.eventNamespace, this.onDocumentMousedown)\n        },\n        unbind: function() {\n            return $(document).off(\"mousedown.\" + this.eventNamespace, this.onDocumentMousedown), this\n        },\n        onToolPointerdown: function(a) {\n            var b = $(a.target).closest(\"[data-action]\"),\n                c = b.attr(\"data-action\");\n            c && this.trigger(\"action:\" + c, a)\n        },\n        onDocumentMousedown: function(a) {\n            if (this.options.autoClose) {\n                var b = this.options.target;\n                this.el.contains(a.target) || b.contains(a.target) || b === a.target || (this.constructor.close(), this.remove())\n            }\n        }\n    }, {\n        opened: void 0,\n        close: function() {\n            this.opened && (this.opened.remove(), this.opened = void 0)\n        },\n        update: function() {\n            this.opened && this.opened.position()\n        }\n    });\n    joint.ui.Popup = joint.ui.ContextToolbar.extend({\n        className: \"popup\",\n        eventNamespace: \"popup\",\n        events: {},\n        renderContent: function() {\n            var a = _.isFunction(this.options.content) ? this.options.content(this.el) : this.options.content;\n            a && this.$el.html(a)\n        }\n    });\n    joint.ui.SelectBox = joint.mvc.View.extend({\n        className: \"select-box\",\n        events: {\n            \"click .select-box-selection\": \"onToggle\"\n        },\n        options: {\n            options: [],\n            width: void 0,\n            openPolicy: \"auto\",\n            target: null,\n            keyboardNavigation: !0,\n            selected: void 0,\n            selectBoxOptionsClass: void 0,\n            disabled: !1\n        },\n        init: function() {\n            this.options.target = this.options.target || document.body, _.bindAll(this, \"onOutsideClick\", \"onOptionSelect\"), $(document).on(\"click.selectBox\", this.onOutsideClick), this.$el.data(\"view\", this), _.isUndefined(this.options.selected) ? this.selection = _.findWhere(this.options.options, {\n                selected: !0\n            }) || this.options.options[0] : this.selection = this.options.options[this.options.selected]\n        },\n        render: function() {\n            return this.$el.empty(), this.$selection = null, this.renderSelection(this.selection), this.options.width && this.$el.css(\"width\", this.options.width), this.options.disabled && this.disable(), this.$el.append(this.$options), this\n        },\n        renderOptions: function() {\n            this.removeOptions();\n            var a = {\n                selectBoxView: this,\n                parentClassName: _.result(this, \"className\") || null,\n                extraClassName: _.result(this.options, \"selectBoxOptionsClass\") || null,\n                options: this.options.options\n            };\n            this.options.width && (a.width = this.options.width), this.optionsView = new this.constructor.OptionsView(a), this.optionsView.render(), this.listenTo(this.optionsView, \"option:select\", this.onOptionSelect), this.listenTo(this.optionsView, \"option:hover\", this.onOptionHover), this.listenTo(this.optionsView, \"options:mouseout\", this.onOptionsMouseOut), this.$options = this.optionsView.$el, this.$optionsArrow = this.optionsView.$arrow, this.$target = $(this.options.target)\n        },\n        onOptionHover: function(a, b) {\n            this.trigger(\"option:hover\", a, b)\n        },\n        onOptionsMouseOut: function(a) {\n            this.trigger(\"options:mouseout\", a)\n        },\n        onOptionSelect: function(a, b) {\n            this.select(a, b)\n        },\n        removeOptions: function() {\n            this.optionsView && (this.stopListening(this.optionsView), this.optionsView.remove(), this.optionsView = null)\n        },\n        renderSelection: function(a) {\n            if (this.$selection || (this.$selection = $(\"<div/>\", {\n                    \"class\": \"select-box-selection\"\n                }), this.$el.append(this.$selection)), this.$selection.empty(), a) {\n                var b = this.constructor.OptionsView.prototype.renderOptionContent.call(void 0, a);\n                this.$selection.append(b)\n            } else if (this.options.placeholder) {\n                var c = $(\"<div/>\", {\n                    \"class\": \"select-box-placeholder\",\n                    html: this.options.placeholder\n                });\n                this.$selection.append(c)\n            }\n        },\n        onToggle: function(a) {\n            this.toggle()\n        },\n        onOutsideClick: function(a) {\n            !this.el.contains(a.target) && this.$el.hasClass(\"opened\") && this.close()\n        },\n        getSelection: function() {\n            return this.selection\n        },\n        getSelectionValue: function(a) {\n            return a = a || this.selection, a && (_.isUndefined(a.value) ? a.content : a.value)\n        },\n        getSelectionIndex: function() {\n            return _.findIndex(this.options.options, this.selection)\n        },\n        select: function(a, b) {\n            this.selection = this.options.options[a], this.renderSelection(this.selection), this.trigger(\"option:select\", this.selection, a, b), this.close()\n        },\n        selectByValue: function(a, b) {\n            for (var c = this.options.options || [], d = 0; d < c.length; d++) {\n                var e = c[d];\n                if (_.isUndefined(e.value) && e.content === a) return this.select(d, b);\n                if (!_.isUndefined(e.value) && _.isEqual(e.value, a)) return this.select(d, b)\n            }\n        },\n        isOpen: function() {\n            return this.$el.hasClass(\"opened\")\n        },\n        toggle: function() {\n            this.isOpen() ? this.close() : this.open()\n        },\n        position: function() {\n            var a = this.$(\".select-box-selection\"),\n                b = a.outerHeight(),\n                c = a.offset(),\n                d = c.left,\n                e = c.top,\n                f = this.$options.outerHeight(),\n                g = {\n                    left: 0,\n                    top: 0\n                };\n            this.options.target !== document.body ? (g = this.$target.offset(), g.width = this.$target.outerWidth(), g.height = this.$target.outerHeight(), g.left -= this.$target.scrollLeft(), g.top -= this.$target.scrollTop()) : (g.width = $(window).width(), g.height = $(window).height());\n            var h = d,\n                i = \"auto\",\n                j = this.options.openPolicy;\n            switch (\"selected\" !== j || this.selection || (j = \"auto\"), j) {\n                case \"above\":\n                    i = e - f;\n                    break;\n                case \"coverAbove\":\n                    i = e - f + b;\n                    break;\n                case \"below\":\n                    i = e + b;\n                    break;\n                case \"coverBelow\":\n                    i = e;\n                    break;\n                case \"selected\":\n                    var k = this.$options.find(\".selected\").position();\n                    i = e - k.top;\n                    break;\n                default:\n                    var l = e - this.$target.scrollTop() + f > g.top + g.height;\n                    i = l ? e - f + b : e\n            }\n            h -= g.left, i -= g.top, this.$options.css({\n                left: h,\n                top: i\n            })\n        },\n        open: function() {\n            this.isDisabled() || (this.renderOptions(), this.$options.appendTo(this.options.target), this.$options.addClass(\"rendered\"), this.position(), this.$el.addClass(\"opened\"), this.respectWindowBoundaries(), this.alignOptionsArrow())\n        },\n        respectWindowBoundaries: function() {\n            var a = this.calculateElOverflow(this.$options),\n                b = {\n                    left: 0,\n                    top: 0\n                };\n            this.$options.outerWidth() <= this.$target.innerWidth() && (a.left && a.right || (a.left ? b.left = a.left : a.right && (b.left = -a.right))), this.$options.outerHeight() <= this.$target.innerHeight() && (a.top && a.bottom || (a.top ? b.top = a.top : a.bottom && (b.top = -a.bottom))), this.$options.css({\n                left: \"+=\" + b.left,\n                top: \"+=\" + b.top\n            })\n        },\n        alignOptionsArrow: function() {\n            var a = this.$el[0].getBoundingClientRect(),\n                b = this.$options[0].getBoundingClientRect(),\n                c = a.left + a.width / 2;\n            c -= b.left, c -= this.$optionsArrow.outerWidth() / 2, this.$optionsArrow.css({\n                left: c\n            })\n        },\n        close: function() {\n            this.removeOptions(), this.$el.removeClass(\"opened\"), this.trigger(\"close\")\n        },\n        onRemove: function() {\n            this.removeOptions(), $(document).off(\".selectBox\", this.onOutsideClick)\n        },\n        isDisabled: function() {\n            return this.$el.hasClass(\"disabled\")\n        },\n        enable: function() {\n            this.$el.removeClass(\"disabled\")\n        },\n        disable: function() {\n            this.close(), this.$el.addClass(\"disabled\")\n        },\n        onSetTheme: function(a, b) {\n            this.$options && (a && this.$options.removeClass(this.themeClassNamePrefix + a), this.$options.addClass(this.themeClassNamePrefix + b))\n        },\n        calculateElOverflow: function(a, b) {\n            b || (b = window), a instanceof jQuery && (a = a[0]), b instanceof jQuery && (b = b[0]);\n            var c, d = {},\n                e = a.getBoundingClientRect();\n            if (b === window) {\n                var f = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth,\n                    g = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;\n                c = {\n                    width: f,\n                    height: g,\n                    left: 0,\n                    top: 0,\n                    right: f,\n                    bottom: g\n                }\n            } else c = b.getBoundingClientRect();\n            return _.each([\"left\", \"top\"], function(a) {\n                d[a] = Math.min(0, e[a] - c[a])\n            }), _.each([\"right\", \"bottom\"], function(a) {\n                d[a] = Math.min(0, c[a] - e[a])\n            }), _.each(d, function(a, b) {\n                d[b] = Math.abs(Math.round(a))\n            }), d\n        }\n    }, {\n        OptionsView: joint.mvc.View.extend({\n            events: {\n                \"mouseover .select-box-option\": \"onOptionHover\",\n                \"click .select-box-option\": \"onOptionClick\"\n            },\n            className: function() {\n                var a = [\"select-box-options\"],\n                    b = this.options.parentClassName;\n                return b && a.push(b), a.join(\" \")\n            },\n            init: function() {\n                _.bindAll(this, \"onMouseout\", \"onKeydown\"), $(document).on({\n                    \"keydown.selectBoxOptions\": this.onKeydown,\n                    \"mouseleave.selectBoxOptions mouseout.selectBoxOptions\": this.onMouseout\n                })\n            },\n            render: function() {\n                var a = this.options.extraClassName;\n                return a && this.$el.addClass(a), this.options.width && this.$el.css(\"width\", this.options.width), _.each(this.options.options, function(a, b) {\n                    var c = this.renderOption(a, b);\n                    this.options.selectBoxView.selection === a && c.addClass(\"selected hover\"), this.$el.append(c)\n                }, this), this.$arrow = $(\"<div/>\").addClass(\"select-box-options-arrow\").appendTo(this.$el), this\n            },\n            renderOption: function(a, b) {\n                var c = this.renderOptionContent(a);\n                return c.addClass(\"select-box-option\"), c.data(\"index\", b), c\n            },\n            renderOptionContent: function(a) {\n                var b = $(\"<div/>\", {\n                    \"class\": \"select-box-option-content\",\n                    html: a.content\n                });\n                return a.icon && b.prepend($(\"<img/>\", {\n                    \"class\": \"select-box-option-icon\",\n                    src: a.icon\n                })), b\n            },\n            select: function(a, b) {\n                this.trigger(\"option:select\", a, b)\n            },\n            hover: function(a) {\n                var b = this.options.options[a];\n                this.markOptionHover(a), this.trigger(\"option:hover\", b, a)\n            },\n            onOptionClick: function(a) {\n                var b = this.getOptionIndex(a.target);\n                this.select(b, {\n                    ui: !0\n                })\n            },\n            onOptionHover: function(a) {\n                var b = this.getOptionIndex(a.target);\n                this.hover(b)\n            },\n            onMouseout: function(a) {\n                this.trigger(\"options:mouseout\", a)\n            },\n            onKeydown: function(a) {\n                var b = this.options.selectBoxView;\n                if (b.options.keyboardNavigation && b.isOpen()) {\n                    var c;\n                    switch (a.which) {\n                        case 39:\n                        case 40:\n                            c = 1;\n                            break;\n                        case 38:\n                        case 37:\n                            c = -1;\n                            break;\n                        case 13:\n                            var d = this.getOptionHoverIndex();\n                            return void(d >= 0 && this.select(d));\n                        case 27:\n                            return this.close();\n                        default:\n                            return\n                    }\n                    a.preventDefault();\n                    var e = this.getOptionHoverIndex(),\n                        f = e + c,\n                        g = this.options.options;\n                    f < 0 && (f = g.length - 1), f >= g.length && (f = 0), this.hover(f)\n                }\n            },\n            onRemove: function() {\n                $(document).off(\".selectBoxOptions\")\n            },\n            markOptionHover: function(a) {\n                this.$el.find(\".hover\").removeClass(\"hover\"), $(this.$el.find(\".select-box-option\")[a]).addClass(\"hover\")\n            },\n            getOptionHoverIndex: function() {\n                return this.$el.find(\".select-box-option.hover\").index()\n            },\n            getOptionIndex: function(a) {\n                return $(a).closest(\".select-box-option\").data(\"index\")\n            }\n        })\n    });\n    joint.ui.ColorPalette = joint.ui.SelectBox.extend({\n        className: \"select-box color-palette\",\n        position: function() {\n            var a = this.$(\".select-box-selection\"),\n                b = a.outerHeight(),\n                c = a.offset(),\n                d = c.left,\n                e = c.top + b;\n            if (this.options.target !== document.body) {\n                this.$target = this.$target || $(this.options.target);\n                var f = this.$target.offset();\n                d -= f.left - this.$target.scrollLeft(), e -= f.top - this.$target.scrollTop()\n            }\n            this.$options.css({\n                left: d,\n                top: e\n            })\n        }\n    }, {\n        OptionsView: joint.ui.SelectBox.OptionsView.extend({\n            renderOptionContent: function(a) {\n                var b = $(\"<div/>\", {\n                    \"class\": \"select-box-option-content\"\n                });\n                return b.css(\"background-color\", a.content), a.icon && b.prepend($(\"<img/>\", {\n                    \"class\": \"select-box-option-icon\",\n                    src: a.icon\n                })), b\n            }\n        })\n    });\n    joint.ui.SelectButtonGroup = joint.mvc.View.extend({\n        className: \"select-button-group\",\n        events: {\n            \"click .select-button-group-button\": \"onSelect\",\n            \"mouseover .select-button-group-button\": \"onOptionHover\",\n            mouseleave: \"onMouseOut\",\n            \"mousedown .select-button-group-button\": \"pointerdown\",\n            \"touchstart .select-button-group-button\": \"pointerdown\",\n            \"mouseup .select-button-group-button\": \"pointerup\",\n            \"touchend .select-button-group-button\": \"pointerup\"\n        },\n        options: {\n            buttonWidth: void 0,\n            buttonHeight: void 0,\n            options: [],\n            disabled: !1,\n            multi: !1,\n            selected: void 0\n        },\n        init: function() {\n            _.bindAll(this, \"onSelect\", \"pointerup\"), this.$el.data(\"view\", this);\n            var a = this.options.multi;\n            _.isUndefined(this.options.selected) ? this.selection = a ? _.filter(this.options.options, {\n                selected: !0\n            }) : _.findWhere(this.options.options, {\n                selected: !0\n            }) : a ? this.selection = _.isArray(this.options.selected) ? _.filter(this.options.options, function(a, b) {\n                return _.contains(this.options.selected, b)\n            }, this) : [this.options.options[this.options.selected]] : this.selection = this.options.options[this.options.selected]\n        },\n        render: function() {\n            return this.renderOptions(this.selection), this.options.width && this.$el.css(\"width\", this.options.width), this.options.disabled && this.disable(), this.$el.append(this.$options), this\n        },\n        renderOptions: function() {\n            this.removeOptions();\n            var a = this.options.multi;\n            _.each(this.options.options, function(b, c) {\n                var d = a ? _.contains(this.selection, b) : this.selection === b,\n                    e = this.renderOption(b, c, d);\n                this.$el.append(e), d && e.addClass(\"selected\")\n            }, this)\n        },\n        removeOptions: function() {\n            this.$el.empty()\n        },\n        renderOption: function(a, b, c) {\n            var d = this.renderOptionContent(a, c);\n            d.data(\"index\", b);\n            var e = a.buttonWidth || this.options.buttonWidth;\n            e && d.css(\"width\", e);\n            var f = a.buttonHeight || this.options.buttonHeight;\n            return f && d.css(\"height\", f), d\n        },\n        renderOptionContent: function(a, b) {\n            var c = $(\"<div/>\", {\n                \"class\": \"select-button-group-button\",\n                html: a.content\n            });\n            if (a.icon || b && a.iconSelected) {\n                var d = $(\"<img/>\", {\n                        \"class\": \"select-button-group-button-icon\",\n                        src: b && a.iconSelected ? a.iconSelected : a.icon\n                    }),\n                    e = a.iconWidth || this.options.iconWidth;\n                e && d.css(\"width\", e);\n                var f = a.iconHeight || this.options.iconHeight;\n                f && d.css(\"height\", f), c.prepend(d)\n            }\n            return joint.util.setAttributesBySelector(c, a.attrs), c\n        },\n        getOptionIndex: function(a) {\n            return $(a).closest(\".select-button-group-button\").data(\"index\")\n        },\n        onSelect: function(a) {\n            if (!this.isDisabled()) {\n                var b = this.getOptionIndex(a.target);\n                this.select(b, {\n                    ui: !0\n                })\n            }\n        },\n        onOptionHover: function(a) {\n            if (!this.isDisabled()) {\n                var b = this.getOptionIndex(a.target);\n                this.trigger(\"option:hover\", this.options.options[b], b)\n            }\n        },\n        onMouseOut: function(a) {\n            this.isDisabled() || this.trigger(\"mouseout\", a)\n        },\n        getSelection: function() {\n            return this.selection\n        },\n        getSelectionValue: function(a) {\n            if (a = a || this.selection) return this.options.multi ? _.map(a, function(a) {\n                return _.isUndefined(a.value) ? a.content : a.value\n            }) : _.isUndefined(a.value) ? a.content : a.value\n        },\n        select: function(a, b) {\n            var c = this.options.options[a],\n                d = $(this.$(\".select-button-group-button\")[a]),\n                e = this.options.multi;\n            if (e) {\n                d.toggleClass(\"selected\");\n                var f = d.hasClass(\"selected\");\n                f ? this.selection.indexOf(c) === -1 && this.selection.push(c) : this.selection = _.without(this.selection, c), c.iconSelected && d.find(\".select-button-group-button-icon\").attr(\"src\", f ? c.iconSelected : c.icon)\n            } else {\n                this.selection = c;\n                var g = this.$(\".selected\"),\n                    h = this.options.options[g.index()];\n                g.removeClass(\"selected\"), d.addClass(\"selected\"), h && h.iconSelected && g.find(\".select-button-group-button-icon\").attr(\"src\", h.icon), this.selection.iconSelected && d.find(\".select-button-group-button-icon\").attr(\"src\", this.selection.iconSelected)\n            }\n            this.trigger(\"option:select\", this.selection, a, b)\n        },\n        selectByValue: function(a, b) {\n            _.isArray(a) || (a = [a]);\n            for (var c = this.options.options || [], d = 0; d < c.length; d++) {\n                var e = c[d];\n                if (_.isUndefined(e.value) && _.contains(a, e.content)) this.select(d, b);\n                else if (!_.isUndefined(e.value)) {\n                    var f = _.find(a, function(a) {\n                        return _.isEqual(a, e.value)\n                    });\n                    f && this.select(d, b)\n                }\n            }\n        },\n        deselect: function() {\n            this.$(\".selected\").removeClass(\"selected\"), this.options.multi ? this.selection = [] : this.selection = void 0\n        },\n        isDisabled: function() {\n            return this.$el.hasClass(\"disabled\")\n        },\n        enable: function() {\n            this.$el.removeClass(\"disabled\")\n        },\n        disable: function() {\n            this.$el.addClass(\"disabled\")\n        },\n        pointerdown: function(a) {\n            var b = this.getOptionIndex(a.target),\n                c = $(this.$(\".select-button-group-button\")[b]);\n            c.addClass(\"is-in-action\"), $(document).on(\"mouseup.select-button-group touchend.select-button-group\", this.pointerup)\n        },\n        pointerup: function() {\n            this.$(\".is-in-action\").removeClass(\"is-in-action\"), $(document).off(\"mouseup.select-button-group touchend.select-button-group\")\n        }\n    });\n    joint.ui.Navigator = joint.mvc.View.extend({\n        className: \"navigator\",\n        events: {\n            mousedown: \"startAction\",\n            touchstart: \"startAction\"\n        },\n        options: {\n            paperConstructor: joint.dia.Paper,\n            paperOptions: {},\n            zoomOptions: null,\n            zoom: {\n                min: .5,\n                max: 2\n            },\n            width: 300,\n            height: 200,\n            padding: 10\n        },\n        init: function() {\n            this.options.zoomOptions ? this.options.zoom = _.extend({}, this.options.zoom, this.options.zoomOptions) : this.options.zoom && (this.options.zoom = _.defaults({}, this.options.zoom, this.constructor.prototype.options.zoom)), _.bindAll(this, \"updateCurrentView\", \"doAction\", \"stopAction\", \"scrollTo\"), this.updateCurrentView = _.debounce(this.updateCurrentView, 0);\n            var a = this.options.paperScroller;\n            a.$el.on(\"scroll.navigator\", this.updateCurrentView);\n            var b = this.sourcePaper = a.options.paper;\n            this.listenTo(b, \"resize\", this.updatePaper);\n            var c = this.targetPaper = new this.options.paperConstructor(_.merge({\n                model: b.model,\n                interactive: !1\n            }, this.options.paperOptions));\n            c.$el.on({\n                \"mousedown.navigator\": this.scrollTo,\n                \"touchstart.navigator\": this.scrollTo\n            }), $(document.body).on({\n                \"mousemove.navigator touchmove.navigator\": this.doAction,\n                \"mouseup.navigator touchend.navigator\": this.stopAction\n            })\n        },\n        render: function() {\n            this.targetPaper.$el.appendTo(this.el);\n            var a = this.sourcePaper.model,\n                b = a.getElements().concat(a.getLinks());\n            if (_.each(b, _.bind(this.targetPaper.renderView, this.targetPaper)), this.$currentView = $(\"<div>\").addClass(\"current-view\"), this.options.zoom) {\n                var c = $(\"<div>\").addClass(\"current-view-control\");\n                this.$currentView.append(c)\n            }\n            return this.$el.append(this.$currentView).css({\n                width: this.options.width,\n                height: this.options.height,\n                padding: this.options.padding\n            }), this.updatePaper(this.sourcePaper.options.width, this.sourcePaper.options.height), this\n        },\n        updatePaper: function(a, b) {\n            var c = this.sourcePaper.options.origin,\n                d = this.sourcePaper.scale(),\n                e = this.options.width - 2 * this.options.padding,\n                f = this.options.height - 2 * this.options.padding;\n            a /= d.sx, b /= d.sy;\n            var g = this.ratio = Math.min(e / a, f / b),\n                h = c.x * g / d.sx,\n                i = c.y * g / d.sy;\n            a *= g, b *= g, this.targetPaper.setDimensions(a, b), this.targetPaper.setOrigin(h, i), this.targetPaper.scale(g, g), this.updateCurrentView()\n        },\n        updateCurrentView: function() {\n            var a = this.ratio,\n                b = this.sourcePaper.scale(),\n                c = this.options.paperScroller,\n                d = c.clientToLocalPoint(0, 0),\n                e = this.targetPaper.$el.position(),\n                f = this.targetPaper.translate();\n            f.ty = f.ty || 0, this.currentViewGeometry = {\n                top: e.top + d.y * a + f.ty,\n                left: e.left + d.x * a + f.tx,\n                width: c.$el.innerWidth() * a / b.sx,\n                height: c.$el.innerHeight() * a / b.sy\n            }, this.$currentView.css(this.currentViewGeometry)\n        },\n        startAction: function(a) {\n            a = joint.util.normalizeEvent(a), this._action = $(a.target).hasClass(\"current-view-control\") ? \"zooming\" : \"panning\", this._clientX = a.clientX, this._clientY = a.clientY\n        },\n        doAction: function(a) {\n            if (this._action) {\n                a = joint.util.normalizeEvent(a);\n                var b = this.sourcePaper.scale(),\n                    c = (a.clientX - this._clientX) * b.sx,\n                    d = (a.clientY - this._clientY) * b.sy;\n                switch (this._action) {\n                    case \"panning\":\n                        this.options.paperScroller.el.scrollLeft += c / this.ratio, this.options.paperScroller.el.scrollTop += d / this.ratio;\n                        break;\n                    case \"zooming\":\n                        var e = -c / this.currentViewGeometry.width;\n                        this.options.paperScroller.zoom(e, this.options.zoom)\n                }\n                this._clientX = a.clientX, this._clientY = a.clientY\n            }\n        },\n        stopAction: function() {\n            this._action = null\n        },\n        scrollTo: function(a) {\n            a = joint.util.normalizeEvent(a);\n            var b = this.targetPaper.translate();\n            b.ty = b.ty || 0;\n            var c, d;\n            if (_.isUndefined(a.offsetX)) {\n                var e = this.targetPaper.$el.offset();\n                c = a.pageX - e.left, d = a.pageY - e.top\n            } else c = a.offsetX, d = a.offsetY;\n            var f = (c - b.tx) / this.ratio,\n                g = (d - b.ty) / this.ratio;\n            this.options.paperScroller.center(f, g)\n        },\n        onRemove: function() {\n            this.targetPaper.$el.off(\".navigator\"), this.targetPaper.remove(), this.options.paperScroller.$el.off(\".navigator\"), $(document.body).off(\".navigator\")\n        }\n    });\n    joint.ui.TreeLayoutView = joint.mvc.View.extend({\n        MINIMAL_PREVIEW_SIZE: 10,\n        className: \"tree-layout\",\n        options: {\n            previewAttrs: {\n                parent: {\n                    rx: 2,\n                    ry: 2\n                }\n            },\n            useModelGeometry: !1,\n            clone: function(a) {\n                return a.clone()\n            },\n            canInteract: _.constant(!0)\n        },\n        init: function() {\n            _.bindAll(this, \"onPointermove\", \"onPointerup\"), this.toggleDefaultInteraction(!1), this.startListening(), this.render(), this.onSetTheme(null, this.theme)\n        },\n        startListening: function() {\n            var a = this.options.paper;\n            this.listenTo(a, \"element:pointerdown\", this.canInteract(this.onPointerdown))\n        },\n        toggleDefaultInteraction: function(a) {\n            this.options.paper.setInteractivity(a)\n        },\n        render: function() {\n            var a = this.options.paper;\n            return this.$activeBox = $(\"<div>\").addClass(\"tree-layout-box active hidden\").appendTo(this.el), this.draggingPaper = new joint.dia.Paper({\n                model: new joint.dia.Graph,\n                interactive: !1,\n                width: \"100%\",\n                height: \"100%\"\n            }), this.$translateBox = $(\"<div>\").addClass(\"tree-layout-box translate hidden\").append(this.draggingPaper.render().el).appendTo(this.el), this.$mask = $(\"<div>\").addClass(\"tree-layout-mask\"), this.svgViewport = V(a.viewport), this.svgPreviewChild = V(\"circle\").attr(this.options.previewAttrs.child || {}).addClass(\"tree-layout-preview child\"), this.svgPreviewConnection = V(\"path\").attr(this.options.previewAttrs.link || {}).addClass(\"tree-layout-preview link\"), this.svgPreviewParent = V(\"rect\").attr(this.options.previewAttrs.parent || {}).addClass(\"tree-layout-preview parent\"), this.svgPreview = V(\"g\").addClass(\"tree-layout-preview-group\").append([this.svgPreviewConnection, this.svgPreviewParent, this.svgPreviewChild]), this.$el.appendTo(a.el), this\n        },\n        onSetTheme: function(a, b) {\n            var c = [this.svgPreview, this.$mask];\n            _.each(c, function(c) {\n                c && (a && c.removeClass(this.themeClassNamePrefix + a), c.addClass(this.themeClassNamePrefix + b))\n            }, this)\n        },\n        onRemove: function() {\n            this.svgPreview.remove()\n        },\n        toggleDropping: function(a) {\n            this.$mask.toggleClass(\"dropping-not-allowed\", !a), this.$translateBox.toggleClass(\"no-drop\", !a)\n        },\n        canDrop: function() {\n            return this.isActive() && !this.$translateBox.hasClass(\"no-drop\")\n        },\n        isActive: function() {\n            return !this.$translateBox.hasClass(\"hidden\")\n        },\n        _startDrag: function(a, b, c) {\n            var d = this.options.paper;\n            this.$mask.appendTo(d.el), this.toggleDropping(!1), this.ctm = d.matrix();\n            var e = _.first(a),\n                f = e.findView(d),\n                g = f.getBBox({\n                    useModelGeometry: this.options.useModelGeometry\n                });\n            this.updateBox(this.$translateBox, _.defaults({\n                x: b,\n                y: c\n            }, g)), this.updateBox(this.$activeBox, g), this.$activeBox.removeClass(\"hidden\"), this.$translateBox.removeClass(\"hidden\"), this.prepareDraggingPaper(e)\n        },\n        updateBox: function(a, b) {\n            a.css({\n                width: b.width,\n                height: b.height,\n                left: b.x,\n                top: b.y\n            })\n        },\n        positionTranslateBox: function(a) {\n            var b = V.transformPoint(a, this.ctm);\n            this.$translateBox.css({\n                left: b.x,\n                top: b.y\n            })\n        },\n        prepareDraggingPaper: function(a) {\n            var b = this.options.clone(a).position(0, 0);\n            this.draggingPaper.scale(this.ctm.a, this.ctm.d), this.draggingPaper.model.resetCells([b])\n        },\n        _doDrag: function(a, b, c) {\n            var d, e, f = this.model,\n                g = {\n                    x: b,\n                    y: c\n                };\n            if (this.candidate && (this.candidate = null, this.hidePreview()), this.positionTranslateBox(g), d = f.getMinimalRootAreaByPoint(g), d && (e = d.findMinimalAreaByPoint(g, {\n                    expandBy: Math.min(f.get(\"siblingGap\"), f.get(\"gap\")) / 2\n                })), e) {\n                var h = this.findDirection(e, g),\n                    i = e.getLayoutSiblings(h),\n                    j = i.getSiblingRankByPoint(g),\n                    k = _.every(a, _.partial(this.isConnectionValid, _, i, j), this);\n                k ? (this.candidate = {\n                    id: e.root.id,\n                    direction: h,\n                    siblingRank: j + .5\n                }, this.updatePreview(i, j), this.showPreview(), this.toggleDropping(!0)) : this.toggleDropping(!1)\n            } else this.toggleDropping(!0)\n        },\n        _finishDrag: function(a, b, c) {\n            this.$mask.remove().removeClass(\"dropping-not-allowed\"), this.candidate ? (_.each(a, _.partial(this.reconnectElement, _, this.candidate), this), this.candidate = null, this.model.layout({\n                ui: !0\n            })) : this.canDrop() && (_.each(a, _.partial(this.translateElement, _, b, c), this), this.model.layout({\n                ui: !0\n            })), this.$activeBox.addClass(\"hidden\"), this.$translateBox.addClass(\"hidden\"), this.hidePreview()\n        },\n        reconnectElement: function(a, b) {\n            var c = {\n                    direction: b.direction,\n                    siblingRank: b.siblingRank,\n                    ui: !0\n                },\n                d = this.model.reconnectElement(a, b.id, c);\n            if (!d) {\n                var e = this.options.paper,\n                    f = e.getDefaultLink(a.findView(e));\n                f.set({\n                    source: {\n                        id: b.id\n                    },\n                    target: {\n                        id: a.id\n                    }\n                }), f.addTo(e.model, c), this.model.changeSiblingRank(a, b.siblingRank, c), this.model.changeDirection(a, b.direction, c);\n                var g = this.model.getAttribute(a, \"direction\");\n                this.model.updateDirections(a, [g, b.direction], c)\n            }\n        },\n        translateElement: function(a, b, c) {\n            var d = this.model.graph.getConnectedLinks(a, {\n                inbound: !0\n            });\n            _.invoke(d, \"remove\");\n            var e = a.get(\"size\");\n            a.set(\"position\", {\n                x: b - e.width / 2,\n                y: c - e.height / 2\n            }, {\n                ui: !0\n            })\n        },\n        updatePreview: function(a, b) {\n            var c = a.parentArea.root,\n                d = Math.max(this.model.get(\"siblingGap\") / 2, this.MINIMAL_PREVIEW_SIZE),\n                e = {\n                    width: d,\n                    height: d\n                },\n                f = a.getNeighborPointFromRank(b),\n                g = a.getConnectionPoints(f, {\n                    ignoreSiblings: !0\n                }),\n                h = a.getParentConnectionPoint(),\n                i = a.getChildConnectionPoint(f, e);\n            this.updateParentPreview(c.get(\"position\"), c.get(\"size\")), this.updateChildPreview(f, e), this.updateConnectionPreview(h, i, g)\n        },\n        showPreview: function() {\n            this.svgViewport.append(this.svgPreview)\n        },\n        hidePreview: function() {\n            this.svgPreview.remove()\n        },\n        updateParentPreview: function(a, b) {\n            this.svgPreviewParent.attr({\n                x: a.x,\n                y: a.y,\n                width: b.width,\n                height: b.height\n            })\n        },\n        updateChildPreview: function(a, b) {\n            this.svgPreviewChild.attr({\n                cx: a.x,\n                cy: a.y,\n                r: b.width / 2\n            })\n        },\n        updateConnectionPreview: function(a, b, c) {\n            this.svgPreviewConnection.attr({\n                d: joint.connectors.rounded(a, b, c, {})\n            })\n        },\n        findDirection: function(a, b) {\n            var c, d = a.root.get(\"layout\") || a.getType();\n            switch (d) {\n                case \"BL-BR\":\n                case \"TL-TR\":\n                case \"L-R\":\n                    return c = d.split(\"-\"), b.x > a.rootCX ? c[1] : c[0];\n                case \"BL-TL\":\n                case \"BR-TR\":\n                case \"B-T\":\n                    return c = d.split(\"-\"), b.y > a.rootCY ? c[0] : c[1];\n                case \"L\":\n                case \"R\":\n                case \"T\":\n                case \"B\":\n                case \"TR\":\n                case \"TL\":\n                case \"BR\":\n                case \"BL\":\n                    return d;\n                default:\n                    return a.direction\n            }\n        },\n        isConnectionValid: function(a, b, c) {\n            if (a.id == b.parentArea.root.id) return !1;\n            if (this.model.graph.isSuccessor(a, b.parentArea.root)) return !1;\n            var d = this.model.getLayoutArea(a);\n            if (d.parentArea && d.parentArea == b.parentArea && d.direction == b.direction) {\n                var e = d.siblingRank - c;\n                if (0 === e || 1 === e) return !1\n            }\n            return !0\n        },\n        canInteract: function(a) {\n            return _.bind(function(b) {\n                this.options.canInteract(b) && a.apply(this, arguments)\n            }, this)\n        },\n        startDragging: function(a) {\n            var b = _.isArray(a) ? a : [a];\n            _.isEmpty(b) || (this._registerPointerEvents(), this._moveCounter = 0, this._draggedElements = b)\n        },\n        onPointerdown: function(a) {\n            this.startDragging(a.model)\n        },\n        onPointermove: function(a) {\n            var b = this.options.paper,\n                c = b.clientToLocalPoint({\n                    x: a.clientX,\n                    y: a.clientY\n                });\n            this._moveCounter === b.options.clickThreshold ? this._startDrag(this._draggedElements, c.x, c.y) : this._moveCounter > b.options.clickThreshold && this._doDrag(this._draggedElements, c.x, c.y), this._moveCounter++\n        },\n        onPointerup: function(a) {\n            var b = this.options.paper;\n            if (this._moveCounter >= b.options.clickThreshold) {\n                var c = b.clientToLocalPoint({\n                    x: a.clientX,\n                    y: a.clientY\n                });\n                this._finishDrag(this._draggedElements, c.x, c.y)\n            }\n            this._draggedElements = null, this._unregisterPointerEvents()\n        },\n        _registerPointerEvents: function() {\n            var a = this.getEventNamespace();\n            $(document).on(\"mousemove\" + a + \" touchmove\" + a, this.onPointermove).on(\"mouseup\" + a + \" touchend\" + a, this.onPointerup)\n        },\n        _unregisterPointerEvents: function() {\n            $(document).off(this.getEventNamespace())\n        }\n    });\n    joint.layout.ForceDirected = Backbone.Model.extend({\n        defaults: {\n            linkDistance: 10,\n            linkStrength: 1,\n            charge: 10\n        },\n        initialize: function(a) {\n            this.elements = this.get(\"graph\").getElements(), this.links = this.get(\"graph\").getLinks(), this.cells = this.get(\"graph\").get(\"cells\"), this.width = this.get(\"width\"), this.height = this.get(\"height\"), this.gravityCenter = this.get(\"gravityCenter\"), this.t = 1, this.energy = 1 / 0, this.progress = 0\n        },\n        start: function() {\n            var a = this.get(\"width\"),\n                b = this.get(\"height\");\n            _.each(this.elements, function(c) {\n                c.set(\"position\", {\n                    x: Math.random() * a,\n                    y: Math.random() * b\n                }), c.charge = c.get(\"charge\") || this.get(\"charge\"), c.weight = c.get(\"weight\") || 1;\n                var d = c.get(\"position\");\n                c.x = d.x, c.y = d.y, c.px = c.x, c.py = c.y, c.fx = 0, c.fy = 0\n            }, this), _.each(this.links, function(a) {\n                a.strength = a.get(\"strength\") || this.get(\"linkStrength\"), a.distance = a.get(\"distance\") || this.get(\"linkDistance\"), a.source = this.cells.get(a.get(\"source\").id), a.target = this.cells.get(a.get(\"target\").id)\n            }, this)\n        },\n        step: function() {\n            if (.99 * this.t < .005) return this.notifyEnd();\n            var a = this.width,\n                b = this.height,\n                c = .1,\n                d = this.gravityCenter,\n                e = this.energy;\n            this.energy = 0;\n            var f, g, h, i, j, k, l, m, n, o, p, q = 0,\n                r = 0,\n                s = 0,\n                t = 0,\n                u = this.elements.length,\n                v = this.links.length;\n            for (f = 0; f < u - 1; f++)\n                for (h = this.elements[f], q += h.x, r += h.y, g = f + 1; g < u; g++) i = this.elements[g], j = i.x - h.x, k = i.y - h.y, l = j * j + k * k, m = Math.sqrt(l), n = this.t * h.charge / l, o = n * j, p = n * k, h.fx -= o, h.fy -= p, i.fx += o, i.fy += p, this.energy += o * o + p * p;\n            q += this.elements[u - 1].x, r += this.elements[u - 1].y;\n            var w, x, y;\n            for (f = 0; f < v; f++) w = this.links[f], h = w.source, i = w.target, j = i.x - h.x, k = i.y - h.y, l = j * j + k * k, m = Math.sqrt(l), x = this.t * w.strength * (m - w.distance) / m, o = x * j, p = x * k, y = h.weight / (h.weight + i.weight), h.x += o * (1 - y), h.y += p * (1 - y), i.x -= o * y, i.y -= p * y, this.energy += o * o + p * p;\n            var z, A;\n            for (f = 0; f < u; f++) {\n                z = this.elements[f], A = {\n                    x: z.x,\n                    y: z.y\n                }, d && (A.x += (d.x - A.x) * this.t * c, A.y += (d.y - A.y) * this.t * c), A.x += z.fx, A.y += z.fy, A.x = Math.max(0, Math.min(a, A.x)), A.y = Math.max(0, Math.min(b, A.y));\n                var B = .9;\n                A.x += (z.px - A.x) * B, A.y += (z.py - A.y) * B, z.px = A.x, z.py = A.y, z.fx = z.fy = 0, z.x = A.x, z.y = A.y, s += z.x, t += z.y, this.notify(z, f, A)\n            }\n            this.t = this.cool(this.t, this.energy, e);\n            var C = q - s,\n                D = r - t,\n                E = Math.sqrt(C * C + D * D);\n            E < 1 && this.notifyEnd()\n        },\n        cool: function(a, b, c) {\n            return b < c ? (this.progress += 1, this.progress >= 5 ? (this.progress = 0, a / .99) : a) : (this.progress = 0, .99 * a)\n        },\n        notify: function(a, b, c) {\n            a.set(\"position\", c)\n        },\n        notifyEnd: function() {\n            this.trigger(\"end\")\n        }\n    });\n    joint.layout = joint.layout || {}, joint.layout.GridLayout = {\n        layout: function(a, b) {\n            var c;\n            c = a instanceof joint.dia.Graph ? a : (new joint.dia.Graph).resetCells(a, {\n                dry: !0\n            }), a = null, b = b || {};\n            var d = c.getElements(),\n                e = b.columns || 1,\n                f = b.dx || 0,\n                g = b.dy || 0,\n                h = b.columnWidth || this._maxDim(d, \"width\") + f,\n                i = b.rowHeight || this._maxDim(d, \"height\") + g,\n                j = _.isUndefined(b.centre) || b.centre !== !1,\n                k = !!b.resizeToFit,\n                l = b.marginX || 0,\n                m = b.marginY || 0;\n            c.startBatch(\"layout\"), _.each(d, function(a, b) {\n                var c = 0,\n                    d = 0,\n                    n = a.get(\"size\");\n                if (k) {\n                    var o = h - 2 * f,\n                        p = i - 2 * g,\n                        q = n.height * (n.width ? o / n.width : 1),\n                        r = n.width * (n.height ? p / n.height : 1);\n                    q > i ? o = r : p = q, n = {\n                        width: o,\n                        height: p\n                    }, a.set(\"size\", n)\n                }\n                j && (c = (h - n.width) / 2, d = (i - n.height) / 2), c += l, d += m, a.set(\"position\", {\n                    x: b % e * h + f + c,\n                    y: Math.floor(b / e) * i + g + d\n                })\n            }), c.stopBatch(\"layout\")\n        },\n        _maxDim: function(a, b) {\n            return _.reduce(a, function(a, c) {\n                return Math.max(c.get(\"size\")[b], a)\n            }, 0)\n        }\n    };\n    ! function(a, b, c, d) {\n        function e(a, b, d) {\n            d = c.defaults(d || {}, {\n                siblingGap: 0\n            }), this.width = 0, this.height = 0, this.layoutAreas = this.sortLayoutAreas(a), this.parentArea = b, this.siblingGap = d.siblingGap, this.exists() && this.computeSize(d)\n        }\n\n        function f(a, b, d) {\n            var e = c.extend({}, d, this.getRootAttributes(a, d.attributeNames)),\n                f = d.gap || 0;\n            c.defaults(e, {\n                parentGap: f,\n                siblingGap: f,\n                firstChildGap: f\n            }), this.root = a, this.childAreas = b, this.siblingRank = e.siblingRank, this.rootOffset = e.rootOffset, this.nextSiblingGap = e.nextSiblingGap, this.prevSiblingGap = e.prevSiblingGap, this.gap = this.parentGap = e.parentGap, this.firstChildGap = e.firstChildGap, this.dx = 0, this.dy = 0, this.width = 0, this.height = 0, c.invoke(b, \"addParentReference\", this), this.computeRelativePosition(a, b, e)\n        }\n        c.extend(e.prototype, {\n            sortLayoutAreas: function(a) {\n                var b = c.sortBy(a, \"siblingRank\");\n                return c.each(b, function(a, b) {\n                    a.siblingRank = b\n                }), b\n            },\n            move: function(a, b) {\n                c.each(this.layoutAreas, function(c) {\n                    c.dx += a, c.dy += b\n                })\n            },\n            exists: function() {\n                return this.layoutAreas.length > 0\n            },\n            sumGaps: function(a) {\n                var b = Math.max(this.layoutAreas.length - 1, 0);\n                return b * a\n            },\n            getSiblingRankByPoint: function(a) {\n                if (!this.exists()) return -1;\n                var b = this.findAreaByPoint(a);\n                return b ? b.siblingRank - 1 : this.layoutAreas.length - 1\n            },\n            getFirstChildConnectionPoints: function() {\n                return []\n            },\n            getConnectionPoints: function(a, b) {\n                if (!this.exists()) return this.getFirstChildConnectionPoints(a);\n                var c = {\n                    dx: a.x - this.parentArea.rootCX,\n                    dy: a.y - this.parentArea.rootCY\n                };\n                return this.layoutAreas[0].getRootVertices(c, b)\n            },\n            getParentConnectionPoint: function() {\n                var a = this.parentArea,\n                    b = this.proxyLayoutArea(\"getConnectionPoint\", a.rootSize),\n                    c = d.point(a.rootCX, a.rootCY);\n                return c.offset(b.x, b.y)\n            },\n            getChildConnectionPoint: function(a, b) {\n                var c = this.proxyLayoutArea(\"getConnectionPoint\", b);\n                return d.point(a).difference(c)\n            },\n            proxyLayoutArea: function(a) {\n                var b = Array.prototype.slice.call(arguments, 1);\n                return f.fromDirection(this.direction).prototype[a].apply(this.parentArea, b)\n            }\n        }), e.extend = b.Model.extend;\n        var g = e.extend({\n                getTopDY: function() {\n                    return -this.height / 2\n                },\n                findAreaByPoint: function(a) {\n                    return c.find(this.layoutAreas, function(b) {\n                        return b.rootCY > a.y\n                    })\n                },\n                computeSize: function(a) {\n                    this.height = this.sumGaps(a.siblingGap), this.height += c.sum(this.layoutAreas, function(a) {\n                        return a.height + a.prevSiblingGap + a.nextSiblingGap\n                    }), c.reduce(this.layoutAreas, function(b, c) {\n                        return this.width = Math.max(this.width, c.getExtendedWidth()), c.dy += b + c.getCY(), b + c.prevSiblingGap + c.height + c.nextSiblingGap + a.siblingGap\n                    }, this.getTopDY(), this)\n                },\n                getYTowardsParent: function() {\n                    return this.parentArea.rootCY\n                },\n                getXTowardsParent: function() {\n                    var a = this.parentArea;\n                    return a.rootCX + this.LRSign * (a.rootSize.width / 2 + a.gap)\n                },\n                getNeighborPointFromRank: function(a) {\n                    var b, c = this.siblingGap;\n                    if (this.exists()) {\n                        var d = this.layoutAreas[a],\n                            e = this.layoutAreas[a + 1];\n                        b = d ? e ? (d.y + d.height + e.y) / 2 : d.y + d.height + c / 2 : e.y - c / 2\n                    } else b = this.getYTowardsParent();\n                    return {\n                        x: this.getXTowardsParent(),\n                        y: b\n                    }\n                }\n            }),\n            h = g.extend({\n                direction: \"L\",\n                LRSign: -1\n            }),\n            i = g.extend({\n                direction: \"R\",\n                LRSign: 1\n            }),\n            j = {\n                getXTowardsParent: function() {\n                    var a = this.parentArea;\n                    return a.rootCX + this.LRSign * a.gap\n                },\n                getYTowardsParent: function() {\n                    var a = this.parentArea,\n                        b = a.getLRHeight(a.siblings) / 2;\n                    return b += Math.min(a.firstChildGap, this.siblingGap / 2), a.rootCY + this.TBSign * b\n                },\n                getFirstChildConnectionPoints: function(a) {\n                    return [d.point(this.parentArea.rootCX, a.y)]\n                },\n                getChildConnectionPoint: function(a, b) {\n                    return d.point(a).offset(-this.LRSign * b.width / 2, 0)\n                },\n                getParentConnectionPoint: function() {\n                    var a = this.parentArea,\n                        b = d.point(a.rootCX, a.rootCY);\n                    return b.offset(0, this.TBSign * a.rootSize.height / 2)\n                }\n            },\n            k = {\n                getTopDY: function() {\n                    return 0\n                }\n            },\n            l = {\n                getTopDY: function() {\n                    return -this.height\n                }\n            },\n            m = g.extend({\n                direction: \"BR\",\n                LRSign: 1,\n                TBSign: 1\n            });\n        c.extend(m.prototype, j, k);\n        var n = g.extend({\n            direction: \"BL\",\n            LRSign: -1,\n            TBSign: 1\n        });\n        c.extend(n.prototype, j, k);\n        var o = g.extend({\n            direction: \"TR\",\n            LRSign: 1,\n            TBSign: -1\n        });\n        c.extend(o.prototype, j, l);\n        var p = g.extend({\n            direction: \"TL\",\n            LRSign: -1,\n            TBSign: -1\n        });\n        c.extend(p.prototype, j, l);\n        var q = e.extend({\n                getLeftDX: function() {\n                    return -this.width / 2\n                },\n                findAreaByPoint: function(a) {\n                    return c.find(this.layoutAreas, function(b) {\n                        return b.rootCX > a.x\n                    })\n                },\n                computeSize: function(a) {\n                    this.width = this.sumGaps(a.siblingGap), this.width += c.sum(this.layoutAreas, function(a) {\n                        return a.width + a.prevSiblingGap + a.nextSiblingGap\n                    }), c.reduce(this.layoutAreas, function(b, c) {\n                        return this.height = Math.max(this.height, c.getExtendedHeight()), c.dx += b + c.getCX(), b + c.prevSiblingGap + c.width + c.nextSiblingGap + a.siblingGap\n                    }, this.getLeftDX(), this)\n                },\n                getNeighborPointFromRank: function(a) {\n                    var b;\n                    if (this.exists()) {\n                        var c = this.layoutAreas[a],\n                            d = this.layoutAreas[a + 1];\n                        b = c ? d ? (c.x + c.width + d.x) / 2 : c.x + c.width + this.siblingGap / 2 : d.x - this.siblingGap / 2\n                    } else b = this.parentArea.rootCX;\n                    return {\n                        x: b,\n                        y: this.getYTowardsParent()\n                    }\n                }\n            }),\n            r = q.extend({\n                direction: \"T\",\n                getYTowardsParent: function() {\n                    var a = this.parentArea;\n                    return a.rootCY - a.getLRHeight() / 2 - a.gap\n                }\n            }),\n            s = q.extend({\n                direction: \"B\",\n                getYTowardsParent: function() {\n                    var a = this.parentArea;\n                    return a.rootCY + a.getLRHeight() / 2 + a.gap\n                }\n            });\n        c.extend(f, {\n            create: function(a, b, c, d) {\n                var e = f.fromDirection(a, d);\n                return new e(b, c, d)\n            },\n            fromDirection: function(a, b) {\n                var c;\n                switch (a) {\n                    case \"L\":\n                        c = u;\n                        break;\n                    case \"T\":\n                        c = v;\n                        break;\n                    case \"R\":\n                        c = t;\n                        break;\n                    case \"B\":\n                        c = w;\n                        break;\n                    case \"BR\":\n                        c = x;\n                        break;\n                    case \"BL\":\n                        c = y;\n                        break;\n                    case \"TR\":\n                        c = z;\n                        break;\n                    case \"TL\":\n                        c = A;\n                        break;\n                    default:\n                        c = f\n                }\n                return c\n            }\n        }), c.extend(f.prototype, {\n            direction: null,\n            getHeight: function(a, b) {\n                return this.getTHeight(a) + this.getBHeight(a) + this.getLRHeight()\n            },\n            getWidth: function(a, b) {\n                var c = Math.max(a.T.width, a.B.width) / 2,\n                    d = Math.max(this.getLWidth(a, b) + b.width / 2, c),\n                    e = Math.max(this.getRWidth(a, b) + b.width / 2, c);\n                return d + e\n            },\n            getLRHeight: function() {\n                return Math.max(this.rootSize.height, this.siblings.L.height, this.siblings.R.height)\n            },\n            getTHeight: function(a) {\n                return a.T.height + this.getTXHeight(a)\n            },\n            getBHeight: function(a) {\n                return a.B.height + this.getBXHeight(a)\n            },\n            getXLRWidth: function(a, b) {\n                return this.getLWidth(a, b) + b.width + this.getRWidth(a, b)\n            },\n            getXRWidth: function(a, b) {\n                var c = Math.max(a.BR.width, a.TR.width);\n                return c > 0 && (c -= b.width / 2), c\n            },\n            getTXHeight: function(a) {\n                var b = Math.max(a.TR.height, a.TL.height);\n                return b > 0 && (b += this.firstChildGap), b\n            },\n            getBXHeight: function(a) {\n                var b = Math.max(a.BR.height, a.BL.height);\n                return b > 0 && (b += this.firstChildGap), b\n            },\n            getXLWidth: function(a, b) {\n                var c = Math.max(a.BL.width, a.TL.width);\n                return c > 0 && (c -= b.width / 2), c\n            },\n            getRWidth: function(a, b) {\n                return Math.max(a.R.width, this.getXRWidth(a, b))\n            },\n            getLWidth: function(a, b) {\n                return Math.max(a.L.width, this.getXLWidth(a, b))\n            },\n            getTBOverlap: function(a, b) {\n                var c = Math.max(a.T.width, a.B.width);\n                return c > 0 && (c -= b.width, c /= 2), c\n            },\n            getRootDX: function(a, b) {\n                var c = this.getTBOverlap(a, b),\n                    d = Math.max(this.getLWidth(a, b), c);\n                return d -= Math.max(this.getRWidth(a, b), c), d / 2\n            },\n            getMinimalGap: function(a) {\n                return Math.min(a.siblingGap, this.firstChildGap, this.parentGap)\n            },\n            getBBox: function(a) {\n                var b = d.rect(this),\n                    c = a && a.expandBy;\n                return c && b.moveAndExpand({\n                    x: -c,\n                    y: -c,\n                    width: 2 * c,\n                    height: 2 * c\n                }), b\n            },\n            containsPoint: function(a, b) {\n                return this.getBBox(b).containsPoint(a)\n            },\n            getLayoutSiblings: function(a) {\n                return this.siblings[a]\n            },\n            getExtendedWidth: function() {\n                return this.width + this.gap + this.rootOffset\n            },\n            getExtendedHeight: function() {\n                return this.height + this.gap + this.rootOffset\n            },\n            findMinimalAreaByPoint: function(a, b) {\n                if (!this.containsPoint(a, b)) return null;\n                var d;\n                return c.some(this.childAreas, function(c) {\n                    return d = c.findMinimalAreaByPoint(a, b), !!d\n                }), d || this\n            },\n            getType: function() {\n                return c.reduce(this.siblings, function(a, b, c) {\n                    return b.exists() ? a.concat(c) : a\n                }, []).sort().join(\"-\")\n            },\n            addParentReference: function(a) {\n                this.parentArea = a\n            },\n            getRootAttributes: function(a, b) {\n                var d = a.get(b.siblingRank || \"siblingRank\");\n                return {\n                    siblingRank: c.isNumber(d) ? d : null,\n                    rootOffset: a.get(b.offset || \"offset\") || 0,\n                    rootMargin: a.get(b.margin || \"margin\") || 0,\n                    prevSiblingGap: a.get(b.prevSiblingGap || \"prevSiblingGap\") || 0,\n                    nextSiblingGap: a.get(b.nextSiblingGap || \"nextSiblingGap\") || 0\n                }\n            },\n            getRootSize: function(a, b) {\n                var d = c.clone(a.get(\"size\"));\n                return d[this.marginDimension] += b, d\n            },\n            createSiblings: function(a, b) {\n                var d = c.groupBy(a, \"direction\");\n                return {\n                    L: new h(d.L, this, b),\n                    T: new r(d.T, this, b),\n                    R: new i(d.R, this, b),\n                    B: new s(d.B, this, b),\n                    BR: new m(d.BR, this, b),\n                    BL: new n(d.BL, this, b),\n                    TR: new o(d.TR, this, b),\n                    TL: new p(d.TL, this, b)\n                }\n            },\n            computeSize: function(a, b) {\n                return {\n                    width: this.getWidth(a, b),\n                    height: this.getHeight(a, b)\n                }\n            },\n            computeOrigin: function() {\n                var a = this.siblings,\n                    b = this.rootSize,\n                    c = Math.max(this.getLWidth(a, b) + b.width / 2, this.getXLWidth(a, b) + b.width / 2, a.T.width / 2, a.B.width / 2);\n                return {\n                    x: this.rootCX - c,\n                    y: this.rootCY - this.getTHeight(a) - this.getLRHeight() / 2\n                }\n            },\n            moveSiblings: function(a, b) {\n                if (this.hasHorizontalSiblings(a)) {\n                    var c = b.width / 2;\n                    a.L.move(-c, 0), a.R.move(c, 0)\n                }\n                if (this.hasVerticalSiblings(a)) {\n                    var d = this.getLRHeight() / 2;\n                    a.T.move(0, -d), a.B.move(0, d), a.BR.move(0, d), a.BL.move(0, d), a.B.move(0, this.getBXHeight(a)), a.TR.move(0, -d), a.TL.move(0, -d), a.T.move(0, -this.getTXHeight(a))\n                }\n            },\n            moveRootToConnectionPoint: function(a) {\n                var b = this.getConnectionPoint(a);\n                this.dx += b.x, this.dy += b.y\n            },\n            computeRelativePosition: function(a, b, d) {\n                var e = this.siblings = this.createSiblings(b, {\n                        siblingGap: d.siblingGap\n                    }),\n                    f = this.rootSize = this.getRootSize(a, d.rootMargin);\n                c.extend(this, this.computeSize(e, f)), this.moveSiblings(e, f), this.moveRootToConnectionPoint(f), this.moveRootBehindSiblings(e, f), this.moveRootFromParent()\n            },\n            computeAbsolutePosition: function() {\n                if (this.parentArea) this.rootCX = this.parentArea.rootCX + this.dx, this.rootCY = this.parentArea.rootCY + this.dy, this.level = this.parentArea.level + 1;\n                else {\n                    var a = this.root.getBBox().center();\n                    this.rootCX = a.x, this.rootCY = a.y, this.level = 0\n                }\n                c.extend(this, this.computeOrigin())\n            },\n            hasVerticalSiblings: function(a) {\n                return a.T.exists() || a.B.exists() || a.BR.exists() || a.BL.exists() || a.TR.exists() || a.TL.exists()\n            },\n            hasHorizontalSiblings: function(a) {\n                return a.L.exists() || a.R.exists()\n            },\n            isSourceArea: function() {\n                return !this.parentArea\n            },\n            isSinkArea: function() {\n                return 0 === this.childAreas.length\n            },\n            getRootPosition: function() {\n                var a = this.root.get(\"size\");\n                return {\n                    x: this.rootCX - a.width / 2,\n                    y: this.rootCY - a.height / 2\n                }\n            },\n            getRootVertices: function(a, b) {\n                if (b = b || {}, a = a || this, 0 === a[this.deltaCoordinate] || !this.parentArea) return [];\n                var d, e = this.parentArea.getInnerSize();\n                if (!b.ignoreSiblings && this.hasSiblingsBetweenParent()) {\n                    var f = this.siblings[this.oppositeDirection];\n                    d = this.getRelativeVerticesAvoidingSiblings(e, a, f)\n                } else d = this.getRelativeVertices(e, a);\n                return c.invoke(d, \"offset\", this.parentArea.rootCX, this.parentArea.rootCY)\n            },\n            getInnerSize: function() {\n                return {\n                    width: this.rootSize.width,\n                    height: this.getLRHeight()\n                }\n            },\n            getConnectionPoint: function() {\n                return null\n            },\n            getRelativeVertices: function() {\n                return null\n            },\n            moveRootFromParent: function() {},\n            moveRootBehindSiblings: function() {},\n            hasSiblingsBetweenParent: function() {\n                return !this.isSourceArea() && this.siblings[this.oppositeDirection].exists()\n            },\n            getCY: function() {\n                return this.height / 2 + this.prevSiblingGap\n            },\n            getCX: function() {\n                return this.width / 2 + this.prevSiblingGap\n            }\n        }), f.extend = b.Model.extend;\n        var t = f.extend({\n                direction: \"R\",\n                oppositeDirection: \"L\",\n                deltaCoordinate: \"dx\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(a.width / 2, 0)\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx += Math.max(this.getLWidth(a, b), this.getTBOverlap(a, b)), this.dy += (this.getTHeight(a) - this.getBHeight(a)) / 2\n                },\n                moveRootFromParent: function() {\n                    this.dx += this.parentGap + this.rootOffset\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = this.parentGap / 2;\n                    return [c.clone().offset(d, 0), c.clone().offset(d, b.dy)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var d = this.getConnectionPoint(a),\n                        e = c.siblingGap / 2,\n                        f = this.dx > 0 ? -1 : 1,\n                        g = b.dy + f * (c.height + e) / 2,\n                        h = b.dy + f * this.rootSize.height / 4,\n                        i = this.gap / 2,\n                        j = 1.5 * i + Math.max(this.getLWidth(this.siblings, this.rootSize), this.getTBOverlap(this.siblings, this.rootSize));\n                    return [d.clone().offset(i, 0), d.clone().offset(i, g), d.clone().offset(j, g), d.clone().offset(j, h)]\n                }\n            }),\n            u = f.extend({\n                direction: \"L\",\n                oppositeDirection: \"R\",\n                deltaCoordinate: \"dx\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(-a.width / 2, 0)\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx -= Math.max(this.getRWidth(a, b), this.getTBOverlap(a, b)), this.dy += (this.getTHeight(a) - this.getBHeight(a)) / 2\n                },\n                moveRootFromParent: function() {\n                    this.dx -= this.parentGap + this.rootOffset\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = -this.parentGap / 2;\n                    return [c.clone().offset(d, 0), c.clone().offset(d, b.dy)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var d = this.getConnectionPoint(a),\n                        e = this.dx > 0 ? -1 : 1,\n                        f = b.dy + e * (c.height + c.siblingGap / 2) / 2,\n                        g = b.dy + e * this.rootSize.height / 4,\n                        h = this.gap / 2,\n                        i = 1.5 * h + Math.max(this.getRWidth(this.siblings, this.rootSize), this.getTBOverlap(this.siblings, this.rootSize));\n                    return [d.clone().offset(-h, 0), d.clone().offset(-h, f), d.clone().offset(-i, f), d.clone().offset(-i, g)]\n                }\n            }),\n            v = f.extend({\n                direction: \"T\",\n                oppositeDirection: \"B\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"width\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, -a.height / 2)\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx += this.getRootDX(a, b), this.hasHorizontalSiblings(a) && (this.dy -= (this.getLRHeight() - b.height) / 2), this.dy -= this.getBHeight(a)\n                },\n                moveRootFromParent: function() {\n                    this.dy -= this.parentGap + this.rootOffset\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = -this.getTXHeight(this.parentArea.siblings) - this.parentGap / 2;\n                    return [c.clone().offset(0, d), c.clone().offset(b.dx, d)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = this.siblings,\n                        e = d.B,\n                        f = this.getTXHeight(this.parentArea.siblings) + this.parentGap / 2,\n                        g = f + e.height;\n                    g += this.getBXHeight(this.siblings) + this.parentGap / 4;\n                    var h = this.dy < 0 ? -1 : 1,\n                        i = d[h > 0 ? \"BR\" : \"BL\"].width,\n                        j = b.dx;\n                    j += h * (Math.max(i, e.width / 2) + e.siblingGap / 4);\n                    var k = b.dx + h * this.rootSize.width / 4;\n                    return [c.clone().offset(0, -f), c.clone().offset(j, -f), c.clone().offset(j, -g), c.clone().offset(k, -g)]\n                }\n            }),\n            w = f.extend({\n                direction: \"B\",\n                oppositeDirection: \"T\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"width\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, a.height / 2)\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx += this.getRootDX(a, b), this.dy += this.getTHeight(a), this.hasHorizontalSiblings(a) && (this.dy += (this.getLRHeight() - b.height) / 2)\n                },\n                moveRootFromParent: function() {\n                    this.dy += this.parentGap + this.rootOffset\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = this.getBXHeight(this.parentArea.siblings) + this.parentGap / 2;\n                    return [c.clone().offset(0, d), c.clone().offset(b.dx, d)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b) {\n                    var c = this.getConnectionPoint(a),\n                        d = this.siblings,\n                        e = d.T,\n                        f = this.getBXHeight(this.parentArea.siblings) + this.parentGap / 2,\n                        g = f + e.height;\n                    g += this.getTXHeight(d) + this.parentGap / 4;\n                    var h = this.dy < 0 ? -1 : 1,\n                        i = d[h > 0 ? \"TR\" : \"TL\"].width,\n                        j = b.dx;\n                    j += h * (Math.max(i, e.width / 2) + e.siblingGap / 4);\n                    var k = b.dx + h * this.rootSize.width / 4;\n                    return [c.clone().offset(0, f), c.clone().offset(j, f), c.clone().offset(j, g), c.clone().offset(k, g)]\n                }\n            }),\n            x = f.extend({\n                direction: \"BR\",\n                oppositeDirection: \"L\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, a.height / 2)\n                },\n                getCY: function() {\n                    return this.prevSiblingGap\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    var c = Math.max(a.T.width, a.B.width);\n                    this.dx += Math.max(this.getLWidth(a, b), (c - b.width) / 2), this.dy += this.getTHeight(a), this.hasHorizontalSiblings(a) && (this.dy += (this.getLRHeight() - b.height) / 2)\n                },\n                moveRootFromParent: function() {\n                    this.dy += this.firstChildGap, this.dx += this.rootSize.width / 2 + this.rootOffset + this.parentGap\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a);\n                    return [c.clone().offset(0, b.dy - a.height / 2)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var e = b.dx - this.rootSize.width / 4,\n                        f = b.dy;\n                    return f += Math.max(c.height, this.rootSize.height) / 2, f += this.getMinimalGap(c) / 2, [d.point(0, f), d.point(e, f)]\n                }\n            }),\n            y = f.extend({\n                direction: \"BL\",\n                oppositeDirection: \"R\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, a.height / 2)\n                },\n                getCY: function() {\n                    return this.prevSiblingGap\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    var c = Math.max(a.T.width, a.B.width);\n                    this.dx -= Math.max(this.getRWidth(a, b), (c - b.width) / 2), this.dy += this.getTHeight(a), this.hasHorizontalSiblings(a) && (this.dy += (this.getLRHeight() - b.height) / 2)\n                },\n                moveRootFromParent: function() {\n                    this.dy += this.firstChildGap, this.dx -= this.rootSize.width / 2 + this.rootOffset + this.parentGap\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a);\n                    return [c.clone().offset(0, b.dy - a.height / 2)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var e = b.dx + this.rootSize.width / 4,\n                        f = b.dy;\n                    return f += Math.max(c.height, this.rootSize.height) / 2, f += this.getMinimalGap(c) / 2, [d.point(0, f), d.point(e, f)]\n                }\n            }),\n            z = f.extend({\n                direction: \"TR\",\n                oppositeDirection: \"L\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, a.height / 2)\n                },\n                getCY: function() {\n                    return this.height - this.rootSize.height + this.prevSiblingGap\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx += Math.max(this.getLWidth(a, b), this.getTBOverlap(a, b)), this.dy -= this.getBHeight(a), this.hasHorizontalSiblings(a) && (this.dy -= (this.getLRHeight() - b.height) / 2)\n                },\n                moveRootFromParent: function() {\n                    this.dy -= this.firstChildGap, this.dx += this.rootSize.width / 2 + this.rootOffset + this.parentGap\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a);\n                    return [c.clone().offset(0, b.dy - a.height / 2)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var e = b.dx - this.rootSize.width / 4,\n                        f = b.dy;\n                    return f -= Math.max(c.height, this.rootSize.height) / 2, f -= this.getMinimalGap(c) / 2, [d.point(0, f), d.point(e, f)]\n                }\n            }),\n            A = f.extend({\n                direction: \"TL\",\n                oppositeDirection: \"R\",\n                deltaCoordinate: \"dy\",\n                marginDimension: \"height\",\n                getConnectionPoint: function(a) {\n                    return d.point(0, a.height / 2)\n                },\n                getCY: function() {\n                    return this.height - this.rootSize.height + this.prevSiblingGap\n                },\n                moveRootBehindSiblings: function(a, b) {\n                    this.dx -= Math.max(this.getRWidth(a, b), this.getTBOverlap(a, b)), this.dy -= this.getBHeight(a), this.hasHorizontalSiblings(a) && (this.dy -= (this.getLRHeight() - b.height) / 2)\n                },\n                moveRootFromParent: function() {\n                    this.dy -= this.firstChildGap, this.dx -= this.rootSize.width / 2 + this.rootOffset + this.parentGap\n                },\n                getRelativeVertices: function(a, b) {\n                    var c = this.getConnectionPoint(a);\n                    return [c.clone().offset(0, b.dy - a.height / 2)]\n                },\n                getRelativeVerticesAvoidingSiblings: function(a, b, c) {\n                    var e = b.dx + this.rootSize.width / 4,\n                        f = b.dy;\n                    return f -= Math.max(c.height, this.rootSize.height) / 2, f -= this.getMinimalGap(c) / 2, [d.point(0, f), d.point(e, f)]\n                }\n            }),\n            B = {\n                rotate: function(a) {\n                    var b = \"LRBT\",\n                        c = b.indexOf(a[0]) - b.indexOf(a[1]);\n                    return function(a) {\n                        var d = b.indexOf(a);\n                        return d >= 0 ? b[(4 + d - c) % 4] : a\n                    }\n                },\n                flip: function(a) {\n                    var b = a[0],\n                        c = a[1];\n                    return function(a) {\n                        return a === b ? c : a === c ? b : a\n                    }\n                },\n                straighten: function(a) {\n                    return c.constant(a[1])\n                }\n            },\n            C = b.Model.extend({\n                defaults: {\n                    graph: void 0,\n                    gap: 20,\n                    parentGap: 20,\n                    siblingGap: 20,\n                    firstChildGap: 20,\n                    direction: \"R\",\n                    directionRule: B.straighten,\n                    updatePosition: function(a, b, c) {\n                        a.set(\"position\", b, c)\n                    },\n                    updateVertices: function(a, b, c) {\n                        a.set(\"vertices\", b, c)\n                    },\n                    updateAttributes: null,\n                    filter: null,\n                    attributeNames: {}\n                },\n                initialize: function() {\n                    this._cacheOptions(this.attributes), this.layoutAreas = {}\n                },\n                layout: function(a) {\n                    return this.layoutAreas = {}, c.each(this.getGraphSources(a), c.partial(this.layoutTree, c, a), this), this.trigger(\"layout:done\", a), this\n                },\n                layoutTree: function(a, b) {\n                    b = b || {}, b.treeLayout = !0;\n                    var c = this._computeLayoutAreas(a, this.get(\"direction\"), b);\n                    return this._computeAbsolutePositions(c), this._updateCells(c, b), this\n                },\n                getLayoutArea: function(a) {\n                    return this.layoutAreas[a.id || a] || null\n                },\n                getRootLayoutAreas: function() {\n                    return c.map(this.getGraphSources(), this.getLayoutArea, this)\n                },\n                getGraphSources: function(a) {\n                    var b = this.graph.getSources();\n                    return this.filter && b.length > 0 && (b = this.filter(b, null, a) || b), b\n                },\n                getMinimalRootAreaByPoint: function(a) {\n                    var b = c.filter(this.getRootLayoutAreas(), function(b) {\n                        return b.containsPoint(a)\n                    });\n                    return c.isEmpty(b) ? null : c.min(b, function(a) {\n                        return a.width * a.height\n                    })\n                },\n                _computeLayoutAreas: function(a, b, d) {\n                    var e = a.get(this.getAttributeName(\"direction\")) || b,\n                        g = this._getChildren(a, d),\n                        h = c.map(g, c.partial(this._computeLayoutAreas, c, e, d), this),\n                        i = f.create(e, a, h, this.attributes);\n                    return i.link = this.graph.getConnectedLinks(a, {\n                        inbound: !0\n                    })[0], this.layoutAreas[a.id] = i, i\n                },\n                _cacheOptions: function(a) {\n                    var b = [\"updateAttributes\", \"updateVertices\", \"updatePosition\", \"filter\"];\n                    c.each(b, function(b) {\n                        this[b] = c.isFunction(a[b]) ? a[b] : null\n                    }, this), this.graph = a.graph\n                },\n                _getChildren: function(a, b) {\n                    var c = this.graph.getNeighbors(a, {\n                        outbound: !0\n                    });\n                    return this.filter && c.length > 0 && (c = this.filter(c, a, b) || c), c\n                },\n                _computeAbsolutePositions: function(a) {\n                    a.computeAbsolutePosition(a), c.each(a.childAreas, this._computeAbsolutePositions, this)\n                },\n                _updateCells: function(a, b) {\n                    var d = a.root,\n                        e = a.link || null;\n                    e && (this.updatePosition && this.updatePosition(d, a.getRootPosition(), b), this.updateVertices && this.updateVertices(e, a.getRootVertices(), b)), this.changeSiblingRank(d, a.siblingRank, b), this.updateAttributes && this.updateAttributes(a, d, e, b), c.each(a.childAreas, c.partial(this._updateCells, c, b), this)\n                },\n                updateDirections: function(a, b, d) {\n                    d = d || {};\n                    var e = this.getAttributeName(\"direction\"),\n                        f = this.get(\"directionRule\")(b);\n                    this.graph.search(a, c.bind(function(a, b) {\n                        if (0 !== b) {\n                            var c = f(a.get(e));\n                            this.changeDirection(a, c, d)\n                        }\n                    }, this), {\n                        outbound: !0\n                    })\n                },\n                reconnectElement: function(a, b, c) {\n                    c = c || {};\n                    var d = this.getLayoutArea(a),\n                        e = d.link;\n                    if (e) {\n                        e.set(\"source\", {\n                            id: b.id || b\n                        }, c);\n                        var f = d.direction,\n                            g = c.direction || f,\n                            h = c.siblingRank || void 0;\n                        return this.changeSiblingRank(a, h, c), this.changeDirection(a, g, c), f !== g && this.updateDirections(a, [f, c.direction], c), !0\n                    }\n                    return !1\n                },\n                changeSiblingRank: function(a, b, c) {\n                    a.set(this.getAttributeName(\"siblingRank\"), b, c)\n                },\n                changeDirection: function(a, b, c) {\n                    a.set(this.getAttributeName(\"direction\"), b, c)\n                },\n                getAttributeName: function(a) {\n                    return this.get(\"attributeNames\")[a] || a\n                },\n                getAttribute: function(a, b) {\n                    return a.get(this.getAttributeName(b))\n                },\n                prepare: function() {\n                    return this\n                }\n            }, {\n                directionRules: B\n            });\n        a.layout.TreeLayout = C\n    }(joint, Backbone, _, g);\n    joint.format.gexf = {}, joint.format.gexf.toCellsArray = function(a, b, c) {\n        var d = new DOMParser,\n            e = d.parseFromString(a, \"text/xml\");\n        if (\"parsererror\" == e.documentElement.nodeName) throw new Error(\"Error while parsing GEXF file.\");\n        var f = e.documentElement.querySelectorAll(\"node\"),\n            g = e.documentElement.querySelectorAll(\"edge\"),\n            h = [];\n        return _.each(f, function(a) {\n            var c = parseFloat(a.querySelector(\"size\").getAttribute(\"value\")),\n                d = b({\n                    id: a.getAttribute(\"id\"),\n                    width: c,\n                    height: c,\n                    label: a.getAttribute(\"label\")\n                });\n            h.push(d)\n        }), _.each(g, function(a) {\n            var b = c({\n                source: a.getAttribute(\"source\"),\n                target: a.getAttribute(\"target\")\n            });\n            h.unshift(b)\n        }), h\n    };\n    joint.dia.Paper.prototype.toSVG = function(a, b) {\n        function c() {\n            return (new XMLSerializer).serializeToString(f).replace(/&nbsp;/g, \" \")\n        }\n\n        function d(a) {\n            var b = V(m.shift());\n            if (!b) return a();\n            var c = b.attr(\"xlink:href\") || b.attr(\"href\");\n            joint.util.imageToDataUri(c, function(c, e) {\n                b.attr(\"xlink:href\", e), d(a)\n            })\n        }\n        b = b || {}, this.trigger(\"beforeexport\", b);\n        var e = b.area ? b.area : V.transformRect(this.getContentBBox(), this.matrix().inverse()),\n            f = this.svg.cloneNode(!0);\n        f.removeAttribute(\"style\"), b.preserveDimensions && V(f).attr({\n            width: e.width,\n            height: e.height\n        }), V(f).findOne(\".joint-viewport\").removeAttr(\"transform\"), V(f).attr(\"viewBox\", e.x + \" \" + e.y + \" \" + e.width + \" \" + e.height);\n        for (var g = document.styleSheets.length, h = [], i = g - 1; i >= 0; i--) h[i] = document.styleSheets[i], document.styleSheets[i].disabled = !0;\n        var j = {};\n        $(this.svg).find(\"*\").each(function(a) {\n            var b = window.getComputedStyle(this, null),\n                c = {};\n            _.each(b, function(a) {\n                c[a] = b.getPropertyValue(a)\n            }), j[a] = c\n        }), g != document.styleSheets.length && _.each(h, function(a, b) {\n            document.styleSheets[b] = a\n        });\n        for (var k = 0; k < g; k++) document.styleSheets[k].disabled = !1;\n        var l = {};\n        $(this.svg).find(\"*\").each(function(a) {\n            var b = window.getComputedStyle(this, null),\n                c = j[a],\n                d = {};\n            _.each(b, function(a) {\n                b.getPropertyValue(a) !== c[a] && (d[a] = b.getPropertyValue(a))\n            }), l[a] = d\n        });\n        var m = [];\n        return $(f).find(\"*\").each(function(a) {\n            $(this).css(l[a]), \"image\" === this.tagName.toLowerCase() && m.push(this)\n        }), this.trigger(\"afterexport\", b), b.convertImagesToDataUris && m.length ? void d(function() {\n            a(c())\n        }) : a(c())\n    }, joint.dia.Paper.prototype.openAsSVG = function(a) {\n        var b = \"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes\",\n            c = _.uniqueId(\"svg_output\");\n        this.toSVG(function(a) {\n            var d = window.open(\"\", c, b),\n                e = \"data:image/svg+xml,\" + encodeURIComponent(a);\n            d.document.write('<img src=\"' + e + '\" style=\"max-height:100%\" />')\n        }, _.extend({\n            convertImagesToDataUris: !0\n        }, a))\n    };\n\n    function RGBColor(a) {\n        this.ok = !1, \"#\" == a.charAt(0) && (a = a.substr(1, 6)), a = a.replace(/ /g, \"\"), a = a.toLowerCase();\n        var b = {\n            aliceblue: \"f0f8ff\",\n            antiquewhite: \"faebd7\",\n            aqua: \"00ffff\",\n            aquamarine: \"7fffd4\",\n            azure: \"f0ffff\",\n            beige: \"f5f5dc\",\n            bisque: \"ffe4c4\",\n            black: \"000000\",\n            blanchedalmond: \"ffebcd\",\n            blue: \"0000ff\",\n            blueviolet: \"8a2be2\",\n            brown: \"a52a2a\",\n            burlywood: \"deb887\",\n            cadetblue: \"5f9ea0\",\n            chartreuse: \"7fff00\",\n            chocolate: \"d2691e\",\n            coral: \"ff7f50\",\n            cornflowerblue: \"6495ed\",\n            cornsilk: \"fff8dc\",\n            crimson: \"dc143c\",\n            cyan: \"00ffff\",\n            darkblue: \"00008b\",\n            darkcyan: \"008b8b\",\n            darkgoldenrod: \"b8860b\",\n            darkgray: \"a9a9a9\",\n            darkgreen: \"006400\",\n            darkkhaki: \"bdb76b\",\n            darkmagenta: \"8b008b\",\n            darkolivegreen: \"556b2f\",\n            darkorange: \"ff8c00\",\n            darkorchid: \"9932cc\",\n            darkred: \"8b0000\",\n            darksalmon: \"e9967a\",\n            darkseagreen: \"8fbc8f\",\n            darkslateblue: \"483d8b\",\n            darkslategray: \"2f4f4f\",\n            darkturquoise: \"00ced1\",\n            darkviolet: \"9400d3\",\n            deeppink: \"ff1493\",\n            deepskyblue: \"00bfff\",\n            dimgray: \"696969\",\n            dodgerblue: \"1e90ff\",\n            feldspar: \"d19275\",\n            firebrick: \"b22222\",\n            floralwhite: \"fffaf0\",\n            forestgreen: \"228b22\",\n            fuchsia: \"ff00ff\",\n            gainsboro: \"dcdcdc\",\n            ghostwhite: \"f8f8ff\",\n            gold: \"ffd700\",\n            goldenrod: \"daa520\",\n            gray: \"808080\",\n            green: \"008000\",\n            greenyellow: \"adff2f\",\n            honeydew: \"f0fff0\",\n            hotpink: \"ff69b4\",\n            indianred: \"cd5c5c\",\n            indigo: \"4b0082\",\n            ivory: \"fffff0\",\n            khaki: \"f0e68c\",\n            lavender: \"e6e6fa\",\n            lavenderblush: \"fff0f5\",\n            lawngreen: \"7cfc00\",\n            lemonchiffon: \"fffacd\",\n            lightblue: \"add8e6\",\n            lightcoral: \"f08080\",\n            lightcyan: \"e0ffff\",\n            lightgoldenrodyellow: \"fafad2\",\n            lightgrey: \"d3d3d3\",\n            lightgreen: \"90ee90\",\n            lightpink: \"ffb6c1\",\n            lightsalmon: \"ffa07a\",\n            lightseagreen: \"20b2aa\",\n            lightskyblue: \"87cefa\",\n            lightslateblue: \"8470ff\",\n            lightslategray: \"778899\",\n            lightsteelblue: \"b0c4de\",\n            lightyellow: \"ffffe0\",\n            lime: \"00ff00\",\n            limegreen: \"32cd32\",\n            linen: \"faf0e6\",\n            magenta: \"ff00ff\",\n            maroon: \"800000\",\n            mediumaquamarine: \"66cdaa\",\n            mediumblue: \"0000cd\",\n            mediumorchid: \"ba55d3\",\n            mediumpurple: \"9370d8\",\n            mediumseagreen: \"3cb371\",\n            mediumslateblue: \"7b68ee\",\n            mediumspringgreen: \"00fa9a\",\n            mediumturquoise: \"48d1cc\",\n            mediumvioletred: \"c71585\",\n            midnightblue: \"191970\",\n            mintcream: \"f5fffa\",\n            mistyrose: \"ffe4e1\",\n            moccasin: \"ffe4b5\",\n            navajowhite: \"ffdead\",\n            navy: \"000080\",\n            oldlace: \"fdf5e6\",\n            olive: \"808000\",\n            olivedrab: \"6b8e23\",\n            orange: \"ffa500\",\n            orangered: \"ff4500\",\n            orchid: \"da70d6\",\n            palegoldenrod: \"eee8aa\",\n            palegreen: \"98fb98\",\n            paleturquoise: \"afeeee\",\n            palevioletred: \"d87093\",\n            papayawhip: \"ffefd5\",\n            peachpuff: \"ffdab9\",\n            peru: \"cd853f\",\n            pink: \"ffc0cb\",\n            plum: \"dda0dd\",\n            powderblue: \"b0e0e6\",\n            purple: \"800080\",\n            red: \"ff0000\",\n            rosybrown: \"bc8f8f\",\n            royalblue: \"4169e1\",\n            saddlebrown: \"8b4513\",\n            salmon: \"fa8072\",\n            sandybrown: \"f4a460\",\n            seagreen: \"2e8b57\",\n            seashell: \"fff5ee\",\n            sienna: \"a0522d\",\n            silver: \"c0c0c0\",\n            skyblue: \"87ceeb\",\n            slateblue: \"6a5acd\",\n            slategray: \"708090\",\n            snow: \"fffafa\",\n            springgreen: \"00ff7f\",\n            steelblue: \"4682b4\",\n            tan: \"d2b48c\",\n            teal: \"008080\",\n            thistle: \"d8bfd8\",\n            tomato: \"ff6347\",\n            turquoise: \"40e0d0\",\n            violet: \"ee82ee\",\n            violetred: \"d02090\",\n            wheat: \"f5deb3\",\n            white: \"ffffff\",\n            whitesmoke: \"f5f5f5\",\n            yellow: \"ffff00\",\n            yellowgreen: \"9acd32\"\n        };\n        for (var c in b) a == c && (a = b[c]);\n        for (var d = [{\n                re: /^rgb\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/,\n                example: [\"rgb(123, 234, 45)\", \"rgb(255,234,245)\"],\n                process: function(a) {\n                    return [parseInt(a[1]), parseInt(a[2]), parseInt(a[3])]\n                }\n            }, {\n                re: /^(\\w{2})(\\w{2})(\\w{2})$/,\n                example: [\"#00ff00\", \"336699\"],\n                process: function(a) {\n                    return [parseInt(a[1], 16), parseInt(a[2], 16), parseInt(a[3], 16)]\n                }\n            }, {\n                re: /^(\\w{1})(\\w{1})(\\w{1})$/,\n                example: [\"#fb0\", \"f0f\"],\n                process: function(a) {\n                    return [parseInt(a[1] + a[1], 16), parseInt(a[2] + a[2], 16), parseInt(a[3] + a[3], 16)]\n                }\n            }], e = 0; e < d.length; e++) {\n            var f = d[e].re,\n                g = d[e].process,\n                h = f.exec(a);\n            h && (channels = g(h), this.r = channels[0], this.g = channels[1], this.b = channels[2], this.ok = !0)\n        }\n        this.r = this.r < 0 || isNaN(this.r) ? 0 : this.r > 255 ? 255 : this.r, this.g = this.g < 0 || isNaN(this.g) ? 0 : this.g > 255 ? 255 : this.g, this.b = this.b < 0 || isNaN(this.b) ? 0 : this.b > 255 ? 255 : this.b, this.toRGB = function() {\n            return \"rgb(\" + this.r + \", \" + this.g + \", \" + this.b + \")\"\n        }, this.toHex = function() {\n            var a = this.r.toString(16),\n                b = this.g.toString(16),\n                c = this.b.toString(16);\n            return 1 == a.length && (a = \"0\" + a), 1 == b.length && (b = \"0\" + b), 1 == c.length && (c = \"0\" + c), \"#\" + a + b + c\n        }, this.getHelpXML = function() {\n            for (var a = new Array, c = 0; c < d.length; c++)\n                for (var e = d[c].example, f = 0; f < e.length; f++) a[a.length] = e[f];\n            for (var g in b) a[a.length] = g;\n            var h = document.createElement(\"ul\");\n            h.setAttribute(\"id\", \"rgbcolor-examples\");\n            for (var c = 0; c < a.length; c++) try {\n                var i = document.createElement(\"li\"),\n                    j = new RGBColor(a[c]),\n                    k = document.createElement(\"div\");\n                k.style.cssText = \"margin: 3px; border: 1px solid black; background:\" + j.toHex() + \"; color:\" + j.toHex(), k.appendChild(document.createTextNode(\"test\"));\n                var l = document.createTextNode(\" \" + a[c] + \" -> \" + j.toRGB() + \" -> \" + j.toHex());\n                i.appendChild(k), i.appendChild(l), h.appendChild(i)\n            } catch (m) {}\n            return h\n        }\n    }\n\n    function stackBlurImage(a, b, c, d) {\n        var e = document.getElementById(a),\n            f = e.naturalWidth,\n            g = e.naturalHeight,\n            h = document.getElementById(b);\n        h.style.width = f + \"px\", h.style.height = g + \"px\", h.width = f, h.height = g;\n        var i = h.getContext(\"2d\");\n        i.clearRect(0, 0, f, g), i.drawImage(e, 0, 0), isNaN(c) || c < 1 || (d ? stackBlurCanvasRGBA(b, 0, 0, f, g, c) : stackBlurCanvasRGB(b, 0, 0, f, g, c))\n    }\n\n    function stackBlurCanvasRGBA(a, b, c, d, e, f) {\n        if (!(isNaN(f) || f < 1)) {\n            f |= 0;\n            var g, h = document.getElementById(a),\n                i = h.getContext(\"2d\");\n            try {\n                try {\n                    g = i.getImageData(b, c, d, e)\n                } catch (j) {\n                    try {\n                        netscape.security.PrivilegeManager.enablePrivilege(\"UniversalBrowserRead\"), g = i.getImageData(b, c, d, e)\n                    } catch (j) {\n                        throw alert(\"Cannot access local image\"), new Error(\"unable to access local image data: \" + j)\n                    }\n                }\n            } catch (j) {\n                throw alert(\"Cannot access image\"), new Error(\"unable to access image data: \" + j)\n            }\n            var k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I = g.data,\n                J = f + f + 1,\n                K = d - 1,\n                L = e - 1,\n                M = f + 1,\n                N = M * (M + 1) / 2,\n                O = new BlurStack,\n                P = O;\n            for (m = 1; m < J; m++)\n                if (P = P.next = new BlurStack, m == M) var Q = P;\n            P.next = O;\n            var R = null,\n                S = null;\n            q = p = 0;\n            var T = mul_table[f],\n                U = shg_table[f];\n            for (l = 0; l < e; l++) {\n                for (z = A = B = C = r = s = t = u = 0, v = M * (D = I[p]), w = M * (E = I[p + 1]), x = M * (F = I[p + 2]), y = M * (G = I[p + 3]), r += N * D, s += N * E, t += N * F, u += N * G, P = O, m = 0; m < M; m++) P.r = D, P.g = E, P.b = F, P.a = G, P = P.next;\n                for (m = 1; m < M; m++) n = p + ((K < m ? K : m) << 2), r += (P.r = D = I[n]) * (H = M - m), s += (P.g = E = I[n + 1]) * H, t += (P.b = F = I[n + 2]) * H, u += (P.a = G = I[n + 3]) * H, z += D, A += E, B += F, C += G, P = P.next;\n                for (R = O, S = Q, k = 0; k < d; k++) I[p + 3] = G = u * T >> U, 0 != G ? (G = 255 / G, I[p] = (r * T >> U) * G, I[p + 1] = (s * T >> U) * G, I[p + 2] = (t * T >> U) * G) : I[p] = I[p + 1] = I[p + 2] = 0, r -= v, s -= w, t -= x, u -= y, v -= R.r, w -= R.g, x -= R.b, y -= R.a, n = q + ((n = k + f + 1) < K ? n : K) << 2, z += R.r = I[n], A += R.g = I[n + 1], B += R.b = I[n + 2], C += R.a = I[n + 3], r += z, s += A, t += B, u += C, R = R.next, v += D = S.r, w += E = S.g, x += F = S.b, y += G = S.a, z -= D, A -= E, B -= F, C -= G, S = S.next, p += 4;\n                q += d\n            }\n            for (k = 0; k < d; k++) {\n                for (A = B = C = z = s = t = u = r = 0, p = k << 2, v = M * (D = I[p]), w = M * (E = I[p + 1]), x = M * (F = I[p + 2]), y = M * (G = I[p + 3]), r += N * D, s += N * E, t += N * F, u += N * G, P = O, m = 0; m < M; m++) P.r = D, P.g = E, P.b = F, P.a = G, P = P.next;\n                for (o = d, m = 1; m <= f; m++) p = o + k << 2, r += (P.r = D = I[p]) * (H = M - m), s += (P.g = E = I[p + 1]) * H, t += (P.b = F = I[p + 2]) * H, u += (P.a = G = I[p + 3]) * H, z += D, A += E, B += F, C += G, P = P.next, m < L && (o += d);\n                for (p = k, R = O, S = Q, l = 0; l < e; l++) n = p << 2, I[n + 3] = G = u * T >> U, G > 0 ? (G = 255 / G, I[n] = (r * T >> U) * G, I[n + 1] = (s * T >> U) * G, I[n + 2] = (t * T >> U) * G) : I[n] = I[n + 1] = I[n + 2] = 0, r -= v, s -= w, t -= x, u -= y, v -= R.r, w -= R.g, x -= R.b, y -= R.a, n = k + ((n = l + M) < L ? n : L) * d << 2, r += z += R.r = I[n], s += A += R.g = I[n + 1], t += B += R.b = I[n + 2], u += C += R.a = I[n + 3], R = R.next, v += D = S.r, w += E = S.g, x += F = S.b, y += G = S.a, z -= D, A -= E, B -= F, C -= G, S = S.next, p += d\n            }\n            i.putImageData(g, b, c)\n        }\n    }\n\n    function stackBlurCanvasRGB(a, b, c, d, e, f) {\n        if (!(isNaN(f) || f < 1)) {\n            f |= 0;\n            var g, h = document.getElementById(a),\n                i = h.getContext(\"2d\");\n            try {\n                try {\n                    g = i.getImageData(b, c, d, e)\n                } catch (j) {\n                    try {\n                        netscape.security.PrivilegeManager.enablePrivilege(\"UniversalBrowserRead\"), g = i.getImageData(b, c, d, e)\n                    } catch (j) {\n                        throw alert(\"Cannot access local image\"), new Error(\"unable to access local image data: \" + j)\n                    }\n                }\n            } catch (j) {\n                throw alert(\"Cannot access image\"), new Error(\"unable to access image data: \" + j)\n            }\n            var k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E = g.data,\n                F = f + f + 1,\n                G = d - 1,\n                H = e - 1,\n                I = f + 1,\n                J = I * (I + 1) / 2,\n                K = new BlurStack,\n                L = K;\n            for (m = 1; m < F; m++)\n                if (L = L.next = new BlurStack, m == I) var M = L;\n            L.next = K;\n            var N = null,\n                O = null;\n            q = p = 0;\n            var P = mul_table[f],\n                Q = shg_table[f];\n            for (l = 0; l < e; l++) {\n                for (x = y = z = r = s = t = 0, u = I * (A = E[p]), v = I * (B = E[p + 1]), w = I * (C = E[p + 2]), r += J * A, s += J * B, t += J * C, L = K, m = 0; m < I; m++) L.r = A, L.g = B, L.b = C, L = L.next;\n                for (m = 1; m < I; m++) n = p + ((G < m ? G : m) << 2), r += (L.r = A = E[n]) * (D = I - m), s += (L.g = B = E[n + 1]) * D, t += (L.b = C = E[n + 2]) * D, x += A, y += B, z += C, L = L.next;\n                for (N = K, O = M, k = 0; k < d; k++) E[p] = r * P >> Q, E[p + 1] = s * P >> Q, E[p + 2] = t * P >> Q, r -= u, s -= v, t -= w, u -= N.r, v -= N.g, w -= N.b, n = q + ((n = k + f + 1) < G ? n : G) << 2, x += N.r = E[n], y += N.g = E[n + 1], z += N.b = E[n + 2], r += x, s += y, t += z, N = N.next, u += A = O.r, v += B = O.g, w += C = O.b, x -= A, y -= B, z -= C, O = O.next, p += 4;\n                q += d\n            }\n            for (k = 0; k < d; k++) {\n                for (y = z = x = s = t = r = 0, p = k << 2, u = I * (A = E[p]), v = I * (B = E[p + 1]), w = I * (C = E[p + 2]), r += J * A, s += J * B, t += J * C, L = K, m = 0; m < I; m++) L.r = A, L.g = B, L.b = C, L = L.next;\n                for (o = d, m = 1; m <= f; m++) p = o + k << 2, r += (L.r = A = E[p]) * (D = I - m), s += (L.g = B = E[p + 1]) * D, t += (L.b = C = E[p + 2]) * D, x += A, y += B, z += C, L = L.next, m < H && (o += d);\n                for (p = k, N = K, O = M, l = 0; l < e; l++) n = p << 2, E[n] = r * P >> Q, E[n + 1] = s * P >> Q, E[n + 2] = t * P >> Q, r -= u, s -= v, t -= w, u -= N.r, v -= N.g, w -= N.b, n = k + ((n = l + I) < H ? n : H) * d << 2, r += x += N.r = E[n], s += y += N.g = E[n + 1], t += z += N.b = E[n + 2], N = N.next, u += A = O.r, v += B = O.g, w += C = O.b, x -= A, y -= B, z -= C, O = O.next, p += d\n            }\n            i.putImageData(g, b, c)\n        }\n    }\n\n    function BlurStack() {\n        this.r = 0, this.g = 0, this.b = 0, this.a = 0, this.next = null\n    }\n    var mul_table = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259],\n        shg_table = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];\n    ! function() {\n        function a() {\n            var a = {};\n            return a.FRAMERATE = 30, a.MAX_VIRTUAL_PIXELS = 3e4, a.init = function(b) {\n                var c = 0;\n                a.UniqueId = function() {\n                    return c++, \"canvg\" + c\n                }, a.Definitions = {}, a.Styles = {}, a.Animations = [], a.Images = [], a.ctx = b, a.ViewPort = new function() {\n                    this.viewPorts = [], this.Clear = function() {\n                        this.viewPorts = []\n                    }, this.SetCurrent = function(a, b) {\n                        this.viewPorts.push({\n                            width: a,\n                            height: b\n                        })\n                    }, this.RemoveCurrent = function() {\n                        this.viewPorts.pop()\n                    }, this.Current = function() {\n                        return this.viewPorts[this.viewPorts.length - 1]\n                    }, this.width = function() {\n                        return this.Current().width\n                    }, this.height = function() {\n                        return this.Current().height\n                    }, this.ComputeSize = function(a) {\n                        return null != a && \"number\" == typeof a ? a : \"x\" == a ? this.width() : \"y\" == a ? this.height() : Math.sqrt(Math.pow(this.width(), 2) + Math.pow(this.height(), 2)) / Math.sqrt(2)\n                    }\n                }\n            }, a.init(), a.ImagesLoaded = function() {\n                for (var b = 0; b < a.Images.length; b++)\n                    if (!a.Images[b].loaded) return !1;\n                return !0\n            }, a.trim = function(a) {\n                return a.replace(/^\\s+|\\s+$/g, \"\")\n            }, a.compressSpaces = function(a) {\n                return a.replace(/[\\s\\r\\t\\n]+/gm, \" \")\n            }, a.ajax = function(a) {\n                var b;\n                return b = window.XMLHttpRequest ? new XMLHttpRequest : new ActiveXObject(\"Microsoft.XMLHTTP\"), b ? (b.open(\"GET\", a, !1), b.send(null), b.responseText) : null\n            }, a.parseXml = function(a) {\n                if (window.DOMParser) {\n                    var b = new DOMParser;\n                    return b.parseFromString(a, \"text/xml\")\n                }\n                a = a.replace(/<!DOCTYPE svg[^>]*>/, \"\");\n                var c = new ActiveXObject(\"Microsoft.XMLDOM\");\n                return c.async = \"false\", c.loadXML(a), c\n            }, a.Property = function(a, b) {\n                this.name = a, this.value = b\n            }, a.Property.prototype.getValue = function() {\n                return this.value\n            }, a.Property.prototype.hasValue = function() {\n                return null != this.value && \"\" !== this.value\n            }, a.Property.prototype.numValue = function() {\n                if (!this.hasValue()) return 0;\n                var a = parseFloat(this.value);\n                return (this.value + \"\").match(/%$/) && (a /= 100), a\n            }, a.Property.prototype.valueOrDefault = function(a) {\n                return this.hasValue() ? this.value : a\n            }, a.Property.prototype.numValueOrDefault = function(a) {\n                return this.hasValue() ? this.numValue() : a\n            }, a.Property.prototype.addOpacity = function(b) {\n                var c = this.value;\n                if (null != b && \"\" != b && \"string\" == typeof this.value) {\n                    var d = new RGBColor(this.value);\n                    d.ok && (c = \"rgba(\" + d.r + \", \" + d.g + \", \" + d.b + \", \" + b + \")\")\n                }\n                return new a.Property(this.name, c)\n            }, a.Property.prototype.getDefinition = function() {\n                var b = this.value.match(/#([^\\)'\"]+)/);\n                return b && (b = b[1]), b || (b = this.value), a.Definitions[b]\n            }, a.Property.prototype.isUrlDefinition = function() {\n                return 0 == this.value.indexOf(\"url(\")\n            }, a.Property.prototype.getFillStyleDefinition = function(b, c) {\n                var d = this.getDefinition();\n                if (null != d && d.createGradient) return d.createGradient(a.ctx, b, c);\n                if (null != d && d.createPattern) {\n                    if (d.getHrefAttribute().hasValue()) {\n                        var e = d.attribute(\"patternTransform\");\n                        d = d.getHrefAttribute().getDefinition(), e.hasValue() && (d.attribute(\"patternTransform\", !0).value = e.value)\n                    }\n                    return d.createPattern(a.ctx, b)\n                }\n                return null\n            }, a.Property.prototype.getDPI = function(a) {\n                return 96\n            }, a.Property.prototype.getEM = function(b) {\n                var c = 12,\n                    d = new a.Property(\"fontSize\", a.Font.Parse(a.ctx.font).fontSize);\n                return d.hasValue() && (c = d.toPixels(b)), c\n            }, a.Property.prototype.getUnits = function() {\n                var a = this.value + \"\";\n                return a.replace(/[0-9\\.\\-]/g, \"\")\n            }, a.Property.prototype.toPixels = function(b, c) {\n                if (!this.hasValue()) return 0;\n                var d = this.value + \"\";\n                if (d.match(/em$/)) return this.numValue() * this.getEM(b);\n                if (d.match(/ex$/)) return this.numValue() * this.getEM(b) / 2;\n                if (d.match(/px$/)) return this.numValue();\n                if (d.match(/pt$/)) return this.numValue() * this.getDPI(b) * (1 / 72);\n                if (d.match(/pc$/)) return 15 * this.numValue();\n                if (d.match(/cm$/)) return this.numValue() * this.getDPI(b) / 2.54;\n                if (d.match(/mm$/)) return this.numValue() * this.getDPI(b) / 25.4;\n                if (d.match(/in$/)) return this.numValue() * this.getDPI(b);\n                if (d.match(/%$/)) return this.numValue() * a.ViewPort.ComputeSize(b);\n                var e = this.numValue();\n                return c && e < 1 ? e * a.ViewPort.ComputeSize(b) : e\n            }, a.Property.prototype.toMilliseconds = function() {\n                if (!this.hasValue()) return 0;\n                var a = this.value + \"\";\n                return a.match(/s$/) ? 1e3 * this.numValue() : a.match(/ms$/) ? this.numValue() : this.numValue()\n            }, a.Property.prototype.toRadians = function() {\n                if (!this.hasValue()) return 0;\n                var a = this.value + \"\";\n                return a.match(/deg$/) ? this.numValue() * (Math.PI / 180) : a.match(/grad$/) ? this.numValue() * (Math.PI / 200) : a.match(/rad$/) ? this.numValue() : this.numValue() * (Math.PI / 180)\n            }, a.Font = new function() {\n                this.Styles = \"normal|italic|oblique|inherit\", this.Variants = \"normal|small-caps|inherit\", this.Weights = \"normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit\", this.CreateFont = function(b, c, d, e, f, g) {\n                    var h = null != g ? this.Parse(g) : this.CreateFont(\"\", \"\", \"\", \"\", \"\", a.ctx.font);\n                    return {\n                        fontFamily: f || h.fontFamily,\n                        fontSize: e || h.fontSize,\n                        fontStyle: b || h.fontStyle,\n                        fontWeight: d || h.fontWeight,\n                        fontVariant: c || h.fontVariant,\n                        toString: function() {\n                            return [this.fontStyle, this.fontVariant, this.fontWeight, this.fontSize, this.fontFamily].join(\" \")\n                        }\n                    }\n                };\n                var b = this;\n                this.Parse = function(c) {\n                    for (var d = {}, e = a.trim(a.compressSpaces(c || \"\")).split(\" \"), f = {\n                            fontSize: !1,\n                            fontStyle: !1,\n                            fontWeight: !1,\n                            fontVariant: !1\n                        }, g = \"\", h = 0; h < e.length; h++) f.fontStyle || b.Styles.indexOf(e[h]) == -1 ? f.fontVariant || b.Variants.indexOf(e[h]) == -1 ? f.fontWeight || b.Weights.indexOf(e[h]) == -1 ? f.fontSize ? \"inherit\" != e[h] && (g += e[h]) : (\"inherit\" != e[h] && (d.fontSize = e[h].split(\"/\")[0]), f.fontStyle = f.fontVariant = f.fontWeight = f.fontSize = !0) : (\"inherit\" != e[h] && (d.fontWeight = e[h]), f.fontStyle = f.fontVariant = f.fontWeight = !0) : (\"inherit\" != e[h] && (d.fontVariant = e[h]), f.fontStyle = f.fontVariant = !0) : (\"inherit\" != e[h] && (d.fontStyle = e[h]), f.fontStyle = !0);\n                    return \"\" != g && (d.fontFamily = g), d\n                }\n            }, a.ToNumberArray = function(b) {\n                for (var c = a.trim(a.compressSpaces((b || \"\").replace(/,/g, \" \"))).split(\" \"), d = 0; d < c.length; d++) c[d] = parseFloat(c[d]);\n                return c\n            }, a.Point = function(a, b) {\n                this.x = a, this.y = b\n            }, a.Point.prototype.angleTo = function(a) {\n                return Math.atan2(a.y - this.y, a.x - this.x)\n            }, a.Point.prototype.applyTransform = function(a) {\n                var b = this.x * a[0] + this.y * a[2] + a[4],\n                    c = this.x * a[1] + this.y * a[3] + a[5];\n                this.x = b, this.y = c\n            }, a.CreatePoint = function(b) {\n                var c = a.ToNumberArray(b);\n                return new a.Point(c[0], c[1])\n            }, a.CreatePath = function(b) {\n                for (var c = a.ToNumberArray(b), d = [], e = 0; e < c.length; e += 2) d.push(new a.Point(c[e], c[e + 1]));\n                return d\n            }, a.BoundingBox = function(a, b, c, d) {\n                this.x1 = Number.NaN, this.y1 = Number.NaN, this.x2 = Number.NaN, this.y2 = Number.NaN, this.x = function() {\n                    return this.x1\n                }, this.y = function() {\n                    return this.y1\n                }, this.width = function() {\n                    return this.x2 - this.x1\n                }, this.height = function() {\n                    return this.y2 - this.y1\n                }, this.addPoint = function(a, b) {\n                    null != a && ((isNaN(this.x1) || isNaN(this.x2)) && (this.x1 = a, this.x2 = a), a < this.x1 && (this.x1 = a), a > this.x2 && (this.x2 = a)), null != b && ((isNaN(this.y1) || isNaN(this.y2)) && (this.y1 = b, this.y2 = b), b < this.y1 && (this.y1 = b), b > this.y2 && (this.y2 = b))\n                }, this.addX = function(a) {\n                    this.addPoint(a, null)\n                }, this.addY = function(a) {\n                    this.addPoint(null, a)\n                }, this.addBoundingBox = function(a) {\n                    this.addPoint(a.x1, a.y1), this.addPoint(a.x2, a.y2)\n                }, this.addQuadraticCurve = function(a, b, c, d, e, f) {\n                    var g = a + 2 / 3 * (c - a),\n                        h = b + 2 / 3 * (d - b),\n                        i = g + 1 / 3 * (e - a),\n                        j = h + 1 / 3 * (f - b);\n                    this.addBezierCurve(a, b, g, i, h, j, e, f)\n                }, this.addBezierCurve = function(a, b, c, d, e, f, g, h) {\n                    var j = [a, b],\n                        k = [c, d],\n                        l = [e, f],\n                        m = [g, h];\n                    for (this.addPoint(j[0], j[1]), this.addPoint(m[0], m[1]), i = 0; i <= 1; i++) {\n                        var n = function(a) {\n                                return Math.pow(1 - a, 3) * j[i] + 3 * Math.pow(1 - a, 2) * a * k[i] + 3 * (1 - a) * Math.pow(a, 2) * l[i] + Math.pow(a, 3) * m[i]\n                            },\n                            o = 6 * j[i] - 12 * k[i] + 6 * l[i],\n                            p = -3 * j[i] + 9 * k[i] - 9 * l[i] + 3 * m[i],\n                            q = 3 * k[i] - 3 * j[i];\n                        if (0 != p) {\n                            var r = Math.pow(o, 2) - 4 * q * p;\n                            if (!(r < 0)) {\n                                var s = (-o + Math.sqrt(r)) / (2 * p);\n                                0 < s && s < 1 && (0 == i && this.addX(n(s)), 1 == i && this.addY(n(s)));\n                                var t = (-o - Math.sqrt(r)) / (2 * p);\n                                0 < t && t < 1 && (0 == i && this.addX(n(t)), 1 == i && this.addY(n(t)))\n                            }\n                        } else {\n                            if (0 == o) continue;\n                            var u = -q / o;\n                            0 < u && u < 1 && (0 == i && this.addX(n(u)), 1 == i && this.addY(n(u)))\n                        }\n                    }\n                }, this.isPointInBox = function(a, b) {\n                    return this.x1 <= a && a <= this.x2 && this.y1 <= b && b <= this.y2\n                }, this.addPoint(a, b), this.addPoint(c, d)\n            }, a.Transform = function(b) {\n                var c = this;\n                this.Type = {}, this.Type.translate = function(b) {\n                    this.p = a.CreatePoint(b), this.apply = function(a) {\n                        a.translate(this.p.x || 0, this.p.y || 0)\n                    }, this.unapply = function(a) {\n                        a.translate(-1 * this.p.x || 0, -1 * this.p.y || 0)\n                    }, this.applyToPoint = function(a) {\n                        a.applyTransform([1, 0, 0, 1, this.p.x || 0, this.p.y || 0])\n                    }\n                }, this.Type.rotate = function(b) {\n                    var c = a.ToNumberArray(b);\n                    this.angle = new a.Property(\"angle\", c[0]), this.cx = c[1] || 0, this.cy = c[2] || 0, this.apply = function(a) {\n                        a.translate(this.cx, this.cy), a.rotate(this.angle.toRadians()), a.translate(-this.cx, -this.cy)\n                    }, this.unapply = function(a) {\n                        a.translate(this.cx, this.cy), a.rotate(-1 * this.angle.toRadians()), a.translate(-this.cx, -this.cy)\n                    }, this.applyToPoint = function(a) {\n                        var b = this.angle.toRadians();\n                        a.applyTransform([1, 0, 0, 1, this.p.x || 0, this.p.y || 0]), a.applyTransform([Math.cos(b), Math.sin(b), -Math.sin(b), Math.cos(b), 0, 0]), a.applyTransform([1, 0, 0, 1, -this.p.x || 0, -this.p.y || 0])\n                    }\n                }, this.Type.scale = function(b) {\n                    this.p = a.CreatePoint(b), this.apply = function(a) {\n                        a.scale(this.p.x || 1, this.p.y || this.p.x || 1)\n                    }, this.unapply = function(a) {\n                        a.scale(1 / this.p.x || 1, 1 / this.p.y || this.p.x || 1)\n                    }, this.applyToPoint = function(a) {\n                        a.applyTransform([this.p.x || 0, 0, 0, this.p.y || 0, 0, 0])\n                    }\n                }, this.Type.matrix = function(b) {\n                    this.m = a.ToNumberArray(b), this.apply = function(a) {\n                        a.transform(this.m[0], this.m[1], this.m[2], this.m[3], this.m[4], this.m[5])\n                    }, this.applyToPoint = function(a) {\n                        a.applyTransform(this.m)\n                    }\n                }, this.Type.SkewBase = function(b) {\n                    this.base = c.Type.matrix, this.base(b), this.angle = new a.Property(\"angle\", b)\n                }, this.Type.SkewBase.prototype = new this.Type.matrix, this.Type.skewX = function(a) {\n                    this.base = c.Type.SkewBase, this.base(a), this.m = [1, 0, Math.tan(this.angle.toRadians()), 1, 0, 0]\n                }, this.Type.skewX.prototype = new this.Type.SkewBase, this.Type.skewY = function(a) {\n                    this.base = c.Type.SkewBase, this.base(a), this.m = [1, Math.tan(this.angle.toRadians()), 0, 1, 0, 0]\n                }, this.Type.skewY.prototype = new this.Type.SkewBase, this.transforms = [], this.apply = function(a) {\n                    for (var b = 0; b < this.transforms.length; b++) this.transforms[b].apply(a)\n                }, this.unapply = function(a) {\n                    for (var b = this.transforms.length - 1; b >= 0; b--) this.transforms[b].unapply(a)\n                }, this.applyToPoint = function(a) {\n                    for (var b = 0; b < this.transforms.length; b++) this.transforms[b].applyToPoint(a)\n                };\n                for (var d = a.trim(a.compressSpaces(b)).replace(/\\)(\\s?,\\s?)/g, \") \").split(/\\s(?=[a-z])/), e = 0; e < d.length; e++) {\n                    var f = a.trim(d[e].split(\"(\")[0]),\n                        g = d[e].split(\"(\")[1].replace(\")\", \"\"),\n                        h = new this.Type[f](g);\n                    h.type = f, this.transforms.push(h)\n                }\n            }, a.AspectRatio = function(b, c, d, e, f, g, h, i, j, k) {\n                c = a.compressSpaces(c), c = c.replace(/^defer\\s/, \"\");\n                var l = c.split(\" \")[0] || \"xMidYMid\",\n                    m = c.split(\" \")[1] || \"meet\",\n                    n = d / e,\n                    o = f / g,\n                    p = Math.min(n, o),\n                    q = Math.max(n, o);\n                \"meet\" == m && (e *= p, g *= p), \"slice\" == m && (e *= q, g *= q), j = new a.Property(\"refX\", j), k = new a.Property(\"refY\", k), j.hasValue() && k.hasValue() ? b.translate(-p * j.toPixels(\"x\"), -p * k.toPixels(\"y\")) : (l.match(/^xMid/) && (\"meet\" == m && p == o || \"slice\" == m && q == o) && b.translate(d / 2 - e / 2, 0), l.match(/YMid$/) && (\"meet\" == m && p == n || \"slice\" == m && q == n) && b.translate(0, f / 2 - g / 2), l.match(/^xMax/) && (\"meet\" == m && p == o || \"slice\" == m && q == o) && b.translate(d - e, 0), l.match(/YMax$/) && (\"meet\" == m && p == n || \"slice\" == m && q == n) && b.translate(0, f - g)), \"none\" == l ? b.scale(n, o) : \"meet\" == m ? b.scale(p, p) : \"slice\" == m && b.scale(q, q), b.translate(null == h ? 0 : -h, null == i ? 0 : -i)\n            }, a.Element = {}, a.EmptyProperty = new a.Property(\"EMPTY\", \"\"), a.Element.ElementBase = function(b) {\n                if (this.attributes = {}, this.styles = {}, this.children = [], this.attribute = function(b, c) {\n                        var d = this.attributes[b];\n                        return null != d ? d : (1 == c && (d = new a.Property(b, \"\"), this.attributes[b] = d), d || a.EmptyProperty)\n                    }, this.getHrefAttribute = function() {\n                        for (var b in this.attributes)\n                            if (b.match(/:href$/)) return this.attributes[b];\n                        return a.EmptyProperty\n                    }, this.style = function(b, c) {\n                        var d = this.styles[b];\n                        if (null != d) return d;\n                        var e = this.attribute(b);\n                        if (null != e && e.hasValue()) return this.styles[b] = e, e;\n                        var f = this.parent;\n                        if (null != f) {\n                            var g = f.style(b);\n                            if (null != g && g.hasValue()) return g\n                        }\n                        return 1 == c && (d = new a.Property(b, \"\"), this.styles[b] = d), d || a.EmptyProperty\n                    }, this.render = function(a) {\n                        if (\"none\" != this.style(\"display\").value && \"hidden\" != this.attribute(\"visibility\").value) {\n                            if (a.save(), this.attribute(\"mask\").hasValue()) {\n                                var b = this.attribute(\"mask\").getDefinition();\n                                null != b && b.apply(a, this)\n                            } else if (this.style(\"filter\").hasValue()) {\n                                var c = this.style(\"filter\").getDefinition();\n                                null != c && c.apply(a, this)\n                            } else this.setContext(a), this.renderChildren(a), this.clearContext(a);\n                            a.restore()\n                        }\n                    }, this.setContext = function(a) {}, this.clearContext = function(a) {}, this.renderChildren = function(a) {\n                        for (var b = 0; b < this.children.length; b++) this.children[b].render(a)\n                    }, this.addChild = function(b, c) {\n                        var d = b;\n                        c && (d = a.CreateElement(b)), d.parent = this, this.children.push(d)\n                    }, null != b && 1 == b.nodeType) {\n                    for (var c = 0; c < b.childNodes.length; c++) {\n                        var d = b.childNodes[c];\n                        if (1 == d.nodeType && this.addChild(d, !0), this.captureTextNodes && 3 == d.nodeType) {\n                            var e = d.nodeValue || d.text || \"\";\n                            \"\" != a.trim(a.compressSpaces(e)) && this.addChild(new a.Element.tspan(d), !1)\n                        }\n                    }\n                    for (var c = 0; c < b.attributes.length; c++) {\n                        var f = b.attributes[c];\n                        this.attributes[f.nodeName] = new a.Property(f.nodeName, f.nodeValue)\n                    }\n                    var g = a.Styles[b.nodeName];\n                    if (null != g)\n                        for (var h in g) this.styles[h] = g[h];\n                    if (this.attribute(\"class\").hasValue())\n                        for (var i = a.compressSpaces(this.attribute(\"class\").value).split(\" \"), j = 0; j < i.length; j++) {\n                            if (g = a.Styles[\".\" + i[j]], null != g)\n                                for (var h in g) this.styles[h] = g[h];\n                            if (g = a.Styles[b.nodeName + \".\" + i[j]], null != g)\n                                for (var h in g) this.styles[h] = g[h]\n                        }\n                    if (this.attribute(\"id\").hasValue()) {\n                        var g = a.Styles[\"#\" + this.attribute(\"id\").value];\n                        if (null != g)\n                            for (var h in g) this.styles[h] = g[h]\n                    }\n                    if (this.attribute(\"style\").hasValue())\n                        for (var g = this.attribute(\"style\").value.split(\";\"), c = 0; c < g.length; c++)\n                            if (\"\" != a.trim(g[c])) {\n                                var k = g[c].split(\":\"),\n                                    h = a.trim(k[0]),\n                                    l = a.trim(k[1]);\n                                this.styles[h] = new a.Property(h, l)\n                            }\n                    this.attribute(\"id\").hasValue() && null == a.Definitions[this.attribute(\"id\").value] && (a.Definitions[this.attribute(\"id\").value] = this)\n                }\n            }, a.Element.RenderedElementBase = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.setContext = function(b) {\n                    if (this.style(\"fill\").isUrlDefinition()) {\n                        var c = this.style(\"fill\").getFillStyleDefinition(this, this.style(\"fill-opacity\"));\n                        null != c && (b.fillStyle = c)\n                    } else if (this.style(\"fill\").hasValue()) {\n                        var d = this.style(\"fill\");\n                        \"currentColor\" == d.value && (d.value = this.style(\"color\").value), b.fillStyle = \"none\" == d.value ? \"rgba(0,0,0,0)\" : d.value\n                    }\n                    if (this.style(\"fill-opacity\").hasValue()) {\n                        var d = new a.Property(\"fill\", b.fillStyle);\n                        d = d.addOpacity(this.style(\"fill-opacity\").value), b.fillStyle = d.value\n                    }\n                    if (this.style(\"stroke\").isUrlDefinition()) {\n                        var c = this.style(\"stroke\").getFillStyleDefinition(this, this.style(\"stroke-opacity\"));\n                        null != c && (b.strokeStyle = c)\n                    } else if (this.style(\"stroke\").hasValue()) {\n                        var e = this.style(\"stroke\");\n                        \"currentColor\" == e.value && (e.value = this.style(\"color\").value), b.strokeStyle = \"none\" == e.value ? \"rgba(0,0,0,0)\" : e.value\n                    }\n                    if (this.style(\"stroke-opacity\").hasValue()) {\n                        var e = new a.Property(\"stroke\", b.strokeStyle);\n                        e = e.addOpacity(this.style(\"stroke-opacity\").value), b.strokeStyle = e.value\n                    }\n                    if (this.style(\"stroke-width\").hasValue()) {\n                        var f = this.style(\"stroke-width\").toPixels();\n                        b.lineWidth = 0 == f ? .001 : f\n                    }\n                    if (this.style(\"stroke-linecap\").hasValue() && (b.lineCap = this.style(\"stroke-linecap\").value), this.style(\"stroke-linejoin\").hasValue() && (b.lineJoin = this.style(\"stroke-linejoin\").value), this.style(\"stroke-miterlimit\").hasValue() && (b.miterLimit = this.style(\"stroke-miterlimit\").value), this.style(\"stroke-dasharray\").hasValue()) {\n                        var g = a.ToNumberArray(this.style(\"stroke-dasharray\").value);\n                        \"undefined\" != typeof b.setLineDash ? b.setLineDash(g) : \"undefined\" != typeof b.webkitLineDash ? b.webkitLineDash = g : \"undefined\" != typeof b.mozDash && (b.mozDash = g);\n                        var h = this.style(\"stroke-dashoffset\").numValueOrDefault(1);\n                        \"undefined\" != typeof b.lineDashOffset ? b.lineDashOffset = h : \"undefined\" != typeof b.webkitLineDashOffset ? b.webkitLineDashOffset = h : \"undefined\" != typeof b.mozDashOffset && (b.mozDashOffset = h)\n                    }\n                    if (\"undefined\" != typeof b.font && (b.font = a.Font.CreateFont(this.style(\"font-style\").value, this.style(\"font-variant\").value, this.style(\"font-weight\").value, this.style(\"font-size\").hasValue() ? this.style(\"font-size\").toPixels() + \"px\" : \"\", this.style(\"font-family\").value).toString()), this.attribute(\"transform\").hasValue()) {\n                        var i = new a.Transform(this.attribute(\"transform\").value);\n                        i.apply(b)\n                    }\n                    if (this.style(\"clip-path\").hasValue()) {\n                        var j = this.style(\"clip-path\").getDefinition();\n                        null != j && j.apply(b)\n                    }\n                    this.style(\"opacity\").hasValue() && (b.globalAlpha = this.style(\"opacity\").numValue())\n                }\n            }, a.Element.RenderedElementBase.prototype = new a.Element.ElementBase, a.Element.PathElementBase = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.path = function(b) {\n                    return null != b && b.beginPath(), new a.BoundingBox\n                }, this.renderChildren = function(b) {\n                    this.path(b), a.Mouse.checkPath(this, b), \"\" != b.fillStyle && (this.attribute(\"fill-rule\").hasValue() ? b.fill(this.attribute(\"fill-rule\").value) : b.fill()), \"\" != b.strokeStyle && b.stroke();\n                    var c = this.getMarkers();\n                    if (null != c) {\n                        if (this.style(\"marker-start\").isUrlDefinition()) {\n                            var d = this.style(\"marker-start\").getDefinition();\n                            d.render(b, c[0][0], c[0][1])\n                        }\n                        if (this.style(\"marker-mid\").isUrlDefinition())\n                            for (var d = this.style(\"marker-mid\").getDefinition(), e = 1; e < c.length - 1; e++) d.render(b, c[e][0], c[e][1]);\n                        if (this.style(\"marker-end\").isUrlDefinition()) {\n                            var d = this.style(\"marker-end\").getDefinition();\n                            d.render(b, c[c.length - 1][0], c[c.length - 1][1])\n                        }\n                    }\n                }, this.getBoundingBox = function() {\n                    return this.path()\n                }, this.getMarkers = function() {\n                    return null\n                }\n            }, a.Element.PathElementBase.prototype = new a.Element.RenderedElementBase, a.Element.svg = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.baseClearContext = this.clearContext, this.clearContext = function(b) {\n                    this.baseClearContext(b), a.ViewPort.RemoveCurrent()\n                }, this.baseSetContext = this.setContext, this.setContext = function(b) {\n                    b.strokeStyle = \"rgba(0,0,0,0)\", b.lineCap = \"butt\", b.lineJoin = \"miter\", b.miterLimit = 4, this.baseSetContext(b), this.attribute(\"x\").hasValue() || (this.attribute(\"x\", !0).value = 0), this.attribute(\"y\").hasValue() || (this.attribute(\"y\", !0).value = 0), b.translate(this.attribute(\"x\").toPixels(\"x\"), this.attribute(\"y\").toPixels(\"y\"));\n                    var c = a.ViewPort.width(),\n                        d = a.ViewPort.height();\n                    if (this.attribute(\"width\").hasValue() || (this.attribute(\"width\", !0).value = \"100%\"), this.attribute(\"height\").hasValue() || (this.attribute(\"height\", !0).value = \"100%\"), \"undefined\" == typeof this.root) {\n                        c = this.attribute(\"width\").toPixels(\"x\"), d = this.attribute(\"height\").toPixels(\"y\");\n                        var e = 0,\n                            f = 0;\n                        this.attribute(\"refX\").hasValue() && this.attribute(\"refY\").hasValue() && (e = -this.attribute(\"refX\").toPixels(\"x\"), f = -this.attribute(\"refY\").toPixels(\"y\")), b.beginPath(), b.moveTo(e, f), b.lineTo(c, f), b.lineTo(c, d), b.lineTo(e, d), b.closePath(), b.clip()\n                    }\n                    if (a.ViewPort.SetCurrent(c, d), this.attribute(\"viewBox\").hasValue()) {\n                        var g = a.ToNumberArray(this.attribute(\"viewBox\").value),\n                            h = g[0],\n                            i = g[1];\n                        c = g[2], d = g[3], a.AspectRatio(b, this.attribute(\"preserveAspectRatio\").value, a.ViewPort.width(), c, a.ViewPort.height(), d, h, i, this.attribute(\"refX\").value, this.attribute(\"refY\").value), a.ViewPort.RemoveCurrent(), a.ViewPort.SetCurrent(g[2], g[3])\n                    }\n                }\n            }, a.Element.svg.prototype = new a.Element.RenderedElementBase, a.Element.rect = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b), this.path = function(b) {\n                    var c = this.attribute(\"x\").toPixels(\"x\"),\n                        d = this.attribute(\"y\").toPixels(\"y\"),\n                        e = this.attribute(\"width\").toPixels(\"x\"),\n                        f = this.attribute(\"height\").toPixels(\"y\"),\n                        g = this.attribute(\"rx\").toPixels(\"x\"),\n                        h = this.attribute(\"ry\").toPixels(\"y\");\n                    return this.attribute(\"rx\").hasValue() && !this.attribute(\"ry\").hasValue() && (h = g), this.attribute(\"ry\").hasValue() && !this.attribute(\"rx\").hasValue() && (g = h), g = Math.min(g, e / 2), h = Math.min(h, f / 2), null != b && (b.beginPath(), b.moveTo(c + g, d), b.lineTo(c + e - g, d), b.quadraticCurveTo(c + e, d, c + e, d + h), b.lineTo(c + e, d + f - h), b.quadraticCurveTo(c + e, d + f, c + e - g, d + f), b.lineTo(c + g, d + f), b.quadraticCurveTo(c, d + f, c, d + f - h), b.lineTo(c, d + h), b.quadraticCurveTo(c, d, c + g, d), b.closePath()), new a.BoundingBox(c, d, c + e, d + f)\n                }\n            }, a.Element.rect.prototype = new a.Element.PathElementBase, a.Element.circle = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b), this.path = function(b) {\n                    var c = this.attribute(\"cx\").toPixels(\"x\"),\n                        d = this.attribute(\"cy\").toPixels(\"y\"),\n                        e = this.attribute(\"r\").toPixels();\n                    return null != b && (b.beginPath(), b.arc(c, d, e, 0, 2 * Math.PI, !0), b.closePath()), new a.BoundingBox(c - e, d - e, c + e, d + e)\n                }\n            }, a.Element.circle.prototype = new a.Element.PathElementBase, a.Element.ellipse = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b), this.path = function(b) {\n                    var c = 4 * ((Math.sqrt(2) - 1) / 3),\n                        d = this.attribute(\"rx\").toPixels(\"x\"),\n                        e = this.attribute(\"ry\").toPixels(\"y\"),\n                        f = this.attribute(\"cx\").toPixels(\"x\"),\n                        g = this.attribute(\"cy\").toPixels(\"y\");\n                    return null != b && (b.beginPath(), b.moveTo(f, g - e), b.bezierCurveTo(f + c * d, g - e, f + d, g - c * e, f + d, g), b.bezierCurveTo(f + d, g + c * e, f + c * d, g + e, f, g + e), b.bezierCurveTo(f - c * d, g + e, f - d, g + c * e, f - d, g), b.bezierCurveTo(f - d, g - c * e, f - c * d, g - e, f, g - e), b.closePath()), new a.BoundingBox(f - d, g - e, f + d, g + e)\n                }\n            }, a.Element.ellipse.prototype = new a.Element.PathElementBase, a.Element.line = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b), this.getPoints = function() {\n                    return [new a.Point(this.attribute(\"x1\").toPixels(\"x\"), this.attribute(\"y1\").toPixels(\"y\")), new a.Point(this.attribute(\"x2\").toPixels(\"x\"), this.attribute(\"y2\").toPixels(\"y\"))]\n                }, this.path = function(b) {\n                    var c = this.getPoints();\n                    return null != b && (b.beginPath(), b.moveTo(c[0].x, c[0].y), b.lineTo(c[1].x, c[1].y)), new a.BoundingBox(c[0].x, c[0].y, c[1].x, c[1].y)\n                }, this.getMarkers = function() {\n                    var a = this.getPoints(),\n                        b = a[0].angleTo(a[1]);\n                    return [\n                        [a[0], b],\n                        [a[1], b]\n                    ]\n                }\n            }, a.Element.line.prototype = new a.Element.PathElementBase, a.Element.polyline = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b), this.points = a.CreatePath(this.attribute(\"points\").value), this.path = function(b) {\n                    var c = new a.BoundingBox(this.points[0].x, this.points[0].y);\n                    null != b && (b.beginPath(), b.moveTo(this.points[0].x, this.points[0].y));\n                    for (var d = 1; d < this.points.length; d++) c.addPoint(this.points[d].x, this.points[d].y), null != b && b.lineTo(this.points[d].x, this.points[d].y);\n                    return c\n                }, this.getMarkers = function() {\n                    for (var a = [], b = 0; b < this.points.length - 1; b++) a.push([this.points[b], this.points[b].angleTo(this.points[b + 1])]);\n                    return a.push([this.points[this.points.length - 1], a[a.length - 1][1]]), a\n                }\n            }, a.Element.polyline.prototype = new a.Element.PathElementBase, a.Element.polygon = function(b) {\n                this.base = a.Element.polyline, this.base(b), this.basePath = this.path, this.path = function(a) {\n                    var b = this.basePath(a);\n                    return null != a && (a.lineTo(this.points[0].x, this.points[0].y), a.closePath()), b\n                }\n            }, a.Element.polygon.prototype = new a.Element.polyline, a.Element.path = function(b) {\n                this.base = a.Element.PathElementBase, this.base(b);\n                var c = this.attribute(\"d\").value;\n                c = c.replace(/,/gm, \" \"), c = c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm, \"$1 $2\"), c = c.replace(/([MmZzLlHhVvCcSsQqTtAa])([MmZzLlHhVvCcSsQqTtAa])/gm, \"$1 $2\"), c = c.replace(/([MmZzLlHhVvCcSsQqTtAa])([^\\s])/gm, \"$1 $2\"), c = c.replace(/([^\\s])([MmZzLlHhVvCcSsQqTtAa])/gm, \"$1 $2\"), c = c.replace(/([0-9])([+\\-])/gm, \"$1 $2\"), c = c.replace(/(\\.[0-9]*)(\\.)/gm, \"$1 $2\"), c = c.replace(/([Aa](\\s+[0-9]+){3})\\s+([01])\\s*([01])/gm, \"$1 $3 $4 \"), c = a.compressSpaces(c), c = a.trim(c), this.PathParser = new function(b) {\n                    this.tokens = b.split(\" \"), this.reset = function() {\n                        this.i = -1, this.command = \"\", this.previousCommand = \"\", this.start = new a.Point(0, 0), this.control = new a.Point(0, 0), this.current = new a.Point(0, 0), this.points = [], this.angles = []\n                    }, this.isEnd = function() {\n                        return this.i >= this.tokens.length - 1\n                    }, this.isCommandOrEnd = function() {\n                        return !!this.isEnd() || null != this.tokens[this.i + 1].match(/^[A-Za-z]$/)\n                    }, this.isRelativeCommand = function() {\n                        switch (this.command) {\n                            case \"m\":\n                            case \"l\":\n                            case \"h\":\n                            case \"v\":\n                            case \"c\":\n                            case \"s\":\n                            case \"q\":\n                            case \"t\":\n                            case \"a\":\n                            case \"z\":\n                                return !0\n                        }\n                        return !1\n                    }, this.getToken = function() {\n                        return this.i++, this.tokens[this.i]\n                    }, this.getScalar = function() {\n                        return parseFloat(this.getToken())\n                    }, this.nextCommand = function() {\n                        this.previousCommand = this.command, this.command = this.getToken()\n                    }, this.getPoint = function() {\n                        var b = new a.Point(this.getScalar(), this.getScalar());\n                        return this.makeAbsolute(b)\n                    }, this.getAsControlPoint = function() {\n                        var a = this.getPoint();\n                        return this.control = a, a\n                    }, this.getAsCurrentPoint = function() {\n                        var a = this.getPoint();\n                        return this.current = a, a\n                    }, this.getReflectedControlPoint = function() {\n                        if (\"c\" != this.previousCommand.toLowerCase() && \"s\" != this.previousCommand.toLowerCase() && \"q\" != this.previousCommand.toLowerCase() && \"t\" != this.previousCommand.toLowerCase()) return this.current;\n                        var b = new a.Point(2 * this.current.x - this.control.x, 2 * this.current.y - this.control.y);\n                        return b\n                    }, this.makeAbsolute = function(a) {\n                        return this.isRelativeCommand() && (a.x += this.current.x, a.y += this.current.y), a\n                    }, this.addMarker = function(a, b, c) {\n                        null != c && this.angles.length > 0 && null == this.angles[this.angles.length - 1] && (this.angles[this.angles.length - 1] = this.points[this.points.length - 1].angleTo(c)), this.addMarkerAngle(a, null == b ? null : b.angleTo(a))\n                    }, this.addMarkerAngle = function(a, b) {\n                        this.points.push(a), this.angles.push(b)\n                    }, this.getMarkerPoints = function() {\n                        return this.points\n                    }, this.getMarkerAngles = function() {\n                        for (var a = 0; a < this.angles.length; a++)\n                            if (null == this.angles[a])\n                                for (var b = a + 1; b < this.angles.length; b++)\n                                    if (null != this.angles[b]) {\n                                        this.angles[a] = this.angles[b];\n                                        break\n                                    }\n                        return this.angles\n                    }\n                }(c), this.path = function(b) {\n                    var c = this.PathParser;\n                    c.reset();\n                    var d = new a.BoundingBox;\n                    for (null != b && b.beginPath(); !c.isEnd();) switch (c.nextCommand(), c.command) {\n                        case \"M\":\n                        case \"m\":\n                            var e = c.getAsCurrentPoint();\n                            for (c.addMarker(e), d.addPoint(e.x, e.y), null != b && b.moveTo(e.x, e.y), c.start = c.current; !c.isCommandOrEnd();) {\n                                var e = c.getAsCurrentPoint();\n                                c.addMarker(e, c.start), d.addPoint(e.x, e.y), null != b && b.lineTo(e.x, e.y)\n                            }\n                            break;\n                        case \"L\":\n                        case \"l\":\n                            for (; !c.isCommandOrEnd();) {\n                                var f = c.current,\n                                    e = c.getAsCurrentPoint();\n                                c.addMarker(e, f), d.addPoint(e.x, e.y), null != b && b.lineTo(e.x, e.y)\n                            }\n                            break;\n                        case \"H\":\n                        case \"h\":\n                            for (; !c.isCommandOrEnd();) {\n                                var g = new a.Point((c.isRelativeCommand() ? c.current.x : 0) + c.getScalar(), c.current.y);\n                                c.addMarker(g, c.current), c.current = g, d.addPoint(c.current.x, c.current.y), null != b && b.lineTo(c.current.x, c.current.y)\n                            }\n                            break;\n                        case \"V\":\n                        case \"v\":\n                            for (; !c.isCommandOrEnd();) {\n                                var g = new a.Point(c.current.x, (c.isRelativeCommand() ? c.current.y : 0) + c.getScalar());\n                                c.addMarker(g, c.current), c.current = g, d.addPoint(c.current.x, c.current.y), null != b && b.lineTo(c.current.x, c.current.y)\n                            }\n                            break;\n                        case \"C\":\n                        case \"c\":\n                            for (; !c.isCommandOrEnd();) {\n                                var h = c.current,\n                                    i = c.getPoint(),\n                                    j = c.getAsControlPoint(),\n                                    k = c.getAsCurrentPoint();\n                                c.addMarker(k, j, i), d.addBezierCurve(h.x, h.y, i.x, i.y, j.x, j.y, k.x, k.y), null != b && b.bezierCurveTo(i.x, i.y, j.x, j.y, k.x, k.y)\n                            }\n                            break;\n                        case \"S\":\n                        case \"s\":\n                            for (; !c.isCommandOrEnd();) {\n                                var h = c.current,\n                                    i = c.getReflectedControlPoint(),\n                                    j = c.getAsControlPoint(),\n                                    k = c.getAsCurrentPoint();\n                                c.addMarker(k, j, i), d.addBezierCurve(h.x, h.y, i.x, i.y, j.x, j.y, k.x, k.y), null != b && b.bezierCurveTo(i.x, i.y, j.x, j.y, k.x, k.y)\n                            }\n                            break;\n                        case \"Q\":\n                        case \"q\":\n                            for (; !c.isCommandOrEnd();) {\n                                var h = c.current,\n                                    j = c.getAsControlPoint(),\n                                    k = c.getAsCurrentPoint();\n                                c.addMarker(k, j, j), d.addQuadraticCurve(h.x, h.y, j.x, j.y, k.x, k.y), null != b && b.quadraticCurveTo(j.x, j.y, k.x, k.y)\n                            }\n                            break;\n                        case \"T\":\n                        case \"t\":\n                            for (; !c.isCommandOrEnd();) {\n                                var h = c.current,\n                                    j = c.getReflectedControlPoint();\n                                c.control = j;\n                                var k = c.getAsCurrentPoint();\n                                c.addMarker(k, j, j), d.addQuadraticCurve(h.x, h.y, j.x, j.y, k.x, k.y), null != b && b.quadraticCurveTo(j.x, j.y, k.x, k.y)\n                            }\n                            break;\n                        case \"A\":\n                        case \"a\":\n                            for (; !c.isCommandOrEnd();) {\n                                var h = c.current,\n                                    l = c.getScalar(),\n                                    m = c.getScalar(),\n                                    n = c.getScalar() * (Math.PI / 180),\n                                    o = c.getScalar(),\n                                    p = c.getScalar(),\n                                    k = c.getAsCurrentPoint(),\n                                    q = new a.Point(Math.cos(n) * (h.x - k.x) / 2 + Math.sin(n) * (h.y - k.y) / 2, -Math.sin(n) * (h.x - k.x) / 2 + Math.cos(n) * (h.y - k.y) / 2),\n                                    r = Math.pow(q.x, 2) / Math.pow(l, 2) + Math.pow(q.y, 2) / Math.pow(m, 2);\n                                r > 1 && (l *= Math.sqrt(r), m *= Math.sqrt(r));\n                                var s = (o == p ? -1 : 1) * Math.sqrt((Math.pow(l, 2) * Math.pow(m, 2) - Math.pow(l, 2) * Math.pow(q.y, 2) - Math.pow(m, 2) * Math.pow(q.x, 2)) / (Math.pow(l, 2) * Math.pow(q.y, 2) + Math.pow(m, 2) * Math.pow(q.x, 2)));\n                                isNaN(s) && (s = 0);\n                                var t = new a.Point(s * l * q.y / m, s * -m * q.x / l),\n                                    u = new a.Point((h.x + k.x) / 2 + Math.cos(n) * t.x - Math.sin(n) * t.y, (h.y + k.y) / 2 + Math.sin(n) * t.x + Math.cos(n) * t.y),\n                                    v = function(a) {\n                                        return Math.sqrt(Math.pow(a[0], 2) + Math.pow(a[1], 2))\n                                    },\n                                    w = function(a, b) {\n                                        return (a[0] * b[0] + a[1] * b[1]) / (v(a) * v(b))\n                                    },\n                                    x = function(a, b) {\n                                        return (a[0] * b[1] < a[1] * b[0] ? -1 : 1) * Math.acos(w(a, b))\n                                    },\n                                    y = x([1, 0], [(q.x - t.x) / l, (q.y - t.y) / m]),\n                                    z = [(q.x - t.x) / l, (q.y - t.y) / m],\n                                    A = [(-q.x - t.x) / l, (-q.y - t.y) / m],\n                                    B = x(z, A);\n                                w(z, A) <= -1 && (B = Math.PI), w(z, A) >= 1 && (B = 0);\n                                var C = 1 - p ? 1 : -1,\n                                    D = y + C * (B / 2),\n                                    E = new a.Point(u.x + l * Math.cos(D), u.y + m * Math.sin(D));\n                                if (c.addMarkerAngle(E, D - C * Math.PI / 2), c.addMarkerAngle(k, D - C * Math.PI), d.addPoint(k.x, k.y), null != b) {\n                                    var w = l > m ? l : m,\n                                        F = l > m ? 1 : l / m,\n                                        G = l > m ? m / l : 1;\n                                    b.translate(u.x, u.y), b.rotate(n), b.scale(F, G), b.arc(0, 0, w, y, y + B, 1 - p), b.scale(1 / F, 1 / G), b.rotate(-n), b.translate(-u.x, -u.y)\n                                }\n                            }\n                            break;\n                        case \"Z\":\n                        case \"z\":\n                            null != b && b.closePath(), c.current = c.start\n                    }\n                    return d\n                }, this.getMarkers = function() {\n                    for (var a = this.PathParser.getMarkerPoints(), b = this.PathParser.getMarkerAngles(), c = [], d = 0; d < a.length; d++) c.push([a[d], b[d]]);\n                    return c\n                }\n            }, a.Element.path.prototype = new a.Element.PathElementBase, a.Element.pattern = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.createPattern = function(b, c) {\n                    var d = this.attribute(\"width\").toPixels(\"x\", !0),\n                        e = this.attribute(\"height\").toPixels(\"y\", !0),\n                        f = new a.Element.svg;\n                    f.attributes.viewBox = new a.Property(\"viewBox\", this.attribute(\"viewBox\").value), f.attributes.width = new a.Property(\"width\", d + \"px\"), f.attributes.height = new a.Property(\"height\", e + \"px\"), f.attributes.transform = new a.Property(\"transform\", this.attribute(\"patternTransform\").value), f.children = this.children;\n                    var g = document.createElement(\"canvas\");\n                    g.width = d, g.height = e;\n                    var h = g.getContext(\"2d\");\n                    this.attribute(\"x\").hasValue() && this.attribute(\"y\").hasValue() && h.translate(this.attribute(\"x\").toPixels(\"x\", !0), this.attribute(\"y\").toPixels(\"y\", !0));\n                    for (var i = -1; i <= 1; i++)\n                        for (var j = -1; j <= 1; j++) h.save(), h.translate(i * g.width, j * g.height), f.render(h), h.restore();\n                    var k = b.createPattern(g, \"repeat\");\n                    return k\n                }\n            }, a.Element.pattern.prototype = new a.Element.ElementBase, a.Element.marker = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.baseRender = this.render, this.render = function(b, c, d) {\n                    b.translate(c.x, c.y), \"auto\" == this.attribute(\"orient\").valueOrDefault(\"auto\") && b.rotate(d), \"strokeWidth\" == this.attribute(\"markerUnits\").valueOrDefault(\"strokeWidth\") && b.scale(b.lineWidth, b.lineWidth), b.save();\n                    var e = new a.Element.svg;\n                    e.attributes.viewBox = new a.Property(\"viewBox\", this.attribute(\"viewBox\").value), e.attributes.refX = new a.Property(\"refX\", this.attribute(\"refX\").value), e.attributes.refY = new a.Property(\"refY\", this.attribute(\"refY\").value), e.attributes.width = new a.Property(\"width\", this.attribute(\"markerWidth\").value), e.attributes.height = new a.Property(\"height\", this.attribute(\"markerHeight\").value), e.attributes.fill = new a.Property(\"fill\", this.attribute(\"fill\").valueOrDefault(\"black\")), e.attributes.stroke = new a.Property(\"stroke\", this.attribute(\"stroke\").valueOrDefault(\"none\")), e.children = this.children, e.render(b), b.restore(), \"strokeWidth\" == this.attribute(\"markerUnits\").valueOrDefault(\"strokeWidth\") && b.scale(1 / b.lineWidth, 1 / b.lineWidth), \"auto\" == this.attribute(\"orient\").valueOrDefault(\"auto\") && b.rotate(-d), b.translate(-c.x, -c.y)\n                }\n            }, a.Element.marker.prototype = new a.Element.ElementBase, a.Element.defs = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.render = function(a) {}\n            }, a.Element.defs.prototype = new a.Element.ElementBase, a.Element.GradientBase = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.gradientUnits = this.attribute(\"gradientUnits\").valueOrDefault(\"objectBoundingBox\"), this.stops = [];\n                for (var c = 0; c < this.children.length; c++) {\n                    var d = this.children[c];\n                    \"stop\" == d.type && this.stops.push(d)\n                }\n                this.getGradient = function() {}, this.createGradient = function(b, c, d) {\n                    var e = this;\n                    this.getHrefAttribute().hasValue() && (e = this.getHrefAttribute().getDefinition());\n                    var f = function(b) {\n                            if (d.hasValue()) {\n                                var c = new a.Property(\"color\", b);\n                                return c.addOpacity(d.value).value\n                            }\n                            return b\n                        },\n                        g = this.getGradient(b, c);\n                    if (null == g) return f(e.stops[e.stops.length - 1].color);\n                    for (var h = 0; h < e.stops.length; h++) g.addColorStop(e.stops[h].offset, f(e.stops[h].color));\n                    if (this.attribute(\"gradientTransform\").hasValue()) {\n                        var i = a.ViewPort.viewPorts[0],\n                            j = new a.Element.rect;\n                        j.attributes.x = new a.Property(\"x\", -a.MAX_VIRTUAL_PIXELS / 3), j.attributes.y = new a.Property(\"y\", -a.MAX_VIRTUAL_PIXELS / 3), j.attributes.width = new a.Property(\"width\", a.MAX_VIRTUAL_PIXELS), j.attributes.height = new a.Property(\"height\", a.MAX_VIRTUAL_PIXELS);\n                        var k = new a.Element.g;\n                        k.attributes.transform = new a.Property(\"transform\", this.attribute(\"gradientTransform\").value), k.children = [j];\n                        var l = new a.Element.svg;\n                        l.attributes.x = new a.Property(\"x\", 0), l.attributes.y = new a.Property(\"y\", 0), l.attributes.width = new a.Property(\"width\", i.width), l.attributes.height = new a.Property(\"height\", i.height), l.children = [k];\n                        var m = document.createElement(\"canvas\");\n                        m.width = i.width, m.height = i.height;\n                        var n = m.getContext(\"2d\");\n                        return n.fillStyle = g, l.render(n), n.createPattern(m, \"no-repeat\")\n                    }\n                    return g\n                }\n            }, a.Element.GradientBase.prototype = new a.Element.ElementBase, a.Element.linearGradient = function(b) {\n                this.base = a.Element.GradientBase, this.base(b), this.getGradient = function(a, b) {\n                    var c = b.getBoundingBox();\n                    this.attribute(\"x1\").hasValue() || this.attribute(\"y1\").hasValue() || this.attribute(\"x2\").hasValue() || this.attribute(\"y2\").hasValue() || (this.attribute(\"x1\", !0).value = 0, this.attribute(\"y1\", !0).value = 0, this.attribute(\"x2\", !0).value = 1, this.attribute(\"y2\", !0).value = 0);\n                    var d = \"objectBoundingBox\" == this.gradientUnits ? c.x() + c.width() * this.attribute(\"x1\").numValue() : this.attribute(\"x1\").toPixels(\"x\"),\n                        e = \"objectBoundingBox\" == this.gradientUnits ? c.y() + c.height() * this.attribute(\"y1\").numValue() : this.attribute(\"y1\").toPixels(\"y\"),\n                        f = \"objectBoundingBox\" == this.gradientUnits ? c.x() + c.width() * this.attribute(\"x2\").numValue() : this.attribute(\"x2\").toPixels(\"x\"),\n                        g = \"objectBoundingBox\" == this.gradientUnits ? c.y() + c.height() * this.attribute(\"y2\").numValue() : this.attribute(\"y2\").toPixels(\"y\");\n                    return d == f && e == g ? null : a.createLinearGradient(d, e, f, g)\n                }\n            }, a.Element.linearGradient.prototype = new a.Element.GradientBase, a.Element.radialGradient = function(b) {\n                this.base = a.Element.GradientBase, this.base(b), this.getGradient = function(a, b) {\n                    var c = b.getBoundingBox();\n                    this.attribute(\"cx\").hasValue() || (this.attribute(\"cx\", !0).value = \"50%\"), this.attribute(\"cy\").hasValue() || (this.attribute(\"cy\", !0).value = \"50%\"), this.attribute(\"r\").hasValue() || (this.attribute(\"r\", !0).value = \"50%\");\n                    var d = \"objectBoundingBox\" == this.gradientUnits ? c.x() + c.width() * this.attribute(\"cx\").numValue() : this.attribute(\"cx\").toPixels(\"x\"),\n                        e = \"objectBoundingBox\" == this.gradientUnits ? c.y() + c.height() * this.attribute(\"cy\").numValue() : this.attribute(\"cy\").toPixels(\"y\"),\n                        f = d,\n                        g = e;\n                    this.attribute(\"fx\").hasValue() && (f = \"objectBoundingBox\" == this.gradientUnits ? c.x() + c.width() * this.attribute(\"fx\").numValue() : this.attribute(\"fx\").toPixels(\"x\")), this.attribute(\"fy\").hasValue() && (g = \"objectBoundingBox\" == this.gradientUnits ? c.y() + c.height() * this.attribute(\"fy\").numValue() : this.attribute(\"fy\").toPixels(\"y\"));\n                    var h = \"objectBoundingBox\" == this.gradientUnits ? (c.width() + c.height()) / 2 * this.attribute(\"r\").numValue() : this.attribute(\"r\").toPixels();\n                    return a.createRadialGradient(f, g, 0, d, e, h)\n                }\n            }, a.Element.radialGradient.prototype = new a.Element.GradientBase, a.Element.stop = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.offset = this.attribute(\"offset\").numValue(), this.offset < 0 && (this.offset = 0), this.offset > 1 && (this.offset = 1);\n                var c = this.style(\"stop-color\");\n                this.style(\"stop-opacity\").hasValue() && (c = c.addOpacity(this.style(\"stop-opacity\").value)), this.color = c.value\n            }, a.Element.stop.prototype = new a.Element.ElementBase, a.Element.AnimateBase = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), a.Animations.push(this), this.duration = 0, this.begin = this.attribute(\"begin\").toMilliseconds(), this.maxDuration = this.begin + this.attribute(\"dur\").toMilliseconds(), this.getProperty = function() {\n                    var a = this.attribute(\"attributeType\").value,\n                        b = this.attribute(\"attributeName\").value;\n                    return \"CSS\" == a ? this.parent.style(b, !0) : this.parent.attribute(b, !0)\n                }, this.initialValue = null, this.initialUnits = \"\", this.removed = !1, this.calcValue = function() {\n                    return \"\"\n                }, this.update = function(a) {\n                    if (null == this.initialValue && (this.initialValue = this.getProperty().value, this.initialUnits = this.getProperty().getUnits()), this.duration > this.maxDuration) {\n                        if (\"indefinite\" != this.attribute(\"repeatCount\").value && \"indefinite\" != this.attribute(\"repeatDur\").value) return \"remove\" == this.attribute(\"fill\").valueOrDefault(\"remove\") && !this.removed && (this.removed = !0, this.getProperty().value = this.initialValue, !0);\n                        this.duration = 0\n                    }\n                    this.duration = this.duration + a;\n                    var b = !1;\n                    if (this.begin < this.duration) {\n                        var c = this.calcValue();\n                        if (this.attribute(\"type\").hasValue()) {\n                            var d = this.attribute(\"type\").value;\n                            c = d + \"(\" + c + \")\"\n                        }\n                        this.getProperty().value = c, b = !0\n                    }\n                    return b\n                }, this.from = this.attribute(\"from\"), this.to = this.attribute(\"to\"), this.values = this.attribute(\"values\"), this.values.hasValue() && (this.values.value = this.values.value.split(\";\")), this.progress = function() {\n                    var b = {\n                        progress: (this.duration - this.begin) / (this.maxDuration - this.begin)\n                    };\n                    if (this.values.hasValue()) {\n                        var c = b.progress * (this.values.value.length - 1),\n                            d = Math.floor(c),\n                            e = Math.ceil(c);\n                        b.from = new a.Property(\"from\", parseFloat(this.values.value[d])), b.to = new a.Property(\"to\", parseFloat(this.values.value[e])), b.progress = (c - d) / (e - d)\n                    } else b.from = this.from, b.to = this.to;\n                    return b\n                }\n            }, a.Element.AnimateBase.prototype = new a.Element.ElementBase, a.Element.animate = function(b) {\n                this.base = a.Element.AnimateBase, this.base(b), this.calcValue = function() {\n                    var a = this.progress(),\n                        b = a.from.numValue() + (a.to.numValue() - a.from.numValue()) * a.progress;\n                    return b + this.initialUnits\n                }\n            }, a.Element.animate.prototype = new a.Element.AnimateBase, a.Element.animateColor = function(b) {\n                this.base = a.Element.AnimateBase, this.base(b), this.calcValue = function() {\n                    var a = this.progress(),\n                        b = new RGBColor(a.from.value),\n                        c = new RGBColor(a.to.value);\n                    if (b.ok && c.ok) {\n                        var d = b.r + (c.r - b.r) * a.progress,\n                            e = b.g + (c.g - b.g) * a.progress,\n                            f = b.b + (c.b - b.b) * a.progress;\n                        return \"rgb(\" + parseInt(d, 10) + \",\" + parseInt(e, 10) + \",\" + parseInt(f, 10) + \")\"\n                    }\n                    return this.attribute(\"from\").value\n                }\n            }, a.Element.animateColor.prototype = new a.Element.AnimateBase, a.Element.animateTransform = function(b) {\n                this.base = a.Element.AnimateBase, this.base(b), this.calcValue = function() {\n                    for (var b = this.progress(), c = a.ToNumberArray(b.from.value), d = a.ToNumberArray(b.to.value), e = \"\", f = 0; f < c.length; f++) e += c[f] + (d[f] - c[f]) * b.progress + \" \";\n                    return e\n                }\n            }, a.Element.animateTransform.prototype = new a.Element.animate, a.Element.font = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.horizAdvX = this.attribute(\"horiz-adv-x\").numValue(), this.isRTL = !1, this.isArabic = !1, this.fontFace = null, this.missingGlyph = null, this.glyphs = [];\n                for (var c = 0; c < this.children.length; c++) {\n                    var d = this.children[c];\n                    \"font-face\" == d.type ? (this.fontFace = d, d.style(\"font-family\").hasValue() && (a.Definitions[d.style(\"font-family\").value] = this)) : \"missing-glyph\" == d.type ? this.missingGlyph = d : \"glyph\" == d.type && (\"\" != d.arabicForm ? (this.isRTL = !0, this.isArabic = !0, \"undefined\" == typeof this.glyphs[d.unicode] && (this.glyphs[d.unicode] = []), this.glyphs[d.unicode][d.arabicForm] = d) : this.glyphs[d.unicode] = d)\n                }\n            }, a.Element.font.prototype = new a.Element.ElementBase, a.Element.fontface = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.ascent = this.attribute(\"ascent\").value, this.descent = this.attribute(\"descent\").value, this.unitsPerEm = this.attribute(\"units-per-em\").numValue()\n            }, a.Element.fontface.prototype = new a.Element.ElementBase, a.Element.missingglyph = function(b) {\n                this.base = a.Element.path, this.base(b), this.horizAdvX = 0\n            }, a.Element.missingglyph.prototype = new a.Element.path, a.Element.glyph = function(b) {\n                this.base = a.Element.path, this.base(b), this.horizAdvX = this.attribute(\"horiz-adv-x\").numValue(), this.unicode = this.attribute(\"unicode\").value, this.arabicForm = this.attribute(\"arabic-form\").value\n            }, a.Element.glyph.prototype = new a.Element.path, a.Element.text = function(b) {\n                this.captureTextNodes = !0, this.base = a.Element.RenderedElementBase, this.base(b), this.baseSetContext = this.setContext, this.setContext = function(a) {\n                    this.baseSetContext(a), this.style(\"dominant-baseline\").hasValue() && (a.textBaseline = this.style(\"dominant-baseline\").value), this.style(\"alignment-baseline\").hasValue() && (a.textBaseline = this.style(\"alignment-baseline\").value)\n                }, this.getBoundingBox = function() {\n                    return new a.BoundingBox(this.attribute(\"x\").toPixels(\"x\"), this.attribute(\"y\").toPixels(\"y\"), 0, 0)\n                }, this.renderChildren = function(a) {\n                    this.x = this.attribute(\"x\").toPixels(\"x\"), this.y = this.attribute(\"y\").toPixels(\"y\"), this.x += this.getAnchorDelta(a, this, 0);\n                    for (var b = 0; b < this.children.length; b++) this.renderChild(a, this, b)\n                }, this.getAnchorDelta = function(a, b, c) {\n                    var d = this.style(\"text-anchor\").valueOrDefault(\"start\");\n                    if (\"start\" != d) {\n                        for (var e = 0, f = c; f < b.children.length; f++) {\n                            var g = b.children[f];\n                            if (f > c && g.attribute(\"x\").hasValue()) break;\n                            e += g.measureTextRecursive(a)\n                        }\n                        return -1 * (\"end\" == d ? e : e / 2)\n                    }\n                    return 0\n                }, this.renderChild = function(a, b, c) {\n                    var d = b.children[c];\n                    d.attribute(\"x\").hasValue() ? d.x = d.attribute(\"x\").toPixels(\"x\") + this.getAnchorDelta(a, b, c) : (this.attribute(\"dx\").hasValue() && (this.x += this.attribute(\"dx\").toPixels(\"x\")), d.attribute(\"dx\").hasValue() && (this.x += d.attribute(\"dx\").toPixels(\"x\")), d.x = this.x), this.x = d.x + d.measureText(a), d.attribute(\"y\").hasValue() ? d.y = d.attribute(\"y\").toPixels(\"y\") : (this.attribute(\"dy\").hasValue() && (this.y += this.attribute(\"dy\").toPixels(\"y\")), d.attribute(\"dy\").hasValue() && (this.y += d.attribute(\"dy\").toPixels(\"y\")), d.y = this.y), this.y = d.y, d.render(a);\n                    for (var c = 0; c < d.children.length; c++) this.renderChild(a, d, c)\n                }\n            }, a.Element.text.prototype = new a.Element.RenderedElementBase, a.Element.TextElementBase = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.getGlyph = function(a, b, c) {\n                    var d = b[c],\n                        e = null;\n                    if (a.isArabic) {\n                        var f = \"isolated\";\n                        (0 == c || \" \" == b[c - 1]) && c < b.length - 2 && \" \" != b[c + 1] && (f = \"terminal\"), c > 0 && \" \" != b[c - 1] && c < b.length - 2 && \" \" != b[c + 1] && (f = \"medial\"), c > 0 && \" \" != b[c - 1] && (c == b.length - 1 || \" \" == b[c + 1]) && (f = \"initial\"), \"undefined\" != typeof a.glyphs[d] && (e = a.glyphs[d][f], null == e && \"glyph\" == a.glyphs[d].type && (e = a.glyphs[d]))\n                    } else e = a.glyphs[d];\n                    return null == e && (e = a.missingGlyph), e\n                }, this.renderChildren = function(b) {\n                    var c = this.parent.style(\"font-family\").getDefinition();\n                    if (null == c) \"\" != b.fillStyle && b.fillText(a.compressSpaces(this.getText()), this.x, this.y), \"\" != b.strokeStyle && b.strokeText(a.compressSpaces(this.getText()), this.x, this.y);\n                    else {\n                        var d = this.parent.style(\"font-size\").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),\n                            e = this.parent.style(\"font-style\").valueOrDefault(a.Font.Parse(a.ctx.font).fontStyle),\n                            f = this.getText();\n                        c.isRTL && (f = f.split(\"\").reverse().join(\"\"));\n                        for (var g = a.ToNumberArray(this.parent.attribute(\"dx\").value), h = 0; h < f.length; h++) {\n                            var i = this.getGlyph(c, f, h),\n                                j = d / c.fontFace.unitsPerEm;\n                            b.translate(this.x, this.y), b.scale(j, -j);\n                            var k = b.lineWidth;\n                            b.lineWidth = b.lineWidth * c.fontFace.unitsPerEm / d, \"italic\" == e && b.transform(1, 0, .4, 1, 0, 0), i.render(b), \"italic\" == e && b.transform(1, 0, -.4, 1, 0, 0), b.lineWidth = k, b.scale(1 / j, -1 / j), b.translate(-this.x, -this.y), this.x += d * (i.horizAdvX || c.horizAdvX) / c.fontFace.unitsPerEm, \"undefined\" == typeof g[h] || isNaN(g[h]) || (this.x += g[h])\n                        }\n                    }\n                }, this.getText = function() {}, this.measureTextRecursive = function(a) {\n                    for (var b = this.measureText(a), c = 0; c < this.children.length; c++) b += this.children[c].measureTextRecursive(a);\n                    return b\n                }, this.measureText = function(b) {\n                    var c = this.parent.style(\"font-family\").getDefinition();\n                    if (null != c) {\n                        var d = this.parent.style(\"font-size\").numValueOrDefault(a.Font.Parse(a.ctx.font).fontSize),\n                            e = 0,\n                            f = this.getText();\n                        c.isRTL && (f = f.split(\"\").reverse().join(\"\"));\n                        for (var g = a.ToNumberArray(this.parent.attribute(\"dx\").value), h = 0; h < f.length; h++) {\n                            var i = this.getGlyph(c, f, h);\n                            e += (i.horizAdvX || c.horizAdvX) * d / c.fontFace.unitsPerEm, \"undefined\" == typeof g[h] || isNaN(g[h]) || (e += g[h])\n                        }\n                        return e\n                    }\n                    var j = a.compressSpaces(this.getText());\n                    if (!b.measureText) return 10 * j.length;\n                    b.save(), this.setContext(b);\n                    var k = b.measureText(j).width;\n                    return b.restore(), k\n                }\n            }, a.Element.TextElementBase.prototype = new a.Element.RenderedElementBase, a.Element.tspan = function(b) {\n                this.captureTextNodes = !0, this.base = a.Element.TextElementBase, this.base(b), this.text = b.nodeValue || b.text || \"\", this.getText = function() {\n                    return this.text\n                }\n            }, a.Element.tspan.prototype = new a.Element.TextElementBase, a.Element.tref = function(b) {\n                this.base = a.Element.TextElementBase, this.base(b), this.getText = function() {\n                    var a = this.getHrefAttribute().getDefinition();\n                    if (null != a) return a.children[0].getText()\n                }\n            }, a.Element.tref.prototype = new a.Element.TextElementBase, a.Element.a = function(b) {\n                this.base = a.Element.TextElementBase, this.base(b), this.hasText = !0;\n                for (var c = 0; c < b.childNodes.length; c++) 3 != b.childNodes[c].nodeType && (this.hasText = !1);\n                this.text = this.hasText ? b.childNodes[0].nodeValue : \"\", this.getText = function() {\n                    return this.text\n                }, this.baseRenderChildren = this.renderChildren, this.renderChildren = function(b) {\n                    if (this.hasText) {\n                        this.baseRenderChildren(b);\n                        var c = new a.Property(\"fontSize\", a.Font.Parse(a.ctx.font).fontSize);\n                        a.Mouse.checkBoundingBox(this, new a.BoundingBox(this.x, this.y - c.toPixels(\"y\"), this.x + this.measureText(b), this.y))\n                    } else {\n                        var d = new a.Element.g;\n                        d.children = this.children, d.parent = this, d.render(b)\n                    }\n                }, this.onclick = function() {\n                    window.open(this.getHrefAttribute().value)\n                }, this.onmousemove = function() {\n                    a.ctx.canvas.style.cursor = \"pointer\"\n                }\n            }, a.Element.a.prototype = new a.Element.TextElementBase, a.Element.image = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b);\n                var c = this.getHrefAttribute().value,\n                    d = c.match(/\\.svg$/);\n                if (a.Images.push(this), this.loaded = !1, d) this.img = a.ajax(c), this.loaded = !0;\n                else {\n                    this.img = document.createElement(\"img\");\n                    var e = this;\n                    this.img.onload = function() {\n                        e.loaded = !0\n                    }, this.img.onerror = function() {\n                        \"undefined\" != typeof console && (console.log('ERROR: image \"' + c + '\" not found'), e.loaded = !0)\n                    }, this.img.src = c\n                }\n                this.renderChildren = function(b) {\n                    var c = this.attribute(\"x\").toPixels(\"x\"),\n                        e = this.attribute(\"y\").toPixels(\"y\"),\n                        f = this.attribute(\"width\").toPixels(\"x\"),\n                        g = this.attribute(\"height\").toPixels(\"y\");\n                    0 != f && 0 != g && (b.save(), d ? b.drawSvg(this.img, c, e, f, g) : (b.translate(c, e), a.AspectRatio(b, this.attribute(\"preserveAspectRatio\").value, f, this.img.width, g, this.img.height, 0, 0), b.drawImage(this.img, 0, 0)), b.restore())\n                }, this.getBoundingBox = function() {\n                    var b = this.attribute(\"x\").toPixels(\"x\"),\n                        c = this.attribute(\"y\").toPixels(\"y\"),\n                        d = this.attribute(\"width\").toPixels(\"x\"),\n                        e = this.attribute(\"height\").toPixels(\"y\");\n                    return new a.BoundingBox(b, c, b + d, c + e)\n                }\n            }, a.Element.image.prototype = new a.Element.RenderedElementBase, a.Element.g = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.getBoundingBox = function() {\n                    for (var b = new a.BoundingBox, c = 0; c < this.children.length; c++) b.addBoundingBox(this.children[c].getBoundingBox());\n                    return b\n                }\n            }, a.Element.g.prototype = new a.Element.RenderedElementBase, a.Element.symbol = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.baseSetContext = this.setContext, this.setContext = function(b) {\n                    if (this.baseSetContext(b), this.attribute(\"viewBox\").hasValue()) {\n                        var c = a.ToNumberArray(this.attribute(\"viewBox\").value),\n                            d = c[0],\n                            e = c[1];\n                        width = c[2], height = c[3], a.AspectRatio(b, this.attribute(\"preserveAspectRatio\").value, this.attribute(\"width\").toPixels(\"x\"), width, this.attribute(\"height\").toPixels(\"y\"), height, d, e), a.ViewPort.SetCurrent(c[2], c[3])\n                    }\n                }\n            }, a.Element.symbol.prototype = new a.Element.RenderedElementBase, a.Element.style = function(b) {\n                this.base = a.Element.ElementBase, this.base(b);\n                for (var c = \"\", d = 0; d < b.childNodes.length; d++) c += b.childNodes[d].nodeValue;\n                c = c.replace(/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*\\/]|[\\r\\n])))*\\*+\\/)|(^[\\s]*\\/\\/.*)/gm, \"\"), c = a.compressSpaces(c);\n                for (var e = c.split(\"}\"), d = 0; d < e.length; d++)\n                    if (\"\" != a.trim(e[d]))\n                        for (var f = e[d].split(\"{\"), g = f[0].split(\",\"), h = f[1].split(\";\"), i = 0; i < g.length; i++) {\n                            var j = a.trim(g[i]);\n                            if (\"\" != j) {\n                                for (var k = {}, l = 0; l < h.length; l++) {\n                                    var m = h[l].indexOf(\":\"),\n                                        n = h[l].substr(0, m),\n                                        o = h[l].substr(m + 1, h[l].length - m);\n                                    null != n && null != o && (k[a.trim(n)] = new a.Property(a.trim(n), a.trim(o)))\n                                }\n                                if (a.Styles[j] = k, \"@font-face\" == j)\n                                    for (var p = k[\"font-family\"].value.replace(/\"/g, \"\"), q = k.src.value.split(\",\"), r = 0; r < q.length; r++)\n                                        if (q[r].indexOf('format(\"svg\")') > 0)\n                                            for (var s = q[r].indexOf(\"url\"), t = q[r].indexOf(\")\", s), u = q[r].substr(s + 5, t - s - 6), v = a.parseXml(a.ajax(u)), w = v.getElementsByTagName(\"font\"), x = 0; x < w.length; x++) {\n                                                var y = a.CreateElement(w[x]);\n                                                a.Definitions[p] = y\n                                            }\n                            }\n                        }\n            }, a.Element.style.prototype = new a.Element.ElementBase, a.Element.use = function(b) {\n                this.base = a.Element.RenderedElementBase, this.base(b), this.baseSetContext = this.setContext, this.setContext = function(a) {\n                    this.baseSetContext(a), this.attribute(\"x\").hasValue() && a.translate(this.attribute(\"x\").toPixels(\"x\"), 0), this.attribute(\"y\").hasValue() && a.translate(0, this.attribute(\"y\").toPixels(\"y\"))\n                }, this.getDefinition = function() {\n                    var a = this.getHrefAttribute().getDefinition();\n                    return this.attribute(\"width\").hasValue() && (a.attribute(\"width\", !0).value = this.attribute(\"width\").value), this.attribute(\"height\").hasValue() && (a.attribute(\"height\", !0).value = this.attribute(\"height\").value), a\n                }, this.path = function(a) {\n                    var b = this.getDefinition();\n                    null != b && b.path(a)\n                }, this.getBoundingBox = function() {\n                    var a = this.getDefinition();\n                    if (null != a) return a.getBoundingBox()\n                }, this.renderChildren = function(a) {\n                    var b = this.getDefinition();\n                    if (null != b) {\n                        var c = b.parent;\n                        b.parent = null, b.render(a), b.parent = c\n                    }\n                }\n            }, a.Element.use.prototype = new a.Element.RenderedElementBase, a.Element.mask = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.apply = function(b, c) {\n                    var d = this.attribute(\"x\").toPixels(\"x\"),\n                        e = this.attribute(\"y\").toPixels(\"y\"),\n                        f = this.attribute(\"width\").toPixels(\"x\"),\n                        g = this.attribute(\"height\").toPixels(\"y\");\n                    if (0 == f && 0 == g) {\n                        for (var h = new a.BoundingBox, i = 0; i < this.children.length; i++) h.addBoundingBox(this.children[i].getBoundingBox());\n                        var d = Math.floor(h.x1),\n                            e = Math.floor(h.y1),\n                            f = Math.floor(h.width()),\n                            g = Math.floor(h.height())\n                    }\n                    var j = c.attribute(\"mask\").value;\n                    c.attribute(\"mask\").value = \"\";\n                    var k = document.createElement(\"canvas\");\n                    k.width = d + f, k.height = e + g;\n                    var l = k.getContext(\"2d\");\n                    this.renderChildren(l);\n                    var m = document.createElement(\"canvas\");\n                    m.width = d + f, m.height = e + g;\n                    var n = m.getContext(\"2d\");\n                    c.render(n), n.globalCompositeOperation = \"destination-in\", n.fillStyle = l.createPattern(k, \"no-repeat\"), n.fillRect(0, 0, d + f, e + g), b.fillStyle = n.createPattern(m, \"no-repeat\"), b.fillRect(0, 0, d + f, e + g), c.attribute(\"mask\").value = j\n                }, this.render = function(a) {}\n            }, a.Element.mask.prototype = new a.Element.ElementBase, a.Element.clipPath = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.apply = function(b) {\n                    for (var c = 0; c < this.children.length; c++) {\n                        var d = this.children[c];\n                        if (\"undefined\" != typeof d.path) {\n                            var e = null;\n                            d.attribute(\"transform\").hasValue() && (e = new a.Transform(d.attribute(\"transform\").value), e.apply(b)), d.path(b), b.clip(), e && e.unapply(b)\n                        }\n                    }\n                }, this.render = function(a) {}\n            }, a.Element.clipPath.prototype = new a.Element.ElementBase, a.Element.filter = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.apply = function(a, b) {\n                    var c = b.getBoundingBox(),\n                        d = Math.floor(c.x1),\n                        e = Math.floor(c.y1),\n                        f = Math.floor(c.width()),\n                        g = Math.floor(c.height()),\n                        h = b.style(\"filter\").value;\n                    b.style(\"filter\").value = \"\";\n                    for (var i = 0, j = 0, k = 0; k < this.children.length; k++) {\n                        var l = this.children[k].extraFilterDistance || 0;\n                        i = Math.max(i, l), j = Math.max(j, l)\n                    }\n                    var m = document.createElement(\"canvas\");\n                    m.width = f + 2 * i, m.height = g + 2 * j;\n                    var n = m.getContext(\"2d\");\n                    n.translate(-d + i, -e + j), b.render(n);\n                    for (var k = 0; k < this.children.length; k++) this.children[k].apply(n, 0, 0, f + 2 * i, g + 2 * j);\n                    a.drawImage(m, 0, 0, f + 2 * i, g + 2 * j, d - i, e - j, f + 2 * i, g + 2 * j), b.style(\"filter\", !0).value = h\n                }, this.render = function(a) {}\n            }, a.Element.filter.prototype = new a.Element.ElementBase, a.Element.feMorphology = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.apply = function(a, b, c, d, e) {}\n            }, a.Element.feMorphology.prototype = new a.Element.ElementBase, a.Element.feColorMatrix = function(b) {\n                function c(a, b, c, d, e, f) {\n                    return a[c * d * 4 + 4 * b + f]\n                }\n\n                function d(a, b, c, d, e, f, g) {\n                    a[c * d * 4 + 4 * b + f] = g\n                }\n                this.base = a.Element.ElementBase, this.base(b), this.apply = function(a, b, e, f, g) {\n                    for (var h = a.getImageData(0, 0, f, g), e = 0; e < g; e++)\n                        for (var b = 0; b < f; b++) {\n                            var i = c(h.data, b, e, f, g, 0),\n                                j = c(h.data, b, e, f, g, 1),\n                                k = c(h.data, b, e, f, g, 2),\n                                l = (i + j + k) / 3;\n                            d(h.data, b, e, f, g, 0, l), d(h.data, b, e, f, g, 1, l), d(h.data, b, e, f, g, 2, l)\n                        }\n                    a.clearRect(0, 0, f, g), a.putImageData(h, 0, 0)\n                }\n            }, a.Element.feColorMatrix.prototype = new a.Element.ElementBase, a.Element.feGaussianBlur = function(b) {\n                this.base = a.Element.ElementBase, this.base(b), this.blurRadius = Math.floor(this.attribute(\"stdDeviation\").numValue()), this.extraFilterDistance = this.blurRadius, this.apply = function(b, c, d, e, f) {\n                    return \"undefined\" == typeof stackBlurCanvasRGBA ? void(\"undefined\" != typeof console && console.log(\"ERROR: StackBlur.js must be included for blur to work\")) : (b.canvas.id = a.UniqueId(), b.canvas.style.display = \"none\", document.body.appendChild(b.canvas), stackBlurCanvasRGBA(b.canvas.id, c, d, e, f, this.blurRadius), void document.body.removeChild(b.canvas))\n                }\n            }, a.Element.feGaussianBlur.prototype = new a.Element.ElementBase, a.Element.title = function(a) {}, a.Element.title.prototype = new a.Element.ElementBase, a.Element.desc = function(a) {}, a.Element.desc.prototype = new a.Element.ElementBase, a.Element.MISSING = function(a) {\n                \"undefined\" != typeof console && console.log(\"ERROR: Element '\" + a.nodeName + \"' not yet implemented.\")\n            }, a.Element.MISSING.prototype = new a.Element.ElementBase, a.CreateElement = function(b) {\n                var c = b.nodeName.replace(/^[^:]+:/, \"\");\n                c = c.replace(/\\-/g, \"\");\n                var d = null;\n                return d = \"undefined\" != typeof a.Element[c] ? new a.Element[c](b) : new a.Element.MISSING(b), d.type = b.nodeName, d\n            }, a.load = function(b, c) {\n                a.loadXml(b, a.ajax(c))\n            }, a.loadXml = function(b, c) {\n                a.loadXmlDoc(b, a.parseXml(c))\n            }, a.loadXmlDoc = function(b, c) {\n                a.init(b);\n                var d = function(a) {\n                    for (var c = b.canvas; c;) a.x -= c.offsetLeft, a.y -= c.offsetTop, c = c.offsetParent;\n                    return window.scrollX && (a.x += window.scrollX), window.scrollY && (a.y += window.scrollY), a\n                };\n                1 != a.opts.ignoreMouse && (b.canvas.onclick = function(b) {\n                    var c = d(new a.Point(null != b ? b.clientX : event.clientX, null != b ? b.clientY : event.clientY));\n                    a.Mouse.onclick(c.x, c.y)\n                }, b.canvas.onmousemove = function(b) {\n                    var c = d(new a.Point(null != b ? b.clientX : event.clientX, null != b ? b.clientY : event.clientY));\n                    a.Mouse.onmousemove(c.x, c.y);\n                });\n                var e = a.CreateElement(c.documentElement);\n                e.root = !0;\n                var f = !0,\n                    g = function() {\n                        a.ViewPort.Clear(), b.canvas.parentNode && a.ViewPort.SetCurrent(b.canvas.parentNode.clientWidth, b.canvas.parentNode.clientHeight), 1 != a.opts.ignoreDimensions && (e.style(\"width\").hasValue() && (b.canvas.width = e.style(\"width\").toPixels(\"x\"), b.canvas.style.width = b.canvas.width + \"px\"), e.style(\"height\").hasValue() && (b.canvas.height = e.style(\"height\").toPixels(\"y\"), b.canvas.style.height = b.canvas.height + \"px\"));\n                        var d = b.canvas.clientWidth || b.canvas.width,\n                            g = b.canvas.clientHeight || b.canvas.height;\n                        if (1 == a.opts.ignoreDimensions && e.style(\"width\").hasValue() && e.style(\"height\").hasValue() && (d = e.style(\"width\").toPixels(\"x\"), g = e.style(\"height\").toPixels(\"y\")), a.ViewPort.SetCurrent(d, g), null != a.opts.offsetX && (e.attribute(\"x\", !0).value = a.opts.offsetX), null != a.opts.offsetY && (e.attribute(\"y\", !0).value = a.opts.offsetY), null != a.opts.scaleWidth && null != a.opts.scaleHeight) {\n                            var h = 1,\n                                i = 1,\n                                j = a.ToNumberArray(e.attribute(\"viewBox\").value);\n                            e.attribute(\"width\").hasValue() ? h = e.attribute(\"width\").toPixels(\"x\") / a.opts.scaleWidth : isNaN(j[2]) || (h = j[2] / a.opts.scaleWidth), e.attribute(\"height\").hasValue() ? i = e.attribute(\"height\").toPixels(\"y\") / a.opts.scaleHeight : isNaN(j[3]) || (i = j[3] / a.opts.scaleHeight), e.attribute(\"width\", !0).value = a.opts.scaleWidth, e.attribute(\"height\", !0).value = a.opts.scaleHeight, e.attribute(\"viewBox\", !0).value = \"0 0 \" + d * h + \" \" + g * i, e.attribute(\"preserveAspectRatio\", !0).value = \"none\"\n                        }\n                        1 != a.opts.ignoreClear && b.clearRect(0, 0, d, g), e.render(b), f && (f = !1, \"function\" == typeof a.opts.renderCallback && a.opts.renderCallback(c))\n                    },\n                    h = !0;\n                a.ImagesLoaded() && (h = !1, g()), a.intervalID = setInterval(function() {\n                    var b = !1;\n                    if (h && a.ImagesLoaded() && (h = !1, b = !0), 1 != a.opts.ignoreMouse && (b |= a.Mouse.hasEvents()), 1 != a.opts.ignoreAnimation)\n                        for (var c = 0; c < a.Animations.length; c++) b |= a.Animations[c].update(1e3 / a.FRAMERATE);\n                    \"function\" == typeof a.opts.forceRedraw && 1 == a.opts.forceRedraw() && (b = !0), b && (g(), a.Mouse.runEvents())\n                }, 1e3 / a.FRAMERATE)\n            }, a.stop = function() {\n                a.intervalID && clearInterval(a.intervalID)\n            }, a.Mouse = new function() {\n                this.events = [], this.hasEvents = function() {\n                    return 0 != this.events.length\n                }, this.onclick = function(a, b) {\n                    this.events.push({\n                        type: \"onclick\",\n                        x: a,\n                        y: b,\n                        run: function(a) {\n                            a.onclick && a.onclick()\n                        }\n                    })\n                }, this.onmousemove = function(a, b) {\n                    this.events.push({\n                        type: \"onmousemove\",\n                        x: a,\n                        y: b,\n                        run: function(a) {\n                            a.onmousemove && a.onmousemove()\n                        }\n                    })\n                }, this.eventElements = [], this.checkPath = function(a, b) {\n                    for (var c = 0; c < this.events.length; c++) {\n                        var d = this.events[c];\n                        b.isPointInPath && b.isPointInPath(d.x, d.y) && (this.eventElements[c] = a)\n                    }\n                }, this.checkBoundingBox = function(a, b) {\n                    for (var c = 0; c < this.events.length; c++) {\n                        var d = this.events[c];\n                        b.isPointInBox(d.x, d.y) && (this.eventElements[c] = a)\n                    }\n                }, this.runEvents = function() {\n                    a.ctx.canvas.style.cursor = \"\";\n                    for (var b = 0; b < this.events.length; b++)\n                        for (var c = this.events[b], d = this.eventElements[b]; d;) c.run(d), d = d.parent;\n                    this.events = [], this.eventElements = []\n                }\n            }, a\n        }\n        this.canvg = function(b, c, d) {\n            if (null != b || null != c || null != d) {\n                d = d || {}, \"string\" == typeof b && (b = document.getElementById(b)), null != b.svg && b.svg.stop();\n                var e = a();\n                1 == b.childNodes.length && \"OBJECT\" == b.childNodes[0].nodeName || (b.svg = e), e.opts = d;\n                var f = b.getContext(\"2d\");\n                \"undefined\" != typeof c.documentElement ? e.loadXmlDoc(f, c) : \"<\" == c.substr(0, 1) ? e.loadXml(f, c) : e.load(f, c)\n            } else\n                for (var g = document.getElementsByTagName(\"svg\"), h = 0; h < g.length; h++) {\n                    var i = g[h],\n                        j = document.createElement(\"canvas\");\n                    j.width = i.clientWidth, j.height = i.clientHeight, i.parentNode.insertBefore(j, i), i.parentNode.removeChild(i);\n                    var k = document.createElement(\"div\");\n                    k.appendChild(i), canvg(j, k.innerHTML)\n                }\n        }\n    }(), \"undefined\" != typeof CanvasRenderingContext2D && (CanvasRenderingContext2D.prototype.drawSvg = function(a, b, c, d, e) {\n            canvg(this.canvas, a, {\n                ignoreMouse: !0,\n                ignoreAnimation: !0,\n                ignoreDimensions: !0,\n                ignoreClear: !0,\n                offsetX: b,\n                offsetY: c,\n                scaleWidth: d,\n                scaleHeight: e\n            })\n        }),\n        function(a, b) {\n            \"use strict\";\n\n            function c(a, b) {\n                var c = f(b),\n                    d = g.rect({\n                        x: -c.left,\n                        y: -c.top,\n                        width: c.left + c.right,\n                        height: c.top + c.bottom\n                    });\n                if (b.width && b.height) {\n                    var e = a.width + c.left + c.right,\n                        h = a.height + c.top + c.bottom;\n                    d.scale(e / b.width, h / b.height)\n                }\n                return g.Rect(a).moveAndExpand(d)\n            }\n\n            function d(a) {\n                var c = 1;\n                if (!b.isUndefined(a) && (c = parseFloat(a), !b.isFinite(c) || 0 === c)) throw new Error(\"dia.Paper: invalid raster size (\" + a + \")\");\n                return c\n            }\n\n            function e(a, b) {\n                return {\n                    width: (a.width || 1) * b,\n                    height: (a.height || 1) * b\n                }\n            }\n\n            function f(b) {\n                var c = a.util.normalizeSides(b.padding);\n                return b.width && b.height && (c.left + c.right >= b.width && (c.left = c.right = 0), c.top + c.bottom >= b.height && (c.top = c.bottom = 0)), c\n            }\n\n            function h(a) {\n                return a.replace(/\\<image[^>]*>/g, function(a) {\n                    var b = a.match(/href=\"([^\"]*)\"/)[1],\n                        c = \"data:image/svg+xml\";\n                    if (b.substr(0, c.length) === c) {\n                        var d = atob(b.substr(b.indexOf(\",\") + 1));\n                        return d.substr(d.indexOf(\"<svg\"))\n                    }\n                    return a\n                })\n            }\n            a.dia.Paper.prototype.toDataURL = function(a, f) {\n                if (\"function\" != typeof this.toSVG) throw new Error(\"The joint.format.svg.js plugin must be loaded.\");\n                f = f || {};\n                var g, i = V.transformRect(this.getContentBBox(), this.matrix().inverse()),\n                    j = c(i, f),\n                    k = f.width && f.height ? f : j,\n                    l = e(k, d(f.size)),\n                    m = new Image;\n                m.onload = function() {\n                    function c() {\n                        j = document.createElement(\"canvas\"), j.width = l.width, j.height = l.height, i = j.getContext(\"2d\"), i.fillStyle = f.backgroundColor || \"white\", i.fillRect(0, 0, l.width, l.height)\n                    }\n\n                    function d() {\n                        e = j.toDataURL(f.type, f.quality), a(e), j.svg && b.isFunction(j.svg.stop) && b.defer(j.svg.stop)\n                    }\n                    var e, i, j;\n                    c();\n                    try {\n                        i.drawImage(m, 0, 0, l.width, l.height), d()\n                    } catch (k) {\n                        if (\"undefined\" == typeof canvg) return void console.error(\"Canvas tainted. Canvg library required.\");\n                        c();\n                        var n = {\n                            ignoreDimensions: !0,\n                            ignoreClear: !0,\n                            ignoreMouse: !0,\n                            ignoreAnimation: !0,\n                            offsetX: 0,\n                            offsetY: 0,\n                            useCORS: !0\n                        };\n                        canvg(j, g, b.extend(n, {\n                            forceRedraw: b.once(function() {\n                                return !0\n                            }),\n                            renderCallback: function() {\n                                try {\n                                    d()\n                                } catch (a) {\n                                    g = h(g), c(), canvg(j, g, b.extend(n, {\n                                        renderCallback: d\n                                    }))\n                                }\n                            }\n                        }))\n                    }\n                }, this.toSVG(function(a) {\n                    g = a = a.replace('width=\"100%\"', 'width=\"' + l.width + '\"').replace('height=\"100%\"', 'height=\"' + l.height + '\"'), m.src = \"data:image/svg+xml,\" + encodeURIComponent(a)\n                }, {\n                    convertImagesToDataUris: !0,\n                    area: j\n                })\n            }, a.dia.Paper.prototype.toPNG = function(a, b) {\n                b = b || {}, b.type = \"image/png\", this.toDataURL(a, b)\n            }, a.dia.Paper.prototype.toJPEG = function(a, b) {\n                b = b || {}, b.type = \"image/jpeg\", this.toDataURL(a, b)\n            }, a.dia.Paper.prototype.openAsPNG = function(a) {\n                var c = \"menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes\",\n                    d = b.uniqueId(\"png_output\");\n                this.toPNG(function(a) {\n                    var b = window.open(\"\", d, c);\n                    b.document.write('<img src=\"' + a + '\"/>')\n                }, b.extend({\n                    padding: 10\n                }, a))\n            }\n        }(joint, _);\n    ! function(a, b, c, d) {\n        function e(b) {\n            b = b || {}, this.trigger(\"beforeprint\", b), this.$printArea = a(\"<div/>\").addClass(\"printarea\"), b.size && this.$printArea.addClass(\"printarea-size-\" + b.size);\n            var e = this.$el.clone().appendTo(this.$printArea),\n                f = d.util.normalizeSides(b.padding),\n                g = this.getContentBBox().moveAndExpand({\n                    x: -f.left,\n                    y: -f.top,\n                    width: f.left + f.right,\n                    height: f.top + f.bottom\n                });\n            c(e.find(\"svg\")[0]).attr({\n                width: \"100%\",\n                height: \"100%\",\n                viewBox: [g.x, g.y, g.width, g.height].join(\" \")\n            }), this.$detachedChildren = this.$el.children().detach(), this.$printArea.prependTo(document.body)\n        }\n\n        function f(a) {\n            a = a || {}, this.$printArea.remove(), this.$el.append(this.$detachedChildren), this.$detachedChildren = null, this.$printArea = null, this.trigger(\"afterprint\", a)\n        }\n        d.dia.Paper.prototype.print = function(c) {\n            c = c || {}, b.defaults(c, {\n                size: \"a4\",\n                padding: 5\n            });\n            var d = b.bind(e, this, c),\n                g = b.bind(f, this, c),\n                h = b.once(function() {\n                    g(), a(window).off(\"afterprint\", h)\n                });\n            a(window).one(\"afterprint\", h), b.delay(h, 200), d(), window.print()\n        }\n    }($, _, V, joint);\n    if (\"object\" == typeof exports) var WebSocketServer = require(\"ws\").Server,\n        WebSocket = require(\"ws\"),\n        url = require(\"url\");\n    WebSocket = WebSocket || \"undefined\" != typeof window && window.WebSocket, joint.com = joint.com || {}, joint.com.Channel = function(a) {\n        if (this.options = a, !this.options || !this.options.graph) throw new Error(\"Channel: missing a graph.\");\n        this.options.ttl = this.options.ttl || 60, this.options.healthCheckInterval = this.options.healthCheckInterval || 36e5, this.options.reconnectInterval = this.options.reconnectInterval || 1e4, this.options.serverShouldSendGraph = !!_.isUndefined(this.options.serverShouldSendGraph) || this.options.serverShouldSendGraph, this._isClient = !!this.options.url, this._clients = [], this.messageQueue = [], this.id = this.options.id || (this._isClient ? \"c_\" : \"s_\") + joint.util.uuid(), this.state = {}, this.state[this.id] = 0, this.sites = {}, this.sites[this.id] = {\n            socket: void 0,\n            outgoing: [],\n            ttl: this.options.ttl\n        }, this.initialize()\n    }, _.extend(joint.com.Channel.prototype, Backbone.Events), joint.com.Channel.prototype.initialize = function() {\n        this.options.graph.on(\"all\", this.onGraphChange.bind(this)), this._isClient ? this.connectClient() : this.options.port && (this.server = new WebSocketServer({\n            port: this.options.port\n        }), this.server.on(\"connection\", this.onConnection.bind(this))), this._isClient || (this._healthCheckInterval = setInterval(this.healthCheck.bind(this), this.options.healthCheckInterval))\n    }, joint.com.Channel.prototype.connectClient = function() {\n        var a = this.options.url + \"/?channelId=\" + this.id + \"&state=\" + JSON.stringify(this.state) + (this.options.query ? \"&query=\" + JSON.stringify(this.options.query) : \"\");\n        this.options.debugLevel > 0 && this.log(\"connectClient\", a);\n        var b = new WebSocket(a);\n        b.onopen = this.onConnection.bind(this, b), b.onclose = this.onClose.bind(this, b)\n    }, joint.com.Channel.prototype.close = function() {\n        this._reconnectTimeout && clearTimeout(this._reconnectTimeout), this._healthCheckInterval && clearInterval(this._healthCheckInterval), this._closed = !0, _.each(this.sites, function(a) {\n            a.socket && a.socket.close()\n        }), this.server && this.server.close()\n    }, joint.com.Channel.prototype.healthCheck = function() {\n        this.options.debugLevel > 0 && this.log(\"healthCheck\", _.object(_.keys(this.sites), _.pluck(this.sites, \"ttl\"))), _.each(this.sites, function(a, b) {\n            b !== this.id && (a.socket && 1 === a.socket.readyState ? a.ttl = this.options.ttl : a.ttl -= 1, a.ttl <= 0 && (this.sites = _.omit(this.sites, b), this.state = _.omit(this.state, b)))\n        }, this)\n    }, joint.com.Channel.prototype.onConnection = function(a) {\n        if (this._clients.push(a), this.trigger(\"open\", a), this._isClient) this.sites[this.id].socket = a, a.onmessage = function(b) {\n            this.onMessage(a, b.data)\n        }.bind(this);\n        else {\n            var b = url.parse(a.upgradeReq.url, !0),\n                c = b.query.channelId;\n            if (this.sites[c]) this.sites[c].socket = a;\n            else if (this.debugLevel > 1 && this.log(\"new_site\", c), this.sites[c] = {\n                    socket: a,\n                    outgoing: [],\n                    ttl: this.options.ttl\n                }, this.state[c] = 0, this.options.serverShouldSendGraph) {\n                var d = {\n                    channelId: this.id,\n                    state: JSON.parse(JSON.stringify(this.state)),\n                    action: \"graph\",\n                    graph: this.options.graph.toJSON()\n                };\n                this.messageQueue.push({\n                    type: \"op\",\n                    data: d,\n                    source: this.id,\n                    target: [c]\n                }), this.send()\n            }\n            a.on(\"message\", this.onMessage.bind(this, a)), a.on(\"close\", this.onClose.bind(this, a))\n        }\n    }, joint.com.Channel.prototype.onClose = function(a) {\n        var b = this._clients.indexOf(a);\n        b !== -1 && this._clients.splice(b, 1), this._isClient && !this._closed && (this._reconnectTimeout && clearTimeout(this._reconnectTimeout), this._reconnectTimeout = setTimeout(this.connectClient.bind(this), this.options.reconnectInterval)), this.trigger(\"close\", a)\n    }, joint.com.Channel.prototype.onMessage = function(a, b) {\n        this.trigger(\"message:received\", b), this.options.debugLevel > 1 && this.log(\"message\", b);\n        try {\n            b = JSON.parse(b)\n        } catch (c) {\n            return console.error(\"Channel: message parsing failed.\", c)\n        }\n        if (\"notification\" == b.type) return this.trigger(b.data.event, b.data.data), this.sendNotification(b);\n        var d, e, f = b.data;\n        this._isClient ? (d = this.sites[this.id], f = this.receive(d, this.id, f)) : (e = this.sites[f.channelId], f = this.receive(e, f.channelId, f), d = this.sites[this.id], f = this.receive(d, this.id, f)), \"graph\" === f.action ? this.state[f.channelId] = f.state[f.channelId] : this.state[f.channelId] = (this.state[f.channelId] || 0) + 1, this.options.debugLevel > 1 && this.log(\"new state\", this.state), this.execute(f), _.each(this.sites, function(a, b) {\n            b !== this.id && b !== f.channelId && this.receive(a, b, f)\n        }, this), this._isClient || (b.op = f, this.messageQueue.push(b), this.broadcast(b)), this.trigger(\"message:processed\", b)\n    }, joint.com.Channel.prototype.receive = function(a, b, c) {\n        if (!a) return c;\n        this.options.debugLevel > 1 && this.log(\"receive\", b, c), this.options.debugLevel > 1 && this.log(\"outgoing\", a.outgoing), a.outgoing = _.filter(a.outgoing, function(a) {\n            return a.state[a.channelId] >= (c.state[a.channelId] || 0)\n        }), this.options.debugLevel > 1 && this.log(\"outgoing.length\", a.outgoing.length);\n        for (var d = 0; d < a.outgoing.length; d++) {\n            var e = a.outgoing[d],\n                f = this.transform(c, e);\n            c = f[0], a.outgoing[d] = f[1]\n        }\n        return c\n    }, joint.com.Channel.prototype.transform = function(a, b) {\n        return this.options.debugLevel > 1 && this.log(\"transform\", a, b), \"change:target\" === a.action && \"remove\" === b.action && a.cell.target.id === b.cell.id && (a.cell.target = {\n            x: 0,\n            y: 0\n        }), \"change:source\" === a.action && \"remove\" === b.action && a.cell.source.id === b.cell.id && (a.cell.source = {\n            x: 0,\n            y: 0\n        }), [a, b]\n    }, joint.com.Channel.prototype.execute = function(a) {\n        var b;\n        switch (a.action) {\n            case \"add\":\n                this.options.graph.addCell(a.cell, {\n                    remote: !0\n                });\n                break;\n            case \"remove\":\n                b = this.options.graph.getCell(a.cell.id), b && b.remove({\n                    remote: !0,\n                    disconnectLinks: !0\n                });\n                break;\n            case \"graph\":\n                this.options.graph.fromJSON(a.graph);\n                break;\n            default:\n                var c = a.action.substr(\"change:\".length);\n                b = this.options.graph.getCell(a.cell.id), b && b.set(c, a.cell[c], {\n                    remote: !0\n                })\n        }\n    }, joint.com.Channel.prototype.broadcast = function(a) {\n        this._isClient ? a.target = _.keys(this.sites) : a.target = _.keys(_.omit(this.sites, this.id, a.source)), this.send()\n    }, joint.com.Channel.prototype.send = function() {\n        if (!this._paused) {\n            for (var a = [], b = 0; b < this.messageQueue.length; b++) {\n                var c = this.messageQueue[b];\n                this.sendMessage(c) && a.push(b)\n            }\n            a.forEach(_.bind(function(a) {\n                this.messageQueue.splice(a, 1)\n            }, this))\n        }\n    }, joint.com.Channel.prototype.sendMessage = function(a) {\n        this.debugLevel > 1 && this.log(\"sendMessage\", a);\n        var b = [];\n        return a.target.forEach(function(c, d) {\n            var e = this.sites[c];\n            return e ? void(e.socket && 1 === e.socket.readyState && (this.debugLevel > 1 && this.log(\"sendMessage\", c, a), e.socket.send(JSON.stringify(a)), b.push(d))) : b.push(d)\n        }, this), b.forEach(function(b) {\n            a.target.splice(b, 1)\n        }), !a.target.length\n    }, joint.com.Channel.prototype.log = function(a, b) {\n        var c = \"Channel [\" + this.id + \"] \" + a.toUpperCase() + \": \";\n        console.log.apply(console, [c].concat(Array.prototype.slice.call(arguments, 1)))\n    }, joint.com.Channel.prototype.pause = function() {\n        this._paused = !0\n    }, joint.com.Channel.prototype.unpause = function() {\n        this._paused = !1, this.send()\n    }, joint.com.Channel.prototype.notify = function(a, b) {\n        var c = {\n            type: \"notification\",\n            source: this.id,\n            data: {\n                event: a,\n                data: b\n            }\n        };\n        this.sendNotification(c)\n    }, joint.com.Channel.prototype.sendNotification = function(a) {\n        this._isClient ? a.target = _.keys(this.sites) : a.target = _.keys(_.omit(this.sites, this.id, a.source)), this.sendMessage(a)\n    }, joint.com.Channel.prototype.onGraphChange = function(a, b, c, d) {\n        if (!d || !d.remote) {\n            var e = \"add\" === a || \"remove\" === a || \"change:\" === a.substr(0, \"change:\".length);\n            if (e) {\n                var f = {\n                        channelId: this.id,\n                        state: JSON.parse(JSON.stringify(this.state)),\n                        action: a,\n                        cell: b.toJSON()\n                    },\n                    g = {\n                        type: \"op\",\n                        data: f,\n                        source: this.id\n                    };\n                this.options.debugLevel > 1 && this.log(\"generate\", g), this.messageQueue.push(g), this.broadcast(g), this.sites[this.id].outgoing.push(f), this.state[this.id]++\n            }\n        }\n    }, joint.com.ChannelHub = function(a) {\n        if (this.options = a, !this.options.port) throw new Error(\"ChannelHub: missing a port.\");\n        this.initialize()\n    }, _.extend(joint.com.ChannelHub.prototype, Backbone.Events), joint.com.ChannelHub.prototype.initialize = function() {\n        this.server = new WebSocketServer({\n            port: this.options.port\n        }), this.server.on(\"connection\", this.onConnection.bind(this))\n    }, joint.com.ChannelHub.prototype.onConnection = function(a) {\n        var b = url.parse(a.upgradeReq.url, !0),\n            c = {\n                query: b.query\n            };\n        if (!this.router) throw new Error(\"ChannelHub: missing a router.\");\n        var d = !1,\n            e = this.router(c, function(b, c) {\n                if (b) throw new Error(b);\n                c && !d && (c.onConnection(a), d = !0)\n            });\n        e instanceof joint.com.Channel && (e.onConnection(a), d = !0)\n    }, joint.com.ChannelHub.prototype.route = function(a) {\n        this.router = a\n    }, joint.com.ChannelHub.prototype.close = function() {\n        this.server.close()\n    };\n    joint.alg = joint.alg || {}, joint.alg.Dijkstra = function(a, b, c) {\n        c = c || function(a, b) {\n            return 1\n        };\n        var d = {};\n        d[b] = 0;\n        var e = {},\n            f = new joint.alg.PriorityQueue;\n        for (var g in a) g !== b && (d[g] = 1 / 0), f.insert(d[g], g, g);\n        for (var h, i, j, k, l = {}; !f.isEmpty();)\n            for (h = f.remove(), l[h] = !0, i = a[h] || [], j = 0; j < i.length; j++) g = i[j], l[g] || (k = d[h] + c(h, g), k < d[g] && (d[g] = k, e[g] = h, f.updatePriority(g, k)));\n        return e\n    };\n    joint.alg = joint.alg || {}, joint.alg.PriorityQueue = function(a) {\n        a = a || {}, this.comparator = a.comparator || function(a, b) {\n            return a - b\n        }, this.index = {}, this.data = a.data || [], this.heapify()\n    }, joint.alg.PriorityQueue.prototype.isEmpty = function() {\n        return 0 === this.data.length\n    }, joint.alg.PriorityQueue.prototype.insert = function(a, b, c) {\n        var d = {\n            priority: a,\n            value: b\n        };\n        this.data.push(d);\n        var e = this.data.length - 1;\n        c && (d.id = c, this.index[c] = e), this.bubbleUp(e)\n    }, joint.alg.PriorityQueue.prototype.peek = function() {\n        return this.data[0] && this.data[0].value\n    }, joint.alg.PriorityQueue.prototype.peekPriority = function() {\n        return this.data[0] && this.data[0].priority\n    }, joint.alg.PriorityQueue.prototype.updatePriority = function(a, b) {\n        var c = this.index[a];\n        if (null === c || \"undefined\" == typeof c) throw new Error(\"Node with id \" + a + \" was not found in the heap.\");\n        var d = this.data,\n            e = d[c].priority,\n            f = this.comparator(b, e);\n        f < 0 ? (d[c].priority = b, this.bubbleUp(c)) : f > 0 && (d[c].priority = b, this.bubbleDown(c))\n    }, joint.alg.PriorityQueue.prototype.remove = function() {\n        var a = this.data,\n            b = a[0],\n            c = a.pop();\n        return this.index[a.length] = null, a.length > 0 && (a[0] = c, c.id && (this.index[c.id] = 0), this.bubbleDown(0)), b && b.value\n    }, joint.alg.PriorityQueue.prototype.heapify = function() {\n        for (var a = 0; a < this.data.length; a++) this.bubbleUp(a)\n    }, joint.alg.PriorityQueue.prototype.bubbleUp = function(a) {\n        for (var b, c, d = this.data; a > 0 && (b = a - 1 >>> 1, this.comparator(d[a].priority, d[b].priority) < 0);) c = d[b], d[b] = d[a], d[a].id && (this.index[d[a].id] = b), d[a] = c, d[a].id && (this.index[d[a].id] = a), a = b\n    }, joint.alg.PriorityQueue.prototype.bubbleDown = function(a) {\n        for (var b = this.data, c = b.length - 1;;) {\n            var d = (a << 1) + 1,\n                e = d + 1,\n                f = a;\n            if (d <= c && this.comparator(b[d].priority, b[f].priority) < 0 && (f = d), e <= c && this.comparator(b[e].priority, b[f].priority) < 0 && (f = e), f === a) break;\n            var g = b[f];\n            b[f] = b[a], b[a].id && (this.index[b[a].id] = f), b[a] = g, b[a].id && (this.index[b[a].id] = a), a = f\n        }\n    };\n    joint.storage = joint.storage || {}, joint.storage.Local = {\n        prefix: \"joint.storage\",\n        insert: function(a, b, c) {\n            var d = b.id || joint.util.uuid(),\n                e = this.loadIndex(a);\n            e.keys.indexOf(d) === -1 && e.keys.push(d), this.setItem(this.docKey(a, d), b), this.setItem(this.indexKey(a), e), this.callback(c, null, _.extend({}, b, {\n                id: d\n            }))\n        },\n        find: function(a, b, c) {\n            var d = this.loadIndex(a),\n                e = [];\n            if (_.isEmpty(b)) _.each(d.keys, function(b) {\n                var d = this.getItem(this.docKey(a, b));\n                d || this.callback(c, new Error(\"Storage incosistency. No document found for an ID \" + b + \" from index.\")), e.push(d)\n            }, this), this.callback(c, null, e);\n            else if (b.id) {\n                var f = this.getItem(this.docKey(a, b.id));\n                this.callback(c, null, f ? [f] : [])\n            } else this.callback(c, null, [])\n        },\n        remove: function(a, b, c) {\n            var d = this.loadIndex(a);\n            _.isEmpty(b) ? (_.each(d.keys, function(b) {\n                localStorage.removeItem(this.docKey(a, b))\n            }, this), localStorage.removeItem(this.indexKey(a)), this.callback(c, null)) : b.id && (_.remove(d.keys, function(a) {\n                return a === b.id\n            }), localStorage.removeItem(this.docKey(a, b.id)), this.setItem(this.indexKey(a), d), this.callback(c, null))\n        },\n        callback: function(a, b, c) {\n            a && _.defer(function() {\n                a(b, c)\n            })\n        },\n        setItem: function(a, b) {\n            localStorage.setItem(a, JSON.stringify(b))\n        },\n        getItem: function(a) {\n            var b = localStorage.getItem(a);\n            return b ? JSON.parse(b) : b\n        },\n        loadIndex: function(a) {\n            var b = this.getItem(this.indexKey(a)) || {};\n            return b.keys = b.keys || [], b\n        },\n        docKey: function(a, b) {\n            return this.prefix + \".\" + a + \".docs.\" + b\n        },\n        indexKey: function(a) {\n            return this.prefix + \".\" + a + \".index\"\n        }\n    };\n\n    joint.g = g;\n    joint.V = joint.Vectorizer = V;\n\n    return joint;\n\n}));\n","/*! Rappid v2.1.0 - HTML5 Diagramming Framework - TRIAL VERSION\n\nCopyright (c) 2015 client IO\n\n 2017-09-14 \n\n\nThis Source Code Form is subject to the terms of the Rappid Trial License\n, v. 2.0. If a copy of the Rappid License was not distributed with this\nfile, You can obtain one at http://jointjs.com/license/rappid_v2.txt\n or from the Rappid archive as was distributed by client IO. See the LICENSE file.*/\n\n\njoint.shapes.qad = {};\n\njoint.util.measureText = function(text, attrs) {\n\n    var fontSize = parseInt(attrs.fontSize, 10) || 10;\n\n    var svgDocument = V('svg').node;\n    var textElement = V('<text><tspan></tspan></text>').node;\n    var textSpan = textElement.firstChild;\n    var textNode = document.createTextNode('');\n\n    textSpan.appendChild(textNode);\n    svgDocument.appendChild(textElement);\n    document.body.appendChild(svgDocument);\n\n    var lines = text.split('\\n');\n    var width = 0;\n\n    // Find the longest line width.\n    _.each(lines, function(line) {\n\n        textNode.data = line;\n        var lineWidth = textSpan.getComputedTextLength();\n\n        width = Math.max(width, lineWidth);\n    });\n\n    var height = lines.length * (fontSize * 1.2);\n\n    V(svgDocument).remove();\n\n    return {\n        width: width,\n        height: height\n    };\n};\n\njoint.shapes.qad.TriggerView = joint.dia.ElementView.extend({\n    events: {\n        'click .btn-remove-trigger': 'onRemoveTrigger',\n    },\n    initialize: function(e) {\n        joint.dia.ElementView.prototype.initialize.apply(this, arguments);\n        this.listenTo(this.model, 'change:parent', this.autoresize, this);\n    },\n    autoresize: function() {\n        if (this.getParent()) {\n            var parentBounds = this.getParent().getBBox();\n            this.model.resize(parentBounds.width, 30);\n        }\n    },\n    getParent: function() {\n        return this.model.graph.getCell(this.model.attributes.parent);\n    },\n    onRemoveTrigger: function(evt) {\n        evt.stopPropagation();\n        this.getParent().removeTrigger(this.model.id);\n        this.getParent().unembed(this.model);\n        this.remove();\n    }\n});\n\njoint.shapes.qad.ModifierView = joint.dia.ElementView.extend({\n    events: {\n        'click .btn-remove-modifier': 'onRemoveModifier',\n    },\n    initialize: function(e) {\n        joint.dia.ElementView.prototype.initialize.apply(this, arguments);\n        this.listenTo(this.model, 'change:parent', this.autoresize, this);\n    },\n    autoresize: function() {\n        if (this.getParent()) {\n            var parentBounds = this.getParent().getBBox();\n            this.model.resize(parentBounds.width, 30);\n        }\n    },\n    getParent: function() {\n        return this.model.graph.getCell(this.model.attributes.parent);\n    },\n    onRemoveModifier: function(evt) {\n        this.getParent().removeModifier(this.model.id);\n        this.getParent().unembed(this.model);\n        this.remove();\n    }\n});\n\njoint.shapes.qad.QuestionView = joint.dia.ElementView.extend({\n\n    events: {\n        'click .btn-add-modifier': 'onAddModifier',\n        'click .btn-add-trigger': 'onAddTrigger',\n    },\n\n    initialize: function() {\n        joint.dia.ElementView.prototype.initialize.apply(this, arguments);\n        this.listenTo(this.model, 'change:embeds', this.layoutChildren, this);\n    },\n\n    layoutChildren: function() {\n        this.layoutModifiers();\n        this.layoutTriggers();\n    },\n\n    layoutTriggers: function() {\n        var options = this.model.get('triggers');\n        var optionHeight = this.model.get('optionHeight');\n        var offsetY = 70 + (this.model.get('options').length * optionHeight);\n        _.each(options, function(option) {\n            option.position(0, offsetY, {\n                parentRelative: true\n            });\n            offsetY += optionHeight;\n        }, this);\n    },\n\n    layoutModifiers: function() {\n        var options = this.model.get('options');\n        var optionHeight = this.model.get('optionHeight');\n        var offsetY = 50;\n        _.each(options, function(option) {\n            option.position(0, offsetY, {\n                parentRelative: true\n            });\n            offsetY += optionHeight;\n        }, this);\n    },\n\n    onAddTrigger: function() {\n        this.model.addTrigger()\n    },\n    onAddModifier: function() {\n        this.model.addModifier();\n    },\n\n});\n","var app = app || {};\n\napp.Selection = Backbone.Collection.extend();\n\napp.SelectionView = Backbone.View.extend({\n\n    initialize: function(options) {\n        this.options = options;\n        _.bindAll(this, 'render');\n        this.listenTo(this.model, 'add reset change', this.render);\n        this.listenTo(this.model, 'remove', this.remove);\n    },\n\n    render: function() {\n\n        var paper = this.options.paper;\n\n        var boxTemplate = V('rect', {\n            fill: 'none',\n            'stroke': '#C6C7E2',\n            'stroke-width': 1,\n            'pointer-events': 'none'\n        });\n\n        //remove any existing boxes\n        _.invoke(this.boxes, 'remove');\n        this.boxes = [];\n\n        this.model.each(function(element) {\n            var box = boxTemplate.clone();\n            var p = 3; // Box padding.\n            box.attr(g.rect(_.extend({}, element.get('position'), element.get('size'))).moveAndExpand({\n                x: -p,\n                y: -p,\n                width: 2 * p,\n                height: 2 * p\n            }));\n            V(paper.viewport).append(box);\n            this.boxes.push(box);\n        }, this);\n\n        return this;\n    }\n});\n","var app = app || {};\n\napp.Factory = {\n\n    createStateFromParams: function(params) {\n        var state = {\n            obs: {},\n            initial_state: false\n        }\n        return state;\n    },\n\n    createModifierFromParams: function(type, params) {\n        var modifier = {\n            type: type || '',\n            params: params || {}\n        }\n        return modifier;\n    },\n\n    createModifierTypeOb: function(time_limit, transition_type, start_time, end_time, relative_amount) {\n        return this.createModifierFromParams(\"Ob\", {\n            \"time_limit\": time_limit || 10,\n            \"transition_type\": transition_type || \"linear\",\n            \"start_time\": start_time || 0,\n            \"end_time\": end_time || 10,\n            \"relative_amount\": relative_amount || 0,\n        });\n    },\n\n    createTriggerFromParams: function(type, params) {\n        var trigger = {\n            type: type || '',\n            params: params || {}\n        }\n        return trigger;\n    },\n\n    createTriggerTypeTimeLimit: function(time_limit, linked_state) {\n        return this.createTriggerFromParams(\"TimeLimit\", {\n            \"time_limit\": time_limit || 10,\n            \"linked_state\": linked_state || ''\n        });\n    },\n\n    createTriggerTypeGiveDrug: function(comparison, drug, dose, dose_unit, linked_state) {\n        return this.createTriggerFromParams(\"GiveDrug\", {\n            \"comparison\": comparison || '',\n            \"drug\": drug || '',\n            \"dose\": dose || 0,\n            \"dose_unit\": dose_unit || '',\n            \"linked_state\": linked_state || ''\n        });\n    },\n\n    createTrigger: function(id, name) {\n\n        var q = new joint.shapes.qad.Trigger({\n            id: 'trigger-' + id,\n            attrs: {\n                '.trigger-text': {\n                    text: name\n                }\n            },\n            ports: {\n                groups: {\n                    'out': {\n                        position: 'right',\n                        attrs: {\n                            circle: {\n                                magnet: true,\n                                fill: '#feb663',\n                                r: 14\n                            }\n                        }\n                    }\n                },\n                items: [{\n                    id: 'trigger-port-' + id,\n                    group: 'out',\n                    args: {},\n                }]\n            },\n            trigger_data: app.Factory.createTriggerFromParams()\n        });\n        return q;\n    },\n\n    createModifier: function(id, name) {\n        var q = new joint.shapes.qad.Modifier({\n            id: 'option-' + id,\n            attrs: {\n                '.option-text': {\n                    text: name\n                }\n            },\n            modifier_data: app.Factory.createModifierFromParams()\n        });\n        return q;\n    },\n\n    createQuestion: function(text) {\n        var q = new joint.shapes.qad.Question({\n            position: {\n                x: 400 - 50,\n                y: 30\n            },\n            size: {\n                width: 100,\n                height: 70\n            },\n            question: text,\n            inPorts: [{\n                id: 'in',\n                label: 'In'\n            }],\n            options: [],\n            triggers: [],\n            state_data: app.Factory.createStateFromParams(text)\n        });\n        return q;\n    },\n\n    createLink: function(source, target) {\n\n        return new joint.dia.Link({\n            source: {\n                id: source\n            },\n            target: {\n                id: target\n            },\n            attrs: {\n                '.marker-target': {\n                    d: 'M 10 0 L 0 5 L 10 10 z',\n                    fill: '#6a6c8a',\n                    stroke: '#6a6c8a'\n                },\n                '.connection': {\n                    stroke: '#6a6c8a',\n                    'stroke-width': 2\n                }\n            }\n        });\n    },\n\n};\n","var app = app || {};\n\napp.helpers = {\n    export_to_scenario_json: function(graph) {\n\n        var export_data = {\n            \"starting_state\": \"not_yet_set\",\n            \"states\": {}\n        };\n\n        //Get list of links for lookup when adding triggers\n        var graph_links = graph.getLinks();\n        var link_lookup = {};\n\n        for (var link_count = 0; link_count < graph_links.length; link_count++) {\n            var link = graph_links[link_count];\n            link_lookup[link.get('source').id] = link.get('target').id;\n        }\n\n        var state_cells = app.helpers.get_states(graph);\n        for (var state_count = 0; state_count < state_cells.length; state_count++) {\n\n            var state = state_cells[state_count];\n            export_data.states[state.id] = {\n                \"obs\": state.getStateParams().state_data.obs,\n                \"triggers\": {},\n                \"modifiers\": {}\n            };\n\n            //Store the id of the starting state\n            if (state.getStateParams().state_data.initial_state) export_data.starting_state = state.id;\n\n            var state_triggers = state.get('triggers');\n            for (var trigger_count = 0; trigger_count < state_triggers.length; trigger_count++) {\n                var trigger = state_triggers[trigger_count];\n                var trigger_data = trigger.getTriggerParams().trigger_data;\n                if (link_lookup[trigger.id]) trigger_data.params[\"linked_state\"] = link_lookup[trigger.id];\n                export_data.states[state.id].triggers[trigger.id] = trigger_data;\n            }\n\n            var state_modifiers = state.get('options');\n            for (var modifier_count = 0; modifier_count < state_modifiers.length; modifier_count++) {\n                var modifier = state_modifiers[modifier_count];\n                var modifier_data = modifier.getModifierParams().modifier_data;\n                export_data.states[state.id].modifiers[modifier.id] = modifier_data;\n            }\n\n        }\n\n        console.log(export_data);\n\n    },\n\n    get_states: function(graph) {\n        var state_cells = [];\n        var graph_cells = graph.getCells();\n        for (var cell_count = 0; cell_count < graph_cells.length; cell_count++) {\n            var state = graph_cells[cell_count];\n            if (state.get('type') == 'qad.Question') {\n                state_cells.push(state);\n            }\n\n        }\n        return state_cells;\n    }\n}\n","// @import jquery.js\n// @import lodash.js\n// @import backbone.js\n// @import geometry.js\n// @import vectorizer.js\n// @import joint.clean.js\n// @import joint.shapes.qad.js\n// @import selection.js\n// @import factory.js\n// @import snippet.js\n\nvar app = app || {};\nvar qad = window.qad || {};\n\napp.dictionary = {\n    \"ob_names\": {\n        \"heart_rate\": \"Heart rate\",\n        \"foot_smell\": \"Foot smell\",\n        \"hair_loss\": \"Hair loss\",\n    }\n}\n\napp.AppView = Backbone.View.extend({\n\n    el: '#app',\n\n    events: {\n        'click #add-state': 'addState',\n        'click #save-scenario': 'saveScenario',\n    },\n\n    initialize: function() {\n        this.initializePaper();\n        this.initializeSelection();\n        //this.initializeHalo();\n        //this.initializeInlineTextEditor();\n        this.initializeTooltips();\n    },\n\n    initializeTooltips: function() {\n\n        new joint.ui.Tooltip({\n            rootTarget: '#paper',\n            target: '.element',\n            content: _.bind(function(element) {\n\n                var cellView = this.paper.findView(element);\n                var cell = cellView.model;\n\n                var t = '- Double-click to edit text inline.';\n                if (cell.get('type') === 'qad.Question') {\n                    t += '<br/><br/>- Connect a port with another Question or an Answer.';\n                }\n\n                return t;\n\n            }, this),\n            direction: 'right',\n            right: '#paper',\n            padding: 20\n        });\n    },\n\n    initializeHalo: function() {\n\n        this.paper.on('cell:pointerup', function(cellView, evt) {\n\n            if (cellView.model instanceof joint.dia.Link) return;\n\n            var halo = new joint.ui.Halo({\n                graph: this.graph,\n                paper: this.paper,\n                cellView: cellView,\n                useModelGeometry: true,\n                type: 'toolbar'\n            });\n\n            // As we're using the FreeTransform plugin, there is no need for an extra resize tool in Halo.\n            // Therefore, remove the resize tool handle and reposition the clone tool handle to make the\n            // handles nicely spread around the elements.\n            halo.removeHandle('resize');\n            halo.removeHandle('rotate');\n            halo.removeHandle('fork');\n            halo.removeHandle('link');\n            //halo.changeHandle('clone', { position: 'se' });\n\n            halo.on('action:remove:pointerdown', function() {\n                this.selection.reset();\n            }, this);\n\n            halo.render();\n\n        }, this);\n    },\n\n    initializeSelection: function() {\n\n        var selection = this.selection = new app.Selection;\n\n        new app.SelectionView({\n            model: selection,\n            paper: this.paper\n        });\n\n        this.listenTo(this.paper, 'cell:pointerup', function(cellView) {\n            if (!cellView.model.isLink()) {\n                selection.reset([cellView.model]);\n            }\n        });\n\n        this.listenTo(this.paper, 'blank:pointerdown', function() {\n            selection.reset([]);\n        });\n\n        this.listenTo(selection, 'add reset', this.onSelectionChange);\n\n        /* my editor view */\n        app.editor = {\n            triggers: {},\n            modifiers: {},\n        };\n\n        app.editor.StateView = Backbone.View.extend({\n            el: \"#element-type\",\n            initialize: function() {\n                this.template = _.template($('#state-parameters-template').html());\n                this.render();\n            },\n            events: {\n                \"keyup .ob-value\": \"onObValueChange\",\n                \"change #ob-select\": \"onObChange\",\n                \"keyup #state-name\": \"onTriggerNameChange\",\n                \"click #initial-state-check\": \"onInitialStateClicked\",\n            },\n            onInitialStateClicked: function(evt) {\n                state_cells = app.helpers.get_states(this.model.graph);\n                state_cells.forEach(function(state) {\n                    state.disableInitialState();\n                });\n                if ($(evt.currentTarget).is(':checked')) this.model.enableInitialState();\n            },\n            onObValueChange: function(evt) {\n                var current_obs = this.model.getStateParams().state_data.obs;\n                var edited_ob_key = $(evt.currentTarget).data('obKey');\n                current_obs[edited_ob_key] = evt.currentTarget.value;\n            },\n            onObChange: function(evt) {\n                var current_obs = this.model.getStateParams().state_data.obs;\n                var selected_ob = $(evt.currentTarget.selectedOptions[0]);\n                var selected_ob_key = evt.currentTarget.value;\n\n                if (current_obs[selected_ob_key]) {\n                    $(\"#ob-value-\" + selected_ob_key).focus();\n                } else {\n                    current_obs[selected_ob_key] = selected_ob.data('defaultValue');\n                    this.render();\n                }\n\n            },\n            onTriggerNameChange: function(evt) {\n                this.model.attr(\".question-text\", {\n                    text: evt.currentTarget.value\n                });\n            },\n            render: function() {\n                this.$el.html(this.template(this.model.getStateParams()));\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n        app.editor.ModifierView = Backbone.View.extend({\n            el: \"#element-type\",\n            events: {\n                \"change #modifier-type\": \"onModifierTypeChange\",\n            },\n            onModifierTypeChange: function(evt) {\n                if (evt.currentTarget.value != '') {\n                    var new_data = window[\"app\"][\"Factory\"][\"createModifierType\" + evt.currentTarget.value]();\n                    this.model.set('modifier_data', new_data);\n                    this.createParametersView();\n                }\n            },\n            createParametersView: function(type) {\n                if (this.parameterView) this.parameterView.remove();\n                this.parameterView = new window[\"app\"][\"editor\"][\"modifiers\"][this.model.getModifierParams().modifier_data.type + \"View\"]({\n                    model: this.model.getModifierParams()\n                });\n            },\n            initialize: function() {\n                this.template = _.template($('#modifier-type-template').html());\n                this.render();\n            },\n            render: function() {\n                this.$el.html(this.template(this.model.getModifierParams()));\n                if (this.model.getModifierParams().modifier_data.type != '') this.createParametersView();\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n        app.editor.EditableModifierView = Backbone.View.extend({\n            storeChangedValue: function(evt) {\n                this.model.modifier_data.params[evt.currentTarget.id] = evt.currentTarget.value;\n            },\n        });\n\n        app.editor.modifiers.ObView = app.editor.EditableModifierView.extend({\n            el: \"#modifier-parameters\",\n            events: {\n                \"change .select-value-change\": \"storeChangedValue\",\n                \"keyup .keypress-value-change\": \"storeChangedValue\",\n            },\n            initialize: function() {\n                this.template = _.template($('#modifier-type-ob-template').html());\n                this.render();\n            },\n            render: function() {\n                this.$el.html(this.template(this.model));\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n        app.editor.TriggerView = Backbone.View.extend({\n            el: \"#element-type\",\n            events: {\n                \"change #trigger-type\": \"onTriggerTypeChange\",\n                \"change #trigger-name\": \"onTriggerNameChange\",\n                \"keyup #trigger-name\": \"onTriggerNameChange\",\n            },\n            initialize: function() {\n                this.template = _.template($('#trigger-type-template').html());\n                this.render();\n            },\n            render: function() {\n                this.$el.html(this.template(this.model.getTriggerParams()));\n                if (this.model.getTriggerParams().trigger_data.type != '') this.createParametersView();\n            },\n            createParametersView: function(type) {\n                if (this.parameterView) this.parameterView.remove();\n                this.parameterView = new window[\"app\"][\"editor\"][\"triggers\"][this.model.getTriggerParams().trigger_data.type + \"View\"]({\n                    model: this.model.getTriggerParams()\n                });\n            },\n            onTriggerTypeChange: function(evt) {\n                if (evt.currentTarget.value != '') {\n                    var new_data = window[\"app\"][\"Factory\"][\"createTriggerType\" + evt.currentTarget.value]();\n                    this.model.set('trigger_data', new_data);\n                    this.createParametersView();\n                }\n            },\n            onTriggerNameChange: function(evt) {\n                this.model.attr(\".trigger-text\", {\n                    text: evt.currentTarget.value\n                });\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n\n        //Trigger classes\n        app.editor.EditableTriggerView = Backbone.View.extend({\n            storeChangedValue: function(evt) {\n                this.model.trigger_data.params[evt.currentTarget.id] = evt.currentTarget.value;\n            },\n        });\n\n        app.editor.triggers.TimeLimitView = app.editor.EditableTriggerView.extend({\n            el: \"#trigger-parameters\",\n            events: {\n                \"keyup #time_limit\": \"storeChangedValue\",\n            },\n            initialize: function() {\n                this.template = _.template($('#trigger-type-time-limit-template').html());\n                this.render();\n            },\n            render: function() {\n                this.$el.html(this.template(this.model));\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n        app.editor.triggers.GiveDrugView = app.editor.EditableTriggerView.extend({\n            el: \"#trigger-parameters\",\n            events: {\n                \"change #drug\": \"storeChangedValue\",\n                \"change #dose_unit\": \"storeChangedValue\",\n                \"change #comparison\": \"storeChangedValue\",\n                \"keyup #dose\": \"storeChangedValue\",\n            },\n            initialize: function() {\n                this.template = _.template($('#trigger-type-give-drug-template').html());\n                this.render();\n            },\n            render: function() {\n                this.$el.html(this.template(this.model));\n            },\n            remove: function() {\n                this.$el.empty().off();\n                this.stopListening();\n                return this;\n            }\n        });\n\n\n    },\n\n    //Each trigger, modifier or whatever is going to have its own logic when it comes to how it manipulates the \n    //data model of the selected element, therefore, each one will live in its own separate view\n    onSelectionChange: function(collection) {\n        var cell = collection.first();\n        if (cell) {\n            var view_type_class;\n            switch (cell.get('type')) {\n                case 'qad.Trigger':\n                    view_type_class = app.editor.TriggerView;\n                    break;\n                case 'qad.Question':\n                    view_type_class = app.editor.StateView;\n                    break;\n                case 'qad.Modifier':\n                    view_type_class = app.editor.ModifierView;\n            }\n\n            if (view_type_class) {\n                //Cleanup parent view if required\n                if (this.parent_view) this.parent_view.remove();\n                this.parent_view = new view_type_class({\n                    model: collection.first()\n                })\n            };\n\n        } else {\n            this.status('Selection emptied.');\n        }\n    },\n\n    initializePaper: function() {\n\n        this.graph = new joint.dia.Graph;\n\n        this.paper = new joint.dia.Paper({\n            el: this.$('#paper'),\n            model: this.graph,\n            width: 800,\n            height: 600,\n            gridSize: 10,\n            snapLinks: {\n                radius: 50\n            },\n            validateConnection: function(cellViewS, magnetS, cellViewT, magnetT, end, linkView) {\n                if (magnetS.getAttribute('port-group') !== magnetT.getAttribute('port-group')) return true;\n                return false;\n            },\n            validateMagnet: function(cellView, magnet) {\n                if (magnet.getAttribute('port-group') == 'out') return true;\n                return false;\n            },\n            defaultLink: new joint.dia.Link({\n                router: {\n                    name: 'metro'\n                },\n                connector: {\n                    name: 'rounded'\n                },\n                attrs: {\n                    '.marker-target': {\n                        d: 'M 10 0 L 0 5 L 10 10 z',\n                        fill: '#6a6c8a',\n                        stroke: '#6a6c8a'\n                    },\n                    '.connection': {\n                        stroke: '#6a6c8a',\n                        'stroke-width': 2\n                    }\n                }\n            })\n        });\n    },\n\n\n    // Show a message in the statusbar.\n    status: function(m) {\n        this.$('#statusbar .message').text(m);\n    },\n\n    addState: function() {\n        var q = app.Factory.createQuestion('Question');\n        this.graph.addCell(q);\n        this.status('Question added.');\n    },\n\n    saveScenario: function() {\n        console.log(app.helpers.export_to_scenario_json(this.graph));\n    },\n\n    clear: function() {\n        this.graph.clear();\n    },\n\n});\n","var app = app || {};\n\n$(function() {\n\n    joint.dia.Element.define('qad.Trigger', {\n        attrs: {\n            '.btn-remove-trigger': {\n                'x-alignment': 10,\n                'y-alignment': 13,\n                cursor: 'pointer',\n                fill: 'black'\n            },\n            '.trigger-rect': {\n                fill: '#777777',\n                stroke: 'none',\n                width: 100,\n                height: 60,\n            },\n            '.trigger-text': {\n                'font-size': 11,\n                fill: 'white',\n                'y-alignment': .7,\n                'x-alignment': 40\n            }\n        }\n    }, {\n        markup: $.trim($(\"#trigger-template\").html()),\n        getTriggerParams: function() {\n            return {\n                trigger_data: this.get('trigger_data'),\n                model_name: this.get('attrs')['.trigger-text'].text\n            }\n        }\n    });\n\n    joint.dia.Element.define('qad.Modifier', {\n        attrs: {\n            '.btn-remove-modifier': {\n                'x-alignment': 10,\n                'y-alignment': 13,\n                cursor: 'pointer',\n                fill: 'black'\n            },\n            '.option-rect': {\n                fill: '#777777',\n                stroke: 'none',\n                width: 100,\n                height: 60,\n            },\n            '.option-text': {\n                'font-size': 11,\n                fill: 'white',\n                'y-alignment': .7,\n                'x-alignment': 40\n            }\n        }\n    }, {\n        markup: $.trim($(\"#modifier-template\").html()),\n        getModifierParams: function() {\n            return {\n                modifier_data: this.get('modifier_data'),\n                model_name: this.get('attrs')['.option-text'].text\n            }\n        }\n    });\n\n    joint.dia.Element.define('qad.Question', {\n\n        optionHeight: 30,\n        questionHeight: 50,\n        paddingBottom: 20,\n        minWidth: 150,\n        ports: {\n            groups: {\n                'in': {\n                    position: 'top',\n                    attrs: {\n                        circle: {\n                            magnet: true,\n                            stroke: 'white',\n                            fill: '#feb663',\n                            r: 14\n                        },\n                        text: {\n                            'pointer-events': 'none',\n                            'font-size': 12,\n                            fill: 'white'\n                        }\n                    },\n                    label: {\n                        position: {\n                            name: 'left',\n                            args: {\n                                x: 5\n                            }\n                        }\n                    }\n                }\n            },\n            items: [{\n                group: 'in',\n                attrs: {\n                    text: {\n                        text: 'in'\n                    }\n                }\n            }]\n        },\n        attrs: {\n            '.': {\n                magnet: false\n            },\n            '.options': {\n                ref: '.body',\n                'ref-x': 0\n            },\n            '.body': {\n                width: 150,\n                height: 250,\n                rx: '1%',\n                ry: '2%',\n                stroke: 'none',\n                fill: {\n                    type: 'linearGradient',\n                    stops: [{\n                        offset: '0%',\n                        color: '#FEB663'\n                    }, {\n                        offset: '100%',\n                        color: '#31D0C6'\n                    }],\n                    // Top-to-bottom gradient.\n                    attrs: {\n                        x1: '0%',\n                        y1: '0%',\n                        x2: '0%',\n                        y2: '100%'\n                    }\n                }\n            },\n            '.btn-add-modifier': {\n                ref: '.body',\n                'ref-x': 10,\n                'ref-dy': -22,\n                cursor: 'pointer',\n                fill: 'white'\n            },\n            '.btn-add-trigger': {\n                ref: '.body',\n                refX: 40,\n                refDy: -22,\n                cursor: 'pointer',\n                fill: 'blue'\n            },\n            '.btn-remove-trigger': {\n                'x-alignment': 10,\n                'y-alignment': 13,\n                cursor: 'pointer',\n                fill: 'white'\n            },\n            '.triggers': {\n                ref: '.body',\n                'ref-x': 0\n            },\n            // Text styling.\n            text: {\n                'font-family': 'Arial'\n            },\n            '.question-text': {\n                fill: 'white',\n                refX: '50%',\n                refY: 15,\n                'font-size': 15,\n                'text-anchor': 'middle',\n                style: {\n                    'text-shadow': '1px 1px 0px gray'\n                }\n            },\n\n            // Options styling.\n            '.trigger-bg-rect': {\n                rx: 3,\n                ry: 3,\n                stroke: 'white',\n                'stroke-width': 1,\n                'stroke-opacity': .5,\n                'fill-opacity': .5,\n                fill: 'green',\n                ref: '.body',\n                'ref-width': 1\n            }\n\n        }\n    }, {\n\n        //refactor this to common class functions\n        getStateParams: function() {\n            return {\n                state_data: this.get('state_data'),\n                model_name: this.get('attrs')[\".question-text\"].text\n            };\n        },\n        disableInitialState: function() {\n            var state_data = JSON.parse(JSON.stringify(this.get('state_data')));\n            state_data.initial_state = false;\n            this.attr('.body', {\n                width: 150,\n                height: 250,\n                rx: '1%',\n                ry: '2%',\n                stroke: 'none',\n                fill: {\n                    type: 'linearGradient',\n                    stops: [{\n                        offset: '0%',\n                        color: '#FEB663'\n                    }, {\n                        offset: '100%',\n                        color: '#31D0C6'\n                    }],\n                    // Top-to-bottom gradient.\n                    attrs: {\n                        x1: '0%',\n                        y1: '0%',\n                        x2: '0%',\n                        y2: '100%'\n                    }\n                }\n            });\n            this.set('state_data', state_data);\n        },\n        enableInitialState: function() {\n            var state_data = JSON.parse(JSON.stringify(this.get('state_data')));\n            state_data.initial_state = true;\n            this.attr('.body', {\n                width: 150,\n                height: 250,\n                rx: '1%',\n                ry: '2%',\n                stroke: 'none',\n                fill: {\n                    type: 'linearGradient',\n                    stops: [{\n                        offset: '0%',\n                        color: '#000000'\n                    }, {\n                        offset: '100%',\n                        color: '#31D0C6'\n                    }],\n                    // Top-to-bottom gradient.\n                    attrs: {\n                        x1: '0%',\n                        y1: '0%',\n                        x2: '0%',\n                        y2: '100%'\n                    }\n                }\n            });\n            this.set('state_data', state_data);\n        },\n\n        markup: $.trim($(\"#question-template\").html()),\n\n        optionMarkup: $.trim($(\"#modifier-template\").html()),\n\n        triggerMarkup: $.trim($(\"#trigger-template\").html()),\n\n        initialize: function() {\n            joint.dia.Element.prototype.initialize.apply(this, arguments);\n            this.listenTo(this, 'change:options', this.autoresize, this);\n            this.listenTo(this, 'change:triggers', this.autoresize, this);\n            this.on('change:question', function() {\n                this.attr('.question-text/text', this.get('question') || '');\n                this.autoresize();\n            }, this);\n            this.on('change:questionHeight', function() {\n                this.attr('.options/ref-y', this.get('questionHeight'), {\n                    silent: true\n                });\n                this.autoresize();\n            }, this);\n            this.on('change:optionHeight', this.autoresize, this);\n            this.attr('.options/ref-y', this.get('questionHeight'), {\n                silent: true\n            });\n            this.attr('.question-text/text', this.get('question'), {\n                silent: true\n            });\n        },\n\n        onChangeTriggers: function() {\n            //Get values from model to keep code get() free\n            /*var triggers = this.get('triggers');\n              var optionHeight = this.get('optionHeight');\n              var attrs = this.get('attrs');\n              var questionHeight = this.get('questionHeight');\n              var offsetY = (this.get('options').length * optionHeight) + ((this.get('options').length > 0) ? 70 : 50);\n              var attrsUpdate = {};*/\n\n            //iterate attributes for each selector\n            _.each(attrs, function(attrs, selector) {\n                if (attrs.dynamicmodifier) {\n                    this.removeAttr(selector, {\n                        silent: true\n                    });\n                }\n            }, this);\n\n            // Collect new attrs for the new options - marking them as dynamicmodifier for potential cleanup\n            _.each(triggers, function(trigger) {\n\n                var selector = '.trigger-' + trigger.id;\n\n                attrsUpdate[selector] = {\n                    transform: 'translate(0, ' + offsetY + ')',\n                    dynamicmodifier: true\n                };\n                attrsUpdate[selector + ' .trigger-bg-rect'] = {\n                    height: optionHeight,\n                    dynamicmodifier: true\n                };\n                attrsUpdate[selector + ' .option-text'] = {\n                    text: trigger.text,\n                    dynamicmodifier: true\n                };\n\n                offsetY += optionHeight;\n                var portY = offsetY - optionHeight / 2; // + questionHeight;\n                if (!this.getPort(trigger.id)) {\n                    this.addPort({\n                        group: 'out',\n                        id: trigger.id,\n                        args: {\n                            y: portY\n                        }\n                    });\n                } else {\n                    this.portProp(trigger.id, 'args/y', portY);\n                }\n\n            }, this);\n\n            this.attr(attrsUpdate);\n        },\n\n        autoresize: function() {\n            var options = this.get('options');\n            var triggers = this.get('triggers');\n            var gap = this.get('paddingBottom') || 20;\n            var height = options.length * this.get('optionHeight') + this.get('questionHeight') + gap;\n            height += triggers.length * this.get('optionHeight') + (gap * 2);\n            var width = joint.util.measureText(this.get('question'), {\n                fontSize: this.attr('.question-text/font-size')\n            }).width;\n            this.resize(Math.max(this.get('minWidth') || 150, width), height);\n        },\n\n        addModifier: function() {\n            var new_modifier = app.Factory.createModifier(_.uniqueId(), \"Modifier \" + this.get('options').length);\n            this.addElementToStore('options', new_modifier);\n            this.graph.addCell(new_modifier);\n            this.embed(new_modifier);\n        },\n        addTrigger: function() {\n            var new_trigger = app.Factory.createTrigger(_.uniqueId(), \"Trigger \" + this.get('triggers').length);\n            this.addElementToStore('triggers', new_trigger);\n            this.graph.addCell(new_trigger);\n            this.embed(new_trigger);\n        },\n        removeElementById: function(id, storage_key) {\n            data_store = this.get(storage_key);\n            this.removePort(id);\n            data_store = _.without(data_store, _.findWhere(data_store, {\n                id: id\n            }));\n            return data_store;\n        },\n        removeModifier: function(id) {\n            this.set('options', this.removeElementById(id, 'options'));\n        },\n        removeTrigger: function(id) {\n            this.set('triggers', this.removeElementById(id, 'triggers'))\n        },\n        addElementToStore: function(storage_key, item) {\n            this.set(storage_key, this.get(storage_key).concat(item));\n        }\n    });\n\n    window.appView = new app.AppView;\n\n});\n",""]}