<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0"/>

    <title>QAD</title>
    <link rel="stylesheet" type="text/css" href="css/rappid.min.css">
    <link href="css/header.css" rel="stylesheet"/>
    <link href="css/toolbar.css" rel="stylesheet"/>
    <link href="css/statusbar.css" rel="stylesheet"/>
    <link href="css/paper.css" rel="stylesheet"/>
    <link href="css/preview.css" rel="stylesheet"/>
    <link href="css/tooltip.css" rel="stylesheet"/>
    <link href="css/dialog.css" rel="stylesheet"/>
    <link href="css/index.css" rel="stylesheet"/>

    <script>
      SVGElement.prototype.getTransformToElement = SVGElement.prototype.getTransformToElement || function (toElement) {
          return toElement.getScreenCTM().inverse().multiply(this.getScreenCTM());
      };
    </script>

  </head>
  <body>

    <header id="header">
      <h1>QAD</h1>
      <p>Dialog Generator (click a shape and then <q>Preview Dialog</q>)</p>
    </header>

    <section id="app">

      <div id="toolbar">
        <button class="btn add-question">Add Question</button>
        <button class="btn add-answer">Add Answer</button>
        <button class="btn preview-dialog">Preview Dialog</button>
        <button class="btn code-snippet">Code Snippet</button>
      </div>

      <div id="paper" style="float:left;"></div>
      <div id="editor-container" style="float:right;">
        <div id="element-type"></div>
        <div id="element-parameters"></div>
      </div>
      <div style="clear:both;"></div>

      <div id="statusbar">
        <span class="message">Welcome to the QAD Tool!</span>
      </div>

      <div id="preview" class="preview">
      </div>

    </section>

    <!-- Rappid/JointJS dependencies: -->
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="node_modules/lodash/index.js"></script>
    <script src="node_modules/backbone/backbone.js"></script>
    <script src="src/rappid.min.js"></script>
    <script src="src/joint.shapes.qad.js"></script>
    <script src="src/selection.js"></script>
    <script src="src/factory.js"></script>
    <script src="src/app.js"></script>
    <script src="src/index.js"></script>

    <script type="text/template" id="question-template">
      <g class="rotatable">
        <g class="scalable">
          <rect class="body"/>
        </g>
        <text class="question-text"></text>
        <path class="btn-add-modifier" d="M5,0 10,0 10,5 15,5 15,10 10,10 10,15 5,15 5,10 0,10 0,5 5,5z"/>
        <path class="btn-add-trigger" d="M5,0 10,0 10,5 15,5 15,10 10,10 10,15 5,15 5,10 0,10 0,5 5,5z"/>
      </g>
    </script>

    <script type="text/template" id="trigger-template">
      <g class="rotatable trigger">
        <g class="scalable">
          <rect class="trigger-rect"></rect>
        </g>
        <path class="btn-remove-trigger" d="M0,0 15,0 15,5 0,5z"></path>
        <text class="trigger-text"></text>
      </g>
    </script>

    <script type="text/template" id="modifier-template">
      <g class="rotatable option">
        <g class="scalable">
          <rect class="option-rect"></rect>
        </g>
        <path class="btn-remove-modifier" d="M0,0 15,0 15,5 0,5z"></path>
        <text class="option-text"></text>
      </g>
    </script>

    <script type="text/template" id="trigger-type-template">
      <input type="text" id="trigger-name" placeholder="trigger name"/>
      <label for="trigger-type">Trigger type</label>
      <select id="trigger-type" name="">
        <option value="">Please select..</option>
        <option value="GiveDrug" <%= (params.get('scenario_data').type == 'GiveDrug') ? "selected" : "" %>>Patient given drug</option>
        <option value="TimeLimit" <%= (params.get('scenario_data').type == 'TimeLimit') ? "selected" : "" %>>Time limit</option>
      </select>
    </script>

  </body>
</html>
